import{S as Yo}from"./Sidebar-BLXCMIVh.js";import{d as Ni,c as tt,r as it,o as ne,n as Vt,w as qt,a as ye,b as z,e as F,_ as At,f as C,u as j,t as ct,g as kt,h as Ht,i as Bt,j as ce,F as te,k as ue,l as Se,m as Pn,p as Wo,v as Uo,q as Vo,s as qo,x as Xo,y as Ko}from"./index-CMy6Yie9.js";const jo="data:image/svg+xml,%3csvg%20width='4408'%20height='1516'%20viewBox='0%200%204408%201516'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M4345.75%201289.5C4318.88%201266.74%204285.87%201256.39%204263.37%201226.27C4215.24%201161.87%204240.84%201054.7%204245.2%20963.611C4254.04%20779.158%204143.98%20598.469%204007.7%20573.693C3976.53%20568.026%203944.11%20569.383%203914.77%20554.151C3832.84%20511.617%203814.46%20370.555%203767.31%20270.965C3708.15%20145.992%203590.36%2081.0607%203481.06%20100.083C3371.76%20119.106%203273.88%20215.253%203217.19%20342.28L3215.54%20346.616C3141.46%20442.432%203018.53%20461.059%202930.44%20389.818C2844.63%20320.423%202799.7%20185.661%202720.28%20103.687C2643.06%2024.0011%202538.86%202.11167%202442.71%2022.5201C2346.55%2042.9262%202257.17%20101.884%202174.39%20170.723C2136.22%20202.463%202098.86%20236.616%202057.69%20260.664C1924.73%20338.345%201757.48%20293.507%201656.86%20153.213C1632.87%20119.755%201612.3%2081.416%201584.83%2053.1893C1514.79%20-18.7896%201414.51%20-9.71456%201332.3%2033.1184C1250.09%2075.9514%201177.88%20147.586%201097.41%20196.006C1016.93%20244.425%20919.93%20267.45%20842.534%20210.685C793.435%20174.676%20757.04%20109.945%20704.609%2083.7586C645.759%2054.3683%20575.757%2082.7327%20532.484%20143.867C489.211%20205.003%20471.348%20293.793%20476.988%20377.832C480.953%20436.91%20495.584%20494.349%20496.491%20553.653C498.371%20676.623%20433.823%20796.067%20346.234%20831.692C271.321%20862.164%20186.681%20835.987%20115.242%20878.962C30.6368%20929.857%20-10.2127%201069.12%202.17795%201192.58C14.5686%201316.05%2069.8738%201424.47%20133.479%201515.1H4393.5C4424.46%201434.74%204402.72%201337.73%204345.75%201289.5Z'%20fill='%23D9CEC4'/%3e%3cpath%20d='M2938.07%20743.111C2947.65%20743.111%202956.6%20745.725%202964.32%20750.215C2971.32%20729.89%202990.56%20715.263%203013.26%20715.263C3016.97%20715.263%203020.59%20715.669%203024.07%20716.411C3033.02%20680.562%203065.42%20654%203104.04%20654C3142.34%20654%203174.52%20680.118%203183.78%20715.512C3185.41%20715.396%203187.04%20715.263%203188.7%20715.263C3201.29%20715.263%203213.05%20718.687%203223.22%20724.574C3232.7%20718.707%203243.84%20715.263%203255.81%20715.263C3290.1%20715.263%203317.9%20743.064%203317.9%20777.361H3257.4H3193.71H3175.57H3132.01H3119.98H3108.68H3064.02H3032.51H2987.14H2985.78H2962.49H2889C2896.38%20757.385%202915.54%20743.111%202938.07%20743.111Z'%20fill='%23FCF1E6'/%3e%3cpath%20d='M805.303%20601.706C817.853%20601.706%20829.576%20605.697%20839.695%20612.552C848.864%20581.52%20858.665%20552.678%20888.411%20552.678C893.273%20552.678%20909.905%20506.661%20947.249%20527.273C966.248%20534.144%20953.8%20496.737%20983.376%20466.2C1015.39%20438.717%201061.9%20453.986%201071.73%20513.532C1073.86%20513.356%201136.03%20488.339%201153.75%20520.615C1167.51%20538.937%201165.61%20564.415%201178.93%20573.403C1191.36%20564.446%201205.95%20559.187%201221.63%20559.187C1266.57%20559.187%201303%20601.635%201303%20654H1223.72H1140.26H1116.5H1059.42H1043.66H1028.86H970.335H929.042H869.6H867.811H837.301H741C750.669%20623.5%20775.77%20601.706%20805.303%20601.706Z'%20fill='%23FCF1E6'/%3e%3cpath%20d='M2251.37%20584.529H2187.31H2167.01H2165.82H2126.28H2098.8H2059.87H2050.02H2039.54H2001.56H1985.76H1930.23H1877.49C1877.49%20554.634%201901.73%20530.396%201931.63%20530.396C1938.09%20530.396%201944.26%20531.589%201950.01%20533.665C1960.66%20524.114%201974.69%20518.259%201990.13%20518.259C1997.35%20518.259%202004.24%20519.598%202010.66%20521.929C2017.63%20513.769%202027.97%20508.579%202039.54%20508.579C2047.7%20508.579%202055.24%20511.175%202061.43%20515.554C2072.81%20499.015%202091.85%20488.157%202113.44%20488.157C2143.69%20488.157%202168.93%20509.441%202175.09%20537.84C2183.43%20528.804%202195.33%20523.111%202208.6%20523.111C2233.8%20523.111%202254.24%20543.542%202254.24%20568.748C2254.23%20574.306%202253.19%20579.606%202251.37%20584.529Z'%20fill='%23FCF1E6'/%3e%3c/svg%3e",Zo="/MyEnergyProfile/assets/consumption_service-D0ioY7Vx.svg",Jo="/MyEnergyProfile/assets/consumption_residential-C9jPUtXp.svg",Qo="/MyEnergyProfile/assets/consumption_transport-qyh_MufO.svg",ts="/MyEnergyProfile/assets/consumption_industry-C8RP9hDo.svg",me=Ni("energyData",()=>{const t=it(null),e=it(null),n=it(null),r=it(null),a=it("IT"),i=it(2023),o=it(!1),s=it(null),u=tt(()=>!!n.value),l=tt(()=>!!r.value),c=tt(()=>t.value?.countries?Object.entries(t.value.countries).map(([v,A])=>({code:v,name:A.name})).sort((v,A)=>v.name.localeCompare(A.name)):[]),f=tt(()=>{if(!t.value?.countries||!a.value)return null;const v=t.value.countries[a.value];return v?{code:a.value,name:v.name,years:v.years}:null}),d=tt(()=>t.value?.metadata||null),p=tt(()=>f.value?.years?Object.keys(f.value.years).map(Number).sort((v,A)=>A-v):[]),m=tt(()=>!f.value?.years||!i.value?null:f.value.years[i.value]?.dependency||null),k=tt(()=>{if(!f.value?.years||!i.value)return null;const v=f.value.years[i.value];return v?{imports:v.imports||null,exports:v.exports||null}:null}),$=tt(()=>{if(!f.value?.years||!i.value)return null;const v=f.value.years[i.value];return v?{production:v.production||null,consumption:v.consumption||null}:null}),M=tt(()=>{if(!e.value||!f.value?.name||!i.value)return[];const v=e.value.countries[f.value.name];return v?["Industry","Residential","Transport","Service"].map(h=>{const g=v[h];if(!g)return null;const y=g[i.value];if(!y)return null;const _={};return Object.entries(y).forEach(([b,w])=>{(b.includes("Manufacturing")||b.includes("Total residential")||b.includes("Total passenger and freight transport")||b.includes("Total services"))&&Object.entries(w.products).forEach(([P,D])=>{P.includes("Total")||(_[P.replace("(PJ)","").trim()]=D||0)})}),{name:h,energyType:Object.entries(_).map(([b,w])=>({name:b,value:w}))}}):[]}),S=tt(()=>{if(!e.value||!f.value?.name||!i.value)return[];const v=e.value.countries[f.value.name];if(!v)return[];const h=["Industry","Residential","Transport","Service"].map(g=>{const y=v[g];if(!y)return null;const _=y[i.value];if(!_)return null;const b=[];let w=0;switch(g){case"Industry":Object.entries(_).forEach(([P,D])=>{if(!P.includes("Manufacturing")){const B=(D.products||{})["Total final use (PJ)"]||0;b.push({name:P,value:B}),w+=B}});break;case"Transport":Object.entries(_).forEach(([P,D])=>{if(!P.includes("Total")||P==="Total trains"||P==="Total airplanes"||P==="Total ships"){const B=(D.products||{})["Total final use (PJ)"]||0;b.push({name:P,value:B}),w+=B}});break;default:Object.entries(_).forEach(([P,D])=>{if(!P.includes("Total residential")&&!P.includes("Total services")){const B=(D.products||{})["Total final use (PJ)"]||0;b.push({name:P,value:B}),w+=B}});break}return{name:g,value:w,children:b}}).filter(g=>g&&g.children.length>0);return{name:f.value.name+" "+i.value,children:h}}),E=tt(()=>!r.value?.countries||!a.value?null:r.value.countries[a.value]?.carbon_intensity||null),x=tt(()=>r.value?.carbon_intensity_ranking?r.value.carbon_intensity_ranking:[]),N=tt(()=>!r.value?.countries||!a.value?null:r.value.countries[a.value]?.emissions_per_capita||null),I=tt(()=>!r.value?.countries||!a.value?null:r.value.countries[a.value]?.emissions_total_kt||null),H=tt(()=>{if(!r.value?.countries)return[];const v=[];for(const[A,h]of Object.entries(r.value.countries)){const g=h.emissions_per_capita;if(!g)continue;const y=(g.residential||0)+(g.services||0)+(g.transport||0)+(g.industry||0);y>0&&v.push({code:A,name:h.name,value:Math.round(y*100)/100,year:g.year})}return v.sort((A,h)=>A.value-h.value),v}),G=tt(()=>{if(!n.value||!a.value)return[];const v=n.value.countries[a.value];if(!v)return[];const A="Price of electricity (US cents per kWh)",h=["1","2","3","4"];return Object.keys(v).filter(y=>/^\d{4}$/.test(y)).map(Number).sort((y,_)=>y-_).map(y=>{const _=v[y],b=h.map(w=>_?.[w]?.CPI0450!=null?Number(_[w].CPI0450):null);return{year:y,electricity:_?.[A]!=null?Number(_[A]):null,CPI0450:b}})});async function T(){if(!(t.value&&e.value&&n.value)){o.value=!0,s.value=null;try{const h=(await(await fetch("/MyEnergyProfile/data/energy_mix.json")).text()).replace(/:\s*NaN/g,": null");t.value=JSON.parse(h);const _=(await(await fetch("/MyEnergyProfile/data/energy_consumptions_by_sector.json")).text()).replace(/:\s*NaN/g,": null");e.value=JSON.parse(_);try{const P=(await(await fetch("/MyEnergyProfile/data/energy_prices.json")).text()).replace(/:\s*NaN/g,": null");n.value=JSON.parse(P)}catch(b){console.warn("Failed to load energy_prices.json",b),n.value=null}try{const w=await(await fetch("/MyEnergyProfile/data/eco_data.json")).text();r.value=JSON.parse(w.replace(/:\s*NaN/g,": null"))}catch(b){console.warn("eco_data.json not loaded",b),r.value=null}}catch(v){s.value=v.message,console.error("Failed to load energy data:",v)}finally{o.value=!1}}}function O(v){a.value=v}function R(v){i.value=v}return{rawData:t,selectedCountryCode:a,selectedYear:i,isLoading:o,error:s,countries:c,selectedCountry:f,metadata:d,availableYears:p,dependencyData:m,tradeData:k,productionConsumptionData:$,pieChartData:M,sunburstData:S,loadData:T,setSelectedCountry:O,setSelectedYear:R,pricesData:n,pricesLoaded:u,electricitySeries:G,ecoData:r,ecoLoaded:l,carbonIntensity:E,carbonIntensityRanking:x,emissionsPerCapita:N,emissionsPerCapitaRanking:H,emissionsTotal:I}});function Mn(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function es(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Pi(t){let e,n,r;t.length!==2?(e=Mn,n=(s,u)=>Mn(t(s),u),r=(s,u)=>t(s)-u):(e=t===Mn||t===es?t:ns,n=t,r=t);function a(s,u,l=0,c=s.length){if(l<c){if(e(u,u)!==0)return c;do{const f=l+c>>>1;n(s[f],u)<0?l=f+1:c=f}while(l<c)}return l}function i(s,u,l=0,c=s.length){if(l<c){if(e(u,u)!==0)return c;do{const f=l+c>>>1;n(s[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(s,u,l=0,c=s.length){const f=a(s,u,l,c-1);return f>l&&r(s[f-1],u)>-r(s[f],u)?f-1:f}return{left:a,center:o,right:i}}function ns(){return 0}function rs(t){return t===null?NaN:+t}const as=Pi(Mn),is=as.right;Pi(rs).center;function os(t,e){let n,r;for(const a of t)a!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)));return[n,r]}class se{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let r=0;for(let a=0;a<this._n&&a<32;a++){const i=n[a],o=e+i,s=Math.abs(e)<Math.abs(i)?e-(o-i):i-(o-e);s&&(n[r++]=s),e=o}return n[r]=e,this._n=r+1,this}valueOf(){const e=this._partials;let n=this._n,r,a,i,o=0;if(n>0){for(o=e[--n];n>0&&(r=o,a=e[--n],o=r+a,i=a-(o-r),!i););n>0&&(i<0&&e[n-1]<0||i>0&&e[n-1]>0)&&(a=i*2,r=o+a,a==r-o&&(o=r))}return o}}class $a extends Map{constructor(e,n=cs){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,a]of e)this.set(r,a)}get(e){return super.get(Sa(this,e))}has(e){return super.has(Sa(this,e))}set(e,n){return super.set(ss(this,e),n)}delete(e){return super.delete(ls(this,e))}}function Sa({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function ss({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function ls({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function cs(t){return t!==null&&typeof t=="object"?t.valueOf():t}const us=Math.sqrt(50),ds=Math.sqrt(10),fs=Math.sqrt(2);function Rn(t,e,n){const r=(e-t)/Math.max(0,n),a=Math.floor(Math.log10(r)),i=r/Math.pow(10,a),o=i>=us?10:i>=ds?5:i>=fs?2:1;let s,u,l;return a<0?(l=Math.pow(10,-a)/o,s=Math.round(t*l),u=Math.round(e*l),s/l<t&&++s,u/l>e&&--u,l=-l):(l=Math.pow(10,a)*o,s=Math.round(t/l),u=Math.round(e/l),s*l<t&&++s,u*l>e&&--u),u<s&&.5<=n&&n<2?Rn(t,e,n*2):[s,u,l]}function hs(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[a,i,o]=r?Rn(e,t,n):Rn(t,e,n);if(!(i>=a))return[];const s=i-a+1,u=new Array(s);if(r)if(o<0)for(let l=0;l<s;++l)u[l]=(i-l)/-o;else for(let l=0;l<s;++l)u[l]=(i-l)*o;else if(o<0)for(let l=0;l<s;++l)u[l]=(a+l)/-o;else for(let l=0;l<s;++l)u[l]=(a+l)*o;return u}function Sr(t,e,n){return e=+e,t=+t,n=+n,Rn(t,e,n)[2]}function ps(t,e,n){e=+e,t=+t,n=+n;const r=e<t,a=r?Sr(e,t,n):Sr(t,e,n);return(r?-1:1)*(a<0?1/-a:a)}function cn(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let a of t)(a=e(a,++r,t))!=null&&(n<a||n===void 0&&a>=a)&&(n=a)}return n}function gs(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function*ys(t){for(const e of t)yield*e}function Ri(t){return Array.from(ys(t))}function ms(t,e,n){t=+t,e=+e,n=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+n;for(var r=-1,a=Math.max(0,Math.ceil((e-t)/n))|0,i=new Array(a);++r<a;)i[r]=t+r*n;return i}function vs(t){return t}var hr=1,pr=2,Er=3,Ue=4,Ea=1e-6;function _s(t){return"translate("+t+",0)"}function xs(t){return"translate(0,"+t+")"}function ws(t){return e=>+t(e)}function bs(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function Cs(){return!this.__axis}function Ii(t,e){var n=[],r=null,a=null,i=6,o=6,s=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=t===hr||t===Ue?-1:1,c=t===Ue||t===pr?"x":"y",f=t===hr||t===Er?_s:xs;function d(p){var m=r??(e.ticks?e.ticks.apply(e,n):e.domain()),k=a??(e.tickFormat?e.tickFormat.apply(e,n):vs),$=Math.max(i,0)+s,M=e.range(),S=+M[0]+u,E=+M[M.length-1]+u,x=(e.bandwidth?bs:ws)(e.copy(),u),N=p.selection?p.selection():p,I=N.selectAll(".domain").data([null]),H=N.selectAll(".tick").data(m,e).order(),G=H.exit(),T=H.enter().append("g").attr("class","tick"),O=H.select("line"),R=H.select("text");I=I.merge(I.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),H=H.merge(T),O=O.merge(T.append("line").attr("stroke","currentColor").attr(c+"2",l*i)),R=R.merge(T.append("text").attr("fill","currentColor").attr(c,l*$).attr("dy",t===hr?"0em":t===Er?"0.71em":"0.32em")),p!==N&&(I=I.transition(p),H=H.transition(p),O=O.transition(p),R=R.transition(p),G=G.transition(p).attr("opacity",Ea).attr("transform",function(v){return isFinite(v=x(v))?f(v+u):this.getAttribute("transform")}),T.attr("opacity",Ea).attr("transform",function(v){var A=this.parentNode.__axis;return f((A&&isFinite(A=A(v))?A:x(v))+u)})),G.remove(),I.attr("d",t===Ue||t===pr?o?"M"+l*o+","+S+"H"+u+"V"+E+"H"+l*o:"M"+u+","+S+"V"+E:o?"M"+S+","+l*o+"V"+u+"H"+E+"V"+l*o:"M"+S+","+u+"H"+E),H.attr("opacity",1).attr("transform",function(v){return f(x(v)+u)}),O.attr(c+"2",l*i),R.attr(c,l*$).text(k),N.filter(Cs).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===pr?"start":t===Ue?"end":"middle"),N.each(function(){this.__axis=x})}return d.scale=function(p){return arguments.length?(e=p,d):e},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(p){return arguments.length?(n=p==null?[]:Array.from(p),d):n.slice()},d.tickValues=function(p){return arguments.length?(r=p==null?null:Array.from(p),d):r&&r.slice()},d.tickFormat=function(p){return arguments.length?(a=p,d):a},d.tickSize=function(p){return arguments.length?(i=o=+p,d):i},d.tickSizeInner=function(p){return arguments.length?(i=+p,d):i},d.tickSizeOuter=function(p){return arguments.length?(o=+p,d):o},d.tickPadding=function(p){return arguments.length?(s=+p,d):s},d.offset=function(p){return arguments.length?(u=+p,d):u},d}function Oi(t){return Ii(Er,t)}function la(t){return Ii(Ue,t)}var ks={value:()=>{}};function ca(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new $n(n)}function $n(t){this._=t}function Ms(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",a=n.indexOf(".");if(a>=0&&(r=n.slice(a+1),n=n.slice(0,a)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}$n.prototype=ca.prototype={constructor:$n,on:function(t,e){var n=this._,r=Ms(t+"",n),a,i=-1,o=r.length;if(arguments.length<2){for(;++i<o;)if((a=(t=r[i]).type)&&(a=$s(n[a],t.name)))return a;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++i<o;)if(a=(t=r[i]).type)n[a]=Aa(n[a],t.name,e);else if(e==null)for(a in n)n[a]=Aa(n[a],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new $n(t)},call:function(t,e){if((a=arguments.length-2)>0)for(var n=new Array(a),r=0,a,i;r<a;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=this._[t],r=0,a=i.length;r<a;++r)i[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],a=0,i=r.length;a<i;++a)r[a].value.apply(e,n)}};function $s(t,e){for(var n=0,r=t.length,a;n<r;++n)if((a=t[n]).name===e)return a.value}function Aa(t,e,n){for(var r=0,a=t.length;r<a;++r)if(t[r].name===e){t[r]=ks,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Ar="http://www.w3.org/1999/xhtml";const Ta={svg:"http://www.w3.org/2000/svg",xhtml:Ar,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function cr(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Ta.hasOwnProperty(e)?{space:Ta[e],local:t}:t}function Ss(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Ar&&e.documentElement.namespaceURI===Ar?e.createElement(t):e.createElementNS(n,t)}}function Es(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Di(t){var e=cr(t);return(e.local?Es:Ss)(e)}function As(){}function ua(t){return t==null?As:function(){return this.querySelector(t)}}function Ts(t){typeof t!="function"&&(t=ua(t));for(var e=this._groups,n=e.length,r=new Array(n),a=0;a<n;++a)for(var i=e[a],o=i.length,s=r[a]=new Array(o),u,l,c=0;c<o;++c)(u=i[c])&&(l=t.call(u,u.__data__,c,i))&&("__data__"in u&&(l.__data__=u.__data__),s[c]=l);return new Lt(r,this._parents)}function Hi(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Ns(){return[]}function Li(t){return t==null?Ns:function(){return this.querySelectorAll(t)}}function Ps(t){return function(){return Hi(t.apply(this,arguments))}}function Rs(t){typeof t=="function"?t=Ps(t):t=Li(t);for(var e=this._groups,n=e.length,r=[],a=[],i=0;i<n;++i)for(var o=e[i],s=o.length,u,l=0;l<s;++l)(u=o[l])&&(r.push(t.call(u,u.__data__,l,o)),a.push(u));return new Lt(r,a)}function zi(t){return function(){return this.matches(t)}}function Fi(t){return function(e){return e.matches(t)}}var Is=Array.prototype.find;function Os(t){return function(){return Is.call(this.children,t)}}function Ds(){return this.firstElementChild}function Hs(t){return this.select(t==null?Ds:Os(typeof t=="function"?t:Fi(t)))}var Ls=Array.prototype.filter;function zs(){return Array.from(this.children)}function Fs(t){return function(){return Ls.call(this.children,t)}}function Gs(t){return this.selectAll(t==null?zs:Fs(typeof t=="function"?t:Fi(t)))}function Bs(t){typeof t!="function"&&(t=zi(t));for(var e=this._groups,n=e.length,r=new Array(n),a=0;a<n;++a)for(var i=e[a],o=i.length,s=r[a]=[],u,l=0;l<o;++l)(u=i[l])&&t.call(u,u.__data__,l,i)&&s.push(u);return new Lt(r,this._parents)}function Gi(t){return new Array(t.length)}function Ys(){return new Lt(this._enter||this._groups.map(Gi),this._parents)}function In(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}In.prototype={constructor:In,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Ws(t){return function(){return t}}function Us(t,e,n,r,a,i){for(var o=0,s,u=e.length,l=i.length;o<l;++o)(s=e[o])?(s.__data__=i[o],r[o]=s):n[o]=new In(t,i[o]);for(;o<u;++o)(s=e[o])&&(a[o]=s)}function Vs(t,e,n,r,a,i,o){var s,u,l=new Map,c=e.length,f=i.length,d=new Array(c),p;for(s=0;s<c;++s)(u=e[s])&&(d[s]=p=o.call(u,u.__data__,s,e)+"",l.has(p)?a[s]=u:l.set(p,u));for(s=0;s<f;++s)p=o.call(t,i[s],s,i)+"",(u=l.get(p))?(r[s]=u,u.__data__=i[s],l.delete(p)):n[s]=new In(t,i[s]);for(s=0;s<c;++s)(u=e[s])&&l.get(d[s])===u&&(a[s]=u)}function qs(t){return t.__data__}function Xs(t,e){if(!arguments.length)return Array.from(this,qs);var n=e?Vs:Us,r=this._parents,a=this._groups;typeof t!="function"&&(t=Ws(t));for(var i=a.length,o=new Array(i),s=new Array(i),u=new Array(i),l=0;l<i;++l){var c=r[l],f=a[l],d=f.length,p=Ks(t.call(c,c&&c.__data__,l,r)),m=p.length,k=s[l]=new Array(m),$=o[l]=new Array(m),M=u[l]=new Array(d);n(c,f,k,$,M,p,e);for(var S=0,E=0,x,N;S<m;++S)if(x=k[S]){for(S>=E&&(E=S+1);!(N=$[E])&&++E<m;);x._next=N||null}}return o=new Lt(o,r),o._enter=s,o._exit=u,o}function Ks(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function js(){return new Lt(this._exit||this._groups.map(Gi),this._parents)}function Zs(t,e,n){var r=this.enter(),a=this,i=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(a=e(a),a&&(a=a.selection())),n==null?i.remove():n(i),r&&a?r.merge(a).order():a}function Js(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,a=n.length,i=r.length,o=Math.min(a,i),s=new Array(a),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=s[u]=new Array(f),p,m=0;m<f;++m)(p=l[m]||c[m])&&(d[m]=p);for(;u<a;++u)s[u]=n[u];return new Lt(s,this._parents)}function Qs(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],a=r.length-1,i=r[a],o;--a>=0;)(o=r[a])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function tl(t){t||(t=el);function e(f,d){return f&&d?t(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,a=new Array(r),i=0;i<r;++i){for(var o=n[i],s=o.length,u=a[i]=new Array(s),l,c=0;c<s;++c)(l=o[c])&&(u[c]=l);u.sort(e)}return new Lt(a,this._parents).order()}function el(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function nl(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function rl(){return Array.from(this)}function al(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],a=0,i=r.length;a<i;++a){var o=r[a];if(o)return o}return null}function il(){let t=0;for(const e of this)++t;return t}function ol(){return!this.node()}function sl(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var a=e[n],i=0,o=a.length,s;i<o;++i)(s=a[i])&&t.call(s,s.__data__,i,a);return this}function ll(t){return function(){this.removeAttribute(t)}}function cl(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ul(t,e){return function(){this.setAttribute(t,e)}}function dl(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function fl(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function hl(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function pl(t,e){var n=cr(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?cl:ll:typeof e=="function"?n.local?hl:fl:n.local?dl:ul)(n,e))}function Bi(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function gl(t){return function(){this.style.removeProperty(t)}}function yl(t,e,n){return function(){this.style.setProperty(t,e,n)}}function ml(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function vl(t,e,n){return arguments.length>1?this.each((e==null?gl:typeof e=="function"?ml:yl)(t,e,n??"")):He(this.node(),t)}function He(t,e){return t.style.getPropertyValue(e)||Bi(t).getComputedStyle(t,null).getPropertyValue(e)}function _l(t){return function(){delete this[t]}}function xl(t,e){return function(){this[t]=e}}function wl(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function bl(t,e){return arguments.length>1?this.each((e==null?_l:typeof e=="function"?wl:xl)(t,e)):this.node()[t]}function Yi(t){return t.trim().split(/^|\s+/)}function da(t){return t.classList||new Wi(t)}function Wi(t){this._node=t,this._names=Yi(t.getAttribute("class")||"")}Wi.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Ui(t,e){for(var n=da(t),r=-1,a=e.length;++r<a;)n.add(e[r])}function Vi(t,e){for(var n=da(t),r=-1,a=e.length;++r<a;)n.remove(e[r])}function Cl(t){return function(){Ui(this,t)}}function kl(t){return function(){Vi(this,t)}}function Ml(t,e){return function(){(e.apply(this,arguments)?Ui:Vi)(this,t)}}function $l(t,e){var n=Yi(t+"");if(arguments.length<2){for(var r=da(this.node()),a=-1,i=n.length;++a<i;)if(!r.contains(n[a]))return!1;return!0}return this.each((typeof e=="function"?Ml:e?Cl:kl)(n,e))}function Sl(){this.textContent=""}function El(t){return function(){this.textContent=t}}function Al(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Tl(t){return arguments.length?this.each(t==null?Sl:(typeof t=="function"?Al:El)(t)):this.node().textContent}function Nl(){this.innerHTML=""}function Pl(t){return function(){this.innerHTML=t}}function Rl(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Il(t){return arguments.length?this.each(t==null?Nl:(typeof t=="function"?Rl:Pl)(t)):this.node().innerHTML}function Ol(){this.nextSibling&&this.parentNode.appendChild(this)}function Dl(){return this.each(Ol)}function Hl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ll(){return this.each(Hl)}function zl(t){var e=typeof t=="function"?t:Di(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Fl(){return null}function Gl(t,e){var n=typeof t=="function"?t:Di(t),r=e==null?Fl:typeof e=="function"?e:ua(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Bl(){var t=this.parentNode;t&&t.removeChild(this)}function Yl(){return this.each(Bl)}function Wl(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ul(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Vl(t){return this.select(t?Ul:Wl)}function ql(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Xl(t){return function(e){t.call(this,e,this.__data__)}}function Kl(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function jl(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,a=e.length,i;n<a;++n)i=e[n],(!t.type||i.type===t.type)&&i.name===t.name?this.removeEventListener(i.type,i.listener,i.options):e[++r]=i;++r?e.length=r:delete this.__on}}}function Zl(t,e,n){return function(){var r=this.__on,a,i=Xl(e);if(r){for(var o=0,s=r.length;o<s;++o)if((a=r[o]).type===t.type&&a.name===t.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=i,a.options=n),a.value=e;return}}this.addEventListener(t.type,i,n),a={type:t.type,name:t.name,value:e,listener:i,options:n},r?r.push(a):this.__on=[a]}}function Jl(t,e,n){var r=Kl(t+""),a,i=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,l=s.length,c;u<l;++u)for(a=0,c=s[u];a<i;++a)if((o=r[a]).type===c.type&&o.name===c.name)return c.value}return}for(s=e?Zl:jl,a=0;a<i;++a)this.each(s(r[a],e,n));return this}function qi(t,e,n){var r=Bi(t),a=r.CustomEvent;typeof a=="function"?a=new a(e,n):(a=r.document.createEvent("Event"),n?(a.initEvent(e,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(e,!1,!1)),t.dispatchEvent(a)}function Ql(t,e){return function(){return qi(this,t,e)}}function tc(t,e){return function(){return qi(this,t,e.apply(this,arguments))}}function ec(t,e){return this.each((typeof e=="function"?tc:Ql)(t,e))}function*nc(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],a=0,i=r.length,o;a<i;++a)(o=r[a])&&(yield o)}var fa=[null];function Lt(t,e){this._groups=t,this._parents=e}function un(){return new Lt([[document.documentElement]],fa)}function rc(){return this}Lt.prototype=un.prototype={constructor:Lt,select:Ts,selectAll:Rs,selectChild:Hs,selectChildren:Gs,filter:Bs,data:Xs,enter:Ys,exit:js,join:Zs,merge:Js,selection:rc,order:Qs,sort:tl,call:nl,nodes:rl,node:al,size:il,empty:ol,each:sl,attr:pl,style:vl,property:bl,classed:$l,text:Tl,html:Il,raise:Dl,lower:Ll,append:zl,insert:Gl,remove:Yl,clone:Vl,datum:ql,on:Jl,dispatch:ec,[Symbol.iterator]:nc};function at(t){return typeof t=="string"?new Lt([[document.querySelector(t)]],[document.documentElement]):new Lt([[t]],fa)}function ac(t){let e;for(;e=t.sourceEvent;)t=e;return t}function xe(t,e){if(t=ac(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}}return[t.pageX,t.pageY]}function On(t){return typeof t=="string"?new Lt([document.querySelectorAll(t)],[document.documentElement]):new Lt([Hi(t)],fa)}const Tr={capture:!0,passive:!1};function Nr(t){t.preventDefault(),t.stopImmediatePropagation()}function ic(t){var e=t.document.documentElement,n=at(t).on("dragstart.drag",Nr,Tr);"onselectstart"in e?n.on("selectstart.drag",Nr,Tr):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function oc(t,e){var n=t.document.documentElement,r=at(t).on("dragstart.drag",null);e&&(r.on("click.drag",Nr,Tr),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function ha(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Xi(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function dn(){}var tn=.7,Dn=1/tn,De="\\s*([+-]?\\d+)\\s*",en="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",le="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",sc=/^#([0-9a-f]{3,8})$/,lc=new RegExp(`^rgb\\(${De},${De},${De}\\)$`),cc=new RegExp(`^rgb\\(${le},${le},${le}\\)$`),uc=new RegExp(`^rgba\\(${De},${De},${De},${en}\\)$`),dc=new RegExp(`^rgba\\(${le},${le},${le},${en}\\)$`),fc=new RegExp(`^hsl\\(${en},${le},${le}\\)$`),hc=new RegExp(`^hsla\\(${en},${le},${le},${en}\\)$`),Na={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ha(dn,ve,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Pa,formatHex:Pa,formatHex8:pc,formatHsl:gc,formatRgb:Ra,toString:Ra});function Pa(){return this.rgb().formatHex()}function pc(){return this.rgb().formatHex8()}function gc(){return Ki(this).formatHsl()}function Ra(){return this.rgb().formatRgb()}function ve(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=sc.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Ia(e):n===3?new Gt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?hn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?hn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=lc.exec(t))?new Gt(e[1],e[2],e[3],1):(e=cc.exec(t))?new Gt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=uc.exec(t))?hn(e[1],e[2],e[3],e[4]):(e=dc.exec(t))?hn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=fc.exec(t))?Ha(e[1],e[2]/100,e[3]/100,1):(e=hc.exec(t))?Ha(e[1],e[2]/100,e[3]/100,e[4]):Na.hasOwnProperty(t)?Ia(Na[t]):t==="transparent"?new Gt(NaN,NaN,NaN,0):null}function Ia(t){return new Gt(t>>16&255,t>>8&255,t&255,1)}function hn(t,e,n,r){return r<=0&&(t=e=n=NaN),new Gt(t,e,n,r)}function yc(t){return t instanceof dn||(t=ve(t)),t?(t=t.rgb(),new Gt(t.r,t.g,t.b,t.opacity)):new Gt}function Pr(t,e,n,r){return arguments.length===1?yc(t):new Gt(t,e,n,r??1)}function Gt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}ha(Gt,Pr,Xi(dn,{brighter(t){return t=t==null?Dn:Math.pow(Dn,t),new Gt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?tn:Math.pow(tn,t),new Gt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Gt(Ee(this.r),Ee(this.g),Ee(this.b),Hn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Oa,formatHex:Oa,formatHex8:mc,formatRgb:Da,toString:Da}));function Oa(){return`#${$e(this.r)}${$e(this.g)}${$e(this.b)}`}function mc(){return`#${$e(this.r)}${$e(this.g)}${$e(this.b)}${$e((isNaN(this.opacity)?1:this.opacity)*255)}`}function Da(){const t=Hn(this.opacity);return`${t===1?"rgb(":"rgba("}${Ee(this.r)}, ${Ee(this.g)}, ${Ee(this.b)}${t===1?")":`, ${t})`}`}function Hn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ee(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function $e(t){return t=Ee(t),(t<16?"0":"")+t.toString(16)}function Ha(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Jt(t,e,n,r)}function Ki(t){if(t instanceof Jt)return new Jt(t.h,t.s,t.l,t.opacity);if(t instanceof dn||(t=ve(t)),!t)return new Jt;if(t instanceof Jt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,a=Math.min(e,n,r),i=Math.max(e,n,r),o=NaN,s=i-a,u=(i+a)/2;return s?(e===i?o=(n-r)/s+(n<r)*6:n===i?o=(r-e)/s+2:o=(e-n)/s+4,s/=u<.5?i+a:2-i-a,o*=60):s=u>0&&u<1?0:o,new Jt(o,s,u,t.opacity)}function ji(t,e,n,r){return arguments.length===1?Ki(t):new Jt(t,e,n,r??1)}function Jt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}ha(Jt,ji,Xi(dn,{brighter(t){return t=t==null?Dn:Math.pow(Dn,t),new Jt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?tn:Math.pow(tn,t),new Jt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,a=2*n-r;return new Gt(gr(t>=240?t-240:t+120,a,r),gr(t,a,r),gr(t<120?t+240:t-120,a,r),this.opacity)},clamp(){return new Jt(La(this.h),pn(this.s),pn(this.l),Hn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Hn(this.opacity);return`${t===1?"hsl(":"hsla("}${La(this.h)}, ${pn(this.s)*100}%, ${pn(this.l)*100}%${t===1?")":`, ${t})`}`}}));function La(t){return t=(t||0)%360,t<0?t+360:t}function pn(t){return Math.max(0,Math.min(1,t||0))}function gr(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const pa=t=>()=>t;function vc(t,e){return function(n){return t+n*e}}function _c(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function xc(t){return(t=+t)==1?Zi:function(e,n){return n-e?_c(e,n,t):pa(isNaN(e)?n:e)}}function Zi(t,e){var n=e-t;return n?vc(t,n):pa(isNaN(t)?e:t)}const Ln=(function t(e){var n=xc(e);function r(a,i){var o=n((a=Pr(a)).r,(i=Pr(i)).r),s=n(a.g,i.g),u=n(a.b,i.b),l=Zi(a.opacity,i.opacity);return function(c){return a.r=o(c),a.g=s(c),a.b=u(c),a.opacity=l(c),a+""}}return r.gamma=t,r})(1);function wc(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),a;return function(i){for(a=0;a<n;++a)r[a]=t[a]*(1-i)+e[a]*i;return r}}function bc(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Cc(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,a=new Array(r),i=new Array(n),o;for(o=0;o<r;++o)a[o]=ga(t[o],e[o]);for(;o<n;++o)i[o]=e[o];return function(s){for(o=0;o<r;++o)i[o]=a[o](s);return i}}function kc(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Zt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Mc(t,e){var n={},r={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?n[a]=ga(t[a],e[a]):r[a]=e[a];return function(i){for(a in n)r[a]=n[a](i);return r}}var Rr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,yr=new RegExp(Rr.source,"g");function $c(t){return function(){return t}}function Sc(t){return function(e){return t(e)+""}}function Ji(t,e){var n=Rr.lastIndex=yr.lastIndex=0,r,a,i,o=-1,s=[],u=[];for(t=t+"",e=e+"";(r=Rr.exec(t))&&(a=yr.exec(e));)(i=a.index)>n&&(i=e.slice(n,i),s[o]?s[o]+=i:s[++o]=i),(r=r[0])===(a=a[0])?s[o]?s[o]+=a:s[++o]=a:(s[++o]=null,u.push({i:o,x:Zt(r,a)})),n=yr.lastIndex;return n<e.length&&(i=e.slice(n),s[o]?s[o]+=i:s[++o]=i),s.length<2?u[0]?Sc(u[0].x):$c(e):(e=u.length,function(l){for(var c=0,f;c<e;++c)s[(f=u[c]).i]=f.x(l);return s.join("")})}function ga(t,e){var n=typeof e,r;return e==null||n==="boolean"?pa(e):(n==="number"?Zt:n==="string"?(r=ve(e))?(e=r,Ln):Ji:e instanceof ve?Ln:e instanceof Date?kc:bc(e)?wc:Array.isArray(e)?Cc:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Mc:Zt)(t,e)}function Ec(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var za=180/Math.PI,Ir={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Qi(t,e,n,r,a,i){var o,s,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,o=-o),{translateX:a,translateY:i,rotate:Math.atan2(e,t)*za,skewX:Math.atan(u)*za,scaleX:o,scaleY:s}}var gn;function Ac(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Ir:Qi(e.a,e.b,e.c,e.d,e.e,e.f)}function Tc(t){return t==null||(gn||(gn=document.createElementNS("http://www.w3.org/2000/svg","g")),gn.setAttribute("transform",t),!(t=gn.transform.baseVal.consolidate()))?Ir:(t=t.matrix,Qi(t.a,t.b,t.c,t.d,t.e,t.f))}function to(t,e,n,r){function a(l){return l.length?l.pop()+" ":""}function i(l,c,f,d,p,m){if(l!==f||c!==d){var k=p.push("translate(",null,e,null,n);m.push({i:k-4,x:Zt(l,f)},{i:k-2,x:Zt(c,d)})}else(f||d)&&p.push("translate("+f+e+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(a(f)+"rotate(",null,r)-2,x:Zt(l,c)})):c&&f.push(a(f)+"rotate("+c+r)}function s(l,c,f,d){l!==c?d.push({i:f.push(a(f)+"skewX(",null,r)-2,x:Zt(l,c)}):c&&f.push(a(f)+"skewX("+c+r)}function u(l,c,f,d,p,m){if(l!==f||c!==d){var k=p.push(a(p)+"scale(",null,",",null,")");m.push({i:k-4,x:Zt(l,f)},{i:k-2,x:Zt(c,d)})}else(f!==1||d!==1)&&p.push(a(p)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=t(l),c=t(c),i(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),s(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(p){for(var m=-1,k=d.length,$;++m<k;)f[($=d[m]).i]=$.x(p);return f.join("")}}}var Nc=to(Ac,"px, ","px)","deg)"),Pc=to(Tc,", ",")",")"),Rc=1e-12;function Fa(t){return((t=Math.exp(t))+1/t)/2}function Ic(t){return((t=Math.exp(t))-1/t)/2}function Oc(t){return((t=Math.exp(2*t))-1)/(t+1)}const Dc=(function t(e,n,r){function a(i,o){var s=i[0],u=i[1],l=i[2],c=o[0],f=o[1],d=o[2],p=c-s,m=f-u,k=p*p+m*m,$,M;if(k<Rc)M=Math.log(d/l)/e,$=function(H){return[s+H*p,u+H*m,l*Math.exp(e*H*M)]};else{var S=Math.sqrt(k),E=(d*d-l*l+r*k)/(2*l*n*S),x=(d*d-l*l-r*k)/(2*d*n*S),N=Math.log(Math.sqrt(E*E+1)-E),I=Math.log(Math.sqrt(x*x+1)-x);M=(I-N)/e,$=function(H){var G=H*M,T=Fa(N),O=l/(n*S)*(T*Oc(e*G+N)-Ic(N));return[s+O*p,u+O*m,l*T/Fa(e*G+N)]}}return $.duration=M*1e3*e/Math.SQRT2,$}return a.rho=function(i){var o=Math.max(.001,+i),s=o*o,u=s*s;return t(o,s,u)},a})(Math.SQRT2,2,4);var Le=0,Ve=0,Be=0,eo=1e3,zn,qe,Fn=0,Ae=0,ur=0,nn=typeof performance=="object"&&performance.now?performance:Date,no=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ya(){return Ae||(no(Hc),Ae=nn.now()+ur)}function Hc(){Ae=0}function Gn(){this._call=this._time=this._next=null}Gn.prototype=ro.prototype={constructor:Gn,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?ya():+n)+(e==null?0:+e),!this._next&&qe!==this&&(qe?qe._next=this:zn=this,qe=this),this._call=t,this._time=n,Or()},stop:function(){this._call&&(this._call=null,this._time=1/0,Or())}};function ro(t,e,n){var r=new Gn;return r.restart(t,e,n),r}function Lc(){ya(),++Le;for(var t=zn,e;t;)(e=Ae-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Le}function Ga(){Ae=(Fn=nn.now())+ur,Le=Ve=0;try{Lc()}finally{Le=0,Fc(),Ae=0}}function zc(){var t=nn.now(),e=t-Fn;e>eo&&(ur-=e,Fn=t)}function Fc(){for(var t,e=zn,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:zn=n);qe=t,Or(r)}function Or(t){if(!Le){Ve&&(Ve=clearTimeout(Ve));var e=t-Ae;e>24?(t<1/0&&(Ve=setTimeout(Ga,t-nn.now()-ur)),Be&&(Be=clearInterval(Be))):(Be||(Fn=nn.now(),Be=setInterval(zc,eo)),Le=1,no(Ga))}}function Ba(t,e,n){var r=new Gn;return e=e==null?0:+e,r.restart(a=>{r.stop(),t(a+e)},e,n),r}var Gc=ca("start","end","cancel","interrupt"),Bc=[],ao=0,Ya=1,Dr=2,Sn=3,Wa=4,Hr=5,En=6;function dr(t,e,n,r,a,i){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;Yc(t,n,{name:e,index:r,group:a,on:Gc,tween:Bc,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:ao})}function ma(t,e){var n=re(t,e);if(n.state>ao)throw new Error("too late; already scheduled");return n}function de(t,e){var n=re(t,e);if(n.state>Sn)throw new Error("too late; already running");return n}function re(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Yc(t,e,n){var r=t.__transition,a;r[e]=n,n.timer=ro(i,0,n.time);function i(l){n.state=Ya,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,p;if(n.state!==Ya)return u();for(c in r)if(p=r[c],p.name===n.name){if(p.state===Sn)return Ba(o);p.state===Wa?(p.state=En,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete r[c]):+c<e&&(p.state=En,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete r[c])}if(Ba(function(){n.state===Sn&&(n.state=Wa,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=Dr,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Dr){for(n.state=Sn,a=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(p=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(a[++f]=p);a.length=f+1}}function s(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=Hr,1),f=-1,d=a.length;++f<d;)a[f].call(t,c);n.state===Hr&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=En,n.timer.stop(),delete r[e];for(var l in r)return;delete t.__transition}}function An(t,e){var n=t.__transition,r,a,i=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){i=!1;continue}a=r.state>Dr&&r.state<Hr,r.state=En,r.timer.stop(),r.on.call(a?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}i&&delete t.__transition}}function Wc(t){return this.each(function(){An(this,t)})}function Uc(t,e){var n,r;return function(){var a=de(this,t),i=a.tween;if(i!==n){r=n=i;for(var o=0,s=r.length;o<s;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}a.tween=r}}function Vc(t,e,n){var r,a;if(typeof n!="function")throw new Error;return function(){var i=de(this,t),o=i.tween;if(o!==r){a=(r=o).slice();for(var s={name:e,value:n},u=0,l=a.length;u<l;++u)if(a[u].name===e){a[u]=s;break}u===l&&a.push(s)}i.tween=a}}function qc(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=re(this.node(),n).tween,a=0,i=r.length,o;a<i;++a)if((o=r[a]).name===t)return o.value;return null}return this.each((e==null?Uc:Vc)(n,t,e))}function va(t,e,n){var r=t._id;return t.each(function(){var a=de(this,r);(a.value||(a.value={}))[e]=n.apply(this,arguments)}),function(a){return re(a,r).value[e]}}function io(t,e){var n;return(typeof e=="number"?Zt:e instanceof ve?Ln:(n=ve(e))?(e=n,Ln):Ji)(t,e)}function Xc(t){return function(){this.removeAttribute(t)}}function Kc(t){return function(){this.removeAttributeNS(t.space,t.local)}}function jc(t,e,n){var r,a=n+"",i;return function(){var o=this.getAttribute(t);return o===a?null:o===r?i:i=e(r=o,n)}}function Zc(t,e,n){var r,a=n+"",i;return function(){var o=this.getAttributeNS(t.space,t.local);return o===a?null:o===r?i:i=e(r=o,n)}}function Jc(t,e,n){var r,a,i;return function(){var o,s=n(this),u;return s==null?void this.removeAttribute(t):(o=this.getAttribute(t),u=s+"",o===u?null:o===r&&u===a?i:(a=u,i=e(r=o,s)))}}function Qc(t,e,n){var r,a,i;return function(){var o,s=n(this),u;return s==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),u=s+"",o===u?null:o===r&&u===a?i:(a=u,i=e(r=o,s)))}}function tu(t,e){var n=cr(t),r=n==="transform"?Pc:io;return this.attrTween(t,typeof e=="function"?(n.local?Qc:Jc)(n,r,va(this,"attr."+t,e)):e==null?(n.local?Kc:Xc)(n):(n.local?Zc:jc)(n,r,e))}function eu(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function nu(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function ru(t,e){var n,r;function a(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&nu(t,i)),n}return a._value=e,a}function au(t,e){var n,r;function a(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&eu(t,i)),n}return a._value=e,a}function iu(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=cr(t);return this.tween(n,(r.local?ru:au)(r,e))}function ou(t,e){return function(){ma(this,t).delay=+e.apply(this,arguments)}}function su(t,e){return e=+e,function(){ma(this,t).delay=e}}function lu(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ou:su)(e,t)):re(this.node(),e).delay}function cu(t,e){return function(){de(this,t).duration=+e.apply(this,arguments)}}function uu(t,e){return e=+e,function(){de(this,t).duration=e}}function du(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?cu:uu)(e,t)):re(this.node(),e).duration}function fu(t,e){if(typeof e!="function")throw new Error;return function(){de(this,t).ease=e}}function hu(t){var e=this._id;return arguments.length?this.each(fu(e,t)):re(this.node(),e).ease}function pu(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;de(this,t).ease=n}}function gu(t){if(typeof t!="function")throw new Error;return this.each(pu(this._id,t))}function yu(t){typeof t!="function"&&(t=zi(t));for(var e=this._groups,n=e.length,r=new Array(n),a=0;a<n;++a)for(var i=e[a],o=i.length,s=r[a]=[],u,l=0;l<o;++l)(u=i[l])&&t.call(u,u.__data__,l,i)&&s.push(u);return new ge(r,this._parents,this._name,this._id)}function mu(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,a=n.length,i=Math.min(r,a),o=new Array(r),s=0;s<i;++s)for(var u=e[s],l=n[s],c=u.length,f=o[s]=new Array(c),d,p=0;p<c;++p)(d=u[p]||l[p])&&(f[p]=d);for(;s<r;++s)o[s]=e[s];return new ge(o,this._parents,this._name,this._id)}function vu(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function _u(t,e,n){var r,a,i=vu(e)?ma:de;return function(){var o=i(this,t),s=o.on;s!==r&&(a=(r=s).copy()).on(e,n),o.on=a}}function xu(t,e){var n=this._id;return arguments.length<2?re(this.node(),n).on.on(t):this.each(_u(n,t,e))}function wu(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function bu(){return this.on("end.remove",wu(this._id))}function Cu(t){var e=this._name,n=this._id;typeof t!="function"&&(t=ua(t));for(var r=this._groups,a=r.length,i=new Array(a),o=0;o<a;++o)for(var s=r[o],u=s.length,l=i[o]=new Array(u),c,f,d=0;d<u;++d)(c=s[d])&&(f=t.call(c,c.__data__,d,s))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,dr(l[d],e,n,d,l,re(c,n)));return new ge(i,this._parents,e,n)}function ku(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Li(t));for(var r=this._groups,a=r.length,i=[],o=[],s=0;s<a;++s)for(var u=r[s],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=t.call(c,c.__data__,f,u),p,m=re(c,n),k=0,$=d.length;k<$;++k)(p=d[k])&&dr(p,e,n,k,d,m);i.push(d),o.push(c)}return new ge(i,o,e,n)}var Mu=un.prototype.constructor;function $u(){return new Mu(this._groups,this._parents)}function Su(t,e){var n,r,a;return function(){var i=He(this,t),o=(this.style.removeProperty(t),He(this,t));return i===o?null:i===n&&o===r?a:a=e(n=i,r=o)}}function oo(t){return function(){this.style.removeProperty(t)}}function Eu(t,e,n){var r,a=n+"",i;return function(){var o=He(this,t);return o===a?null:o===r?i:i=e(r=o,n)}}function Au(t,e,n){var r,a,i;return function(){var o=He(this,t),s=n(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(t),He(this,t))),o===u?null:o===r&&u===a?i:(a=u,i=e(r=o,s))}}function Tu(t,e){var n,r,a,i="style."+e,o="end."+i,s;return function(){var u=de(this,t),l=u.on,c=u.value[i]==null?s||(s=oo(e)):void 0;(l!==n||a!==c)&&(r=(n=l).copy()).on(o,a=c),u.on=r}}function Nu(t,e,n){var r=(t+="")=="transform"?Nc:io;return e==null?this.styleTween(t,Su(t,r)).on("end.style."+t,oo(t)):typeof e=="function"?this.styleTween(t,Au(t,r,va(this,"style."+t,e))).each(Tu(this._id,t)):this.styleTween(t,Eu(t,r,e),n).on("end.style."+t,null)}function Pu(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Ru(t,e,n){var r,a;function i(){var o=e.apply(this,arguments);return o!==a&&(r=(a=o)&&Pu(t,o,n)),r}return i._value=e,i}function Iu(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Ru(t,e,n??""))}function Ou(t){return function(){this.textContent=t}}function Du(t){return function(){var e=t(this);this.textContent=e??""}}function Hu(t){return this.tween("text",typeof t=="function"?Du(va(this,"text",t)):Ou(t==null?"":t+""))}function Lu(t){return function(e){this.textContent=t.call(this,e)}}function zu(t){var e,n;function r(){var a=t.apply(this,arguments);return a!==n&&(e=(n=a)&&Lu(a)),e}return r._value=t,r}function Fu(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,zu(t))}function Gu(){for(var t=this._name,e=this._id,n=so(),r=this._groups,a=r.length,i=0;i<a;++i)for(var o=r[i],s=o.length,u,l=0;l<s;++l)if(u=o[l]){var c=re(u,e);dr(u,t,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new ge(r,this._parents,t,n)}function Bu(){var t,e,n=this,r=n._id,a=n.size();return new Promise(function(i,o){var s={value:o},u={value:function(){--a===0&&i()}};n.each(function(){var l=de(this,r),c=l.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(u)),l.on=e}),a===0&&i()})}var Yu=0;function ge(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function so(){return++Yu}var fe=un.prototype;ge.prototype={constructor:ge,select:Cu,selectAll:ku,selectChild:fe.selectChild,selectChildren:fe.selectChildren,filter:yu,merge:mu,selection:$u,transition:Gu,call:fe.call,nodes:fe.nodes,node:fe.node,size:fe.size,empty:fe.empty,each:fe.each,on:xu,attr:tu,attrTween:iu,style:Nu,styleTween:Iu,text:Hu,textTween:Fu,remove:bu,tween:qc,delay:lu,duration:du,ease:hu,easeVarying:gu,end:Bu,[Symbol.iterator]:fe[Symbol.iterator]};function Wu(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Uu={time:null,delay:0,duration:250,ease:Wu};function Vu(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function qu(t){var e,n;t instanceof ge?(e=t._id,t=t._name):(e=so(),(n=Uu).time=ya(),t=t==null?null:t+"");for(var r=this._groups,a=r.length,i=0;i<a;++i)for(var o=r[i],s=o.length,u,l=0;l<s;++l)(u=o[l])&&dr(u,t,e,l,o,n||Vu(u,e));return new ge(r,this._parents,t,e)}un.prototype.interrupt=Wc;un.prototype.transition=qu;const Lr=Math.PI,zr=2*Lr,Ce=1e-6,Xu=zr-Ce;function lo(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Ku(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return lo;const n=10**e;return function(r){this._+=r[0];for(let a=1,i=r.length;a<i;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}class ju{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?lo:Ku(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,a){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+a}`}bezierCurveTo(e,n,r,a,i,o){this._append`C${+e},${+n},${+r},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(e,n,r,a,i){if(e=+e,n=+n,r=+r,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,s=this._y1,u=r-e,l=a-n,c=o-e,f=s-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(d>Ce)if(!(Math.abs(f*u-l*c)>Ce)||!i)this._append`L${this._x1=e},${this._y1=n}`;else{let p=r-o,m=a-s,k=u*u+l*l,$=p*p+m*m,M=Math.sqrt(k),S=Math.sqrt(d),E=i*Math.tan((Lr-Math.acos((k+d-$)/(2*M*S)))/2),x=E/S,N=E/M;Math.abs(x-1)>Ce&&this._append`L${e+x*c},${n+x*f}`,this._append`A${i},${i},0,0,${+(f*p>c*m)},${this._x1=e+N*u},${this._y1=n+N*l}`}}arc(e,n,r,a,i,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(a),u=r*Math.sin(a),l=e+s,c=n+u,f=1^o,d=o?a-i:i-a;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Ce||Math.abs(this._y1-c)>Ce)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%zr+zr),d>Xu?this._append`A${r},${r},0,1,${f},${e-s},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>Ce&&this._append`A${r},${r},0,${+(d>=Lr)},${f},${this._x1=e+r*Math.cos(i)},${this._y1=n+r*Math.sin(i)}`)}rect(e,n,r,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+a}h${-r}Z`}toString(){return this._}}function Zu(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Bn(t,e){if(!isFinite(t)||t===0)return null;var n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function ze(t){return t=Bn(Math.abs(t)),t?t[1]:NaN}function Ju(t,e){return function(n,r){for(var a=n.length,i=[],o=0,s=t[0],u=0;a>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),i.push(n.substring(a-=s,a+s)),!((u+=s+1)>r));)s=t[o=(o+1)%t.length];return i.reverse().join(e)}}function Qu(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var td=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Yn(t){if(!(e=td.exec(t)))throw new Error("invalid format: "+t);var e;return new _a({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Yn.prototype=_a.prototype;function _a(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}_a.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ed(t){t:for(var e=t.length,n=1,r=-1,a;n<e;++n)switch(t[n]){case".":r=a=n;break;case"0":r===0&&(r=n),a=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(a+1):t}var Wn;function nd(t,e){var n=Bn(t,e);if(!n)return Wn=void 0,t.toPrecision(e);var r=n[0],a=n[1],i=a-(Wn=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+Bn(t,Math.max(0,e+i-1))[0]}function Ua(t,e){var n=Bn(t,e);if(!n)return t+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}const Va={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Zu,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Ua(t*100,e),r:Ua,s:nd,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function qa(t){return t}var Xa=Array.prototype.map,Ka=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function rd(t){var e=t.grouping===void 0||t.thousands===void 0?qa:Ju(Xa.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?qa:Qu(Xa.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function l(f,d){f=Yn(f);var p=f.fill,m=f.align,k=f.sign,$=f.symbol,M=f.zero,S=f.width,E=f.comma,x=f.precision,N=f.trim,I=f.type;I==="n"?(E=!0,I="g"):Va[I]||(x===void 0&&(x=12),N=!0,I="g"),(M||p==="0"&&m==="=")&&(M=!0,p="0",m="=");var H=(d&&d.prefix!==void 0?d.prefix:"")+($==="$"?n:$==="#"&&/[boxX]/.test(I)?"0"+I.toLowerCase():""),G=($==="$"?r:/[%p]/.test(I)?o:"")+(d&&d.suffix!==void 0?d.suffix:""),T=Va[I],O=/[defgprs%]/.test(I);x=x===void 0?6:/[gprs]/.test(I)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function R(v){var A=H,h=G,g,y,_;if(I==="c")h=T(v)+h,v="";else{v=+v;var b=v<0||1/v<0;if(v=isNaN(v)?u:T(Math.abs(v),x),N&&(v=ed(v)),b&&+v==0&&k!=="+"&&(b=!1),A=(b?k==="("?k:s:k==="-"||k==="("?"":k)+A,h=(I==="s"&&!isNaN(v)&&Wn!==void 0?Ka[8+Wn/3]:"")+h+(b&&k==="("?")":""),O){for(g=-1,y=v.length;++g<y;)if(_=v.charCodeAt(g),48>_||_>57){h=(_===46?a+v.slice(g+1):v.slice(g))+h,v=v.slice(0,g);break}}}E&&!M&&(v=e(v,1/0));var w=A.length+v.length+h.length,P=w<S?new Array(S-w+1).join(p):"";switch(E&&M&&(v=e(P+v,P.length?S-h.length:1/0),P=""),m){case"<":v=A+v+h+P;break;case"=":v=A+P+v+h;break;case"^":v=P.slice(0,w=P.length>>1)+A+v+h+P.slice(w);break;default:v=P+A+v+h;break}return i(v)}return R.toString=function(){return f+""},R}function c(f,d){var p=Math.max(-8,Math.min(8,Math.floor(ze(d)/3)))*3,m=Math.pow(10,-p),k=l((f=Yn(f),f.type="f",f),{suffix:Ka[8+p/3]});return function($){return k(m*$)}}return{format:l,formatPrefix:c}}var yn,fr,co;ad({thousands:",",grouping:[3],currency:["$",""]});function ad(t){return yn=rd(t),fr=yn.format,co=yn.formatPrefix,yn}function id(t){return Math.max(0,-ze(Math.abs(t)))}function od(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ze(e)/3)))*3-ze(Math.abs(t)))}function sd(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,ze(e)-ze(t))+1}var wt=1e-6,Fr=1e-12,pt=Math.PI,Ut=pt/2,ja=pt/4,Xt=pt*2,jt=180/pt,Ct=pt/180,bt=Math.abs,ld=Math.atan,Te=Math.atan2,vt=Math.cos,Gr=Math.hypot,_t=Math.sin,cd=Math.sign||function(t){return t>0?1:t<0?-1:0},_e=Math.sqrt;function ud(t){return t>1?0:t<-1?pt:Math.acos(t)}function Ne(t){return t>1?Ut:t<-1?-Ut:Math.asin(t)}function Yt(){}function Un(t,e){t&&Ja.hasOwnProperty(t.type)&&Ja[t.type](t,e)}var Za={Feature:function(t,e){Un(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,a=n.length;++r<a;)Un(n[r].geometry,e)}},Ja={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,a=n.length;++r<a;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Br(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,a=n.length;++r<a;)Br(n[r],e,0)},Polygon:function(t,e){Qa(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,a=n.length;++r<a;)Qa(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,a=n.length;++r<a;)Un(n[r],e)}};function Br(t,e,n){var r=-1,a=t.length-n,i;for(e.lineStart();++r<a;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function Qa(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Br(t[n],e,1);e.polygonEnd()}function Me(t,e){t&&Za.hasOwnProperty(t.type)?Za[t.type](t,e):Un(t,e)}function Yr(t){return[Te(t[1],t[0]),Ne(t[2])]}function Fe(t){var e=t[0],n=t[1],r=vt(n);return[r*vt(e),r*_t(e),_t(n)]}function mn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Vn(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function mr(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function vn(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Wr(t){var e=_e(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var Xe,qn,Xn,Kn,jn,Zn,Jn,Qn,Ur,Vr,qr,uo,fo,It,Ot,Dt,Qt={sphere:Yt,point:xa,lineStart:ti,lineEnd:ei,polygonStart:function(){Qt.lineStart=hd,Qt.lineEnd=pd},polygonEnd:function(){Qt.lineStart=ti,Qt.lineEnd=ei}};function xa(t,e){t*=Ct,e*=Ct;var n=vt(e);fn(n*vt(t),n*_t(t),_t(e))}function fn(t,e,n){++Xe,Xn+=(t-Xn)/Xe,Kn+=(e-Kn)/Xe,jn+=(n-jn)/Xe}function ti(){Qt.point=dd}function dd(t,e){t*=Ct,e*=Ct;var n=vt(e);It=n*vt(t),Ot=n*_t(t),Dt=_t(e),Qt.point=fd,fn(It,Ot,Dt)}function fd(t,e){t*=Ct,e*=Ct;var n=vt(e),r=n*vt(t),a=n*_t(t),i=_t(e),o=Te(_e((o=Ot*i-Dt*a)*o+(o=Dt*r-It*i)*o+(o=It*a-Ot*r)*o),It*r+Ot*a+Dt*i);qn+=o,Zn+=o*(It+(It=r)),Jn+=o*(Ot+(Ot=a)),Qn+=o*(Dt+(Dt=i)),fn(It,Ot,Dt)}function ei(){Qt.point=xa}function hd(){Qt.point=gd}function pd(){ho(uo,fo),Qt.point=xa}function gd(t,e){uo=t,fo=e,t*=Ct,e*=Ct,Qt.point=ho;var n=vt(e);It=n*vt(t),Ot=n*_t(t),Dt=_t(e),fn(It,Ot,Dt)}function ho(t,e){t*=Ct,e*=Ct;var n=vt(e),r=n*vt(t),a=n*_t(t),i=_t(e),o=Ot*i-Dt*a,s=Dt*r-It*i,u=It*a-Ot*r,l=Gr(o,s,u),c=Ne(l),f=l&&-c/l;Ur.add(f*o),Vr.add(f*s),qr.add(f*u),qn+=c,Zn+=c*(It+(It=r)),Jn+=c*(Ot+(Ot=a)),Qn+=c*(Dt+(Dt=i)),fn(It,Ot,Dt)}function yd(t){Xe=qn=Xn=Kn=jn=Zn=Jn=Qn=0,Ur=new se,Vr=new se,qr=new se,Me(t,Qt);var e=+Ur,n=+Vr,r=+qr,a=Gr(e,n,r);return a<Fr&&(e=Zn,n=Jn,r=Qn,qn<wt&&(e=Xn,n=Kn,r=jn),a=Gr(e,n,r),a<Fr)?[NaN,NaN]:[Te(n,e)*jt,Ne(r/a)*jt]}function Xr(t,e){function n(r,a){return r=t(r,a),e(r[0],r[1])}return t.invert&&e.invert&&(n.invert=function(r,a){return r=e.invert(r,a),r&&t.invert(r[0],r[1])}),n}function Kr(t,e){return bt(t)>pt&&(t-=Math.round(t/Xt)*Xt),[t,e]}Kr.invert=Kr;function md(t,e,n){return(t%=Xt)?e||n?Xr(ri(t),ai(e,n)):ri(t):e||n?ai(e,n):Kr}function ni(t){return function(e,n){return e+=t,bt(e)>pt&&(e-=Math.round(e/Xt)*Xt),[e,n]}}function ri(t){var e=ni(t);return e.invert=ni(-t),e}function ai(t,e){var n=vt(t),r=_t(t),a=vt(e),i=_t(e);function o(s,u){var l=vt(u),c=vt(s)*l,f=_t(s)*l,d=_t(u),p=d*n+c*r;return[Te(f*a-p*i,c*n-d*r),Ne(p*a+f*i)]}return o.invert=function(s,u){var l=vt(u),c=vt(s)*l,f=_t(s)*l,d=_t(u),p=d*a-f*i;return[Te(f*a+d*i,c*n+p*r),Ne(p*n-c*r)]},o}function vd(t,e,n,r,a,i){if(n){var o=vt(e),s=_t(e),u=r*n;a==null?(a=e+r*Xt,i=e-u/2):(a=ii(o,a),i=ii(o,i),(r>0?a<i:a>i)&&(a+=r*Xt));for(var l,c=a;r>0?c>i:c<i;c-=u)l=Yr([o,-s*vt(c),-s*_t(c)]),t.point(l[0],l[1])}}function ii(t,e){e=Fe(e),e[0]-=t,Wr(e);var n=ud(-e[1]);return((-e[2]<0?-n:n)+Xt-wt)%Xt}function po(){var t=[],e;return{point:function(n,r,a){e.push([n,r,a])},lineStart:function(){t.push(e=[])},lineEnd:Yt,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function Tn(t,e){return bt(t[0]-e[0])<wt&&bt(t[1]-e[1])<wt}function _n(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function go(t,e,n,r,a){var i=[],o=[],s,u;if(t.forEach(function(m){if(!((k=m.length-1)<=0)){var k,$=m[0],M=m[k],S;if(Tn($,M)){if(!$[2]&&!M[2]){for(a.lineStart(),s=0;s<k;++s)a.point(($=m[s])[0],$[1]);a.lineEnd();return}M[0]+=2*wt}i.push(S=new _n($,m,null,!0)),o.push(S.o=new _n($,null,S,!1)),i.push(S=new _n(M,m,null,!1)),o.push(S.o=new _n(M,null,S,!0))}}),!!i.length){for(o.sort(e),oi(i),oi(o),s=0,u=o.length;s<u;++s)o[s].e=n=!n;for(var l=i[0],c,f;;){for(var d=l,p=!0;d.v;)if((d=d.n)===l)return;c=d.z,a.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(s=0,u=c.length;s<u;++s)a.point((f=c[s])[0],f[1]);else r(d.x,d.n.x,1,a);d=d.n}else{if(p)for(c=d.p.z,s=c.length-1;s>=0;--s)a.point((f=c[s])[0],f[1]);else r(d.x,d.p.x,-1,a);d=d.p}d=d.o,c=d.z,p=!p}while(!d.v);a.lineEnd()}}}function oi(t){if(e=t.length){for(var e,n=0,r=t[0],a;++n<e;)r.n=a=t[n],a.p=r,r=a;r.n=a=t[0],a.p=r}}function vr(t){return bt(t[0])<=pt?t[0]:cd(t[0])*((bt(t[0])+pt)%Xt-pt)}function _d(t,e){var n=vr(e),r=e[1],a=_t(r),i=[_t(n),-vt(n),0],o=0,s=0,u=new se;a===1?r=Ut+wt:a===-1&&(r=-Ut-wt);for(var l=0,c=t.length;l<c;++l)if(d=(f=t[l]).length)for(var f,d,p=f[d-1],m=vr(p),k=p[1]/2+ja,$=_t(k),M=vt(k),S=0;S<d;++S,m=x,$=I,M=H,p=E){var E=f[S],x=vr(E),N=E[1]/2+ja,I=_t(N),H=vt(N),G=x-m,T=G>=0?1:-1,O=T*G,R=O>pt,v=$*I;if(u.add(Te(v*T*_t(O),M*H+v*vt(O))),o+=R?G+T*Xt:G,R^m>=n^x>=n){var A=Vn(Fe(p),Fe(E));Wr(A);var h=Vn(i,A);Wr(h);var g=(R^G>=0?-1:1)*Ne(h[2]);(r>g||r===g&&(A[0]||A[1]))&&(s+=R^G>=0?1:-1)}}return(o<-wt||o<wt&&u<-Fr)^s&1}function yo(t,e,n,r){return function(a){var i=e(a),o=po(),s=e(o),u=!1,l,c,f,d={point:p,lineStart:k,lineEnd:$,polygonStart:function(){d.point=M,d.lineStart=S,d.lineEnd=E,c=[],l=[]},polygonEnd:function(){d.point=p,d.lineStart=k,d.lineEnd=$,c=Ri(c);var x=_d(l,r);c.length?(u||(a.polygonStart(),u=!0),go(c,wd,x,n,a)):x&&(u||(a.polygonStart(),u=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),u&&(a.polygonEnd(),u=!1),c=l=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function p(x,N){t(x,N)&&a.point(x,N)}function m(x,N){i.point(x,N)}function k(){d.point=m,i.lineStart()}function $(){d.point=p,i.lineEnd()}function M(x,N){f.push([x,N]),s.point(x,N)}function S(){s.lineStart(),f=[]}function E(){M(f[0][0],f[0][1]),s.lineEnd();var x=s.clean(),N=o.result(),I,H=N.length,G,T,O;if(f.pop(),l.push(f),f=null,!!H){if(x&1){if(T=N[0],(G=T.length-1)>0){for(u||(a.polygonStart(),u=!0),a.lineStart(),I=0;I<G;++I)a.point((O=T[I])[0],O[1]);a.lineEnd()}return}H>1&&x&2&&N.push(N.pop().concat(N.shift())),c.push(N.filter(xd))}}return d}}function xd(t){return t.length>1}function wd(t,e){return((t=t.x)[0]<0?t[1]-Ut-wt:Ut-t[1])-((e=e.x)[0]<0?e[1]-Ut-wt:Ut-e[1])}const si=yo(function(){return!0},bd,kd,[-pt,-Ut]);function bd(t){var e=NaN,n=NaN,r=NaN,a;return{lineStart:function(){t.lineStart(),a=1},point:function(i,o){var s=i>0?pt:-pt,u=bt(i-e);bt(u-pt)<wt?(t.point(e,n=(n+o)/2>0?Ut:-Ut),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(s,n),t.point(i,n),a=0):r!==s&&u>=pt&&(bt(e-r)<wt&&(e-=r*wt),bt(i-s)<wt&&(i-=s*wt),n=Cd(e,n,i,o),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(s,n),a=0),t.point(e=i,n=o),r=s},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-a}}}function Cd(t,e,n,r){var a,i,o=_t(t-n);return bt(o)>wt?ld((_t(e)*(i=vt(r))*_t(n)-_t(r)*(a=vt(e))*_t(t))/(a*i*o)):(e+r)/2}function kd(t,e,n,r){var a;if(t==null)a=n*Ut,r.point(-pt,a),r.point(0,a),r.point(pt,a),r.point(pt,0),r.point(pt,-a),r.point(0,-a),r.point(-pt,-a),r.point(-pt,0),r.point(-pt,a);else if(bt(t[0]-e[0])>wt){var i=t[0]<e[0]?pt:-pt;a=n*i/2,r.point(-i,a),r.point(0,a),r.point(i,a)}else r.point(e[0],e[1])}function Md(t){var e=vt(t),n=2*Ct,r=e>0,a=bt(e)>wt;function i(c,f,d,p){vd(p,t,n,d,c,f)}function o(c,f){return vt(c)*vt(f)>e}function s(c){var f,d,p,m,k;return{lineStart:function(){m=p=!1,k=1},point:function($,M){var S=[$,M],E,x=o($,M),N=r?x?0:l($,M):x?l($+($<0?pt:-pt),M):0;if(!f&&(m=p=x)&&c.lineStart(),x!==p&&(E=u(f,S),(!E||Tn(f,E)||Tn(S,E))&&(S[2]=1)),x!==p)k=0,x?(c.lineStart(),E=u(S,f),c.point(E[0],E[1])):(E=u(f,S),c.point(E[0],E[1],2),c.lineEnd()),f=E;else if(a&&f&&r^x){var I;!(N&d)&&(I=u(S,f,!0))&&(k=0,r?(c.lineStart(),c.point(I[0][0],I[0][1]),c.point(I[1][0],I[1][1]),c.lineEnd()):(c.point(I[1][0],I[1][1]),c.lineEnd(),c.lineStart(),c.point(I[0][0],I[0][1],3)))}x&&(!f||!Tn(f,S))&&c.point(S[0],S[1]),f=S,p=x,d=N},lineEnd:function(){p&&c.lineEnd(),f=null},clean:function(){return k|(m&&p)<<1}}}function u(c,f,d){var p=Fe(c),m=Fe(f),k=[1,0,0],$=Vn(p,m),M=mn($,$),S=$[0],E=M-S*S;if(!E)return!d&&c;var x=e*M/E,N=-e*S/E,I=Vn(k,$),H=vn(k,x),G=vn($,N);mr(H,G);var T=I,O=mn(H,T),R=mn(T,T),v=O*O-R*(mn(H,H)-1);if(!(v<0)){var A=_e(v),h=vn(T,(-O-A)/R);if(mr(h,H),h=Yr(h),!d)return h;var g=c[0],y=f[0],_=c[1],b=f[1],w;y<g&&(w=g,g=y,y=w);var P=y-g,D=bt(P-pt)<wt,L=D||P<wt;if(!D&&b<_&&(w=_,_=b,b=w),L?D?_+b>0^h[1]<(bt(h[0]-g)<wt?_:b):_<=h[1]&&h[1]<=b:P>pt^(g<=h[0]&&h[0]<=y)){var B=vn(T,(-O+A)/R);return mr(B,H),[h,Yr(B)]}}}function l(c,f){var d=r?t:pt-t,p=0;return c<-d?p|=1:c>d&&(p|=2),f<-d?p|=4:f>d&&(p|=8),p}return yo(o,s,i,r?[0,-t]:[-pt,t-pt])}function $d(t,e,n,r,a,i){var o=t[0],s=t[1],u=e[0],l=e[1],c=0,f=1,d=u-o,p=l-s,m;if(m=n-o,!(!d&&m>0)){if(m/=d,d<0){if(m<c)return;m<f&&(f=m)}else if(d>0){if(m>f)return;m>c&&(c=m)}if(m=a-o,!(!d&&m<0)){if(m/=d,d<0){if(m>f)return;m>c&&(c=m)}else if(d>0){if(m<c)return;m<f&&(f=m)}if(m=r-s,!(!p&&m>0)){if(m/=p,p<0){if(m<c)return;m<f&&(f=m)}else if(p>0){if(m>f)return;m>c&&(c=m)}if(m=i-s,!(!p&&m<0)){if(m/=p,p<0){if(m>f)return;m>c&&(c=m)}else if(p>0){if(m<c)return;m<f&&(f=m)}return c>0&&(t[0]=o+c*d,t[1]=s+c*p),f<1&&(e[0]=o+f*d,e[1]=s+f*p),!0}}}}}var Ke=1e9,xn=-Ke;function Sd(t,e,n,r){function a(l,c){return t<=l&&l<=n&&e<=c&&c<=r}function i(l,c,f,d){var p=0,m=0;if(l==null||(p=o(l,f))!==(m=o(c,f))||u(l,c)<0^f>0)do d.point(p===0||p===3?t:n,p>1?r:e);while((p=(p+f+4)%4)!==m);else d.point(c[0],c[1])}function o(l,c){return bt(l[0]-t)<wt?c>0?0:3:bt(l[0]-n)<wt?c>0?2:1:bt(l[1]-e)<wt?c>0?1:0:c>0?3:2}function s(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=po(),d,p,m,k,$,M,S,E,x,N,I,H={point:G,lineStart:v,lineEnd:A,polygonStart:O,polygonEnd:R};function G(g,y){a(g,y)&&c.point(g,y)}function T(){for(var g=0,y=0,_=p.length;y<_;++y)for(var b=p[y],w=1,P=b.length,D=b[0],L,B,Y=D[0],U=D[1];w<P;++w)L=Y,B=U,D=b[w],Y=D[0],U=D[1],B<=r?U>r&&(Y-L)*(r-B)>(U-B)*(t-L)&&++g:U<=r&&(Y-L)*(r-B)<(U-B)*(t-L)&&--g;return g}function O(){c=f,d=[],p=[],I=!0}function R(){var g=T(),y=I&&g,_=(d=Ri(d)).length;(y||_)&&(l.polygonStart(),y&&(l.lineStart(),i(null,null,1,l),l.lineEnd()),_&&go(d,s,g,i,l),l.polygonEnd()),c=l,d=p=m=null}function v(){H.point=h,p&&p.push(m=[]),N=!0,x=!1,S=E=NaN}function A(){d&&(h(k,$),M&&x&&f.rejoin(),d.push(f.result())),H.point=G,x&&c.lineEnd()}function h(g,y){var _=a(g,y);if(p&&m.push([g,y]),N)k=g,$=y,M=_,N=!1,_&&(c.lineStart(),c.point(g,y));else if(_&&x)c.point(g,y);else{var b=[S=Math.max(xn,Math.min(Ke,S)),E=Math.max(xn,Math.min(Ke,E))],w=[g=Math.max(xn,Math.min(Ke,g)),y=Math.max(xn,Math.min(Ke,y))];$d(b,w,t,e,n,r)?(x||(c.lineStart(),c.point(b[0],b[1])),c.point(w[0],w[1]),_||c.lineEnd(),I=!1):_&&(c.lineStart(),c.point(g,y),I=!1)}S=g,E=y,x=_}return H}}const jr=t=>t;var _r=new se,Zr=new se,mo,vo,Jr,Qr,he={point:Yt,lineStart:Yt,lineEnd:Yt,polygonStart:function(){he.lineStart=Ed,he.lineEnd=Td},polygonEnd:function(){he.lineStart=he.lineEnd=he.point=Yt,_r.add(bt(Zr)),Zr=new se},result:function(){var t=_r/2;return _r=new se,t}};function Ed(){he.point=Ad}function Ad(t,e){he.point=_o,mo=Jr=t,vo=Qr=e}function _o(t,e){Zr.add(Qr*t-Jr*e),Jr=t,Qr=e}function Td(){_o(mo,vo)}var Ge=1/0,tr=Ge,rn=-Ge,er=rn,nr={point:Nd,lineStart:Yt,lineEnd:Yt,polygonStart:Yt,polygonEnd:Yt,result:function(){var t=[[Ge,tr],[rn,er]];return rn=er=-(tr=Ge=1/0),t}};function Nd(t,e){t<Ge&&(Ge=t),t>rn&&(rn=t),e<tr&&(tr=e),e>er&&(er=e)}var ta=0,ea=0,je=0,rr=0,ar=0,Re=0,na=0,ra=0,Ze=0,xo,wo,ie,oe,Wt={point:Pe,lineStart:li,lineEnd:ci,polygonStart:function(){Wt.lineStart=Id,Wt.lineEnd=Od},polygonEnd:function(){Wt.point=Pe,Wt.lineStart=li,Wt.lineEnd=ci},result:function(){var t=Ze?[na/Ze,ra/Ze]:Re?[rr/Re,ar/Re]:je?[ta/je,ea/je]:[NaN,NaN];return ta=ea=je=rr=ar=Re=na=ra=Ze=0,t}};function Pe(t,e){ta+=t,ea+=e,++je}function li(){Wt.point=Pd}function Pd(t,e){Wt.point=Rd,Pe(ie=t,oe=e)}function Rd(t,e){var n=t-ie,r=e-oe,a=_e(n*n+r*r);rr+=a*(ie+t)/2,ar+=a*(oe+e)/2,Re+=a,Pe(ie=t,oe=e)}function ci(){Wt.point=Pe}function Id(){Wt.point=Dd}function Od(){bo(xo,wo)}function Dd(t,e){Wt.point=bo,Pe(xo=ie=t,wo=oe=e)}function bo(t,e){var n=t-ie,r=e-oe,a=_e(n*n+r*r);rr+=a*(ie+t)/2,ar+=a*(oe+e)/2,Re+=a,a=oe*t-ie*e,na+=a*(ie+t),ra+=a*(oe+e),Ze+=a*3,Pe(ie=t,oe=e)}function Co(t){this._context=t}Co.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Xt);break}}},result:Yt};var aa=new se,xr,ko,Mo,Je,Qe,an={point:Yt,lineStart:function(){an.point=Hd},lineEnd:function(){xr&&$o(ko,Mo),an.point=Yt},polygonStart:function(){xr=!0},polygonEnd:function(){xr=null},result:function(){var t=+aa;return aa=new se,t}};function Hd(t,e){an.point=$o,ko=Je=t,Mo=Qe=e}function $o(t,e){Je-=t,Qe-=e,aa.add(_e(Je*Je+Qe*Qe)),Je=t,Qe=e}let ui,ir,di,fi;class hi{constructor(e){this._append=e==null?So:Ld(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==di||this._append!==ir){const r=this._radius,a=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,di=r,ir=this._append,fi=this._,this._=a}this._+=fi;break}}}result(){const e=this._;return this._="",e.length?e:null}}function So(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Ld(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return So;if(e!==ui){const n=10**e;ui=e,ir=function(a){let i=1;this._+=a[0];for(const o=a.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+a[i]}}return ir}function zd(t,e){let n=3,r=4.5,a,i;function o(s){return s&&(typeof r=="function"&&i.pointRadius(+r.apply(this,arguments)),Me(s,a(i))),i.result()}return o.area=function(s){return Me(s,a(he)),he.result()},o.measure=function(s){return Me(s,a(an)),an.result()},o.bounds=function(s){return Me(s,a(nr)),nr.result()},o.centroid=function(s){return Me(s,a(Wt)),Wt.result()},o.projection=function(s){return arguments.length?(a=s==null?(t=null,jr):(t=s).stream,o):t},o.context=function(s){return arguments.length?(i=s==null?(e=null,new hi(n)):new Co(e=s),typeof r!="function"&&i.pointRadius(r),o):e},o.pointRadius=function(s){return arguments.length?(r=typeof s=="function"?s:(i.pointRadius(+s),+s),o):r},o.digits=function(s){if(!arguments.length)return n;if(s==null)n=null;else{const u=Math.floor(s);if(!(u>=0))throw new RangeError(`invalid digits: ${s}`);n=u}return e===null&&(i=new hi(n)),o},o.projection(t).digits(n).context(e)}function wa(t){return function(e){var n=new ia;for(var r in t)n[r]=t[r];return n.stream=e,n}}function ia(){}ia.prototype={constructor:ia,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function ba(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),Me(n,t.stream(nr)),e(nr.result()),r!=null&&t.clipExtent(r),t}function Eo(t,e,n){return ba(t,function(r){var a=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=Math.min(a/(r[1][0]-r[0][0]),i/(r[1][1]-r[0][1])),s=+e[0][0]+(a-o*(r[1][0]+r[0][0]))/2,u=+e[0][1]+(i-o*(r[1][1]+r[0][1]))/2;t.scale(150*o).translate([s,u])},n)}function Fd(t,e,n){return Eo(t,[[0,0],e],n)}function Gd(t,e,n){return ba(t,function(r){var a=+e,i=a/(r[1][0]-r[0][0]),o=(a-i*(r[1][0]+r[0][0]))/2,s=-i*r[0][1];t.scale(150*i).translate([o,s])},n)}function Bd(t,e,n){return ba(t,function(r){var a=+e,i=a/(r[1][1]-r[0][1]),o=-i*r[0][0],s=(a-i*(r[1][1]+r[0][1]))/2;t.scale(150*i).translate([o,s])},n)}var pi=16,Yd=vt(30*Ct);function gi(t,e){return+e?Ud(t,e):Wd(t)}function Wd(t){return wa({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function Ud(t,e){function n(r,a,i,o,s,u,l,c,f,d,p,m,k,$){var M=l-r,S=c-a,E=M*M+S*S;if(E>4*e&&k--){var x=o+d,N=s+p,I=u+m,H=_e(x*x+N*N+I*I),G=Ne(I/=H),T=bt(bt(I)-1)<wt||bt(i-f)<wt?(i+f)/2:Te(N,x),O=t(T,G),R=O[0],v=O[1],A=R-r,h=v-a,g=S*A-M*h;(g*g/E>e||bt((M*A+S*h)/E-.5)>.3||o*d+s*p+u*m<Yd)&&(n(r,a,i,o,s,u,R,v,T,x/=H,N/=H,I,k,$),$.point(R,v),n(R,v,T,x,N,I,l,c,f,d,p,m,k,$))}}return function(r){var a,i,o,s,u,l,c,f,d,p,m,k,$={point:M,lineStart:S,lineEnd:x,polygonStart:function(){r.polygonStart(),$.lineStart=N},polygonEnd:function(){r.polygonEnd(),$.lineStart=S}};function M(G,T){G=t(G,T),r.point(G[0],G[1])}function S(){f=NaN,$.point=E,r.lineStart()}function E(G,T){var O=Fe([G,T]),R=t(G,T);n(f,d,c,p,m,k,f=R[0],d=R[1],c=G,p=O[0],m=O[1],k=O[2],pi,r),r.point(f,d)}function x(){$.point=M,r.lineEnd()}function N(){S(),$.point=I,$.lineEnd=H}function I(G,T){E(a=G,T),i=f,o=d,s=p,u=m,l=k,$.point=E}function H(){n(f,d,c,p,m,k,i,o,a,s,u,l,pi,r),$.lineEnd=x,x()}return $}}var Vd=wa({point:function(t,e){this.stream.point(t*Ct,e*Ct)}});function qd(t){return wa({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}function Xd(t,e,n,r,a){function i(o,s){return o*=r,s*=a,[e+t*o,n-t*s]}return i.invert=function(o,s){return[(o-e)/t*r,(n-s)/t*a]},i}function yi(t,e,n,r,a,i){if(!i)return Xd(t,e,n,r,a);var o=vt(i),s=_t(i),u=o*t,l=s*t,c=o/t,f=s/t,d=(s*n-o*e)/t,p=(s*e+o*n)/t;function m(k,$){return k*=r,$*=a,[u*k-l*$+e,n-l*k-u*$]}return m.invert=function(k,$){return[r*(c*k-f*$+d),a*(p-f*k-c*$)]},m}function Kd(t){return jd(function(){return t})()}function jd(t){var e,n=150,r=480,a=250,i=0,o=0,s=0,u=0,l=0,c,f=0,d=1,p=1,m=null,k=si,$=null,M,S,E,x=jr,N=.5,I,H,G,T,O;function R(g){return G(g[0]*Ct,g[1]*Ct)}function v(g){return g=G.invert(g[0],g[1]),g&&[g[0]*jt,g[1]*jt]}R.stream=function(g){return T&&O===g?T:T=Vd(qd(c)(k(I(x(O=g)))))},R.preclip=function(g){return arguments.length?(k=g,m=void 0,h()):k},R.postclip=function(g){return arguments.length?(x=g,$=M=S=E=null,h()):x},R.clipAngle=function(g){return arguments.length?(k=+g?Md(m=g*Ct):(m=null,si),h()):m*jt},R.clipExtent=function(g){return arguments.length?(x=g==null?($=M=S=E=null,jr):Sd($=+g[0][0],M=+g[0][1],S=+g[1][0],E=+g[1][1]),h()):$==null?null:[[$,M],[S,E]]},R.scale=function(g){return arguments.length?(n=+g,A()):n},R.translate=function(g){return arguments.length?(r=+g[0],a=+g[1],A()):[r,a]},R.center=function(g){return arguments.length?(i=g[0]%360*Ct,o=g[1]%360*Ct,A()):[i*jt,o*jt]},R.rotate=function(g){return arguments.length?(s=g[0]%360*Ct,u=g[1]%360*Ct,l=g.length>2?g[2]%360*Ct:0,A()):[s*jt,u*jt,l*jt]},R.angle=function(g){return arguments.length?(f=g%360*Ct,A()):f*jt},R.reflectX=function(g){return arguments.length?(d=g?-1:1,A()):d<0},R.reflectY=function(g){return arguments.length?(p=g?-1:1,A()):p<0},R.precision=function(g){return arguments.length?(I=gi(H,N=g*g),h()):_e(N)},R.fitExtent=function(g,y){return Eo(R,g,y)},R.fitSize=function(g,y){return Fd(R,g,y)},R.fitWidth=function(g,y){return Gd(R,g,y)},R.fitHeight=function(g,y){return Bd(R,g,y)};function A(){var g=yi(n,0,0,d,p,f).apply(null,e(i,o)),y=yi(n,r-g[0],a-g[1],d,p,f);return c=md(s,u,l),H=Xr(e,y),G=Xr(c,H),I=gi(H,N),h()}function h(){return T=O=null,R}return function(){return e=t.apply(this,arguments),R.invert=e.invert&&v,A()}}function Ao(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),e*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}Ao.invert=function(t,e){var n=e,r=25,a;do{var i=n*n,o=i*i;n-=a=(n*(1.007226+i*(.015085+o*(-.044475+.028874*i-.005916*o)))-e)/(1.007226+i*(.015085*3+o*(-.044475*7+.028874*9*i-.005916*11*o)))}while(bt(a)>wt&&--r>0);return[t/(.8707+(i=n*n)*(-.131979+i*(-.013791+i*i*i*(.003971-.001529*i)))),n]};function Zd(){return Kd(Ao).scale(175.295)}function Jd(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function Qd(){return this.eachAfter(Jd)}function tf(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this}function ef(t,e){for(var n=this,r=[n],a,i,o=-1;n=r.pop();)if(t.call(e,n,++o,this),a=n.children)for(i=a.length-1;i>=0;--i)r.push(a[i]);return this}function nf(t,e){for(var n=this,r=[n],a=[],i,o,s,u=-1;n=r.pop();)if(a.push(n),i=n.children)for(o=0,s=i.length;o<s;++o)r.push(i[o]);for(;n=a.pop();)t.call(e,n,++u,this);return this}function rf(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r}function af(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,a=r&&r.length;--a>=0;)n+=r[a].value;e.value=n})}function of(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function sf(t){for(var e=this,n=lf(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var a=r.length;t!==n;)r.splice(a,0,t),t=t.parent;return r}function lf(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),a=null;for(t=n.pop(),e=r.pop();t===e;)a=t,t=n.pop(),e=r.pop();return a}function cf(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function uf(){return Array.from(this)}function df(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function ff(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*hf(){var t=this,e,n=[t],r,a,i;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,r=t.children)for(a=0,i=r.length;a<i;++a)n.push(r[a]);while(n.length)}function Ca(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=yf)):e===void 0&&(e=gf);for(var n=new or(t),r,a=[n],i,o,s,u;r=a.pop();)if((o=e(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,s=u-1;s>=0;--s)a.push(i=o[s]=new or(o[s])),i.parent=r,i.depth=r.depth+1;return n.eachBefore(vf)}function pf(){return Ca(this).eachBefore(mf)}function gf(t){return t.children}function yf(t){return Array.isArray(t)?t[1]:null}function mf(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function vf(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function or(t){this.data=t,this.depth=this.height=0,this.parent=null}or.prototype=Ca.prototype={constructor:or,count:Qd,each:tf,eachAfter:nf,eachBefore:ef,find:rf,sum:af,sort:of,path:sf,ancestors:cf,descendants:uf,leaves:df,links:ff,copy:pf,[Symbol.iterator]:hf};function _f(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function xf(t,e,n,r,a){for(var i=t.children,o,s=-1,u=i.length,l=t.value&&(r-e)/t.value;++s<u;)o=i[s],o.y0=n,o.y1=a,o.x0=e,o.x1=e+=o.value*l}function wf(){var t=1,e=1,n=0,r=!1;function a(o){var s=o.height+1;return o.x0=o.y0=n,o.x1=t,o.y1=e/s,o.eachBefore(i(e,s)),r&&o.eachBefore(_f),o}function i(o,s){return function(u){u.children&&xf(u,u.x0,o*(u.depth+1)/s,u.x1,o*(u.depth+2)/s);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return a.round=function(o){return arguments.length?(r=!!o,a):r},a.size=function(o){return arguments.length?(t=+o[0],e=+o[1],a):[t,e]},a.padding=function(o){return arguments.length?(n=+o,a):n},a}function ka(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const mi=Symbol("implicit");function To(){var t=new $a,e=[],n=[],r=mi;function a(i){let o=t.get(i);if(o===void 0){if(r!==mi)return r;t.set(i,o=e.push(i)-1)}return n[o%n.length]}return a.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new $a;for(const o of i)t.has(o)||t.set(o,e.push(o)-1);return a},a.range=function(i){return arguments.length?(n=Array.from(i),a):n.slice()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return To(e,n).unknown(r)},ka.apply(a,arguments),a}function No(){var t=To().unknown(void 0),e=t.domain,n=t.range,r=0,a=1,i,o,s=!1,u=0,l=0,c=.5;delete t.unknown;function f(){var d=e().length,p=a<r,m=p?a:r,k=p?r:a;i=(k-m)/Math.max(1,d-u+l*2),s&&(i=Math.floor(i)),m+=(k-m-i*(d-u))*c,o=i*(1-u),s&&(m=Math.round(m),o=Math.round(o));var $=ms(d).map(function(M){return m+i*M});return n(p?$.reverse():$)}return t.domain=function(d){return arguments.length?(e(d),f()):e()},t.range=function(d){return arguments.length?([r,a]=d,r=+r,a=+a,f()):[r,a]},t.rangeRound=function(d){return[r,a]=d,r=+r,a=+a,s=!0,f()},t.bandwidth=function(){return o},t.step=function(){return i},t.round=function(d){return arguments.length?(s=!!d,f()):s},t.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},t.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},t.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},t.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},t.copy=function(){return No(e(),[r,a]).round(s).paddingInner(u).paddingOuter(l).align(c)},ka.apply(f(),arguments)}function bf(t){return function(){return t}}function Cf(t){return+t}var vi=[0,1];function Ie(t){return t}function oa(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:bf(isNaN(e)?NaN:.5)}function kf(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Mf(t,e,n){var r=t[0],a=t[1],i=e[0],o=e[1];return a<r?(r=oa(a,r),i=n(o,i)):(r=oa(r,a),i=n(i,o)),function(s){return i(r(s))}}function $f(t,e,n){var r=Math.min(t.length,e.length)-1,a=new Array(r),i=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)a[o]=oa(t[o],t[o+1]),i[o]=n(e[o],e[o+1]);return function(s){var u=is(t,s,1,r)-1;return i[u](a[u](s))}}function Sf(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ef(){var t=vi,e=vi,n=ga,r,a,i,o=Ie,s,u,l;function c(){var d=Math.min(t.length,e.length);return o!==Ie&&(o=kf(t[0],t[d-1])),s=d>2?$f:Mf,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?i:(u||(u=s(t.map(r),e,n)))(r(o(d)))}return f.invert=function(d){return o(a((l||(l=s(e,t.map(r),Zt)))(d)))},f.domain=function(d){return arguments.length?(t=Array.from(d,Cf),c()):t.slice()},f.range=function(d){return arguments.length?(e=Array.from(d),c()):e.slice()},f.rangeRound=function(d){return e=Array.from(d),n=Ec,c()},f.clamp=function(d){return arguments.length?(o=d?!0:Ie,c()):o!==Ie},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(i=d,f):i},function(d,p){return r=d,a=p,c()}}function Af(){return Ef()(Ie,Ie)}function Tf(t,e,n,r){var a=ps(t,e,n),i;switch(r=Yn(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(i=od(a,o))&&(r.precision=i),co(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=sd(a,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=id(a))&&(r.precision=i-(r.type==="%")*2);break}}return fr(r)}function Nf(t){var e=t.domain;return t.ticks=function(n){var r=e();return hs(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var a=e();return Tf(a[0],a[a.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),a=0,i=r.length-1,o=r[a],s=r[i],u,l,c=10;for(s<o&&(l=o,o=s,s=l,l=a,a=i,i=l);c-- >0;){if(l=Sr(o,s,n),l===u)return r[a]=o,r[i]=s,e(r);if(l>0)o=Math.floor(o/l)*l,s=Math.ceil(s/l)*l;else if(l<0)o=Math.ceil(o*l)/l,s=Math.floor(s*l)/l;else break;u=l}return t},t}function ee(){var t=Af();return t.copy=function(){return Sf(t,ee())},ka.apply(t,arguments),Nf(t)}function $t(t){return function(){return t}}const _i=Math.abs,Rt=Math.atan2,we=Math.cos,Pf=Math.max,wr=Math.min,ae=Math.sin,Oe=Math.sqrt,Ft=1e-12,on=Math.PI,sr=on/2,Nn=2*on;function Rf(t){return t>1?0:t<-1?on:Math.acos(t)}function xi(t){return t>=1?sr:t<=-1?-sr:Math.asin(t)}function Po(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new ju(e)}function If(t){return t.innerRadius}function Of(t){return t.outerRadius}function Df(t){return t.startAngle}function Hf(t){return t.endAngle}function Lf(t){return t&&t.padAngle}function zf(t,e,n,r,a,i,o,s){var u=n-t,l=r-e,c=o-a,f=s-i,d=f*u-c*l;if(!(d*d<Ft))return d=(c*(e-i)-f*(t-a))/d,[t+d*u,e+d*l]}function wn(t,e,n,r,a,i,o){var s=t-n,u=e-r,l=(o?i:-i)/Oe(s*s+u*u),c=l*u,f=-l*s,d=t+c,p=e+f,m=n+c,k=r+f,$=(d+m)/2,M=(p+k)/2,S=m-d,E=k-p,x=S*S+E*E,N=a-i,I=d*k-m*p,H=(E<0?-1:1)*Oe(Pf(0,N*N*x-I*I)),G=(I*E-S*H)/x,T=(-I*S-E*H)/x,O=(I*E+S*H)/x,R=(-I*S+E*H)/x,v=G-$,A=T-M,h=O-$,g=R-M;return v*v+A*A>h*h+g*g&&(G=O,T=R),{cx:G,cy:T,x01:-c,y01:-f,x11:G*(a/N-1),y11:T*(a/N-1)}}function sn(){var t=If,e=Of,n=$t(0),r=null,a=Df,i=Hf,o=Lf,s=null,u=Po(l);function l(){var c,f,d=+t.apply(this,arguments),p=+e.apply(this,arguments),m=a.apply(this,arguments)-sr,k=i.apply(this,arguments)-sr,$=_i(k-m),M=k>m;if(s||(s=c=u()),p<d&&(f=p,p=d,d=f),!(p>Ft))s.moveTo(0,0);else if($>Nn-Ft)s.moveTo(p*we(m),p*ae(m)),s.arc(0,0,p,m,k,!M),d>Ft&&(s.moveTo(d*we(k),d*ae(k)),s.arc(0,0,d,k,m,M));else{var S=m,E=k,x=m,N=k,I=$,H=$,G=o.apply(this,arguments)/2,T=G>Ft&&(r?+r.apply(this,arguments):Oe(d*d+p*p)),O=wr(_i(p-d)/2,+n.apply(this,arguments)),R=O,v=O,A,h;if(T>Ft){var g=xi(T/d*ae(G)),y=xi(T/p*ae(G));(I-=g*2)>Ft?(g*=M?1:-1,x+=g,N-=g):(I=0,x=N=(m+k)/2),(H-=y*2)>Ft?(y*=M?1:-1,S+=y,E-=y):(H=0,S=E=(m+k)/2)}var _=p*we(S),b=p*ae(S),w=d*we(N),P=d*ae(N);if(O>Ft){var D=p*we(E),L=p*ae(E),B=d*we(x),Y=d*ae(x),U;if($<on)if(U=zf(_,b,B,Y,D,L,w,P)){var Z=_-U[0],Q=b-U[1],et=D-U[0],dt=L-U[1],gt=1/ae(Rf((Z*et+Q*dt)/(Oe(Z*Z+Q*Q)*Oe(et*et+dt*dt)))/2),Mt=Oe(U[0]*U[0]+U[1]*U[1]);R=wr(O,(d-Mt)/(gt-1)),v=wr(O,(p-Mt)/(gt+1))}else R=v=0}H>Ft?v>Ft?(A=wn(B,Y,_,b,p,v,M),h=wn(D,L,w,P,p,v,M),s.moveTo(A.cx+A.x01,A.cy+A.y01),v<O?s.arc(A.cx,A.cy,v,Rt(A.y01,A.x01),Rt(h.y01,h.x01),!M):(s.arc(A.cx,A.cy,v,Rt(A.y01,A.x01),Rt(A.y11,A.x11),!M),s.arc(0,0,p,Rt(A.cy+A.y11,A.cx+A.x11),Rt(h.cy+h.y11,h.cx+h.x11),!M),s.arc(h.cx,h.cy,v,Rt(h.y11,h.x11),Rt(h.y01,h.x01),!M))):(s.moveTo(_,b),s.arc(0,0,p,S,E,!M)):s.moveTo(_,b),!(d>Ft)||!(I>Ft)?s.lineTo(w,P):R>Ft?(A=wn(w,P,D,L,d,-R,M),h=wn(_,b,B,Y,d,-R,M),s.lineTo(A.cx+A.x01,A.cy+A.y01),R<O?s.arc(A.cx,A.cy,R,Rt(A.y01,A.x01),Rt(h.y01,h.x01),!M):(s.arc(A.cx,A.cy,R,Rt(A.y01,A.x01),Rt(A.y11,A.x11),!M),s.arc(0,0,d,Rt(A.cy+A.y11,A.cx+A.x11),Rt(h.cy+h.y11,h.cx+h.x11),M),s.arc(h.cx,h.cy,R,Rt(h.y11,h.x11),Rt(h.y01,h.x01),!M))):s.arc(0,0,d,N,x,M)}if(s.closePath(),c)return s=null,c+""||null}return l.centroid=function(){var c=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,f=(+a.apply(this,arguments)+ +i.apply(this,arguments))/2-on/2;return[we(f)*c,ae(f)*c]},l.innerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:$t(+c),l):t},l.outerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:$t(+c),l):e},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:$t(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:$t(+c),l):r},l.startAngle=function(c){return arguments.length?(a=typeof c=="function"?c:$t(+c),l):a},l.endAngle=function(c){return arguments.length?(i=typeof c=="function"?c:$t(+c),l):i},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:$t(+c),l):o},l.context=function(c){return arguments.length?(s=c??null,l):s},l}function Ro(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Io(t){this._context=t}Io.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Ff(t){return new Io(t)}function Gf(t){return t[0]}function Bf(t){return t[1]}function ke(t,e){var n=$t(!0),r=null,a=Ff,i=null,o=Po(s);t=typeof t=="function"?t:t===void 0?Gf:$t(t),e=typeof e=="function"?e:e===void 0?Bf:$t(e);function s(u){var l,c=(u=Ro(u)).length,f,d=!1,p;for(r==null&&(i=a(p=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?i.lineStart():i.lineEnd()),d&&i.point(+t(f,l,u),+e(f,l,u));if(p)return i=null,p+""||null}return s.x=function(u){return arguments.length?(t=typeof u=="function"?u:$t(+u),s):t},s.y=function(u){return arguments.length?(e=typeof u=="function"?u:$t(+u),s):e},s.defined=function(u){return arguments.length?(n=typeof u=="function"?u:$t(!!u),s):n},s.curve=function(u){return arguments.length?(a=u,r!=null&&(i=a(r)),s):a},s.context=function(u){return arguments.length?(u==null?r=i=null:i=a(r=u),s):r},s}function Yf(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function Wf(t){return t}function Oo(){var t=Wf,e=Yf,n=null,r=$t(0),a=$t(Nn),i=$t(0);function o(s){var u,l=(s=Ro(s)).length,c,f,d=0,p=new Array(l),m=new Array(l),k=+r.apply(this,arguments),$=Math.min(Nn,Math.max(-Nn,a.apply(this,arguments)-k)),M,S=Math.min(Math.abs($)/l,i.apply(this,arguments)),E=S*($<0?-1:1),x;for(u=0;u<l;++u)(x=m[p[u]=u]=+t(s[u],u,s))>0&&(d+=x);for(e!=null?p.sort(function(N,I){return e(m[N],m[I])}):n!=null&&p.sort(function(N,I){return n(s[N],s[I])}),u=0,f=d?($-l*E)/d:0;u<l;++u,k=M)c=p[u],x=m[c],M=k+(x>0?x*f:0)+E,m[c]={data:s[c],index:u,value:x,startAngle:k,endAngle:M,padAngle:S};return m}return o.value=function(s){return arguments.length?(t=typeof s=="function"?s:$t(+s),o):t},o.sortValues=function(s){return arguments.length?(e=s,n=null,o):e},o.sort=function(s){return arguments.length?(n=s,e=null,o):n},o.startAngle=function(s){return arguments.length?(r=typeof s=="function"?s:$t(+s),o):r},o.endAngle=function(s){return arguments.length?(a=typeof s=="function"?s:$t(+s),o):a},o.padAngle=function(s){return arguments.length?(i=typeof s=="function"?s:$t(+s),o):i},o}function wi(t){return t<0?-1:1}function bi(t,e,n){var r=t._x1-t._x0,a=e-t._x1,i=(t._y1-t._y0)/(r||a<0&&-0),o=(n-t._y1)/(a||r<0&&-0),s=(i*a+o*r)/(r+a);return(wi(i)+wi(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(s))||0}function Ci(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function br(t,e,n){var r=t._x0,a=t._y0,i=t._x1,o=t._y1,s=(i-r)/3;t._context.bezierCurveTo(r+s,a+s*e,i-s,o-s*n,i,o)}function lr(t){this._context=t}lr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:br(this,this._t0,Ci(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,br(this,Ci(this,n=bi(this,t,e)),n);break;default:br(this,this._t0,n=bi(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};Object.create(lr.prototype).point=function(t,e){lr.prototype.point.call(this,e,t)};function Ye(t){return new lr(t)}const bn=t=>()=>t;function Uf(t,{sourceEvent:e,target:n,transform:r,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:a}})}function pe(t,e,n){this.k=t,this.x=e,this.y=n}pe.prototype={constructor:pe,scale:function(t){return t===1?this:new pe(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new pe(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ln=new pe(1,0,0);pe.prototype;function Cr(t){t.stopImmediatePropagation()}function We(t){t.preventDefault(),t.stopImmediatePropagation()}function Vf(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function qf(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function ki(){return this.__zoom||ln}function Xf(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Kf(){return navigator.maxTouchPoints||"ontouchstart"in this}function jf(t,e,n){var r=t.invertX(e[0][0])-n[0][0],a=t.invertX(e[1][0])-n[1][0],i=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(a>r?(r+a)/2:Math.min(0,r)||Math.max(0,a),o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o))}function Do(){var t=Vf,e=qf,n=jf,r=Xf,a=Kf,i=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],s=250,u=Dc,l=ca("start","zoom","end"),c,f,d,p=500,m=150,k=0,$=10;function M(h){h.property("__zoom",ki).on("wheel.zoom",G,{passive:!1}).on("mousedown.zoom",T).on("dblclick.zoom",O).filter(a).on("touchstart.zoom",R).on("touchmove.zoom",v).on("touchend.zoom touchcancel.zoom",A).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}M.transform=function(h,g,y,_){var b=h.selection?h.selection():h;b.property("__zoom",ki),h!==b?N(h,g,y,_):b.interrupt().each(function(){I(this,arguments).event(_).start().zoom(null,typeof g=="function"?g.apply(this,arguments):g).end()})},M.scaleBy=function(h,g,y,_){M.scaleTo(h,function(){var b=this.__zoom.k,w=typeof g=="function"?g.apply(this,arguments):g;return b*w},y,_)},M.scaleTo=function(h,g,y,_){M.transform(h,function(){var b=e.apply(this,arguments),w=this.__zoom,P=y==null?x(b):typeof y=="function"?y.apply(this,arguments):y,D=w.invert(P),L=typeof g=="function"?g.apply(this,arguments):g;return n(E(S(w,L),P,D),b,o)},y,_)},M.translateBy=function(h,g,y,_){M.transform(h,function(){return n(this.__zoom.translate(typeof g=="function"?g.apply(this,arguments):g,typeof y=="function"?y.apply(this,arguments):y),e.apply(this,arguments),o)},null,_)},M.translateTo=function(h,g,y,_,b){M.transform(h,function(){var w=e.apply(this,arguments),P=this.__zoom,D=_==null?x(w):typeof _=="function"?_.apply(this,arguments):_;return n(ln.translate(D[0],D[1]).scale(P.k).translate(typeof g=="function"?-g.apply(this,arguments):-g,typeof y=="function"?-y.apply(this,arguments):-y),w,o)},_,b)};function S(h,g){return g=Math.max(i[0],Math.min(i[1],g)),g===h.k?h:new pe(g,h.x,h.y)}function E(h,g,y){var _=g[0]-y[0]*h.k,b=g[1]-y[1]*h.k;return _===h.x&&b===h.y?h:new pe(h.k,_,b)}function x(h){return[(+h[0][0]+ +h[1][0])/2,(+h[0][1]+ +h[1][1])/2]}function N(h,g,y,_){h.on("start.zoom",function(){I(this,arguments).event(_).start()}).on("interrupt.zoom end.zoom",function(){I(this,arguments).event(_).end()}).tween("zoom",function(){var b=this,w=arguments,P=I(b,w).event(_),D=e.apply(b,w),L=y==null?x(D):typeof y=="function"?y.apply(b,w):y,B=Math.max(D[1][0]-D[0][0],D[1][1]-D[0][1]),Y=b.__zoom,U=typeof g=="function"?g.apply(b,w):g,Z=u(Y.invert(L).concat(B/Y.k),U.invert(L).concat(B/U.k));return function(Q){if(Q===1)Q=U;else{var et=Z(Q),dt=B/et[2];Q=new pe(dt,L[0]-et[0]*dt,L[1]-et[1]*dt)}P.zoom(null,Q)}})}function I(h,g,y){return!y&&h.__zooming||new H(h,g)}function H(h,g){this.that=h,this.args=g,this.active=0,this.sourceEvent=null,this.extent=e.apply(h,g),this.taps=0}H.prototype={event:function(h){return h&&(this.sourceEvent=h),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(h,g){return this.mouse&&h!=="mouse"&&(this.mouse[1]=g.invert(this.mouse[0])),this.touch0&&h!=="touch"&&(this.touch0[1]=g.invert(this.touch0[0])),this.touch1&&h!=="touch"&&(this.touch1[1]=g.invert(this.touch1[0])),this.that.__zoom=g,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(h){var g=at(this.that).datum();l.call(h,this.that,new Uf(h,{sourceEvent:this.sourceEvent,target:M,transform:this.that.__zoom,dispatch:l}),g)}};function G(h,...g){if(!t.apply(this,arguments))return;var y=I(this,g).event(h),_=this.__zoom,b=Math.max(i[0],Math.min(i[1],_.k*Math.pow(2,r.apply(this,arguments)))),w=xe(h);if(y.wheel)(y.mouse[0][0]!==w[0]||y.mouse[0][1]!==w[1])&&(y.mouse[1]=_.invert(y.mouse[0]=w)),clearTimeout(y.wheel);else{if(_.k===b)return;y.mouse=[w,_.invert(w)],An(this),y.start()}We(h),y.wheel=setTimeout(P,m),y.zoom("mouse",n(E(S(_,b),y.mouse[0],y.mouse[1]),y.extent,o));function P(){y.wheel=null,y.end()}}function T(h,...g){if(d||!t.apply(this,arguments))return;var y=h.currentTarget,_=I(this,g,!0).event(h),b=at(h.view).on("mousemove.zoom",L,!0).on("mouseup.zoom",B,!0),w=xe(h,y),P=h.clientX,D=h.clientY;ic(h.view),Cr(h),_.mouse=[w,this.__zoom.invert(w)],An(this),_.start();function L(Y){if(We(Y),!_.moved){var U=Y.clientX-P,Z=Y.clientY-D;_.moved=U*U+Z*Z>k}_.event(Y).zoom("mouse",n(E(_.that.__zoom,_.mouse[0]=xe(Y,y),_.mouse[1]),_.extent,o))}function B(Y){b.on("mousemove.zoom mouseup.zoom",null),oc(Y.view,_.moved),We(Y),_.event(Y).end()}}function O(h,...g){if(t.apply(this,arguments)){var y=this.__zoom,_=xe(h.changedTouches?h.changedTouches[0]:h,this),b=y.invert(_),w=y.k*(h.shiftKey?.5:2),P=n(E(S(y,w),_,b),e.apply(this,g),o);We(h),s>0?at(this).transition().duration(s).call(N,P,_,h):at(this).call(M.transform,P,_,h)}}function R(h,...g){if(t.apply(this,arguments)){var y=h.touches,_=y.length,b=I(this,g,h.changedTouches.length===_).event(h),w,P,D,L;for(Cr(h),P=0;P<_;++P)D=y[P],L=xe(D,this),L=[L,this.__zoom.invert(L),D.identifier],b.touch0?!b.touch1&&b.touch0[2]!==L[2]&&(b.touch1=L,b.taps=0):(b.touch0=L,w=!0,b.taps=1+!!c);c&&(c=clearTimeout(c)),w&&(b.taps<2&&(f=L[0],c=setTimeout(function(){c=null},p)),An(this),b.start())}}function v(h,...g){if(this.__zooming){var y=I(this,g).event(h),_=h.changedTouches,b=_.length,w,P,D,L;for(We(h),w=0;w<b;++w)P=_[w],D=xe(P,this),y.touch0&&y.touch0[2]===P.identifier?y.touch0[0]=D:y.touch1&&y.touch1[2]===P.identifier&&(y.touch1[0]=D);if(P=y.that.__zoom,y.touch1){var B=y.touch0[0],Y=y.touch0[1],U=y.touch1[0],Z=y.touch1[1],Q=(Q=U[0]-B[0])*Q+(Q=U[1]-B[1])*Q,et=(et=Z[0]-Y[0])*et+(et=Z[1]-Y[1])*et;P=S(P,Math.sqrt(Q/et)),D=[(B[0]+U[0])/2,(B[1]+U[1])/2],L=[(Y[0]+Z[0])/2,(Y[1]+Z[1])/2]}else if(y.touch0)D=y.touch0[0],L=y.touch0[1];else return;y.zoom("touch",n(E(P,D,L),y.extent,o))}}function A(h,...g){if(this.__zooming){var y=I(this,g).event(h),_=h.changedTouches,b=_.length,w,P;for(Cr(h),d&&clearTimeout(d),d=setTimeout(function(){d=null},p),w=0;w<b;++w)P=_[w],y.touch0&&y.touch0[2]===P.identifier?delete y.touch0:y.touch1&&y.touch1[2]===P.identifier&&delete y.touch1;if(y.touch1&&!y.touch0&&(y.touch0=y.touch1,delete y.touch1),y.touch0)y.touch0[1]=this.__zoom.invert(y.touch0[0]);else if(y.end(),y.taps===2&&(P=xe(P,this),Math.hypot(f[0]-P[0],f[1]-P[1])<$)){var D=at(this).on("dblclick.zoom");D&&D.apply(this,arguments)}}}return M.wheelDelta=function(h){return arguments.length?(r=typeof h=="function"?h:bn(+h),M):r},M.filter=function(h){return arguments.length?(t=typeof h=="function"?h:bn(!!h),M):t},M.touchable=function(h){return arguments.length?(a=typeof h=="function"?h:bn(!!h),M):a},M.extent=function(h){return arguments.length?(e=typeof h=="function"?h:bn([[+h[0][0],+h[0][1]],[+h[1][0],+h[1][1]]]),M):e},M.scaleExtent=function(h){return arguments.length?(i[0]=+h[0],i[1]=+h[1],M):[i[0],i[1]]},M.translateExtent=function(h){return arguments.length?(o[0][0]=+h[0][0],o[1][0]=+h[1][0],o[0][1]=+h[0][1],o[1][1]=+h[1][1],M):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},M.constrain=function(h){return arguments.length?(n=h,M):n},M.duration=function(h){return arguments.length?(s=+h,M):s},M.interpolate=function(h){return arguments.length?(u=h,M):u},M.on=function(){var h=l.on.apply(l,arguments);return h===l?M:h},M.clickDistance=function(h){return arguments.length?(k=(h=+h)*h,M):Math.sqrt(k)},M.tapDistance=function(h){return arguments.length?($=+h,M):$},M}const Zf={__name:"SunburstChart",props:{data:{type:Object,default:()=>({})},year:{type:[String,Number],default:null},country:{type:Object,default:null}},setup(t){const e=t,n=it(null),r=it(null),a={top:60,right:20,bottom:20,left:60},i=it(500),o=it(500);function s(f,d){return Math.min(f,d)/2-Math.max(a.top,a.right,a.bottom,a.left)}const u={residential:"#63b3df",service:"#76d76b",industry:"#898989",transport:"#ffb56b"};function l(){if(!e.data||!e.data.children||e.data.children.length===0)return;const f=i.value,d=o.value,p=s(f,d),m=at(n.value);m.selectAll("*").remove(),m.attr("width",f).attr("height",d).attr("viewBox",`0 0 ${f} ${d}`);const k=m.append("g").attr("transform",`translate(${f/2},${d/2})`),$=wf().size([2*Math.PI,p*1.2]),M=sn().startAngle(x=>x.x0).endAngle(x=>x.x1).innerRadius(x=>x.y0).outerRadius(x=>x.y1),S=Ca(e.data).sum(x=>x.children?0:x.value).sort((x,N)=>N.value-x.value);$(S),cn(S.descendants(),x=>x.depth),On(".tooltip-container").remove();const E=at("body").append("div").attr("class","tooltip-container");k.selectAll("path").data(S.descendants()).enter().append("path").attr("d",M).style("fill",x=>x.depth===2?u[x.parent.data.name.toLowerCase()]:x.depth===1?u[x.data.name.toLowerCase()]:"none").style("stroke","#fff").style("stroke-width","1px").style("cursor","pointer").on("mouseover",function(x,N){at(this).style("opacity",.7),E.style("display","block").html(`
        <div style="font-weight:bold">
          ${N.data.name||"Unknown"}
        </div>
        <div>
          ${(N.value||0).toFixed(2)} PJ
        </div>
      `)}).on("mousemove",function(x){E.style("left",x.pageX+12+"px").style("top",x.pageY-28+"px")}).on("mouseout",function(){at(this).style("opacity",1),E.style("display","none")}),k.selectAll("text").data(S.descendants().filter(x=>x.depth>0&&x.x1-x.x0>.05)).enter().append("text").attr("transform",x=>{const N=(x.x0+x.x1)/2,I=(x.y0+x.y1)/2,H=N*180/Math.PI;return`
      rotate(${H-90})
      translate(${I}, 0)
      rotate(${H<180?0:180})
    `}).attr("text-anchor","middle").attr("dy","0.35em").style("font-size",x=>x.depth===2?"10px":"13px").style("fill","#333").style("font-weight","bold").text(x=>x.data.name.length>15?x.data.name.substring(0,12)+"...":x.data.name)}ne(()=>{Vt(()=>{const f=r.value?r.value.getBoundingClientRect():{width:500},d=Math.max(200,Math.min(f.width,500));i.value=d,o.value=d;const p=new ResizeObserver(m=>{for(const k of m){const $=k.contentRect,M=Math.max(200,Math.min($.width,500));i.value=M,o.value=M,Vt(()=>l())}});r.value&&p.observe(r.value),c.value=p,l()})}),qt(()=>[e.data,e.year,e.country],()=>{Vt(()=>{l()})},{deep:!0});const c=it(null);return ye(()=>{if(c.value)try{c.value.disconnect()}catch{}On(".tooltip-container").remove()}),(f,d)=>(F(),z("div",{class:"chart",ref_key:"containerRef",ref:r,style:{width:"100%"}},[(F(),z("svg",{ref_key:"svgRef",ref:n,preserveAspectRatio:"xMidYMid meet"},null,512))],512))}},Jf={__name:"PieChart",props:{data:{type:Object,default:()=>({})},year:{type:[String,Number],default:null},selectedSector:{type:String,default:"Residential"},country:{type:Object,default:null}},setup(t){const e=t,n=it(null),r=it(null),a=it(500),i=it(500),o={top:60,right:20,bottom:20,left:60},s=it(null);function u(f,d){return Math.min(f,d)/2-Math.max(o.top,o.right,o.bottom,o.left)}const l={motor:"rgb(162, 158, 162)",jet:"rgb(109, 151, 214)",lpg:"rgb(240, 220, 120)",electricity:"rgb(99, 179, 223)",heat:"rgb(255, 130, 130)",biofuel:"rgb(144, 210, 125)",gas:"rgb(128, 128, 128)",coal:"rgb(70, 70, 70)",other:"rgb(150, 180, 220)","Oil and oil products":"rgb(236, 154, 111)","Heavy fuel oil":"rgb(139, 99, 11)",diesel:"rgb(205, 149, 88)"};function c(){const f=e.data.find(T=>T?.name===e.selectedSector)?.energyType,d=a.value,p=i.value,m=u(d,p);if(!e.data||!f||f.length===0)return;const k=at(n.value);k.selectAll("*").remove(),k.attr("width",d).attr("height",p).attr("viewBox",`0 0 ${d} ${p}`);const $=k.append("g").attr("transform",`translate(${d/2},${p/2})`),M=Oo().value(T=>T.value).sort(null),S=sn().innerRadius(0).outerRadius(m),E=M(f),x=at("body").append("div").attr("class","tooltip-container");$.selectAll("path").data(E).enter().append("path").attr("d",S).style("fill",T=>{const O=Object.entries(l).find(([R])=>T.data.name.toLowerCase().includes(R.toLowerCase()));return O?O[1]:"#fff"}).style("stroke","#fff").style("stroke-width","1px").style("cursor","pointer").on("mouseover",function(T,O){at(this).style("opacity",.7),x.style("display","block").html(`
          <div style="font-weight: bold;">${O.data.name}</div>
          <div>${O.data.value?O.data.value.toFixed(2)+" PJ":""}</div>
        `)}).on("mousemove",function(T){x.style("left",T.pageX+12+"px").style("top",T.pageY-28+"px")}).on("mouseout",function(){at(this).style("opacity",1),x.style("display","none")});const N=sn().innerRadius(m*.7).outerRadius(m*.7),I=m,H=20,G=[];$.selectAll("text").data(E).enter().append("text").attr("class","pie-label").attr("transform",function(T,O){const[R,v]=N.centroid(T),A=Math.atan2(v,R);let h=I+H,g=0,y,_;for(;g<5&&(y=h*Math.cos(A),_=h*Math.sin(A),!!G.some(w=>Math.hypot(w.x-y,w.y-_)<25));)h+=12,g++;return G.push({x:y,y:_}),`translate(${y}, ${_})`}).attr("text-anchor",T=>{const[O,R]=N.centroid(T);return O>=0?"start":"end"}).attr("dy","0.35em").style("font-size","15px").text(T=>T.data.name),$.selectAll("polyline").data(E).enter().append("polyline").attr("points",function(T,O){const R=G[O];if(!R)return"";const[v,A]=N.centroid(T),h=Math.atan2(A,v),g=I*Math.cos(h),y=I*Math.sin(h),_=(I+H/2)*Math.cos(h),b=(I+H/2)*Math.sin(h),w=5,P=R.x-w*Math.cos(h),D=R.y-w*Math.sin(h);return[[g,y],[_,b],[P,D]]}).style("fill","none").style("stroke","black").style("stroke-width","1")}return ne(()=>{Vt(()=>{const f=r.value?r.value.getBoundingClientRect():{width:500},d=Math.max(200,Math.min(f.width,400));a.value=d*1.5,i.value=d*.8;const p=new ResizeObserver(m=>{for(const k of m){const $=k.contentRect,M=Math.max(200,Math.min($.width,400));a.value=M*1.5,i.value=M*.8,Vt(()=>c())}});r.value&&p.observe(r.value),s.value=p,c()})}),qt(()=>[e.data,e.year,e.selectedSector,e.country],()=>{Vt(()=>{c()})},{deep:!0}),ye(()=>{if(s.value)try{s.value.disconnect()}catch{}On(".tooltip-container").remove()}),(f,d)=>(F(),z("div",{class:"chart",ref_key:"containerRef",ref:r,style:{width:"100%"}},[(F(),z("svg",{ref_key:"svgRef",ref:n,preserveAspectRatio:"xMidYMid meet"},null,512))],512))}},Qf={id:"consumption",class:"page-section"},t0={class:"section-container"},e0={key:0,class:"no-data"},n0={key:1,class:"loading"},r0={key:2,class:"error"},a0={key:3,class:"charts-container"},i0={class:"section-container"},o0={key:0,class:"no-data"},s0={key:1,class:"loading"},l0={key:2,class:"error"},c0={key:3,class:"charts-container"},u0={class:"interactive-graphic"},d0={class:"interactive-image-container"},f0={__name:"Consumption",setup(t){const e=me(),n=it("Residential"),r=tt(()=>e.sunburstData.name?.length>0&&e.pieChartData[0]);return(a,i)=>(F(),z("section",Qf,[i[9]||(i[9]=C("h2",null,"My energy consumption",-1)),C("div",t0,[r.value?j(e).isLoading?(F(),z("div",n0,"Loading energy data...")):j(e).error?(F(),z("div",r0,ct(j(e).error),1)):(F(),z("div",a0,[kt(Zf,{data:j(e).sunburstData,year:j(e).selectedYear,country:j(e).selectedCountry},null,8,["data","year","country"])])):(F(),z("div",e0,[...i[5]||(i[5]=[C("span",null,"No consumption data available for this configuration.",-1)])])),i[6]||(i[6]=C("div",{class:"text-container"},[C("p",null," The sunburst diagram on the left shows how energy consumption is distributed across sectors and activities over the past year. It shows that the majority of the energy is beeing used for Space Heating and Cars. Within the transport sector, cars account for 51% of total energy use, reflecting their widespread daily use. Air travel, while highly energy-intensive per trip, represents only 4% of total transport energy consumption. ")],-1))]),C("div",i0,[r.value?j(e).isLoading?(F(),z("div",s0,"Loading energy data...")):j(e).error?(F(),z("div",l0,ct(j(e).error),1)):(F(),z("div",c0,[C("div",u0,[C("img",{src:jo,alt:"Energy Consumption Background",style:{width:"100%",cursor:"pointer"},onClick:i[0]||(i[0]=o=>n.value="Residential"),class:"bg-image"}),C("div",d0,[C("img",{src:Zo,alt:"Energy Consumption Service",style:{width:"20%",cursor:"pointer"},onClick:i[1]||(i[1]=o=>n.value="Service"),class:Ht([{active:n.value==="Service"},"interactive-image svg-glow"])},null,2),C("img",{src:Jo,alt:"Energy Consumption Residential",style:{width:"15%",cursor:"pointer"},onClick:i[2]||(i[2]=o=>n.value="Residential"),class:Ht([{active:n.value==="Residential"},"interactive-image svg-glow"])},null,2),C("img",{src:Qo,alt:"Energy Consumption Transport",style:{width:"20%",cursor:"pointer"},onClick:i[3]||(i[3]=o=>n.value="Transport"),class:Ht([{active:n.value==="Transport"},"interactive-image svg-glow"])},null,2),C("img",{src:ts,alt:"Energy Consumption Industry",style:{width:"30%",cursor:"pointer"},onClick:i[4]||(i[4]=o=>n.value="Industry"),class:Ht([{active:n.value==="Industry"},"interactive-image svg-glow"])},null,2)])]),kt(Jf,{data:j(e).pieChartData,year:j(e).selectedYear,country:j(e).selectedCountry,selectedSector:n.value},null,8,["data","year","country","selectedSector"])])):(F(),z("div",o0,[...i[7]||(i[7]=[C("span",null,"No consumption data available for this configuration.",-1)])])),i[8]||(i[8]=C("div",{class:"text-container"},[C("p",null," This visualization shows how different energy sources are used across sectors. It highlights that sectors such as transport and industry still rely heavily on fossil fuels, while electricity and renewable sources play a larger role in residential and service sectors. These structural differences strongly influence how easily each sector can transition to low-carbon energy systems. "),C("p",null,[Bt(" The visualization below shows which "),C("strong",null,"energy sources"),Bt(" are most commonly used in each sector. Different sectors rely on distinct energy carriers depending on their technical requirements: transport tends to depend on oil-based fuels, while residential and service sectors use a higher share of electricity and heat. ")])],-1))])]))}},h0=At(f0,[["__scopeId","data-v-ed61109c"]]),p0={class:"chart-header"},g0={class:"kpi"},y0={key:0},m0={key:0,class:"kpi-value"},v0={key:1,class:"kpi-value"},_0={key:1},x0={key:0,class:"kpi-value"},w0={key:1,class:"kpi-value"},b0={key:2,class:"kpi-sub"},C0=["aria-label"],k0=300,M0={__name:"PricesFocusContext",props:{data:{type:Array,default:()=>[]},focusYear:{type:[Number,null],default:null},series:{type:String,default:"energy"},view:{type:String,default:"annual"},width:{type:Number,default:null},height:{type:Number,default:320},activeSeries:{type:String,default:"energy"}},emits:["update:focusYear","rangeChange","update:series"],setup(t,{emit:e}){const n=t,r=e,a=it(null),i=it(null),o=it(null);let s=null,u=null,l=null,c=null,f=null;const d={top:20,right:14,bottom:40,left:56},p=tt(()=>(n.data||[]).slice().sort((T,O)=>T.year-O.year)),m=tt(()=>p.value.map(T=>T.year)),k=tt(()=>p.value.map(T=>T.electricity));function $(T){if(!Array.isArray(T))return T==null?null:Number(T);const O=T.filter(R=>R!=null).map(Number);return O.length?O.reduce((R,v)=>R+v,0)/O.length:null}const M=tt(()=>p.value.map(T=>$(T.CPI0450))),S=tt(()=>p.value.length?p.value[p.value.length-1]:null),E=tt(()=>{if(n.focusYear)return p.value.find(T=>T.year===n.focusYear)||S.value;if(n.activeSeries==="electricity"){for(let T=p.value.length-1;T>=0;T--){const O=p.value[T];if(O&&O.electricity!=null)return O}return S.value}return S.value}),x=tt(()=>S.value?`Electricity price ${S.value} US cents per kilowatt hour in ${S.year}. Use controls to zoom and focus.`:"No price data available"),N=it(500),I=it(500);function H(){if(!i.value)return;at(i.value).selectAll("*").remove();const T=N.value||Math.max(420,(a.value?.clientWidth||720)-0),O=I.value,R=T-d.left-d.right,v=O-d.top-d.bottom-12;s=at(i.value).append("svg").attr("width",T).attr("height",O).attr("viewBox",`0 0 ${T} ${O}`).attr("preserveAspectRatio","xMidYMid meet");const A=s.append("g").attr("class","main").attr("transform",`translate(${d.left},${d.top})`),h=ee().domain(os(m.value.length?m.value:[new Date().getFullYear()-5,new Date().getFullYear()])).range([0,R]).nice();function g(X,K=0,nt=1){const rt=(X||[]).filter(q=>q!=null&&Number.isFinite(Number(q))).map(Number);return rt.length?[gs(rt),cn(rt)]:[K,nt]}const[y,_]=n.activeSeries==="energy"?g(M.value,0,1):g(k.value,0,1),b=ee().domain([y,_]).nice().range([v,0]);function w(X){const K=Math.floor(X),nt=X-K;if(Math.abs(nt)<1e-6)return fr("d")(K)}const P=Oi(h).ticks(Math.min(10,Math.max(4,m.value.length))).tickFormat(w),D=la(b).ticks(4);A.append("g").attr("class","y axis").call(D);const L=A.append("g").attr("class","x axis").attr("transform",`translate(0,${v})`).call(P),B=n.activeSeries==="energy"?"Energy CPI (index)":"US cents / kWh";A.append("text").attr("class","y-label").attr("transform","rotate(-90)").attr("y",-54).attr("x",-v/2).attr("dy","1em").style("text-anchor","middle").text(B);function Y(X){const K=[];return X.forEach(nt=>{const rt=nt.CPI0450;if(Array.isArray(rt))for(let q=0;q<rt.length;q++)K.push({year:nt.year+q/4,qIndex:q+1,value:Number(rt[q])})}),K}function U(X){return n.activeSeries==="electricity"?ke().defined(K=>K.electricity!=null).x(K=>X(K.year)).y(K=>b(K.electricity)).curve(Ye):ke().defined(K=>$(K.CPI0450)!=null).x(K=>X(K.year)).y(K=>b($(K.CPI0450))).curve(Ye)}const Z=A.append("path").attr("class","line main-line").attr("fill","none"),Q=A.append("path").attr("class","line annual-line"),et=A.append("path").attr("class","line quarterly-line"),dt=A.append("g").attr("class","points"),gt=A.append("g").attr("class","cpi-quarter"),Mt=A.append("g").attr("class","focused-annual");function Tt(X,K=!1){const nt=U(X);if(n.activeSeries==="electricity"){Z.attr("stroke","#2c7be5").attr("stroke-width",2).attr("opacity",1),Q.attr("stroke","#ffb86b").attr("stroke-width",2).attr("fill","none").datum(p.value).attr("d",ke().defined(W=>$(W.CPI0450)!=null).x(W=>X(W.year)).y(W=>b($(W.CPI0450))).curve(Ye)),Z.datum(p.value).attr("d",nt);const rt=Z.node();if((rt&&rt.getTotalLength?rt.getTotalLength():0)<2){const W=p.value.filter(ft=>ft.electricity!=null).slice().sort((ft,V)=>ft.year-V.year);let ot=null,ut=null;if(n.focusYear!=null){const ft=W.findIndex(V=>V.year===n.focusYear);ft>=0&&(ot=W[ft],ut=W[ft+1]||W[ft-1]||null)}if(!ot){const ft=X.domain?(X.domain()[0]+X.domain()[1])/2:null,V=W.map(ht=>({d:ht,dist:Math.abs(ht.year-(ft||0))})).sort((ht,st)=>ht.dist-st.dist);ot=V[0]?V[0].d:null,ut=V[1]?V[1].d:V[0]?V[0].d:null}if(ot&&ut){const ft=ke().defined(V=>V&&V.electricity!=null).x(V=>X(V.year)).y(V=>b(V.electricity));Z.datum([ot,ut]).attr("d",ft).attr("stroke-width",3)}}dt.selectAll("circle").data(p.value.filter(W=>W.electricity!=null),W=>W.year).join(W=>W.append("circle").attr("cx",ot=>X(ot.year)).attr("cy",ot=>b(ot.electricity)).attr("r",ot=>n.focusYear===ot.year?6:3.5).attr("fill",ot=>n.focusYear===ot.year?"#ff7b54":"#fff").attr("stroke",ot=>n.focusYear===ot.year?"#ff7b54":"#2c7be5").attr("stroke-width",1.5).style("cursor","pointer").on("click",(ot,ut)=>r("update:focusYear",ut.year)).on("mouseenter",(ot,ut)=>zt(ot,ut)).on("mouseleave",xt),W=>W.call(ot=>ot.attr("cx",ut=>X(ut.year)).attr("cy",ut=>b(ut.electricity)).attr("r",ut=>n.focusYear===ut.year?6:3.5)),W=>W.remove()),gt.selectAll("*").remove()}else if(Z.attr("stroke","#ffb86b").attr("stroke-width",2).attr("stroke-dasharray","3 0"),!K)Z.datum(p.value).attr("d",nt),dt.selectAll("circle").data(p.value.filter(q=>$(q.CPI0450)!=null),q=>q.year).join(q=>q.append("circle").attr("cx",J=>X(J.year)).attr("cy",J=>b($(J.CPI0450))).attr("r",J=>n.focusYear===J.year?5:3).attr("fill","#fff").attr("stroke","#ffb86b").attr("stroke-width",1.25).style("cursor","pointer").on("click",(J,W)=>r("update:focusYear",W.year)).on("mouseenter",(J,W)=>zt(J,W)).on("mouseleave",xt),q=>q.call(J=>J.attr("cx",W=>X(W.year)).attr("cy",W=>b($(W.CPI0450))).attr("r",W=>n.focusYear===W.year?5:3)),q=>q.remove()),gt.selectAll("*").remove();else{const rt=Y(p.value);et.attr("stroke","#ffb86b").attr("stroke-width",1.5).attr("fill","none").datum(rt).attr("d",ke().defined(W=>W.value!=null).x(W=>X(W.year)).y(W=>b(W.value)).curve(Ye));const q=ke().defined(W=>W.value!=null).x(W=>X(W.year)).y(W=>b(W.value)).curve(Ye);Z.datum(rt).attr("d",q),dt.selectAll("*").remove(),gt.selectAll("circle").data(rt,W=>`${W.year}-${W.qIndex}`).join(W=>W.append("circle").attr("cx",ot=>X(ot.year)).attr("cy",ot=>b(ot.value)).attr("r",2.5).attr("fill","#ffb86b").on("mouseenter",(ot,ut)=>Et(ot,ut)).on("mouseleave",xt),W=>W.call(ot=>ot.attr("cx",ut=>X(ut.year)).attr("cy",ut=>b(ut.value))),W=>W.remove())}A.select(".y.axis").call(D),L.call(P.scale(X)),typeof f=="function"&&f(X)}f=function(X){const K=n.focusYear!=null?n.focusYear:S.value&&S.value.year;if(K==null){A.selectAll(".focus-line,.focus-annotation").remove();return}const nt=p.value.find(J=>J.year===K)||null,rt=X(K);if(A.selectAll(".focus-line").data([K]).join("line").attr("class","focus-line").attr("x1",rt).attr("x2",rt).attr("y1",0).attr("y2",v).attr("stroke","#ff7b54").attr("stroke-dasharray","3 3").attr("stroke-width",1),A.selectAll(".focus-annotation").remove(),nt){if(n.activeSeries==="electricity"&&nt.electricity!=null){const J=Math.max(12,b(nt.electricity)-12);A.append("text").attr("x",rt+8).attr("y",J).attr("class","focus-annotation").text(`${nt.electricity} US/kWh  ${nt.year}`)}else if(n.activeSeries==="energy"){const J=$(nt.CPI0450);if(J!=null){const W=Math.min(v-6,b(J)+14);A.append("text").attr("x",rt+8).attr("y",W).attr("class","focus-annotation").style("fill","#8a5b00").text(`${J.toFixed(1)} CPI  ${nt.year}`)}}}if(o.value&&K&&(o.value.textContent=`Chart centered on ${K}`),Mt.selectAll("*").remove(),n.focusYear!=null&&n.activeSeries==="electricity"){const J=p.value.find(W=>W.year===n.focusYear);if(J&&J.electricity!=null){const W=X(J.year),ot=b(J.electricity),ut=Math.abs(X(J.year+1)-X(J.year)),ft=Math.max(6,Math.min(14,ut*.08));Mt.append("circle").attr("cx",W).attr("cy",ot).attr("r",ft).attr("fill","#fff").attr("stroke","#2c7be5").attr("stroke-width",1.75).style("cursor","pointer").on("mouseenter",(V,ht)=>zt(V,J)).on("mouseleave",xt);try{Mt.raise()}catch{}}}},f&&f(h),Tt(h,!1);const Nt=at(a.value).selectAll(".chart-tooltip").data([null]).join("div").attr("class","chart-tooltip").style("position","absolute").style("pointer-events","none").style("opacity",0);function zt(X,K){const nt=a.value.getBoundingClientRect(),rt=$(K.CPI0450);let q=`<div class="tt-year">${K.year}</div>`;n.activeSeries==="electricity"?q+=K.electricity!=null?`<div class="tt-val">${K.electricity} US/kWh</div>`:'<div class="tt-val">No electricity data</div>':q+=rt!=null?`<div class="tt-val">Energy CPI (annual mean): ${rt.toFixed(1)}</div>`:'<div class="tt-val">No CPI data</div>',q+='<div class="tt-hint">Use header toggle to switch series</div>',Nt.style("opacity",1).html(q).style("left",`${X.clientX-nt.left+12}px`).style("top",`${X.clientY-nt.top-12}px`)}function Et(X,K){const nt=a.value.getBoundingClientRect(),rt=Math.floor(K.year),q=K.qIndex||Math.round((K.year-rt)*4)+1,J=Number(K.value),W=`<div class="tt-year">${rt} Q${q}</div><div class="tt-val">Energy CPI: ${Number.isFinite(J)?J.toFixed(2):""}</div><div class="tt-hint">Quarterly detail  use zoom out to return to annual view</div>`;Nt.style("opacity",1).html(W).style("left",`${X.clientX-nt.left+12}px`).style("top",`${X.clientY-nt.top-12}px`)}function xt(){Nt.style("opacity",0)}u=Do().scaleExtent([1,16]).translateExtent([[-50,-100],[R+50,v+100]]).on("zoom",X=>{const K=X.transform.rescaleX(h);l=X.transform;const[nt,rt]=K.domain(),q=n.activeSeries==="energy"&&(rt-nt<=1.5||X.transform.k>=6);let J=[];n.activeSeries==="electricity"?J=p.value.filter(ft=>ft.electricity!=null&&ft.year>=nt&&ft.year<=rt).map(ft=>ft.electricity):q?J=Y(p.value).filter(V=>V.value!=null&&V.year>=nt&&V.year<=rt).map(V=>V.value):J=p.value.filter(ft=>$(ft.CPI0450)!=null&&ft.year>=Math.floor(nt)&&ft.year<=Math.ceil(rt)).map(ft=>$(ft.CPI0450));const[W,ot]=g(J,b.domain()[0],b.domain()[1]),ut=(ot-W)*.08||1;b.domain([Math.max(0,W-ut),ot+ut]).nice(),q?(Q.style("display","none"),et.style("display",null)):(Q.style("display",null),et.style("display","none")),Tt(K,q)}),s.call(u),l?s.call(u.transform,l):l=ln,c=function(X,K={span:null}){if(X==null)return;const nt=K&&Number.isFinite(K.span)&&K.span>0?(function(){const lt=Number(K.span),mt=Math.max(h.domain()[0],X-lt),Pt=Math.min(h.domain()[1],X+lt),St=Math.max(1,h(Pt)-h(mt));return Math.max(1,Math.min(16,R/St))})():l&&l.k?l.k:1,rt=h(X),q=T/2-rt*nt,J=ln.translate(q,0).scale(nt);s.transition().duration(k0).call(u.transform,J),l=J;const W=J.rescaleX(h),[ot,ut]=W.domain(),ft=K&&Number.isFinite(K.span)&&K.span<=2||ut-ot<=1.5||J.k>=6;let V=[];n.activeSeries==="electricity"?V=p.value.filter(lt=>lt.electricity!=null&&lt.year>=ot&&lt.year<=ut).map(lt=>lt.electricity):ft?V=Y(p.value).filter(mt=>mt.value!=null&&mt.year>=ot&&mt.year<=ut).map(mt=>mt.value):V=p.value.filter(lt=>$(lt.CPI0450)!=null&&lt.year>=Math.floor(ot)&&lt.year<=Math.ceil(ut)).map(lt=>$(lt.CPI0450));const[ht,st]=g(V,b.domain()[0],b.domain()[1]),yt=(st-ht)*.08||1;b.domain([Math.max(0,ht-yt),st+yt]).nice();try{Tt(W,ft)}catch{Tt(h,!1)}typeof f=="function"&&f(W),o.value&&(o.value.textContent=`Chart centered on ${X}`)}}ne(()=>{Vt(()=>{const T=a.value?a.value.getBoundingClientRect():{width:500},O=Math.max(200,Math.min(T.width,500));N.value=O,I.value=O;const R=new ResizeObserver(v=>{for(const A of v){const h=A.contentRect,g=Math.max(200,Math.min(h.width,500));N.value=g,I.value=g,Vt(()=>H())}});a.value&&R.observe(a.value),G.value=R,H()}),window.addEventListener("resize",H)}),qt(()=>n.data,()=>{Vt(H)},{deep:!0}),qt(()=>n.focusYear,T=>{T!=null&&setTimeout(()=>{typeof c=="function"&&c(T,{span:2})},0)},{immediate:!0});const G=it(null);return ye(()=>{if(G.value)try{G.value.disconnect()}catch{}On(".tooltip-container").remove()}),(T,O)=>(F(),z("div",{class:"prices-focus-chart",ref_key:"containerRef",ref:a,style:{width:"100%"}},[C("div",p0,[C("div",g0,[E.value&&n.activeSeries==="electricity"?(F(),z("div",y0,[E.value.electricity!=null?(F(),z("div",m0,[Bt(ct(E.value.electricity)+" ",1),O[0]||(O[0]=C("span",{class:"unit"},"US/kWh",-1))])):(F(),z("div",v0,"No electricity data"))])):E.value&&n.activeSeries==="energy"?(F(),z("div",_0,[$(E.value.CPI0450)!=null?(F(),z("div",x0," Energy CPI: "+ct($(E.value.CPI0450).toFixed(1)),1)):(F(),z("div",w0,"No CPI data"))])):ce("",!0),E.value?(F(),z("div",b0,ct(n.focusYear||E.value.year),1)):ce("",!0)])]),C("div",{class:"chart-area",ref_key:"chartRef",ref:i,tabindex:"0",role:"img","aria-label":x.value},null,8,C0),C("div",{class:"sr-only",ref_key:"liveRef",ref:o,"aria-live":"polite"},null,512)],512))}},Mi=At(M0,[["__scopeId","data-v-5ab1a260"]]),$0={id:"costs",class:"page-section"},S0={class:"section-container"},E0={key:0,class:"loading"},A0={key:1,class:"error"},T0={key:0,class:"no-data"},N0={key:1,class:"charts-container"},P0={__name:"Costs",setup(t){const e=me(),n=it("annual");function r(a){a&&e.setSelectedYear(Number(a))}return(a,i)=>(F(),z("section",$0,[i[2]||(i[2]=C("h2",null,"Energy costs",-1)),C("div",S0,[j(e).isLoading?(F(),z("div",E0,"Loading energy data...")):j(e).error?(F(),z("div",A0,ct(j(e).error),1)):(F(),z(te,{key:2},[j(e).pricesLoaded?(F(),z("div",N0,[kt(Mi,{data:j(e).electricitySeries,focusYear:j(e).selectedYear,view:n.value,activeSeries:"energy","onUpdate:focusYear":r},null,8,["data","focusYear","view"]),kt(Mi,{data:j(e).electricitySeries,focusYear:j(e).selectedYear,view:n.value,activeSeries:"electricity","onUpdate:focusYear":r},null,8,["data","focusYear","view"]),i[0]||(i[0]=ue('<div class="chart-footer" data-v-c5629876><small data-v-c5629876>Source: IMF/Eurostat <code data-v-c5629876>energycpiq.csv</code>. Columns: <code data-v-c5629876>country</code>, <code data-v-c5629876>year</code>, <code data-v-c5629876>quarter</code>, CPI series <code data-v-c5629876>CPI0450</code> (Electricity, gas &amp; fuels), <code data-v-c5629876>CPI0451</code> (Electricity), <code data-v-c5629876>CPI0452</code> (Gas), <code data-v-c5629876>CPI0453</code> (Liquid fuels), <code data-v-c5629876>CPI0454</code> (Solid fuels), <code data-v-c5629876>CPI0722</code> (Transport fuels). World Bank <code data-v-c5629876>Electric-Prices-by-Country.csv</code>. Columns: <code data-v-c5629876>Country Name</code>, <code data-v-c5629876>Time</code>, electricity price (US cents/kWh). Missing years are shown explicitly.</small></div>',1))])):(F(),z("div",T0,"Price data not available for this country."))],64)),i[1]||(i[1]=C("p",{class:"text-container"}," Explore electricity prices (US/kWh) and energy CPI for the selected country. Use the brush or mouse to zoom  the selected year from the header will be auto-centered. ",-1))])]))}},R0=At(P0,[["__scopeId","data-v-c5629876"]]),Ho={"008":"AL","020":"AD","040":"AT","056":"BE","070":"BA",100:"BG",112:"BY",191:"HR",196:"CY",203:"CZ",208:"DK",233:"EE",246:"FI",250:"FR",276:"DE",300:"GR",348:"HU",352:"IS",372:"IE",380:"IT",428:"LV",438:"LI",440:"LT",442:"LU",807:"MK",470:"MT",498:"MD",492:"MC",499:"ME",528:"NL",578:"NO",616:"PL",620:"PT",642:"RO",643:"RU",674:"SM",688:"RS",703:"SK",705:"SI",724:"ES",752:"SE",756:"CH",804:"UA",826:"GB",336:"VA","012":"DZ","024":"AO","031":"AZ","032":"AR","036":"AU","048":"BH","076":"BR","096":"BN",124:"CA",156:"CN",170:"CO",178:"CG",180:"CD",218:"EC",818:"EG",226:"GQ",266:"GA",268:"GE",288:"GH",356:"IN",360:"ID",364:"IR",368:"IQ",376:"IL",392:"JP",398:"KZ",400:"JO",414:"KW",422:"LB",434:"LY",458:"MY",484:"MX",504:"MA",508:"MZ",516:"NA",566:"NG",512:"OM",586:"PK",608:"PH",634:"QA",682:"SA",702:"SG",710:"ZA",410:"KR",729:"SD",728:"SS",760:"SY",764:"TH",780:"TT",788:"TN",792:"TR",795:"TM",784:"AE",840:"US",860:"UZ",862:"VE",704:"VN",887:"YE","004":"AF","050":"BD","064":"BT","068":"BO","072":"BW","084":"BZ","090":"SB",104:"MM",108:"BI",116:"KH",120:"CM",132:"CV",140:"CF",144:"LK",148:"TD",152:"CL",158:"TW",174:"KM",188:"CR",192:"CU",204:"BJ",214:"DO",222:"SV",231:"ET",232:"ER",242:"FJ",262:"DJ",270:"GM",275:"PS",292:"GI",296:"KI",308:"GD",320:"GT",324:"GN",328:"GY",332:"HT",340:"HN",344:"HK",384:"CI",388:"JM",404:"KE",408:"KP",417:"KG",418:"LA",426:"LS",430:"LR",446:"MO",450:"MG",454:"MW",462:"MV",466:"ML",478:"MR",480:"MU",496:"MN",524:"NP",540:"NC",548:"VU",554:"NZ",558:"NI",562:"NE",591:"PA",598:"PG",600:"PY",604:"PE",638:"RE",646:"RW",662:"LC",678:"ST",686:"SN",694:"SL",706:"SO",716:"ZW",732:"EH",740:"SR",748:"SZ",762:"TJ",834:"TZ",768:"TG",776:"TO",800:"UG",854:"BF",858:"UY",882:"WS",894:"ZM",926:"XK"},I0=Object.fromEntries(Object.entries(Ho).map(([t,e])=>[e,t])),O0={EL:"GR",UK:"GB"},D0=new Set(["EUR_OTH","AFR_OTH","AME_OTH","ASI_OTH","ASI_NME_OTH","EU27_2020","EA19","EA20","WORLD","TOTAL","OTH","OTHER","UNKNOWN"]);function H0(t){return t?D0.has(t.toUpperCase()):!1}function sa(t){if(!t)return null;const e=t.toUpperCase();return O0[e]||e}function L0(t){if(!t)return null;const e=sa(t);return I0[e]||null}function kr(t){if(!t)return null;const e=String(t).padStart(3,"0");return Ho[e]||null}const $i={AL:"Albania",AD:"Andorra",AT:"Austria",BE:"Belgium",BA:"Bosnia and Herzegovina",BG:"Bulgaria",BY:"Belarus",HR:"Croatia",CY:"Cyprus",CZ:"Czechia",DK:"Denmark",EE:"Estonia",FI:"Finland",FR:"France",DE:"Germany",GR:"Greece",HU:"Hungary",IS:"Iceland",IE:"Ireland",IT:"Italy",LV:"Latvia",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MK:"North Macedonia",MT:"Malta",MD:"Moldova",MC:"Monaco",ME:"Montenegro",NL:"Netherlands",NO:"Norway",PL:"Poland",PT:"Portugal",RO:"Romania",RU:"Russia",SM:"San Marino",RS:"Serbia",SK:"Slovakia",SI:"Slovenia",ES:"Spain",SE:"Sweden",CH:"Switzerland",UA:"Ukraine",GB:"United Kingdom",VA:"Vatican City",XK:"Kosovo",DZ:"Algeria",AO:"Angola",AZ:"Azerbaijan",AR:"Argentina",AU:"Australia",BH:"Bahrain",BR:"Brazil",BN:"Brunei",CA:"Canada",CN:"China",CO:"Colombia",CG:"Congo",CD:"DR Congo",EC:"Ecuador",EG:"Egypt",GQ:"Equatorial Guinea",GA:"Gabon",GE:"Georgia",GH:"Ghana",IN:"India",ID:"Indonesia",IR:"Iran",IQ:"Iraq",IL:"Israel",JP:"Japan",KZ:"Kazakhstan",JO:"Jordan",KW:"Kuwait",LB:"Lebanon",LY:"Libya",MY:"Malaysia",MX:"Mexico",MA:"Morocco",MZ:"Mozambique",NA:"Namibia",NG:"Nigeria",OM:"Oman",PK:"Pakistan",PH:"Philippines",QA:"Qatar",SA:"Saudi Arabia",SG:"Singapore",ZA:"South Africa",KR:"South Korea",SD:"Sudan",SS:"South Sudan",SY:"Syria",TH:"Thailand",TT:"Trinidad and Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",AE:"UAE",US:"United States",UZ:"Uzbekistan",VE:"Venezuela",VN:"Vietnam",YE:"Yemen",AF:"Afghanistan",BD:"Bangladesh",BT:"Bhutan",BO:"Bolivia",BW:"Botswana",BZ:"Belize",SB:"Solomon Islands",MM:"Myanmar",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CV:"Cape Verde",CF:"Central African Republic",LK:"Sri Lanka",TD:"Chad",CL:"Chile",TW:"Taiwan",KM:"Comoros",CR:"Costa Rica",CU:"Cuba",BJ:"Benin",DO:"Dominican Republic",SV:"El Salvador",ET:"Ethiopia",ER:"Eritrea",FJ:"Fiji",DJ:"Djibouti",GM:"Gambia",PS:"Palestine",GI:"Gibraltar",KI:"Kiribati",GD:"Grenada",GT:"Guatemala",GN:"Guinea",GY:"Guyana",HT:"Haiti",HN:"Honduras",HK:"Hong Kong",CI:"Ivory Coast",JM:"Jamaica",KE:"Kenya",KP:"North Korea",KG:"Kyrgyzstan",LA:"Laos",LS:"Lesotho",LR:"Liberia",MO:"Macao",MG:"Madagascar",MW:"Malawi",MV:"Maldives",ML:"Mali",MR:"Mauritania",MU:"Mauritius",MN:"Mongolia",NP:"Nepal",NC:"New Caledonia",VU:"Vanuatu",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",RE:"Reunion",RW:"Rwanda",LC:"Saint Lucia",ST:"Sao Tome and Principe",SN:"Senegal",SL:"Sierra Leone",SO:"Somalia",ZW:"Zimbabwe",EH:"Western Sahara",SR:"Suriname",SZ:"Eswatini",TJ:"Tajikistan",TZ:"Tanzania",TG:"Togo",TO:"Tonga",UG:"Uganda",BF:"Burkina Faso",UY:"Uruguay",WS:"Samoa",ZM:"Zambia"},z0={class:"trading-partners-map"},F0={key:0,class:"no-data"},G0={key:1,class:"map-wrapper"},B0={class:"map-container"},Y0={class:"volume-summary"},W0={class:"volume-grid"},U0=["onClick"],V0={class:"checkbox-icon"},q0={class:"volume-value"},X0={class:"volume-unit"},K0={class:"checkbox-icon"},j0={class:"volume-value"},Z0={class:"volume-unit"},J0={class:"map-controls"},Q0={class:"cutoff-slider"},th={class:"cutoff-value"},eh={__name:"TradingPartnersMap",props:{tradeData:{type:Object,default:null},country:{type:Object,default:null},year:{type:Number,default:null}},setup(t){function e(h,g){return typeof g=="string"&&(g=h.objects[g]),g.type==="GeometryCollection"?{type:"FeatureCollection",features:g.geometries.map(y=>n(h,y))}:n(h,g)}function n(h,g){const y=g.id,_=g.bbox,b=g.properties||{},w=r(h,g);return y==null&&_==null?{type:"Feature",properties:b,geometry:w}:_==null?{type:"Feature",id:y,properties:b,geometry:w}:{type:"Feature",id:y,bbox:_,properties:b,geometry:w}}function r(h,g){const y=g.type;if(y==="GeometryCollection")return{type:y,geometries:g.geometries.map(b=>r(h,b))};if(y==="Point")return{type:y,coordinates:a(h,g.coordinates)};if(y==="MultiPoint")return{type:y,coordinates:g.coordinates.map(b=>a(h,b))};const _=g.arcs;return y==="LineString"?{type:y,coordinates:i(h,_)}:y==="MultiLineString"||y==="Polygon"?{type:y,coordinates:_.map(b=>i(h,b))}:y==="MultiPolygon"?{type:y,coordinates:_.map(b=>b.map(w=>i(h,w)))}:null}function a(h,g){const y=h.transform;if(!y)return g.slice();const _=y.scale,b=y.translate;return[g[0]*_[0]+b[0],g[1]*_[1]+b[1]]}function i(h,g){const y=[],_=h.arcs,b=h.transform;for(let w=0;w<g.length;w++){let P=g[w];const D=P<0;D&&(P=~P);const L=_[P],B=[];let Y=0,U=0;for(let Q=0;Q<L.length;Q++){Y+=L[Q][0],U+=L[Q][1];const et=b?[Y*b.scale[0]+b.translate[0],U*b.scale[1]+b.translate[1]]:[Y,U];B.push(et)}D&&B.reverse();const Z=w===0?0:1;for(let Q=Z;Q<B.length;Q++)y.push(B[Q])}return y}const o=t,s=[{code:"SFF",label:"Coal",unit:"thousand tonnes",color:"#8b4513"},{code:"OIL",label:"Oil",unit:"thousand tonnes",color:"#1a1a1a"},{code:"GAS",label:"Gas",unit:"TJ",color:"#2980b9"},{code:"BIO",label:"Biofuels",unit:"thousand tonnes",color:"#27ae60"},{code:"EH",label:"Electricity",unit:"GWh",color:"#f1c40f"}],u=it(new Set(["OIL","GAS","EH"])),l=it(new Set(["imports"])),c=it(3),f=it(null);let d=null,p=null,m=null,k=null;function $(){!f.value||!k||(m=null,T())}function M(h){u.value.has(h)?(u.value.delete(h),u.value=new Set(u.value)):(u.value.add(h),u.value=new Set(u.value))}function S(h){l.value.has(h)?(l.value.delete(h),l.value=new Set(l.value)):(l.value.add(h),l.value=new Set(l.value))}function E(h,g){return(h==="imports"?o.tradeData?.imports?.total_by_type:o.tradeData?.exports?.total_by_type)?.[g]?.value??null}const x=tt(()=>o.tradeData?.imports||o.tradeData?.exports);function N(h){return h==null?"N/A":String(Math.round(h)).replace(/\B(?=(\d{3})+(?!\d))/g," ")}function I(h){return H0(h)}function H(h){const g=h==="imports"?o.tradeData?.imports:o.tradeData?.exports;if(!g?.partners_by_type)return[];const y=[];for(const _ of u.value){const b=g.partners_by_type[_];if(!b)continue;const w=s.find(D=>D.code===_),P=w?.color||"#666";for(const D of b){if(!D.share_pct||D.share_pct<c.value||I(D.geo))continue;const L=sa(D.geo);y.push({partnerGeo:L,partnerName:$i[L]||D.name||L,value:D.value,sharePercent:D.share_pct,color:P,typeCode:_,typeName:w?.label||_,direction:h})}}return y}async function G(){if(p)return p;try{return p=await(await fetch("/MyEnergyProfile/data/countries-110m.json")).json(),p}catch(h){return console.error("Failed to load world map data:",h),null}}async function T(){if(!f.value||!x.value)return;at(f.value).selectAll("*").remove();const h=await G();if(!h){at(f.value).append("div").attr("class","map-error").text("Failed to load map data");return}const g=f.value,y=g.clientWidth||600,_=Math.min(y,400),b=at(g).append("svg").attr("width",y).attr("height",_).attr("viewBox",`0 0 ${y} ${_}`).style("cursor","grab"),w=b.append("defs"),P=b.append("g").attr("class","map-group"),D=Math.max(y,_)*.5;k=Do().scaleExtent([1,8]).translateExtent([[-D,-D],[y+D,_+D]]).on("zoom",V=>{P.attr("transform",V.transform),m=V.transform}).on("start",()=>{b.style("cursor","grabbing")}).on("end",()=>{b.style("cursor","grab")}),b.call(k);const L={imports:"#e53935",exports:"#43a047"};for(const V of s)for(const ht of Object.keys(L)){const st=L[ht];w.append("marker").attr("id",`arrow-${V.code}-${ht}`).attr("viewBox","0 0 10 10").attr("refX",0).attr("refY",5).attr("markerWidth",3).attr("markerHeight",4).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 0 1 L 3 5 L 0 9 z").attr("fill",V.color).attr("fill-opacity",.6).attr("stroke",st).attr("stroke-opacity",.5).attr("stroke-width",.5)}const B=e(h,h.objects.countries),Y=Zd().fitSize([y,_],B),U=zd().projection(Y),Z=sa(o.country?.code),Q=Z?L0(Z):null,et=l.value.has("imports")?H("imports"):[],dt=l.value.has("exports")?H("exports"):[],gt=[...et,...dt],Mt=new Set(gt.map(V=>V.partnerGeo));function Tt(V,ht=.82){const st=ve(V);if(!st)return"#e0e8f0";const yt=ji(st);return yt.l=ht,yt.s=Math.min(yt.s,.5),yt.formatHex()}const Nt=new Map;for(const V of Mt){const ht=gt.filter(st=>st.partnerGeo===V);if(ht.length>0){const st=new Map;for(const St of ht){const Kt=st.get(St.typeCode)||{color:St.color,share:0};Kt.share+=St.sharePercent||0,st.set(St.typeCode,Kt)}const yt=Array.from(st.values()).sort((St,Kt)=>Kt.share-St.share).slice(0,5),lt=yt.reduce((St,Kt)=>St+Kt.share,0);let mt=0;const Pt=[];for(const St of yt){const Kt=St.share/lt*100;Pt.push({color:Tt(St.color),start:mt,end:mt+Kt}),mt+=Kt}Nt.set(V,Pt)}}for(const[V,ht]of Nt){const st=w.append("linearGradient").attr("id",`partner-fill-${V}`).attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","100%");for(const yt of ht)st.append("stop").attr("offset",`${yt.start}%`).attr("stop-color",yt.color),st.append("stop").attr("offset",`${yt.end}%`).attr("stop-color",yt.color)}P.append("g").attr("class","countries").selectAll("path").data(B.features).join("path").attr("d",U).attr("fill",V=>{const ht=String(V.id).padStart(3,"0"),st=kr(ht);return Q&&ht===Q?"#2c3e50":st&&Mt.has(st)?Nt.has(st)?`url(#partner-fill-${st})`:"#e0e8f0":"#f0f0f0"}).attr("stroke","#999").attr("stroke-width",.5).on("mouseenter",function(V,ht){const st=String(ht.id).padStart(3,"0"),yt=kr(st),lt=ht.properties?.name||$i[yt]||yt,mt=yt&&Mt.has(yt),Pt=Q&&st===Q;(Pt||mt)&&at(this).attr("stroke","#333").attr("stroke-width",1.5),R(V,lt,yt,Pt,mt,et,dt)}).on("mouseleave",function(){at(this).attr("stroke","#999").attr("stroke-width",.5),A()});const Et={},xt={};B.features.forEach(V=>{const ht=String(V.id).padStart(3,"0"),st=kr(ht);if(st){const yt=yd(V);if(yt&&!isNaN(yt[0])&&!isNaN(yt[1])){Et[st]=Y(yt);const lt=U.bounds(V),mt=lt[1][0]-lt[0][0],Pt=lt[1][1]-lt[0][1];xt[st]=Math.min(mt,Pt)/2}}});const X={FR:[2.5,46.5],NL:[5.3,52.2],DK:[9.5,56],PT:[-8,39.5],ES:[-3.5,40],US:[-98,39.5],RU:[40,56],NO:[9,62]};for(const[V,ht]of Object.entries(X)){const st=Y(ht);st&&(Et[V]=st)}const K={SG:[103.8,1.35],HK:[114.17,22.32],MO:[113.55,22.2],GI:[-5.35,36.14],MT:[14.5,35.9],LU:[6.13,49.61],AD:[1.52,42.51],MC:[7.42,43.73],SM:[12.46,43.94],VA:[12.45,41.9],LI:[9.55,47.16],BH:[50.55,26.07]};for(const[V,ht]of Object.entries(K))if(!Et[V]){const st=Y(ht);st&&(Et[V]=st)}const nt=Z?Et[Z]:null,rt=2.5;let q,J;if(nt)q=nt[0],J=nt[1];else{const V=Y([10,50]);q=V[0],J=V[1]}const W=y/2-q*rt,ot=_/2-J*rt,ut=ln.translate(W,ot).scale(rt);if(b.on("dblclick.zoom",null),b.on("dblclick",()=>{b.transition().duration(300).call(k.transform,ut),m=ut}),m?b.call(k.transform,m):(b.call(k.transform,ut),m=ut),nt&&(et.length>0||dt.length>0)){let V=function(lt){const mt=yt.get(lt)||0;return yt.set(lt,mt+1),mt};const ht=P.append("g").attr("class","trade-flows"),st=ee().domain([0,100]).range([0,6]).clamp(!0),yt=new Map;if(l.value.has("imports")){const lt=xt[Z]||10;et.forEach(mt=>{const Pt=Et[mt.partnerGeo];if(!Pt)return;const St=V(mt.partnerGeo);O(ht,Pt,nt,mt,st,St,mt.typeCode,mt.color,lt)})}l.value.has("exports")&&dt.forEach(lt=>{const mt=Et[lt.partnerGeo];if(!mt)return;const Pt=V(lt.partnerGeo),St=xt[lt.partnerGeo]||10;O(ht,nt,mt,lt,st,Pt,lt.typeCode,lt.color,St)})}let ft=at(g).select(".map-tooltip");ft.empty()&&(ft=at(g).append("div").attr("class","map-tooltip").style("opacity",0).style("position","absolute").style("pointer-events","none"))}function O(h,g,y,_,b,w,P,D,L){const B=y[0]-g[0],Y=y[1]-g[1],U=Math.sqrt(B*B+Y*Y),Z=B/U,Q=Y/U,et=-Q,dt=Z,Mt=w*1,Tt=_.direction==="exports"?.5:0,Nt=g[0]+Z*Tt+et*Mt,zt=g[1]+Q*Tt+dt*Mt,Et=_.direction==="imports"?2:0,xt=w*Et,X=7,K=Math.min(L*.3,5),nt=_.direction==="imports"&&U>X?K:0,rt=y[0]-Z*nt+et*xt,q=y[1]-Q*nt+dt*xt,J=Math.min(U*.05,10),W=(Nt+rt)/2,ot=(zt+q)/2,ut=W+et*J,ft=ot+dt*J,V=Math.max(.2,b(_.sharePercent||0)),ht=V+.25,st=`arrow-${P}-${_.direction}`,yt=1.5*V,lt=Math.sqrt((rt-Nt)**2+(q-zt)**2),mt=Math.min(yt,lt*.5),Pt=(rt-Nt)/lt,St=(q-zt)/lt,Kt=rt-Pt*mt,Lo=q-St*mt,Ma=`M ${Nt} ${zt} Q ${ut} ${ft} ${Kt} ${Lo}`,zo=_.direction==="imports"?"#e53935":"#43a047";h.append("path").attr("d",Ma).attr("fill","none").attr("stroke",zo).attr("stroke-width",ht).attr("stroke-opacity",.5).attr("class",`flow-arrow-outline flow-${P} flow-${_.direction}`).style("pointer-events","none"),h.append("path").attr("d",Ma).attr("fill","none").attr("stroke",D).attr("stroke-width",V).attr("stroke-opacity",.6).attr("marker-end",`url(#${st})`).attr("class",`flow-arrow flow-${P} flow-${_.direction}`).on("mouseenter",function(Fo){at(this).attr("stroke-opacity",.85);const Go=_.direction==="imports"?"imports":"exports",Bo=`
        <strong>${_.partnerName}</strong><br/>
        <span style="color: ${D}">${_.typeName}</span><br/>
        ${N(_.value)}<br/>
        ${_.sharePercent?.toFixed(1)}% of ${_.typeName} ${Go}
      `;v(Fo,Bo)}).on("mouseleave",function(){at(this).attr("stroke-opacity",.6),A()})}function R(h,g,y,_,b,w,P){const D=f.value;if(!D)return;let L=`<strong>${g}</strong>`;if(_)L+="<br/><em>Selected country</em>";else if(b){const Y=w.filter(Z=>Z.partnerGeo===y),U=P.filter(Z=>Z.partnerGeo===y);Y.length>0&&(L+='<br/><span class="tooltip-section">Imports from:</span>',Y.forEach(Z=>{const Q=s.find(et=>et.code===Z.typeCode);L+=`<br/>  <span style="color: ${Z.color}">${Q?.label||Z.typeCode}</span>: ${N(Z.value)} (${Z.sharePercent?.toFixed(1)}%)`})),U.length>0&&(L+='<br/><span class="tooltip-section">Exports to:</span>',U.forEach(Z=>{const Q=s.find(et=>et.code===Z.typeCode);L+=`<br/>  <span style="color: ${Z.color}">${Q?.label||Z.typeCode}</span>: ${N(Z.value)} (${Z.sharePercent?.toFixed(1)}%)`}))}const B=at(D).select(".map-tooltip");if(!B.empty()){const Y=D.getBoundingClientRect();B.html(L).style("left",`${h.clientX-Y.left+10}px`).style("top",`${h.clientY-Y.top-10}px`).style("opacity",1)}}function v(h,g){const y=f.value;if(!y)return;const _=at(y).select(".map-tooltip");if(!_.empty()){const b=y.getBoundingClientRect();_.html(g).style("left",`${h.clientX-b.left+10}px`).style("top",`${h.clientY-b.top-10}px`).style("opacity",1)}}function A(){const h=f.value;if(!h)return;const g=at(h).select(".map-tooltip");g.empty()||g.style("opacity",0)}return qt(()=>o.country,()=>{m=null}),qt(()=>[o.tradeData,o.country,o.year,u.value,l.value,c.value],()=>{Vt(()=>T())},{deep:!0}),ne(()=>{T(),d=new ResizeObserver(()=>{T()}),f.value&&d.observe(f.value)}),ye(()=>{d&&d.disconnect()}),(h,g)=>(F(),z("div",z0,[x.value?(F(),z("div",G0,[C("div",B0,[C("div",Y0,[C("div",W0,[g[6]||(g[6]=C("div",{class:"volume-row-label"},null,-1)),(F(),z(te,null,Se(s,y=>C("button",{key:y.code,class:Ht(["volume-header-btn",{active:u.value.has(y.code)}]),style:Pn({"--type-color":y.color,backgroundColor:u.value.has(y.code)?y.color:"transparent",color:u.value.has(y.code)?"#fff":y.color}),onClick:_=>M(y.code)},ct(y.label),15,U0)),64)),C("button",{class:Ht(["volume-row-label","imports-label","direction-toggle",{active:l.value.has("imports")}]),onClick:g[0]||(g[0]=y=>S("imports"))},[C("span",V0,ct(l.value.has("imports")?"":""),1),g[4]||(g[4]=Bt(" Imports ",-1))],2),(F(),z(te,null,Se(s,y=>C("div",{key:"imp-"+y.code,class:Ht(["volume-cell","imports",{inactive:!u.value.has(y.code)}])},[C("span",q0,ct(N(E("imports",y.code))),1),C("span",X0,ct(y.unit),1)],2)),64)),C("button",{class:Ht(["volume-row-label","exports-label","direction-toggle",{active:l.value.has("exports")}]),onClick:g[1]||(g[1]=y=>S("exports"))},[C("span",K0,ct(l.value.has("exports")?"":""),1),g[5]||(g[5]=Bt(" Exports ",-1))],2),(F(),z(te,null,Se(s,y=>C("div",{key:"exp-"+y.code,class:Ht(["volume-cell","exports",{inactive:!u.value.has(y.code)}])},[C("span",j0,ct(N(E("exports",y.code))),1),C("span",Z0,ct(y.unit),1)],2)),64))])]),C("div",{ref_key:"mapContainerRef",ref:f,class:"map-svg-container"},null,512),C("div",J0,[C("div",{class:"controls-left"},[C("button",{class:"reset-zoom-btn",onClick:$,title:"Reset zoom"},[...g[7]||(g[7]=[C("span",{class:"material-symbols-outlined"},"zoom_out_map",-1)])]),g[8]||(g[8]=C("span",{class:"map-hint"},"Scroll to zoom, drag to pan, double-click to reset",-1))]),C("div",Q0,[g[9]||(g[9]=C("label",{class:"cutoff-label"},"Min trade %",-1)),Wo(C("input",{type:"range","onUpdate:modelValue":g[2]||(g[2]=y=>c.value=y),min:"0",max:"10",step:"1",class:"cutoff-range"},null,512),[[Uo,c.value,void 0,{number:!0}]]),C("span",th,ct(c.value)+"%",1)])])])])):(F(),z("div",F0,[...g[3]||(g[3]=[C("span",{class:"no-data-icon"},"?",-1),C("span",null,"No trade data available for this year",-1)])]))]))}},nh=At(eh,[["__scopeId","data-v-29317453"]]),rh={id:"tradingpartner",class:"page-section"},ah={class:"section-container"},ih={key:0,class:"loading"},oh={key:1,class:"error"},sh={key:2,class:"charts-container"},lh={__name:"TradingPartner",setup(t){const e=me();return(n,r)=>(F(),z("section",rh,[r[1]||(r[1]=C("div",{class:"chart-header"},[C("h2",null,"The Trading Partners"),C("p",null,"Import and export partners by energy type")],-1)),C("div",ah,[j(e).isLoading?(F(),z("div",ih,"Loading energy data...")):j(e).error?(F(),z("div",oh,ct(j(e).error),1)):(F(),z("div",sh,[kt(nh,{tradeData:j(e).tradeData,country:j(e).selectedCountry,year:j(e).selectedYear},null,8,["tradeData","country","year"])])),r[0]||(r[0]=C("div",{class:"text-container"},[C("p",null," This section provides an overview of the availability of energy in your area over the past year. You can analyze grid reliability, outage frequency, and compare your data with regional availability trends. ")],-1))]),r[2]||(r[2]=ue('<div class="chart-meta"><div class="meta-section"><span class="meta-label">Source</span><ul class="meta-list"><li> Eurostat <a href="https://ec.europa.eu/eurostat/web/energy/database" target="_blank" rel="noopener">Energy Database</a> (European Commission) </li><li>Tables <code>nrg_ti_*</code> (imports) and <code>nrg_te_*</code> (exports) for sff, oil, gas, bio, eh</li><li>Derived: <code>share_pct</code> = partner value  total  100</li></ul></div><div class="meta-section"><span class="meta-label">Data Hints</span><ul class="meta-list"><li> EU-reported data only; non-EU partner volumes data may be incomplete or reflect only the EU perspective of the trade relationship. </li><li>Regional aggregates (e.g., &quot;Other Asian countries&quot;) excluded from map arrows but included in totals.</li></ul></div></div>',1))]))}},ch={key:0,class:"no-data"},uh={key:1,class:"chart-wrapper"},dh={class:"chart-container"},fh={__name:"DependencyChart",props:{dependencyData:{type:Object,default:null},year:{type:[String,Number],default:null}},setup(t){const e=t,n=it(null),r=it(null),a=it(!1);let i=null;function o(S,E,x){if(a.value=!0,r.value&&n.value){n.value.getBoundingClientRect();const N=r.value;N.style.left=`${E+120}px`,N.style.top=`${x-10}px`}}function s(){a.value=!1}const u={coal:"Coal",anthracite:"Anthracite",coking_coal:"Coking Coal",other_bituminous:"Other Bituminous",other_bituminous_coal:"Other Bituminous",lignite:"Lignite",sub_bituminous_coal:"Sub-bituminous",gas:"Natural Gas",natural_gas:"Natural Gas",oil:"Oil",crude_oil:"Crude Oil",ngl:"NGL",peat:"Peat",nuclear_fuels:"Nuclear",renewable_fuels:"Renewables",electricity:"Electricity",C0110:"Anthracite",C0121:"Coking Coal",C0129:"Other Bituminous",C0210:"Lignite",C0220:"Sub-bituminous",G3000:"Natural Gas",O4000XBIO:"Oil",O4100_TOT:"Crude Oil",O4200:"NGL",P1100:"Oil Shale",S2000:"Nuclear",CF_R:"Renewables",E7000:"Electricity",SFF_OTH:"Other Solid Fuels"},l=["electricity","E7000","oil","O4000XBIO","crude_oil","O4100_TOT","ngl","O4200","gas","natural_gas","G3000","coal","C0000X0350-0370","anthracite","C0110","coking_coal","C0121","other_bituminous","other_bituminous_coal","C0129","sub_bituminous_coal","C0220","lignite","C0210","peat","P1100"],c=["nuclear_fuels","S2000","renewable_fuels","CF_R","SFF_OTH","other_solid_fossil_fuels"],f=["crude_oil","O4100_TOT","ngl","O4200","anthracite","C0110","coking_coal","C0121","other_bituminous_coal","other_bituminous","C0129","sub_bituminous_coal","C0220","lignite","C0210"],d=["electricity","E7000"],p=["oil","O4000XBIO","gas","natural_gas","G3000","coal","C0000X0350-0370","peat","P1100"],m=tt(()=>e.dependencyData&&(e.dependencyData.overall!=null||e.dependencyData.by_fuel&&Object.keys(e.dependencyData.by_fuel).length>0)),k=tt(()=>{if(!e.dependencyData)return[];const S=[];if(S.push({key:"overall",name:"Overall",overall:e.dependencyData.overall,thirdCountries:e.dependencyData.third_countries,isOverall:!0}),e.dependencyData.by_fuel){const E=Object.entries(e.dependencyData.by_fuel);E.sort((x,N)=>{const I=l.indexOf(x[0]),H=l.indexOf(N[0]);return I!==-1&&H!==-1?I-H:I!==-1?-1:H!==-1?1:(u[x[0]]||x[0]).localeCompare(u[N[0]]||N[0])});for(const[x,N]of E)!N||typeof N!="object"||c.includes(x)||S.push({key:x,name:u[x]||$(x),overall:N.overall,thirdCountries:N.third_countries,isOverall:!1,isSubcategory:f.includes(x),isElectricity:d.includes(x),isGroupStarter:p.includes(x)})}return S});function $(S){return S.replace(/_/g," ").replace(/([A-Z])/g," $1").split(" ").map(E=>E.charAt(0).toUpperCase()+E.slice(1).toLowerCase()).join(" ").trim()}function M(){if(!n.value||k.value.length===0)return;at(n.value).selectAll("*").remove();const E=n.value.clientWidth||600,x=20,N=4,I=k.value.length,H=Math.min(E,500),G={top:20,right:45,bottom:10,left:100},T=H-G.left-G.right,O=I*(x+N),R=45,v=at(n.value).append("svg").attr("width",H).attr("height",O+G.top+G.bottom).append("g").attr("transform",`translate(${G.left},${G.top})`),A=Math.max(100,...k.value.map(D=>D.overall??0)),h=Math.ceil(A/10)*10,g=ee().domain([0,h]).range([0,T]),y=No().domain(k.value.map(D=>D.name)).range([0,O]).padding(.2);h>100&&(v.append("line").attr("x1",g(100)).attr("x2",g(100)).attr("y1",0).attr("y2",O).attr("stroke","#666").attr("stroke-width",1).attr("stroke-dasharray","4,2"),v.append("text").attr("x",g(100)).attr("y",-4).attr("text-anchor","middle").attr("fill","#666").attr("font-size","9px").text("100%"));const _={third:{normal:"#c44536",soft:"#d4847a"},eu:{normal:"#e8a87c",soft:"#f0c9b0"},domestic:{normal:"#81b29a",soft:"#aed0be"},reserve:{normal:"#8b2500",soft:"#b86347"},reserveEu:{normal:"#b86b3a",soft:"#d4a07a"},exporter:{normal:"#7b68ee",soft:"#a99cf3"}};v.append("defs").append("pattern").attr("id","crosshatch").attr("width",4).attr("height",4).attr("patternUnits","userSpaceOnUse").attr("patternTransform","rotate(45)").append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",4).attr("stroke","#c44536").attr("stroke-width",2),k.value.forEach(D=>{const L=y(D.name),B=y.bandwidth(),Y=D.isSubcategory,U=Y?R:0,Z=et=>Y?_[et].soft:_[et].normal,Q=D.isElectricity&&D.overall==null&&D.thirdCountries!=null?D.thirdCountries:D.overall;if(Q!=null){const et=Q,dt=et<0,gt=Math.max(0,et),Mt=D.thirdCountries!=null?Math.max(0,D.thirdCountries):null;if(dt)v.append("rect").attr("class","bar-exporter").attr("x",U).attr("y",L).attr("width",g(100)-U).attr("height",B).attr("fill",Z("exporter")),v.append("text").attr("x",U+(g(100)-U)/2).attr("y",L+B/2).attr("dy","0.35em").attr("text-anchor","middle").attr("fill","#fff").attr("font-size","9px").attr("font-weight","600").text("Net Exporter"),v.append("text").attr("x",g(100)+4).attr("y",L+B/2).attr("dy","0.35em").attr("text-anchor","start").attr("fill",Y?"#8a7fd4":"#5a4fcf").attr("font-size","9px").attr("font-weight","700").text(`${et.toFixed(0)}%`);else{const Tt=gt<100?100-gt:0,Nt=gt>100?gt-100:0;if(gt>0){const xt=Math.min(gt,100),X=g(xt)-U;v.append("rect").attr("class","bar-import").attr("x",U).attr("y",L).attr("width",X).attr("height",B).attr("fill",Z("eu"))}if(Nt>0){const xt=g(gt)-g(100);v.append("rect").attr("class","bar-reserve").attr("x",g(100)).attr("y",L).attr("width",xt).attr("height",B).attr("fill",Z("reserve")).attr("opacity",.85)}if(Tt>0){const xt=Math.max(U,g(gt)),X=g(100)-xt;v.append("rect").attr("class","bar-domestic").attr("x",xt).attr("y",L).attr("width",X).attr("height",B).attr("fill",Z("domestic"))}if(Mt!=null&&Mt>0&&!D.isElectricity&&!Y){const xt=g(Mt)-U;xt>0&&(v.append("rect").attr("x",U).attr("y",L).attr("width",xt).attr("height",B).attr("fill","url(#crosshatch)").attr("opacity",.4),v.append("line").attr("x1",g(Mt)).attr("y1",L).attr("x2",g(Mt)).attr("y2",L+B).attr("stroke","#8b2500").attr("stroke-width",2),xt>=35&&v.append("text").attr("x",U+xt/2).attr("y",L+B/2).attr("dy","0.35em").attr("text-anchor","middle").attr("fill","#8b2500").attr("font-size","7px").attr("font-weight","700").text("non-EU"))}const zt=g(Math.max(gt,Tt>0?100:gt))+4,Et=v.append("text").attr("x",zt).attr("y",L+B/2).attr("dy","0.35em").attr("text-anchor","start").attr("fill",gt>100?Y?"#b86347":"#8b2500":"#666").attr("font-size","9px").attr("font-weight",gt>100?"700":"500").text(`${gt.toFixed(0)}%`);if(D.isElectricity){const xt=Et.node().getBBox().width,X=zt+xt+10,K=v.append("g").attr("class","electricity-warning-group").style("cursor","help");K.append("circle").attr("cx",X).attr("cy",L+B/2).attr("r",6).attr("fill","#c44536"),K.append("text").attr("x",X).attr("y",L+B/2).attr("dy","0.35em").attr("text-anchor","middle").attr("fill","#fff").attr("font-size","9px").attr("font-weight","700").style("pointer-events","none").text("!"),K.append("circle").attr("cx",X).attr("cy",L+B/2).attr("r",10).attr("fill","transparent").on("mouseenter",function(nt){o(nt,X,L)}).on("mouseleave",s)}}}else if(v.append("rect").attr("class","bar-nodata").attr("x",U).attr("y",L).attr("width",g(100)-U).attr("height",B).attr("fill",Y?"#f0f0f0":"#e8e8e8").attr("rx",3),v.append("text").attr("class","no-data-label").attr("x",U+(g(100)-U)/2).attr("y",L+B/2).attr("dy","0.35em").attr("text-anchor","middle").attr("fill","#999").attr("font-size","10px").text("No data"),D.isElectricity){const et=g(100)+14,dt=v.append("g").attr("class","electricity-warning-group").style("cursor","help");dt.append("circle").attr("cx",et).attr("cy",L+B/2).attr("r",6).attr("fill","#c44536"),dt.append("text").attr("x",et).attr("y",L+B/2).attr("dy","0.35em").attr("text-anchor","middle").attr("fill","#fff").attr("font-size","9px").attr("font-weight","700").style("pointer-events","none").text("!"),dt.append("circle").attr("cx",et).attr("cy",L+B/2).attr("r",10).attr("fill","transparent").on("mouseenter",function(gt){o(gt,et,L)}).on("mouseleave",s)}});const w=v.append("g").call(la(y)),P=f.map(D=>u[D]||$(D));w.selectAll(".tick").each(function(D){const L=P.includes(D);at(this).select("text").attr("fill",L?"#666":"#333").attr("font-size","11px").attr("font-style",L?"italic":"normal"),L&&at(this).attr("transform",function(){const Y=at(this).attr("transform")||"",U=Y.match(/translate\(([^,]*),([^)]*)\)/);return U?`translate(${parseFloat(U[1])+45},${U[2]})`:Y})}),v.selectAll(".domain").remove(),v.selectAll(".tick line").remove()}return qt(()=>[e.dependencyData,e.year],()=>{M()},{deep:!0}),ne(()=>{M(),i=new ResizeObserver(()=>{M()}),n.value&&i.observe(n.value)}),ye(()=>{i&&i.disconnect()}),(S,E)=>m.value?(F(),z("div",uh,[C("div",dh,[C("div",{ref_key:"chartRef",ref:n,class:"chart-svg"},null,512),C("div",{ref_key:"tooltipRef",ref:r,class:Ht(["electricity-tooltip",{visible:a.value}])},[...E[1]||(E[1]=[ue("<strong data-v-4a6a1cb8>Non-EU imports only.</strong> Eurostat doesn&#39;t calculate overall electricity dependency: <ul data-v-4a6a1cb8><li data-v-4a6a1cb8><em data-v-4a6a1cb8>Origin:</em> Fuel dependency is counted at source (gas plant imports = gas dependency)</li><li data-v-4a6a1cb8><em data-v-4a6a1cb8>Losses:</em> ~33% of energy lost converting to electricity makes tracking difficult</li><li data-v-4a6a1cb8><em data-v-4a6a1cb8>Trade:</em> EU is near net-zero; grid constantly rebalances across borders</li><li data-v-4a6a1cb8><em data-v-4a6a1cb8>Focus:</em> Eurostat measures primary fuels (oil, gas) not transformed energy</li><li data-v-4a6a1cb8><em data-v-4a6a1cb8>Method:</em> Methodological complexities in how electricity trade interacts with primary fuels used to produce it </li></ul>",3)])],2),E[2]||(E[2]=ue('<div class="chart-legend" data-v-4a6a1cb8><div class="legend-item" data-v-4a6a1cb8><span class="legend-color" style="background:#e8a87c;" data-v-4a6a1cb8></span><span data-v-4a6a1cb8>Imports</span></div><div class="legend-item" data-v-4a6a1cb8><span class="legend-color" style="background:#81b29a;" data-v-4a6a1cb8></span><span data-v-4a6a1cb8>Domestic</span></div><div class="legend-item" data-v-4a6a1cb8><span class="legend-color" style="background:#8b2500;" data-v-4a6a1cb8></span><span data-v-4a6a1cb8>Reserve draw (&gt;100%)</span></div><div class="legend-item" data-v-4a6a1cb8><span class="legend-color" style="background:#7b68ee;" data-v-4a6a1cb8></span><span data-v-4a6a1cb8>Net exporter (&lt;0%)</span></div></div>',1))])])):(F(),z("div",ch,[...E[0]||(E[0]=[C("span",{class:"no-data-icon"},"?",-1),C("span",null,"No dependency data available for this year",-1)])]))}},hh=At(fh,[["__scopeId","data-v-4a6a1cb8"]]),ph={name:"ItemsSlider",data(){return{scrollX:0,scrollEnd:!1,slidewith:100}},mounted(){this.$nextTick(()=>{const t=document.getElementById("slider-container");if(t){const e=t.clientWidth,n=document.documentElement.clientWidth<600?1:2;this.slidewith=e/n+(document.documentElement.clientWidth<600?10:0)}})},methods:{slide(t){this.$refs.scrl.scrollBy({left:t,behavior:"smooth"}),this.$refs.scrl.scrollLeft+=t,this.scrollX+=t,Math.floor(this.$refs.scrl.scrollWidth-this.$refs.scrl.scrollLeft)<=this.$refs.scrl.offsetWidth?this.scrollEnd=!0:this.scrollEnd=!1},scrollCheck(){this.scrollX=this.$refs.scrl.scrollLeft,Math.floor(this.$refs.scrl.scrollWidth-this.$refs.scrl.scrollLeft)<=this.$refs.scrl.offsetWidth?this.scrollEnd=!0:this.scrollEnd=!1}},props:{title:String}},gh={class:"item-slider-container"},yh={class:"px-3 mb-3 item-title"},mh={class:"item-slider"};function vh(t,e,n,r,a,i){return F(),z("div",gh,[C("h3",yh,ct(n.title),1),C("div",mh,[C("div",{onClick:e[0]||(e[0]=o=>i.slide(-a.slidewith)),class:Ht([{"is-disabled-hide":a.scrollX<1},"left-arrow-left"])},[...e[3]||(e[3]=[C("span",{class:"timeline-icon material-symbols-outlined"},"chevron_left",-1)])],2),C("div",{id:"slider-container",ref:"scrl",onScroll:e[1]||(e[1]=(...o)=>i.scrollCheck&&i.scrollCheck(...o)),class:"item-container"},[Vo(t.$slots,"default",{},void 0)],544),C("div",{onClick:e[2]||(e[2]=o=>i.slide(a.slidewith)),class:Ht([{"is-disabled-hide":a.scrollEnd},"right-arrow-right"])},[...e[4]||(e[4]=[C("span",{class:"timeline-icon material-symbols-outlined"},"chevron_right",-1)])],2)])])}const _h=At(ph,[["render",vh],["__scopeId","data-v-401b1412"]]),xh="data:image/svg+xml,%3csvg%20width='4408'%20height='1516'%20viewBox='0%200%204408%201516'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M4345.75%201289.5C4318.88%201266.74%204285.87%201256.39%204263.37%201226.27C4215.24%201161.87%204240.84%201054.7%204245.2%20963.611C4254.04%20779.158%204143.98%20598.469%204007.7%20573.693C3976.53%20568.026%203944.11%20569.383%203914.77%20554.151C3832.84%20511.617%203814.46%20370.555%203767.31%20270.965C3708.15%20145.992%203590.36%2081.0607%203481.06%20100.083C3371.76%20119.106%203273.88%20215.253%203217.19%20342.28L3215.54%20346.616C3141.46%20442.432%203018.53%20461.059%202930.44%20389.818C2844.63%20320.423%202799.7%20185.661%202720.28%20103.687C2643.06%2024.0011%202538.86%202.11167%202442.71%2022.5201C2346.55%2042.9262%202257.17%20101.884%202174.39%20170.723C2136.22%20202.463%202098.86%20236.616%202057.69%20260.664C1924.73%20338.345%201757.48%20293.507%201656.86%20153.213C1632.87%20119.755%201612.3%2081.416%201584.83%2053.1893C1514.79%20-18.7896%201414.51%20-9.71456%201332.3%2033.1184C1250.09%2075.9514%201177.88%20147.586%201097.41%20196.006C1016.93%20244.425%20919.93%20267.45%20842.534%20210.685C793.435%20174.676%20757.04%20109.945%20704.609%2083.7586C645.759%2054.3683%20575.757%2082.7327%20532.484%20143.867C489.211%20205.003%20471.348%20293.793%20476.988%20377.832C480.953%20436.91%20495.584%20494.349%20496.491%20553.653C498.371%20676.623%20433.823%20796.067%20346.234%20831.692C271.321%20862.164%20186.681%20835.987%20115.242%20878.962C30.6368%20929.857%20-10.2127%201069.12%202.17795%201192.58C14.5686%201316.05%2069.8738%201424.47%20133.479%201515.1H4393.5C4424.46%201434.74%204402.72%201337.73%204345.75%201289.5Z'%20fill='%23D9CEC4'/%3e%3cpath%20d='M2938.07%20743.111C2947.65%20743.111%202956.6%20745.725%202964.32%20750.215C2971.32%20729.89%202990.56%20715.263%203013.26%20715.263C3016.97%20715.263%203020.59%20715.669%203024.07%20716.411C3033.02%20680.562%203065.42%20654%203104.04%20654C3142.34%20654%203174.52%20680.118%203183.78%20715.512C3185.41%20715.396%203187.04%20715.263%203188.7%20715.263C3201.29%20715.263%203213.05%20718.687%203223.22%20724.574C3232.7%20718.707%203243.84%20715.263%203255.81%20715.263C3290.1%20715.263%203317.9%20743.064%203317.9%20777.361H3257.4H3193.71H3175.57H3132.01H3119.98H3108.68H3064.02H3032.51H2987.14H2985.78H2962.49H2889C2896.38%20757.385%202915.54%20743.111%202938.07%20743.111Z'%20fill='%23FCF1E6'/%3e%3cpath%20d='M805.303%20601.706C817.853%20601.706%20829.576%20605.697%20839.695%20612.552C848.864%20581.52%20858.665%20552.678%20888.411%20552.678C893.273%20552.678%20909.905%20506.661%20947.249%20527.273C966.248%20534.144%20953.8%20496.737%20983.376%20466.2C1015.39%20438.717%201061.9%20453.986%201071.73%20513.532C1073.86%20513.356%201136.03%20488.339%201153.75%20520.615C1167.51%20538.937%201165.61%20564.415%201178.93%20573.403C1191.36%20564.446%201205.95%20559.187%201221.63%20559.187C1266.57%20559.187%201303%20601.635%201303%20654H1223.72H1140.26H1116.5H1059.42H1043.66H1028.86H970.335H929.042H869.6H867.811H837.301H741C750.669%20623.5%20775.77%20601.706%20805.303%20601.706Z'%20fill='%23FCF1E6'/%3e%3cpath%20d='M2251.37%20584.529H2187.31H2167.01H2165.82H2126.28H2098.8H2059.87H2050.02H2039.54H2001.56H1985.76H1930.23H1877.49C1877.49%20554.634%201901.73%20530.396%201931.63%20530.396C1938.09%20530.396%201944.26%20531.589%201950.01%20533.665C1960.66%20524.114%201974.69%20518.259%201990.13%20518.259C1997.35%20518.259%202004.24%20519.598%202010.66%20521.929C2017.63%20513.769%202027.97%20508.579%202039.54%20508.579C2047.7%20508.579%202055.24%20511.175%202061.43%20515.554C2072.81%20499.015%202091.85%20488.157%202113.44%20488.157C2143.69%20488.157%202168.93%20509.441%202175.09%20537.84C2183.43%20528.804%202195.33%20523.111%202208.6%20523.111C2233.8%20523.111%202254.24%20543.542%202254.24%20568.748C2254.23%20574.306%202253.19%20579.606%202251.37%20584.529Z'%20fill='%23FCF1E6'/%3e%3c/svg%3e",wh="/MyEnergyProfile/assets/consumption_industry-C8RP9hDo.svg",bh="/MyEnergyProfile/assets/consumption_residential-C9jPUtXp.svg",Ch="/MyEnergyProfile/assets/consumption_service-D0ioY7Vx.svg",kh="/MyEnergyProfile/assets/consumption_transport-qyh_MufO.svg",Mh="/MyEnergyProfile/assets/fuel-anthracite-CEzPBKao.jpg",$h="/MyEnergyProfile/assets/fuel-bituminous-BUdOayH8.jpg",Sh="/MyEnergyProfile/assets/fuel-coal-hdVqVBl5.jpg",Eh="/MyEnergyProfile/assets/fuel-coking-coal-D-ug1G7g.jpg",Ah="/MyEnergyProfile/assets/fuel-crude-oil-CpW_4MG2.webp",Th="/MyEnergyProfile/assets/fuel-electricity-CpJpkjVy.jpg",Nh="/MyEnergyProfile/assets/fuel-gas-DV2Ks9vZ.jpg",Ph="/MyEnergyProfile/assets/fuel-lignite-snSupppp.jpg",Rh="/MyEnergyProfile/assets/fuel-ngl-BDCsLaWK.webp",Ih="/MyEnergyProfile/assets/fuel-oil-Dzatq_PN.jpg",Oh="/MyEnergyProfile/assets/fuel-peat-98ECtOul.jpg",Dh="/MyEnergyProfile/assets/fuel-sub-bituminous-C-JRgDMV.jpg",Hh="/MyEnergyProfile/assets/logo-ksmtjNEn.png",Lh={class:"card"},zh=["src"],Fh={class:"content"},Gh={__name:"Card",props:{title:String,imgSrc:String,content:String},setup(t){const e=r=>new URL(Object.assign({"../assets/img/consumption_background.svg":xh,"../assets/img/consumption_industry.svg":wh,"../assets/img/consumption_residential.svg":bh,"../assets/img/consumption_service.svg":Ch,"../assets/img/consumption_transport.svg":kh,"../assets/img/fuel-anthracite.jpg":Mh,"../assets/img/fuel-bituminous.jpg":$h,"../assets/img/fuel-coal.jpg":Sh,"../assets/img/fuel-coking-coal.jpg":Eh,"../assets/img/fuel-crude-oil.webp":Ah,"../assets/img/fuel-electricity.jpg":Th,"../assets/img/fuel-gas.jpg":Nh,"../assets/img/fuel-lignite.jpg":Ph,"../assets/img/fuel-ngl.webp":Rh,"../assets/img/fuel-oil.jpg":Ih,"../assets/img/fuel-peat.jpg":Oh,"../assets/img/fuel-sub-bituminous.jpg":Dh,"../assets/img/logo.png":Hh})[`../assets/img/${r}`],import.meta.url).href,n=t;return ne(()=>{const r=document.getElementById("slider-container");r&&new ResizeObserver(i=>{const o=i[0].contentRect.width,s=10,u=document.documentElement.clientWidth<600?1:2,l=o/u-(document.documentElement.clientWidth<600?0:s);document.documentElement.style.setProperty("--item-width",`${l}px`)}).observe(r)}),(r,a)=>(F(),z("div",Lh,[n.imgSrc?(F(),z("img",{key:0,src:e(n.imgSrc),alt:"Card image"},null,8,zh)):ce("",!0),C("div",Fh,[C("h4",null,ct(n.title),1),C("p",null,ct(n.content),1)])]))}},Bh=At(Gh,[["__scopeId","data-v-9cb0c764"]]),Yh={id:"dependency",class:"page-section"},Wh={class:"section-container"},Uh={key:0,class:"loading"},Vh={key:1,class:"error"},qh={key:2,class:"charts-container"},Xh={key:0,class:"charts-container"},Kh={__name:"Dependency",setup(t){const e=me(),n=[{title:"Electricity",imgSrc:"fuel-electricity.jpg",content:"Most versatile energy carrier for lighting, appliances, industry, and increasingly transport. Cannot be stored at scale, requiring real-time grid balancing. Non-EU dependency varies by geography (2022): Moldova (68%), Georgia (30%), Lithuania (25%) rely on non-EU sources; Western Europe imports almost exclusively from EU neighbors (Germany 6%, France 2%, non-EU). France is typically a net exporter thanks to its nuclear fleet."},{title:"Oil & Petroleum",imgSrc:"fuel-gas.jpg",content:"World's largest primary energy source (~30% of global consumption). Backbone of transportation and petrochemical feedstock. High energy density (45 MJ/kg). Nearly all European countries import 90%+ (2022): Germany (97%), France (99%), Italy (93%). Norway is a major net exporter. Non-EU dependency typically 75-90% across the EU (2022)."},{title:"Oil & Petroleum - Crude Oil",imgSrc:"fuel-crude-oil.webp",content:"Unrefined petroleum sent to refineries for gasoline, diesel, jet fuel. Quality varies by sulfur (sweet/sour) and density (light/heavy). ~98% imported in most EU countries (2022)."},{title:"Oil & Petroleum - NGL",imgSrc:"fuel-ngl.webp",content:"Natural Gas Liquids (propane, butane, ethane). Extracted during gas processing. Typically 0% import dependency (2022) as they're separated domestically from imported gas."},{title:"Natural Gas",imgSrc:"fuel-gas.jpg",content:"Primarily methane (CH). Burns 50% cleaner than coal. Critical for heating, electricity, and fertilizer production. Transported via pipelines or LNG tankers. Dependency above 100% indicates reserve drawdowns, observed during the 2022 energy crisis (Germany 106%, France 109%). In 2022: Netherlands (65%) has domestic production; Poland (78%) diversified via Baltic LNG. Norway is Europe's largest non-Russian supplier."},{title:"Coal",imgSrc:"fuel-coal.jpg",content:"Most carbon-intensive fossil fuel. Ranked by age: lignite  sub-bituminous  bituminous  anthracite. Still important for power and steel. Import dependency (2022): Germany ~50%; Poland (8%) and Czechia (14%) rely on domestic production. Values above 100% indicate stock usage. Being phased out across Europe due to climate commitments."},{title:"Coal - Anthracite",imgSrc:"fuel-anthracite.jpg",content:"Highest grade (86-97% carbon, 30-35 MJ/kg). Burns hot and clean. Geologically rare. Most countries import 100% (2022), but Poland (79%), Slovakia (56%), and Czechia (96%) retain some domestic production."},{title:"Coal - Coking Coal",imgSrc:"fuel-coking-coal.jpg",content:"Essential for blast furnace steel production. Must have low ash/sulfur. ~100% imported in most EU countries (2022) from Australia, USA, Canada."},{title:"Coal - Other Bituminous",imgSrc:"fuel-bituminous.jpg",content:"Steam coal for power plants (45-86% carbon, 24-35 MJ/kg). Highest trade volume. Poland/Czechia have domestic reserves."},{title:"Coal - Sub-bituminous",imgSrc:"fuel-sub-bituminous.jpg",content:"Grade between lignite and bituminous (35-45% carbon, 17-23 MJ/kg). Used mainly for power generation. Limited trade in Europe; most countries show 0% or no data (2013-2022)."},{title:"Coal - Lignite",imgSrc:"fuel-lignite.jpg",content:"Brown coal (25-35% carbon, up to 75% moisture). Rarely traded due to low energy density and crumbling when dried. Usually 0% import (2022), but Austria (100%), Slovenia, Hungary, and Lithuania import from neighbors. Germany is Europe's largest producer."},{title:"Peat",imgSrc:"fuel-peat.jpg",content:"Partially decomposed organic matter from bogs. Lowest energy density (8-12 MJ/kg). Pre-coal stage fuel used historically in northern Europe for heating and power. Almost always sourced locally (0% import dependency, 2023) due to low energy density. Finland is the exception (~1%). Being phased out due to CO emissions and ecosystem destruction. Most countries show no peat data."}];return(r,a)=>(F(),z("section",Yh,[a[1]||(a[1]=C("div",{class:"chart-header"},[C("h2",null,"Fuel by Fuel: Measuring Our Energy Import Dependence"),C("p",null," The stacked bar chart below shows how much of a countrys energy supply is produced domestically and how much is imported from abroad, broken down by energy source. Import dependency highlights the degree to which national energy systems rely on foreign suppliers and therefore reflects aspects of energy security, resilience, and exposure to geopolitical risks. By comparing energy sources, it becomes clear that some fuels are structurally dependent on imports, while others are more closely tied to domestic resources. The detailed descriptions of each energy source below provide additional context on their role, availability, and typical dependency patterns. ")],-1)),C("div",Wh,[j(e).isLoading?(F(),z("div",Uh,"Loading energy data...")):j(e).error?(F(),z("div",Vh,ct(j(e).error),1)):(F(),z("div",qh,[j(e).dependencyData?(F(),z("div",Xh,[kt(hh,{dependencyData:j(e).dependencyData,year:j(e).selectedYear},null,8,["dependencyData","year"])])):ce("",!0)])),a[0]||(a[0]=C("div",{class:"text-container"},[C("p",null,[Bt(" Share of imports vs domestic production "),C("br"),C("code",null,"Net Imports  Gross Available Energy"),C("br"),C("br"),C("code",null," Net Imports = Imports  Exports  Gross Available Energy  Primary production + Net imports  Stock changes "),C("br"),C("br"),C("a",{href:"https://ec.europa.eu/eurostat/statistics-explained/index.php?title=Glossary:Energy_dependency_rate",target:"_blank",rel:"noopener",class:"source-link"},"https://ec.europa.eu/eurostat/statistics-explained/index.php?title=Glossary:Energy_dependency_rate")])],-1))]),a[2]||(a[2]=ue('<div class="chart-meta" data-v-ecdc367c><div class="meta-section" data-v-ecdc367c><span class="meta-label" data-v-ecdc367c>Source</span><ul class="meta-list" data-v-ecdc367c><li data-v-ecdc367c> Eurostat <a href="https://ec.europa.eu/eurostat/web/energy/database" target="_blank" rel="noopener" data-v-ecdc367c>Energy Database</a> (European Commission) </li><li data-v-ecdc367c> Tables <code data-v-ecdc367c>nrg_ind_id</code> (ID, overall dependency) and <code data-v-ecdc367c>nrg_ind_id3cf</code> (ID3CF, third country dependency) </li><li data-v-ecdc367c>Fuel breakdown via SIEC codes mapped to display names</li></ul></div><div class="meta-section" data-v-ecdc367c><span class="meta-label" data-v-ecdc367c>Data Hints</span><ul class="meta-list" data-v-ecdc367c><li data-v-ecdc367c> Non-EU breakdown (hatched line) only available for main aggregates (Coal, Gas, Oil, Electricity). Subcategories (indented, lighter colors) show total import dependency only. </li><li data-v-ecdc367c>Non-EU (third country) import dependency data is only available from 2010 to 2023.</li><li data-v-ecdc367c>Electricity: Eurostat does not calculate overall import dependency; showing non-EU imports only.</li></ul></div></div>',1)),kt(_h,{title:"Types of Fuel"},{default:qo(()=>[(F(),z(te,null,Se(n,(i,o)=>C("div",{key:o},[kt(Bh,{title:i.title,content:i.content,imgSrc:i.imgSrc},null,8,["title","content","imgSrc"])])),64))]),_:1})]))}},jh=At(Kh,[["__scopeId","data-v-ecdc367c"]]),Zh={class:"small-multiples-chart"},Jh={key:0,class:"no-data"},Qh={key:1,class:"chart-content"},tp={__name:"SmallMultiplesChart",props:{productionConsumptionData:{type:Object,default:null},countryYears:{type:Object,default:null},selectedYear:{type:Number,default:null},countryName:{type:String,default:""}},setup(t){const e=t,n=it(null);let r=null;const a=[{code:"SFF",label:"Coal",color:"#8b4513"},{code:"OIL",label:"Oil",color:"#1a1a1a"},{code:"GAS",label:"Gas",color:"#2980b9"},{code:"BIO",label:"Biofuels",color:"#27ae60"},{code:"EH",label:"Electricity",color:"#f1c40f"}],i=tt(()=>e.countryYears&&Object.keys(e.countryYears).length>0),o=tt(()=>{if(!e.countryYears)return{years:[],series:{}};const l=Object.keys(e.countryYears).map(Number).filter(f=>!isNaN(f)).sort((f,d)=>f-d),c={};for(const f of a){const d=[],p=[];for(const m of l){const k=e.countryYears[m];d.push({year:m,value:k?.production?.[f.code]??null}),p.push({year:m,value:k?.consumption?.[f.code]??null})}c[f.code]={production:d,consumption:p}}return{years:l,series:c}});function s(l){return l>=1e3?`${(l/1e3).toFixed(1)}k`:l>=10?l.toFixed(0):l>=1?l.toFixed(1):l.toFixed(2)}function u(){if(!n.value||!i.value)return;at(n.value).selectAll("*").remove();const{years:l,series:c}=o.value;if(l.length===0)return;const f=n.value,d=f.clientWidth||700,p=d<600?2:a.length,m=Math.ceil(a.length/p),k=2,$=["Production","Consumption"],M=["production","consumption"];let S=1/0,E=-1/0;for(const _ of a)for(const b of M){const w=c[_.code][b].filter(P=>P.value!=null);w.length>0&&(S=Math.min(S,w[0].year),E=Math.max(E,w[w.length-1].year))}isFinite(S)||(S=l[0],E=l[l.length-1]);const x=[S,E],N={top:18,right:10,bottom:30,left:46},I=20,H=4,G=8,T=Math.max(100,(d-I-H*(p-1))/p),O=T*.85,R=T-N.left-N.right,v=O-N.top-N.bottom,A=16,h=I+p*T+(p-1)*H,g=m*(k*O+(k-1)*G)+(m-1)*A,y=at(f).append("svg").attr("width",h).attr("height",g);for(let _=0;_<m;_++){const b=_*(k*O+(k-1)*G+A);for(let w=0;w<k;w++){const P=M[w],D=b+w*(O+G);_===0&&y.append("text").attr("transform",`translate(12, ${D+O/2}) rotate(-90)`).attr("text-anchor","middle").attr("fill","#222").attr("font-size","12px").attr("font-weight","700").text($[w]);for(let L=0;L<p&&_*p+L<a.length;L++){const B=_*p+L,Y=a[B],U=I+L*(T+H),Z=c[Y.code][P],Q=Z.filter(q=>q.value!=null),et=Y.code==="BIO"&&P==="production",dt=y.append("g").attr("transform",`translate(${U+N.left}, ${D+N.top})`);dt.append("line").attr("x1",0).attr("x2",R).attr("y1",0).attr("y2",0).attr("stroke","#222").attr("stroke-width",1),dt.append("line").attr("x1",R).attr("x2",R).attr("y1",0).attr("y2",v).attr("stroke","#222").attr("stroke-width",1),w===0&&y.append("text").attr("x",U+T/2).attr("y",D+14).attr("text-anchor","middle").attr("fill",Y.color).attr("font-size","12px").attr("font-weight","700").text(Y.label);const gt=ee().domain(x).range([0,R]),Mt=cn(Q,q=>q.value)||1,Tt=ee().domain([0,Mt*1.1]).range([v,0]),Nt=v<100?2:3,zt=la(Tt).ticks(Nt).tickSize(-R).tickFormat(q=>s(q)),Et=dt.append("g").call(zt);Et.selectAll(".domain").remove(),dt.append("line").attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",v).attr("stroke","#222").attr("stroke-width",1),Et.selectAll(".tick line").remove(),Et.selectAll(".tick text").attr("fill","#222").attr("font-size","9px");const xt=Et.selectAll(".tick text");if(!xt.empty()){const q=xt.nodes()[xt.size()-1],J=at(q).text();at(q).text(J+" TWh")}const X=R<75?3:4,K=Oi(gt).ticks(X).tickFormat(fr("d")),nt=dt.append("g").attr("transform",`translate(0, ${v})`).call(K);if(nt.selectAll(".domain").attr("stroke","#222"),nt.selectAll(".tick line").remove(),nt.selectAll(".tick text").attr("fill","#222").attr("font-size","9px"),et||Q.length===0){dt.append("text").attr("x",R/2).attr("y",v/2).attr("text-anchor","middle").attr("fill","#bbb").attr("font-size","10px").attr("font-style","italic").text(et?"No production data":"No data");continue}const rt=ke().defined(q=>q.value!=null).x(q=>gt(q.year)).y(q=>Tt(q.value));if(dt.append("path").datum(Z).attr("d",rt).attr("fill","none").attr("stroke",Y.color).attr("stroke-width",1.5),dt.selectAll(".dot").data(Q).join("circle").attr("cx",q=>gt(q.year)).attr("cy",q=>Tt(q.value)).attr("r",Q.length>40?1:Q.length>20?1.5:2.5).attr("fill",Y.color),e.selectedYear!=null){const q=Z.find(J=>J.year===e.selectedYear&&J.value!=null);q&&dt.append("circle").attr("cx",gt(q.year)).attr("cy",Tt(q.value)).attr("r",4).attr("fill","none").attr("stroke","#e74c3c").attr("stroke-width",1.5)}}}}}return qt(()=>[e.countryYears,e.selectedYear,e.countryName],()=>Vt(()=>u()),{deep:!0}),ne(()=>{u(),r=new ResizeObserver(()=>u()),n.value&&r.observe(n.value)}),ye(()=>{r&&r.disconnect()}),(l,c)=>(F(),z("div",Zh,[i.value?(F(),z("div",Qh,[C("div",{ref_key:"chartRef",ref:n,class:"chart-grid"},null,512),c[0]||(c[0]=ue('<div class="chart-meta" data-v-625ca523><div class="meta-section" data-v-625ca523><span class="meta-label" data-v-625ca523>Data Hints</span><ul class="meta-list" data-v-625ca523><li data-v-625ca523> Y-axis scales differ between production and consumption rows. This is necessary because production and consumption volumes can differ by orders of magnitude for most countries. </li></ul></div><div class="meta-section" data-v-625ca523><span class="meta-label" data-v-625ca523>Source</span><ul class="meta-list" data-v-625ca523><li data-v-625ca523><a href="https://github.com/owid/energy-data" target="_blank" rel="noopener" data-v-625ca523>Our World in Data Energy Dataset</a>  Fields: <code data-v-625ca523>coal_production</code>, <code data-v-625ca523>oil_production</code>, <code data-v-625ca523>gas_production</code>, <code data-v-625ca523>electricity_generation</code>, <code data-v-625ca523>coal_consumption</code>, <code data-v-625ca523>oil_consumption</code>, <code data-v-625ca523>gas_consumption</code>, <code data-v-625ca523>biofuel_consumption</code>, <code data-v-625ca523>electricity_demand</code> (all in TWh) </li><li data-v-625ca523> Underlying data compiled by the <a href="https://www.energyinst.org/statistical-review" target="_blank" rel="noopener" data-v-625ca523>Energy Institute</a> Statistical Review of World Energy </li></ul></div></div>',1))])):(F(),z("div",Jh,"No production/consumption data available"))]))}},ep=At(tp,[["__scopeId","data-v-625ca523"]]),np={id:"productionconsumption",class:"page-section"},rp={key:0,class:"loading"},ap={key:1,class:"error"},ip={key:2},op={__name:"ProductionConsumption",setup(t){const e=me();return(n,r)=>(F(),z("section",np,[r[0]||(r[0]=C("h2",null,"Production & Consumption by Resource Over Time",-1)),C("div",null,[j(e).isLoading?(F(),z("div",rp,"Loading energy data...")):j(e).error?(F(),z("div",ap,ct(j(e).error),1)):(F(),z("div",ip,[kt(ep,{productionConsumptionData:j(e).productionConsumptionData,countryYears:j(e).selectedCountry?.years,selectedYear:j(e).selectedYear,countryName:j(e).selectedCountry?.name||""},null,8,["productionConsumptionData","countryYears","selectedYear","countryName"])]))])]))}},sp=At(op,[["__scopeId","data-v-f12ca470"]]),lp={key:0,class:"no-data"},cp={key:1,class:"chart-wrapper"},up={class:"chart-container scroll-container"},dp={class:"chart-scroll-outer"},fp={__name:"EmissionsPerCapitaRanking",props:{rankingData:{type:Array,default:()=>[]},selectedCountryCode:{type:String,default:""}},setup(t){const e=me(),n=t,r=it(null),a=it(null);let i=null;const o=tt(()=>n.rankingData&&n.rankingData.length>0);function s(){if(!r.value||!o.value)return;at(r.value).selectAll("*").remove();const l=n.rankingData,c=r.value.clientWidth||500,f={top:10,right:120,bottom:5,left:175},d=26,p=42,m=3;let k=0;l.forEach(T=>{k+=(T.code===n.selectedCountryCode?p:d)+m});const $=f.top+f.bottom+k,M=c,S=M-f.left-f.right,x=at(r.value).append("svg").attr("width",M).attr("height",$).append("g").attr("transform",`translate(${f.left}, ${f.top})`),N=cn(l,T=>T.value)||1,I=ee().domain([0,N*1.05]).range([0,S]),H=ee().domain([0,3,6,N]).range(["#27ae60","#8fce00","#f39c12","#e74c3c"]).clamp(!0);let G=0;l.forEach(T=>{const O=T.code===n.selectedCountryCode,R=O?p:d,v=G,A=x.append("g").attr("class","bar-row").style("cursor",O?"default":"pointer").on("click",()=>{O||e.setSelectedCountry(T.code)});A.append("rect").attr("x",-175).attr("y",v).attr("width",M).attr("height",R).attr("fill","transparent");const h=A.append("rect").attr("x",0).attr("y",v).attr("width",I(T.value)).attr("height",R).attr("fill",H(T.value)).attr("fill-opacity",O?1:.65).attr("stroke",O?"#222":"none").attr("stroke-width",O?2.5:0).attr("rx",3);O||A.on("mouseenter",()=>{h.attr("fill-opacity",.9)}).on("mouseleave",()=>{h.attr("fill-opacity",.65)}),O&&x.append("rect").attr("x",-4).attr("y",v-4).attr("width",I(T.value)+8).attr("height",R+8).attr("fill","none").attr("stroke",H(T.value)).attr("stroke-width",2.5).attr("stroke-opacity",.35).attr("rx",6),A.append("text").attr("x",-8).attr("y",v+R/2).attr("text-anchor","end").attr("dominant-baseline","central").attr("font-size",O?"15px":"10px").attr("font-weight",O?"900":"400").attr("fill",O?"#000":"#666").text(T.name),A.append("text").attr("x",I(T.value)+8).attr("y",v+R/2).attr("dominant-baseline","central").attr("font-size",O?"17px":"10px").attr("font-weight",O?"900":"400").attr("fill",O?"#000":"#666").text(O?`${T.value.toFixed(1)} tCO/cap`:`${T.value.toFixed(1)}`),G+=R+m}),u(l,f.top,d,p,m)}function u(l,c,f,d,p){if(!a.value)return;const m=l.findIndex(S=>S.code===n.selectedCountryCode);if(m===-1)return;let k=c;for(let S=0;S<m;S++)k+=(l[S].code===n.selectedCountryCode?d:f)+p;const $=a.value.clientHeight,M=k-$*.35;a.value.scrollTop=Math.max(0,M)}return qt(()=>[n.rankingData,n.selectedCountryCode],()=>{s()},{deep:!0}),ne(()=>{s(),i=new ResizeObserver(()=>{s()}),r.value&&i.observe(r.value)}),ye(()=>{i&&i.disconnect()}),(l,c)=>o.value?(F(),z("div",cp,[C("div",up,[C("div",dp,[C("div",{ref_key:"scrollContainer",ref:a,class:"chart-scroll"},[C("div",{ref_key:"chartRef",ref:r,class:"chart-svg"},null,512)],512)])])])):(F(),z("div",lp,[...c[0]||(c[0]=[C("span",{class:"material-symbols-outlined"},"bar_chart_off",-1),C("p",null,"No emissions per capita ranking data available.",-1)])]))}},hp=At(fp,[["__scopeId","data-v-56a52663"]]),pp={key:0,class:"no-data"},gp={key:1,class:"chart-wrapper"},yp={class:"chart-container"},mp={__name:"EmissionsCloudPie",props:{emissionsData:{type:Object,default:null},countryName:{type:String,default:""}},setup(t){const e=t,n=it(null);let r=null;const a=tt(()=>{if(!e.emissionsData)return!1;const s=e.emissionsData;return s.residential!=null||s.services!=null||s.transport!=null||s.industry!=null}),i=[{key:"residential",label:"Residential",color:"#63b3df"},{key:"transport",label:"Transport",color:"#ffb56b"},{key:"industry",label:"Industry",color:"#898989"},{key:"services",label:"Services",color:"#76d76b"}];function o(){if(!n.value||!a.value)return;at(n.value).selectAll("*").remove();const s=n.value.clientWidth||460,u=Math.min(s,460),l=450,c=u/2,f=180,d=at(n.value).append("svg").attr("width",u).attr("height",l).attr("viewBox",`0 0 ${u} ${l}`),p=e.emissionsData,m=i.filter(w=>p[w.key]!=null&&p[w.key]>0);if(m.length===0)return;const k=m.reduce((w,P)=>w+p[P.key],0),$=95,M=$*.38,S=d.append("defs");S.append("filter").attr("id","cloud-soft").attr("x","-30%").attr("y","-30%").attr("width","160%").attr("height","160%").append("feGaussianBlur").attr("in","SourceGraphic").attr("stdDeviation","6"),S.append("filter").attr("id","smoke-soft").attr("x","-50%").attr("y","-50%").attr("width","200%").attr("height","200%").append("feGaussianBlur").attr("in","SourceGraphic").attr("stdDeviation","4");const N=d.append("g").attr("filter","url(#cloud-soft)");[{x:0,y:0,r:$+40},{x:-70,y:12,r:58},{x:70,y:12,r:58},{x:-45,y:-42,r:52},{x:45,y:-42,r:52},{x:0,y:-58,r:46},{x:-90,y:-2,r:40},{x:90,y:-2,r:40},{x:-30,y:52,r:44},{x:30,y:52,r:44},{x:0,y:60,r:38},{x:-60,y:45,r:32},{x:60,y:45,r:32}].forEach(w=>{N.append("circle").attr("cx",c+w.x).attr("cy",f+w.y).attr("r",w.r).attr("fill","#90a4ae").attr("fill-opacity",.1)}),d.append("text").attr("x",c).attr("y",f-$-28).attr("text-anchor","middle").attr("font-size","15px").attr("font-weight","700").attr("letter-spacing","2px").attr("fill","#78909c").attr("fill-opacity",.45).text("CO");const H=395,G=d.append("g").attr("filter","url(#smoke-soft)"),T=c-80;for(let w=0;w<8;w++){const P=w/7,D=H-50-P*(H-50-(f+$+15)),L=Math.sin(P*Math.PI*1.5)*18,B=T+P*50+L,Y=6+P*22;G.append("circle").attr("cx",B).attr("cy",D).attr("r",Y).attr("fill","#90a4ae").attr("fill-opacity",.04+P*.05)}const O=c+80;for(let w=0;w<8;w++){const P=w/7,D=H-65-P*(H-65-(f+$+15)),L=Math.sin(P*Math.PI*1.5+1)*15,B=O-P*50+L,Y=5+P*20;G.append("circle").attr("cx",B).attr("cy",D).attr("r",Y).attr("fill","#90a4ae").attr("fill-opacity",.04+P*.05)}const R=m.map(w=>({...w,value:p[w.key]})),A=Oo().value(w=>w.value).padAngle(.03).sort(null)(R),h=sn().innerRadius(M).outerRadius($),g=sn().innerRadius($+32).outerRadius($+32);A.forEach(w=>{const P=w.data;d.append("path").attr("d",h(w)).attr("transform",`translate(${c}, ${f})`).attr("fill",P.color).attr("stroke",P.color).attr("stroke-width",1.5);const D=g.centroid(w),L=c+D[0],B=f+D[1],U=(w.startAngle+w.endAngle)/2<Math.PI?"start":"end";d.append("text").attr("x",L).attr("y",B-7).attr("text-anchor",U).attr("font-size","12px").attr("font-weight","600").attr("fill",P.color).text(P.label),d.append("text").attr("x",L).attr("y",B+8).attr("text-anchor",U).attr("font-size","11px").attr("fill","#666").text(`${P.value.toFixed(2)} tCO/cap`)}),d.append("text").attr("x",c).attr("y",f-6).attr("text-anchor","middle").attr("font-size","20px").attr("font-weight","700").attr("fill","#333").text(`${k.toFixed(1)}`),d.append("text").attr("x",c).attr("y",f+14).attr("text-anchor","middle").attr("font-size","11px").attr("font-weight","500").attr("fill","#666").text("tCO/cap"),d.append("line").attr("x1",30).attr("y1",H).attr("x2",u-30).attr("y2",H).attr("stroke","#b0bec5").attr("stroke-width",1).attr("stroke-opacity",.4).attr("stroke-dasharray","6,4");const y=d.append("g").attr("transform",`translate(${c-115}, ${H})`);y.append("path").attr("d","M3,-3 L3,-11 L14,-11 L20,-21 L38,-21 L44,-11 L52,-11 L52,-3 Z").attr("fill","#546e7a").attr("fill-opacity",.55).attr("stroke","#37474f").attr("stroke-width",.8).attr("stroke-opacity",.3),y.append("path").attr("d","M16,-11 L21,-19 L27,-19 L27,-11 Z").attr("fill","#b0bec5").attr("fill-opacity",.35),y.append("path").attr("d","M29,-19 L36,-19 L41,-11 L29,-11 Z").attr("fill","#b0bec5").attr("fill-opacity",.3),y.append("circle").attr("cx",16).attr("cy",-1).attr("r",5).attr("fill","#263238").attr("fill-opacity",.6),y.append("circle").attr("cx",16).attr("cy",-1).attr("r",2.5).attr("fill","#546e7a").attr("fill-opacity",.4),y.append("circle").attr("cx",40).attr("cy",-1).attr("r",5).attr("fill","#263238").attr("fill-opacity",.6),y.append("circle").attr("cx",40).attr("cy",-1).attr("r",2.5).attr("fill","#546e7a").attr("fill-opacity",.4),y.append("rect").attr("x",50).attr("y",-5).attr("width",6).attr("height",3).attr("rx",1).attr("fill","#455a64").attr("fill-opacity",.5),[{x:59,y:-6,r:3.5},{x:64,y:-9,r:5},{x:67,y:-14,r:4.5},{x:70,y:-20,r:4}].forEach((w,P)=>{y.append("circle").attr("cx",w.x).attr("cy",w.y).attr("r",w.r).attr("fill","#78909c").attr("fill-opacity",.15-P*.02)}),y.append("circle").attr("cx",4).attr("cy",-7).attr("r",2).attr("fill","#ffcc02").attr("fill-opacity",.4);const _=d.append("g").attr("transform",`translate(${c+55}, ${H})`);_.append("rect").attr("x",0).attr("y",-32).attr("width",45).attr("height",32).attr("rx",2).attr("fill","#455a64").attr("fill-opacity",.45).attr("stroke","#37474f").attr("stroke-width",.8).attr("stroke-opacity",.25),_.append("rect").attr("x",7).attr("y",-60).attr("width",10).attr("height",28).attr("rx",1).attr("fill","#37474f").attr("fill-opacity",.5),_.append("rect").attr("x",5).attr("y",-62).attr("width",14).attr("height",3).attr("rx",1).attr("fill","#37474f").attr("fill-opacity",.55),_.append("rect").attr("x",30).attr("y",-48).attr("width",7).attr("height",16).attr("rx",1).attr("fill","#37474f").attr("fill-opacity",.45),[{x:4,y:-26,w:8,h:6},{x:15,y:-26,w:8,h:6},{x:26,y:-26,w:8,h:6},{x:4,y:-16,w:8,h:6},{x:15,y:-16,w:8,h:6},{x:26,y:-16,w:8,h:6}].forEach(w=>{_.append("rect").attr("x",w.x).attr("y",w.y).attr("width",w.w).attr("height",w.h).attr("rx",1).attr("fill","#ffc107").attr("fill-opacity",.3)}),_.append("rect").attr("x",18).attr("y",-9).attr("width",9).attr("height",9).attr("rx",1).attr("fill","#37474f").attr("fill-opacity",.3),[{x:12,y:-67,r:5},{x:14,y:-75,r:6},{x:11,y:-83,r:5.5},{x:34,y:-53,r:4},{x:36,y:-60,r:5}].forEach((w,P)=>{_.append("circle").attr("cx",w.x).attr("cy",w.y).attr("r",w.r).attr("fill","#78909c").attr("fill-opacity",.14-P*.015)});const b=d.append("g").attr("transform",`translate(${c+42}, ${H})`);[{x:-4,s:.9,fill:"#e74c3c",op:.3},{x:3,s:1.2,fill:"#e67e22",op:.35},{x:9,s:.7,fill:"#f39c12",op:.28},{x:-9,s:.6,fill:"#f39c12",op:.22}].forEach(w=>{b.append("path").attr("d","M0,0 C-3,-6 -5,-13 -2,-19 C-1,-21 1,-21 2,-19 C5,-13 3,-6 0,0 Z").attr("transform",`translate(${w.x}, 0) scale(${w.s})`).attr("fill",w.fill).attr("fill-opacity",w.op)}),b.append("path").attr("d","M0,0 C-1.5,-4 -2,-8 -0.5,-12 C0,-13 0.5,-13 1,-12 C2,-8 1.5,-4 0,0 Z").attr("transform","translate(3, 0) scale(1.1)").attr("fill","#fff176").attr("fill-opacity",.3),p.year&&d.append("text").attr("x",c).attr("y",l-8).attr("text-anchor","middle").attr("font-size","11px").attr("fill","#999").text(`Data year: ${p.year}`)}return qt(()=>[e.emissionsData,e.countryName],async()=>{await Vt(),o(),n.value&&!r&&(r=new ResizeObserver(()=>{o()}),r.observe(n.value))},{deep:!0}),ne(()=>{o(),n.value&&(r=new ResizeObserver(()=>{o()}),r.observe(n.value))}),ye(()=>{r&&r.disconnect()}),(s,u)=>a.value?(F(),z("div",gp,[C("div",yp,[C("div",{ref_key:"chartRef",ref:n,class:"chart-svg"},null,512)])])):(F(),z("div",pp,[...u[0]||(u[0]=[C("span",{class:"material-symbols-outlined"},"cloud_off",-1),C("p",null,"No per-capita emissions data available for this country.",-1)])]))}},vp=At(mp,[["__scopeId","data-v-63407626"]]),_p={key:0,class:"no-data"},xp={key:1,class:"chart-wrapper"},wp={class:"chart-container scroll-container"},bp={class:"chart-scroll-outer"},Cp={__name:"CarbonIntensityRanking",props:{rankingData:{type:Array,default:()=>[]},selectedCountryCode:{type:String,default:""}},setup(t){const e=me(),n=t,r=it(null),a=it(null),i=it(null);let o=null;const s=tt(()=>n.rankingData&&n.rankingData.length>0);function u(){if(!r.value||!s.value)return;at(r.value).selectAll("*").remove();const c=n.rankingData,f=r.value.clientWidth||500,d={top:10,right:120,bottom:5,left:175},p=26,m=42,k=3;let $=0;c.forEach(R=>{$+=(R.code===n.selectedCountryCode?m:p)+k});const M=d.top+d.bottom+$,S=f,E=S-d.left-d.right,N=at(r.value).append("svg").attr("width",S).attr("height",M).append("g").attr("transform",`translate(${d.left}, ${d.top})`),I=cn(c,R=>R.value)||1,H=ee().domain([0,I*1.05]).range([0,E]),G=ee().domain([0,100,300,I]).range(["#27ae60","#8fce00","#f39c12","#e74c3c"]).clamp(!0);let T=0;c.forEach(R=>{const v=R.code===n.selectedCountryCode,A=v?m:p,h=T,g=N.append("g").attr("class","bar-row").style("cursor",v?"default":"pointer").on("click",()=>{v||e.setSelectedCountry(R.code)});g.append("rect").attr("x",-175).attr("y",h).attr("width",S).attr("height",A).attr("fill","transparent");const y=g.append("rect").attr("x",0).attr("y",h).attr("width",H(R.value)).attr("height",A).attr("fill",G(R.value)).attr("fill-opacity",v?1:.65).attr("stroke",v?"#222":"none").attr("stroke-width",v?2.5:0).attr("rx",3);v||g.on("mouseenter",()=>{y.attr("fill-opacity",.9)}).on("mouseleave",()=>{y.attr("fill-opacity",.65)}),v&&N.append("rect").attr("x",-4).attr("y",h-4).attr("width",H(R.value)+8).attr("height",A+8).attr("fill","none").attr("stroke",G(R.value)).attr("stroke-width",2.5).attr("stroke-opacity",.35).attr("rx",6),g.append("text").attr("x",-8).attr("y",h+A/2).attr("text-anchor","end").attr("dominant-baseline","central").attr("font-size",v?"15px":"10px").attr("font-weight",v?"900":"400").attr("fill",v?"#000":"#666").text(R.name),g.append("text").attr("x",H(R.value)+8).attr("y",h+A/2).attr("dominant-baseline","central").attr("font-size",v?"17px":"10px").attr("font-weight",v?"900":"400").attr("fill",v?"#000":"#666").text(v?`${Math.round(R.value)} gCO/kWh`:`${Math.round(R.value)}`),T+=A+k});const O=H(100);O>0&&O<E?i.value=d.left+O:i.value=null,l(c,d.top,p,m,k)}function l(c,f,d,p,m){if(!a.value)return;const k=c.findIndex(E=>E.code===n.selectedCountryCode);if(k===-1)return;let $=f;for(let E=0;E<k;E++)$+=(c[E].code===n.selectedCountryCode?p:d)+m;const M=a.value.clientHeight,S=$-M*.35;a.value.scrollTop=Math.max(0,S)}return qt(()=>[n.rankingData,n.selectedCountryCode],()=>{u()},{deep:!0}),ne(()=>{u(),o=new ResizeObserver(()=>{u()}),r.value&&o.observe(r.value)}),ye(()=>{o&&o.disconnect()}),(c,f)=>s.value?(F(),z("div",xp,[C("div",wp,[i.value!=null?(F(),z("div",{key:0,class:"threshold-label",style:Pn({left:i.value+"px"})}," IEA / EU sustainable energy threshold (100 gCO/kWh) ",4)):ce("",!0),C("div",bp,[i.value!=null?(F(),z("div",{key:0,class:"threshold-line-overlay",style:Pn({left:i.value+"px"})},null,4)):ce("",!0),C("div",{ref_key:"scrollContainer",ref:a,class:"chart-scroll"},[C("div",{ref_key:"chartRef",ref:r,class:"chart-svg"},null,512)],512)]),f[1]||(f[1]=ue('<div class="chart-meta" data-v-a405497e><div class="meta-section" data-v-a405497e><span class="meta-label" data-v-a405497e>Source</span><ul data-v-a405497e><li data-v-a405497e><strong data-v-a405497e>OWID</strong><a href="https://github.com/owid/energy-data" target="_blank" rel="noopener" data-v-a405497e> Energy Data </a> . Column: <code data-v-a405497e>carbon_intensity_elec</code> (gCO2/kWh) </li></ul></div><div class="meta-section" data-v-a405497e></div></div>',1))])])):(F(),z("div",_p,[...f[0]||(f[0]=[C("span",{class:"material-symbols-outlined"},"bar_chart_off",-1),C("p",null,"No carbon intensity ranking data available.",-1)])]))}},kp=At(Cp,[["__scopeId","data-v-a405497e"]]),Mp={key:0,class:"no-data"},$p={key:1,class:"stat-cards-wrapper"},Sp={class:"group-label"},Ep={class:"stat-cards-grid"},Ap={class:"card-icon"},Tp={class:"material-symbols-outlined"},Np={class:"card-content"},Pp={class:"card-title"},Rp={class:"card-result"},Ip={class:"card-detail"},be=3.7,Op=1.6,Dp=.125,Hp=.49,Si=3,Cn=215,Mr=3600,Ei=77400,$r=885,Lp=1.3,Ai=55,kn=9,zp=2.2,Ti=400,Fp=50,Gp={__name:"StatCards",props:{gridIntensity:{type:Number,default:null}},setup(t){const e=t;function n(i,o){const s=i/o;return s<.5?"card-green":s<=1?"card-yellow":"card-red"}const r=tt(()=>{const i=e.gridIntensity;if(i==null)return[];const o=[],s=be/Op;o.push({id:"ev",group:"transport",icon:"electric_car",title:"Electric Car vs Petrol Car",result:`${s.toFixed(1)}x less energy per passenger-km`,detail:"EV: 1.22.0 MJ/pkm. Petrol: 3.04.4 MJ/pkm. Total energy incl. vehicle manufacturing.",colorClass:"card-green"});const u=be/Dp,l=be/Hp;o.push({id:"train",group:"transport",icon:"train",title:"Train & Tram vs Car",result:`Train ~${Math.round(u)}x, Tram ~${Math.round(l)}x less energy`,detail:"Train: 0.050.2 MJ/pkm. Tram: 0.170.8 MJ/pkm. Car: 3.04.4 MJ/pkm. Incl. manufacturing.",colorClass:"card-green"});const c=i/Si,f=(Cn-c)/Cn*100;o.push({id:"hp",group:"household",icon:"heat_pump",title:"Heat Pump vs Gas Heating",result:f>0?`${Math.round(f)}% less CO`:`${Math.round(-f)}% more CO`,detail:`HP: ${Math.round(c)} gCO/kWh_th (SCOP ${Si}). Gas boiler: ${Cn} gCO/kWh_th.`,colorClass:n(c,Cn)});const d=Mr*i/1e6,p=Mr*3.6,m=Math.round(p/be);o.push({id:"footprint",group:"household",icon:"home",title:"Household Electricity Footprint",result:`${d.toFixed(2)} tCO/yr  ${m.toLocaleString()} passenger-km by car`,detail:`From ${Mr.toLocaleString()} kWh/yr (EU avg). Energy equivalent at ${be} MJ/pkm (PTUA, incl. manufacturing).`,colorClass:d<.5?"card-green":d<1.5?"card-yellow":"card-red"});const k=Ei*3.6,$=Math.round(k/be);o.push({id:"datacenter",group:"services",icon:"dns",title:"Data Center (NTT Frankfurt 1)",result:`1 hr of operation  ${$.toLocaleString()} passenger-km by car`,detail:`Est. ${Ei.toLocaleString()} kWh/hr (77.4 MW IT load). Car: ${be} MJ/pkm (PTUA).`,colorClass:$<5e4?"card-green":$<15e4?"card-yellow":"card-red"});const M=Lp*i,S=$r/M;o.push({id:"truck",group:"services",icon:"local_shipping",title:"Electric Truck vs Diesel Truck (Logistics)",result:S>=1?`${S.toFixed(1)}x less CO per km`:`${(1/S).toFixed(1)}x more CO per km`,detail:`Electric: ${Math.round(M)} gCO/km (1.30 kWh/km). Diesel: ${$r} gCO/km (33 L/100km, 40t).`,colorClass:n(M,$r)});const E=Ai*i/1e3,x=(kn-E)/kn*100;o.push({id:"green-h2",group:"industry",icon:"science",title:"Green Hydrogen vs Grey Hydrogen",result:x>0?`${Math.round(x)}% less CO per kg H`:`${Math.round(-x)}% more CO per kg H`,detail:`Electrolysis: ${E.toFixed(1)} kgCO/kgH (${Ai} kWh/kg). SMR: ${kn} kgCO/kgH.`,colorClass:n(E,kn)});const I=Ti*i/1e3+Fp,H=zp*1e3,G=(H-I)/H*100;return o.push({id:"steel",group:"industry",icon:"construction",title:"Electric Arc Furnace vs Blast Furnace",result:G>0?`${Math.round(G)}% less CO per tonne steel`:`${Math.round(-G)}% more CO per tonne steel`,detail:`EAF: ${Math.round(I)} kgCO/t (${Ti} kWh). BF-BOF: ${H.toLocaleString()} kgCO/t.`,colorClass:n(I,H)}),o}),a=tt(()=>[{key:"transport",label:"Transport",icon:"directions_car",color:"#ffb56b"},{key:"household",label:"Household",icon:"home",color:"#63b3df"},{key:"services",label:"Services",icon:"business",color:"#76d76b"},{key:"industry",label:"Industry",icon:"factory",color:"#898989"}].map(o=>({...o,cards:r.value.filter(s=>s.group===o.key)})).filter(o=>o.cards.length>0));return(i,o)=>t.gridIntensity==null?(F(),z("div",Mp,[...o[0]||(o[0]=[C("span",{class:"material-symbols-outlined"},"info",-1),C("p",null,"No grid intensity data available to compute comparisons.",-1)])])):(F(),z("div",$p,[(F(!0),z(te,null,Se(a.value,s=>(F(),z("div",{key:s.label,class:"stat-group"},[C("h4",Sp,[C("span",{class:"material-symbols-outlined group-icon",style:Pn({color:s.color})},ct(s.icon),5),Bt(" "+ct(s.label),1)]),C("div",Ep,[(F(!0),z(te,null,Se(s.cards,u=>(F(),z("div",{key:u.id,class:Ht(["stat-card",u.colorClass])},[C("div",Ap,[C("span",Tp,ct(u.icon),1)]),C("div",Np,[C("h5",Pp,ct(u.title),1),C("p",Rp,ct(u.result),1),C("p",Ip,ct(u.detail),1)])],2))),128))])]))),128))]))}},Bp=At(Gp,[["__scopeId","data-v-e191c0ca"]]),Yp={id:"eco",class:"page-section"},Wp={class:"eco-subsection"},Up={class:"section-container"},Vp={key:0,class:"loading"},qp={key:1,class:"error"},Xp={key:0,class:"no-data"},Kp={key:1,class:"charts-container"},jp={class:"charts-fill"},Zp={class:"text-container"},Jp={key:0},Qp={class:"highlight-value"},t1={class:"highlight-value"},e1={key:1},n1={class:"eco-subsection"},r1={class:"section-container"},a1={key:0,class:"loading"},i1={key:1,class:"error"},o1={key:0,class:"no-data"},s1={key:1,class:"charts-container"},l1={class:"charts-fill"},c1={class:"text-container"},u1={key:0},d1={class:"highlight-value"},f1={class:"highlight-value"},h1={key:1},p1={__name:"Eco",setup(t){const e=me(),n=tt(()=>{const r=e.emissionsPerCapita;if(!r)return null;const a=(r.residential||0)+(r.services||0)+(r.transport||0)+(r.industry||0);return a>0?a.toFixed(1):null});return(r,a)=>(F(),z("section",Yp,[a[15]||(a[15]=C("div",{class:"chart-header"},[C("h2",null,"Ecological Footprint of Energy Use"),C("p",null," Of course no project about energy can be considered complete without a section dedicated to the ecological aspects of energy use. While there are other important environmental impacts to consider, we will focus on the most fundamental one: carbon emissions. First in a broad per capita breakdown, and then through the lens of carbon intensity, which relates electricity to carbon emissions. This is a key factor determining how much impact measures, that we consider as sustainable, will have in practice. ")],-1)),C("div",Wp,[a[5]||(a[5]=C("h3",null,"CO2 Emissions - Europe Comparison",-1)),a[6]||(a[6]=C("p",null," Total CO2 emissions per person from energy use across all sectors, measured in tonnes per year. ",-1)),C("div",Up,[j(e).isLoading?(F(),z("div",Vp,"Loading energy data...")):j(e).error?(F(),z("div",qp,ct(j(e).error),1)):(F(),z(te,{key:2},[j(e).ecoLoaded?(F(),z("div",Kp,[C("div",jp,[kt(hp,{rankingData:j(e).emissionsPerCapitaRanking,selectedCountryCode:j(e).selectedCountryCode},null,8,["rankingData","selectedCountryCode"])])])):(F(),z("div",Xp,"Eco data not available."))],64)),C("div",Zp,[n.value!=null?(F(),z("h4",Jp,[a[0]||(a[0]=Bt(" Where are the ",-1)),C("span",Qp,ct(n.value)+" tCO",1),a[1]||(a[1]=Bt(" emissions in ",-1)),C("span",t1,ct(j(e).selectedCountry?.name),1),a[2]||(a[2]=Bt(" emitted? ",-1))])):(F(),z("h4",e1,"Where are the emissions in your country emitted?")),a[3]||(a[3]=C("p",null," The chart below breaks down how much CO2 each person causes through four major sectors: residential energy use (heating, appliances), services (commercial buildings, offices), transport (cars, trucks), and industry (manufacturing). ",-1)),kt(vp,{emissionsData:j(e).emissionsPerCapita,countryName:j(e).selectedCountry?.name||""},null,8,["emissionsData","countryName"]),a[4]||(a[4]=C("p",null," Transport tends to be the single largest contributor in most European countries, reflecting heavy reliance on fossil fuels for road mobility. In Lithuania, transport accounts for roughly two-thirds of per-capita emissions. In Denmark, Spain, and Portugal it exceeds half. At the other extreme, industry dominates in Slovakia and Czechia, where steel production, automotive manufacturing, and a heavy reliance on coal for heating, industry, and electricity generation push totals above 4 tCO per person. Residential emissions vary depending on climate, insulation standards, and the fuel mix for heating. Norway stands out with residential emissions near zero (0.08 tCO/cap), thanks to a grid that is 98% renewable (almost entirely hydropower), widespread use of heat pumps for heating, and the world's highest EV adoption rate, keeping its overall footprint remarkably low for a country with such a high standard of living. ",-1))])]),a[7]||(a[7]=ue('<div class="chart-meta" data-v-9e51dbd4><div class="meta-section" data-v-9e51dbd4><span class="meta-label" data-v-9e51dbd4>Source</span><ul data-v-9e51dbd4><li data-v-9e51dbd4><strong data-v-9e51dbd4>IEA</strong><a href="https://www.iea.org/data-and-statistics/data-product/energy-efficiency-indicators-highlights" target="_blank" rel="noopener" data-v-9e51dbd4> Energy End-Uses &amp; Efficiency </a> (per-capita CO by sector). Indicator: <code data-v-9e51dbd4>Carbon intensity per capita (t CO2/capita)</code>. End uses: <code data-v-9e51dbd4>Total residential</code>, <code data-v-9e51dbd4>Total services</code>, <code data-v-9e51dbd4>Cars/light trucks</code> + <code data-v-9e51dbd4>Freight trucks</code> (transport) </li><li data-v-9e51dbd4> Industry per-capita derived from IEA total emissions (indicator: <code data-v-9e51dbd4>Total final use (kt CO2)</code>, end use containing <code data-v-9e51dbd4>Manufacturing</code>) divided by <strong data-v-9e51dbd4>OWID</strong><a href="https://github.com/owid/energy-data" target="_blank" rel="noopener" data-v-9e51dbd4> Energy Data </a><code data-v-9e51dbd4>population</code> column. IEA provides per-capita indicators for residential, services, and transport, but only per-value-added (gCO/USD) for industry. </li></ul></div><div class="meta-section" data-v-9e51dbd4><span class="meta-label" data-v-9e51dbd4>Data Hints</span><ul data-v-9e51dbd4><li data-v-9e51dbd4>Some countries may lack transport data. The total shown is the sum of available sectors.</li></ul></div></div><div class="chart-meta" data-v-9e51dbd4><div class="meta-section" data-v-9e51dbd4><span class="meta-label" data-v-9e51dbd4>Source</span><ul data-v-9e51dbd4><li data-v-9e51dbd4><strong data-v-9e51dbd4>IEA</strong><a href="https://www.iea.org/data-and-statistics/data-product/energy-efficiency-indicators-highlights" target="_blank" rel="noopener" data-v-9e51dbd4> Energy End-Uses &amp; Efficiency </a> (per-capita CO by sector). Indicator: <code data-v-9e51dbd4>Carbon intensity per capita (t CO2/capita)</code>. End uses: <code data-v-9e51dbd4>Total residential</code>, <code data-v-9e51dbd4>Total services</code>, <code data-v-9e51dbd4>Cars/light trucks</code> + <code data-v-9e51dbd4>Freight trucks</code> (transport) </li><li data-v-9e51dbd4> Industry per-capita derived from IEA total emissions (indicator: <code data-v-9e51dbd4>Total final use (kt CO2)</code>, end use containing <code data-v-9e51dbd4>Manufacturing</code>) divided by <strong data-v-9e51dbd4>OWID</strong><a href="https://github.com/owid/energy-data" target="_blank" rel="noopener" data-v-9e51dbd4> Energy Data </a><code data-v-9e51dbd4>population</code> column. IEA provides per-capita indicators for residential, services, and transport, but only per-value-added (gCO/USD) for industry. </li></ul></div><div class="meta-section" data-v-9e51dbd4><span class="meta-label" data-v-9e51dbd4>Data Hints</span><ul data-v-9e51dbd4><li data-v-9e51dbd4>Some countries may lack transport data. The total shown is the sum of available sectors.</li></ul></div></div>',2))]),C("div",n1,[a[13]||(a[13]=C("h3",null,"Carbon Intensity of the Energy Grid - Europe Comparison",-1)),a[14]||(a[14]=C("p",null,' Average CO2 emitted per kilowatt-hour of electricity generated from all sources, indicating how clean the power grid is in terms of emissions. Heavy reliance on nuclear power contributes to low carbon intensity levels for electricity, as in the case of France for example, but referring to it as "clean energy" remains a topic of discussion. ',-1)),C("div",r1,[j(e).isLoading?(F(),z("div",a1,"Loading energy data...")):j(e).error?(F(),z("div",i1,ct(j(e).error),1)):(F(),z(te,{key:2},[j(e).ecoLoaded?(F(),z("div",s1,[C("div",l1,[kt(kp,{rankingData:j(e).carbonIntensityRanking,selectedCountryCode:j(e).selectedCountryCode},null,8,["rankingData","selectedCountryCode"])])])):(F(),z("div",o1,"Eco data not available."))],64)),C("div",c1,[j(e).carbonIntensity?.latest_value!=null?(F(),z("h4",u1,[a[8]||(a[8]=Bt(" What does a carbon intensity of ",-1)),C("span",d1,ct(Math.round(j(e).carbonIntensity.latest_value))+" gCO/kWh",1),a[9]||(a[9]=Bt(" for ",-1)),C("span",f1,ct(j(e).selectedCountry?.name),1),a[10]||(a[10]=Bt(" mean in practice? ",-1))])):(F(),z("h4",h1,"What does your grid intensity mean in practice?")),a[11]||(a[11]=C("p",null," Most people are familiar with electrification as a fundamental part of decarbonization, where processes directly reliant on fossil fuels, if they cannot be done without, are replaced by electric alternatives. The electric car being a prime example of this. A fact that can be lost in this though, is that any benefits in terms of emissions through often costly and disruptive switches, are only as beneficial as the electricity is clean. The cards below (based on broad averages and approximations) demonstrate how impactful the effect can be, essentially highlighting the importance of electricity obtained from clean sources. ",-1)),kt(Bp,{gridIntensity:j(e).carbonIntensity?.latest_value},null,8,["gridIntensity"]),a[12]||(a[12]=ue('<details class="sources-details" data-v-9e51dbd4><summary data-v-9e51dbd4>Data sources and assumptions</summary><ul class="sources-list" data-v-9e51dbd4><li data-v-9e51dbd4><strong data-v-9e51dbd4>Car, EV, Train &amp; Tram energy (MJ/pkm)</strong>: <a href="https://ptua.org.au/myths/energy/" target="_blank" data-v-9e51dbd4>PTUA  Myth: Public transport doesn&#39;t really save energy</a>. Total energy per passenger-km including vehicle manufacturing. Car (ICE): 3.04.4, EV: 1.22.0, Train: 0.050.2, Tram: 0.170.8 MJ/pkm. Ranges reflect occupancy assumptions (cars: 1.11.5 passengers; trains/trams: peak vs off-peak patronage). </li><li data-v-9e51dbd4><strong data-v-9e51dbd4>Heat pump SCOP (3.0)</strong>: <a href="https://www.iea.org/reports/the-future-of-heat-pumps" target="_blank" data-v-9e51dbd4>IEA The Future of Heat Pumps</a>, &quot;How a heat pump works&quot; section, opening paragraph states COP ~4. SCOP 3.0 is a conservative seasonal figure accounting for cold-climate performance drops. </li><li data-v-9e51dbd4><strong data-v-9e51dbd4>Gas heating (215 gCO/kWh_th)</strong>: Natural gas space heating. Based on emission factor ~205 gCO/kWh with typical boiler efficiency ~90%. </li><li data-v-9e51dbd4><strong data-v-9e51dbd4>Household electricity (3,600 kWh/yr)</strong>: <a href="https://www.odyssee-mure.eu/publications/efficiency-by-sector/households/electricity-consumption-dwelling.html" target="_blank" data-v-9e51dbd4>Odyssee-MURE  Electricity consumption per dwelling</a>. EU average of 3.6 MWh per dwelling, widely used as a median for medium-sized households. Varies greatly by country (from ~1.8 MWh in Romania to ~8.5 MWh in Sweden). </li><li data-v-9e51dbd4><strong data-v-9e51dbd4>Data center: NTT Frankfurt 1 (77.4 MW IT)</strong>: <a href="https://services.global.ntt/en-us/services-and-products/global-data-centers/global-locations/emea/frankfurt-1-data-center" target="_blank" data-v-9e51dbd4>NTT Frankfurt 1</a>, Overview section (&quot;Secure and flexible space built to your specifications&quot; paragraph) and Specifications &gt; Power (70.1 MW operational + 7.3 MW under construction). </li><li data-v-9e51dbd4><strong data-v-9e51dbd4>Diesel truck (885 gCO/km)</strong>: Derived from 32.6 L/100 km (40t tractor-trailer, Long Haul cycle) x 2.68 kgCO/L. <a href="https://theicct.org/publication/lca-ghg-emissions-hdv-fuels-europe-feb23/" target="_blank" data-v-9e51dbd4>ICCT Feb 2023 LCA</a>, referencing the <a href="https://theicct.org/wp-content/uploads/2021/06/HDV_fuel-consumption_comparison_fs_20180418.pdf" target="_blank" data-v-9e51dbd4>ICCT April 2018 Fact Sheet</a>, average tractor-trailer fuel consumption figure. </li><li data-v-9e51dbd4><strong data-v-9e51dbd4>Electric truck (1.30 kWh/km)</strong>: <a href="https://theicct.org/publication/rw-use-cases-for-zet-heavy-tractor-trailers-for-goods-transport-in-the-eu-aug25/" target="_blank" data-v-9e51dbd4>ICCT Aug 2025</a>, Key Findings section: real-world range of 92 to 150 kWh/100 km for 40t tractor-trailers. 1.30 kWh/km (130 kWh/100 km) is within this range. </li><li data-v-9e51dbd4><strong data-v-9e51dbd4>PEM electrolysis (55 kWh/kgH)</strong>: <a href="https://www.hydrogen.energy.gov/docs/hydrogenprogramlibraries/pdfs/24005-clean-hydrogen-production-cost-pem-electrolyzer.pdf" target="_blank" data-v-9e51dbd4>DOE H2 Program Record #24005</a> (May 2024), main analysis section: beginning-of-life system electricity 55.2 kWh/kg (stack 51 + balance-of-plant 4.2). Lifetime average: 57.5 kWh/kg. </li><li data-v-9e51dbd4><strong data-v-9e51dbd4>Grey hydrogen SMR (9 kgCO/kgH)</strong>: <a href="https://www.iea.org/reports/global-hydrogen-review-2024" target="_blank" data-v-9e51dbd4>IEA Global Hydrogen Review 2024</a>, Ch. 8 &quot;GHG emissions of hydrogen&quot;, Highlights, 1st bullet: unabated natural gas emits 10 to 12 kgCO-eq/kgH (lifecycle). The value 9 represents direct combustion emissions only, excluding upstream methane. </li><li data-v-9e51dbd4><strong data-v-9e51dbd4>Blast furnace steel (2.2 tCO/t)</strong>: <a href="https://www.iea.org/energy-system/industry/steel" target="_blank" data-v-9e51dbd4>IEA Steel tracking page</a>, &quot;Direct CO intensity of crude steel production&quot; interactive chart. IEA reports ~2.0 to 2.3 tCO/t for BF-BOF globally; 2.2 is within this range. </li><li data-v-9e51dbd4><strong data-v-9e51dbd4>EAF steel (400 kWh/t + 50 kgCO/t process)</strong>: <a href="https://www.iea.org/reports/iron-and-steel-technology-roadmap" target="_blank" data-v-9e51dbd4>IEA Iron &amp; Steel Roadmap</a>. Industry literature (AIST) commonly cites 300 to 400 kWh/t for scrap-based EAF electricity. The 50 kgCO/t accounts for electrode and lime process emissions. </li></ul></details>',1))])])])]))}},g1=At(p1,[["__scopeId","data-v-9e51dbd4"]]),y1={class:"app-select-wrapper"},m1=["for"],v1={class:"app-select-container"},_1=["id","value","disabled"],x1={key:0,value:"",disabled:""},w1=["value"],b1={__name:"AppSelect",props:{modelValue:{type:[String,Number],default:""},options:{type:Array,required:!0,validator:t=>t.every(e=>e.value!==void 0&&e.label!==void 0)},label:{type:String,default:""},placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`select-${Math.random().toString(36).substr(2,9)}`}},emits:["update:modelValue"],setup(t){return(e,n)=>(F(),z("div",y1,[t.label?(F(),z("label",{key:0,for:t.id,class:"app-select-label"},ct(t.label),9,m1)):ce("",!0),C("div",v1,[C("select",{id:t.id,value:t.modelValue,class:"app-select",disabled:t.disabled,onChange:n[0]||(n[0]=r=>e.$emit("update:modelValue",r.target.value))},[t.placeholder?(F(),z("option",x1,ct(t.placeholder),1)):ce("",!0),(F(!0),z(te,null,Se(t.options,r=>(F(),z("option",{key:r.key,value:r.value},ct(r.label),9,w1))),128))],40,_1),n[1]||(n[1]=C("span",{class:"app-select-icon"},[C("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[C("path",{d:"M4 6L8 10L12 6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})])],-1))])]))}},C1=At(b1,[["__scopeId","data-v-e0a5461e"]]),k1={class:"year-slot"},M1={key:0,class:"year-slot-label"},$1={class:"year-slot-row"},S1=["disabled"],E1={class:"year-slot-display"},A1={class:"year-adj"},T1={class:"year-drum"},N1={class:"year-adj"},P1=["disabled"],R1={__name:"YearSlot",props:{modelValue:{type:Number,required:!0},years:{type:Array,required:!0},label:{type:String,default:""}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=e,a=it(!1),i=it(n.modelValue),o=tt(()=>n.years.indexOf(n.modelValue)),s=tt(()=>o.value>0),u=tt(()=>o.value<n.years.length-1),l=tt(()=>s.value?n.years[o.value-1]:null),c=tt(()=>u.value?n.years[o.value+1]:null);qt(()=>n.modelValue,p=>{i.value=p});function f(p){const m=o.value+p;m>=0&&m<n.years.length&&d(n.years[m])}function d(p){p!==n.modelValue&&(a.value=!0,i.value=p,r("update:modelValue",p),setTimeout(()=>{a.value=!1},200))}return(p,m)=>(F(),z("div",k1,[t.label?(F(),z("label",M1,ct(t.label),1)):ce("",!0),C("div",$1,[C("button",{class:"year-slot-btn",disabled:!s.value,onClick:m[0]||(m[0]=k=>f(-1)),type:"button"},[...m[2]||(m[2]=[C("svg",{width:"10",height:"10",viewBox:"0 0 10 10"},[C("path",{d:"M7 1L3 5L7 9",stroke:"currentColor","stroke-width":"1.5",fill:"none"})],-1)])],8,S1),C("div",E1,[C("span",A1,ct(l.value||""),1),C("div",T1,[C("span",{class:Ht(["year-current",{"year-pop":a.value}])},ct(i.value),3)]),C("span",N1,ct(c.value||""),1)]),C("button",{class:"year-slot-btn",disabled:!u.value,onClick:m[1]||(m[1]=k=>f(1)),type:"button"},[...m[3]||(m[3]=[C("svg",{width:"10",height:"10",viewBox:"0 0 10 10"},[C("path",{d:"M3 1L7 5L3 9",stroke:"currentColor","stroke-width":"1.5",fill:"none"})],-1)])],8,P1)])]))}},I1=At(R1,[["__scopeId","data-v-63b2739e"]]),O1=Ni("globalConfig",()=>{const t=it({min:1990,max:2024}),e=tt(()=>t.value.min),n=tt(()=>t.value.max),r=tt(()=>{const o=[];for(let s=t.value.max;s>=t.value.min;s--)o.push(s);return o}),a=tt(()=>{const o=[];for(let s=t.value.min;s<=t.value.max;s++)o.push(s);return o});function i(o,s){t.value={min:o,max:s}}return{yearRange:t,minYear:e,maxYear:n,yearsDescending:r,yearsAscending:a,setYearRange:i}}),D1={class:"config-header"},H1={__name:"ConfigHeader",setup(t){const e=me(),n=O1(),r=tt(()=>e.countries.map(c=>({value:c.code,label:c.name}))),a=tt({get:()=>e.selectedCountryCode,set:c=>e.setSelectedCountry(c)}),i=tt({get:()=>e.selectedYear,set:c=>e.setSelectedYear(Number(c))});ne(()=>{e.loadData()});const o=Xo(),s=Ko(),u=tt(()=>s.path.startsWith("/info"));function l(){o.push("/info")}return(c,f)=>(F(),z("div",D1,[u.value?ce("",!0):(F(),z(te,{key:0},[kt(C1,{class:"config-item",options:r.value,label:"Country",modelValue:a.value,"onUpdate:modelValue":f[0]||(f[0]=d=>a.value=d),placeholder:"Select country"},null,8,["options","modelValue"]),kt(I1,{class:"config-item",years:j(n).yearsDescending,label:"Year",modelValue:i.value,"onUpdate:modelValue":f[1]||(f[1]=d=>i.value=d)},null,8,["years","modelValue"])],64)),C("button",{class:Ht(["methodology-button",{active:u.value}]),onClick:l,type:"button","aria-label":"Info / Methodology",title:"Info / Methodology"},[...f[2]||(f[2]=[C("span",{class:"material-symbols-outlined"},"info",-1)])],2)]))}},L1=At(H1,[["__scopeId","data-v-262319ec"]]),z1={id:"app-container"},F1={class:"main-content main-with-config"},W1={__name:"Home",setup(t){const e=it([{id:"consumption",name:"My energy consumption",icon:"battery_android_frame_5"},{id:"productionconsumption",name:"Production & Consumption",icon:"instant_mix"},{id:"costs",name:"Energy costs",icon:"euro"},{id:"tradingpartner",name:"The Trading Partners",icon:"cycle"},{id:"dependency",name:"Dependency on imports",icon:"trending_up"},{id:"eco",name:"Ecological footprint",icon:"energy_savings_leaf"}]);return(n,r)=>(F(),z("div",z1,[kt(Yo,{sections:e.value},null,8,["sections"]),C("div",null,[kt(L1),C("main",F1,[kt(h0),kt(sp),kt(R0),kt(lh),kt(jh),kt(g1)]),r[0]||(r[0]=ue('<footer class="site-footer"><div class="footer-names"><div class="name-with-tooltip"><span class="footer-name">Matteo Glser</span><div class="tooltip">Data research, development &amp; data set management</div></div><div class="name-with-tooltip"><span class="footer-name">Petula Arnold</span><div class="tooltip">Concept, statistics &amp; content structure</div></div><div class="name-with-tooltip"><span class="footer-name">Maleah Leonie Kgler</span><div class="tooltip">Design, storytelling &amp; content structure</div></div></div><div class="footer-right"><span class="footer-title">VIZIS</span></div></footer>',1))])]))}};export{W1 as default};
