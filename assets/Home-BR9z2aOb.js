import{d as Pi,c as rt,r as ft,n as zt,o as oe,w as Vt,a as _e,b as z,e as G,_ as Tt,f as v,g as he,u as j,t as gt,h as Ct,i as wt,j as Bt,k as jt,F as ae,l as Ne,m as we,p as Go,v as Yo,q as Bo,s as Wo,x as Oi,y as Uo,z as Vo,T as Xo}from"./index-vmKZWQfI.js";import{S as Ko,F as qo}from"./Footer-KYyugppS.js";const Jt=Pi("energyData",()=>{const t=ft(null),e=ft(null),n=ft(null),r=ft(null),a=ft("IT"),i=ft(2023),o=ft(!1),s=ft(!1),u=ft(null),l=rt(()=>!!n.value),c=rt(()=>!!r.value),d=rt(()=>t.value?.countries?Object.entries(t.value.countries).map(([w,h])=>({code:w,name:h.name})).sort((w,h)=>w.name.localeCompare(h.name)):[]),f=rt(()=>{if(!t.value?.countries||!a.value)return null;const w=t.value.countries[a.value];return w?{code:a.value,name:w.name,years:w.years}:null}),p=rt(()=>t.value?.metadata||null),m=rt(()=>f.value?.years?Object.keys(f.value.years).map(Number).sort((w,h)=>h-w):[]),C=rt(()=>!f.value?.years||!i.value?null:f.value.years[i.value]?.dependency||null),k=rt(()=>{if(!f.value?.years||!i.value)return null;const w=f.value.years[i.value];return w?{imports:w.imports||null,exports:w.exports||null}:null}),M=rt(()=>{if(!f.value?.years||!i.value)return null;const w=f.value.years[i.value];return w?{production:w.production||null,consumption:w.consumption||null}:null}),T=rt(()=>{if(!e.value||!f.value?.name||!i.value)return[];const w=e.value.countries[f.value.name];return w?["Industry","Residential","Transport","Service"].map(g=>{const y=w[g];if(!y)return null;const _=y[i.value];if(!_)return null;const x={};return Object.entries(_).forEach(([b,N])=>{(b.includes("Manufacturing")||b.includes("Total residential")||b.includes("Total passenger and freight transport")||b.includes("Total services"))&&Object.entries(N.products).forEach(([F,B])=>{F.includes("Total")||(x[F.replace("(PJ)","").trim()]=B||0)})}),{name:g,energyType:Object.entries(x).map(([b,N])=>({name:b,value:N}))}}):[]}),P=rt(()=>{if(!e.value||!f.value?.name||!i.value)return[];const w=e.value.countries[f.value.name];if(!w)return[];const g=["Industry","Residential","Transport","Service"].map(y=>{const _=w[y];if(!_)return null;const x=_[i.value];if(!x)return null;const b=[];let N=0;switch(y){case"Industry":Object.entries(x).forEach(([F,B])=>{const U=(B.products||{})["Total final use (PJ)"]||0;b.push({name:F,value:U}),N+=U});break;case"Transport":Object.entries(x).forEach(([F,B])=>{if(!F.includes("Total")||["Total trains","Total airplanes","Total ships"].includes(F)){const U=(B.products||{})["Total final use (PJ)"]||0;b.push({name:F,value:U}),N+=U}if(N===0){const K=x["Total passenger and freight transport"];K&&(N=K.products?.["Total final use (PJ)"]||0)}});break;default:Object.entries(x).forEach(([F,B])=>{if(!F.includes("Total residential")&&!F.includes("Total services")){const U=(B.products||{})["Total final use (PJ)"]||0;b.push({name:F,value:U}),N+=U}}),N==0&&Object.entries(x).forEach(([F,B])=>{if(F="Total residential"){const U=(B.products||{})["Total final use (PJ)"]||0;N+=U}});break}return{name:y,value:N,children:b}}).filter(y=>y&&y.children.length>0);return{name:f.value.name+" "+i.value,children:g}}),R=rt(()=>!r.value?.countries||!a.value?null:r.value.countries[a.value]?.carbon_intensity||null),H=rt(()=>r.value?.carbon_intensity_ranking?r.value.carbon_intensity_ranking:[]),S=rt(()=>!r.value?.countries||!a.value?null:r.value.countries[a.value]?.emissions_per_capita||null),L=rt(()=>!r.value?.countries||!a.value?null:r.value.countries[a.value]?.emissions_total_kt||null),Y=rt(()=>{if(!r.value?.countries)return[];const w=[];for(const[h,g]of Object.entries(r.value.countries)){const y=g.emissions_per_capita;if(!y)continue;const _=(y.residential||0)+(y.services||0)+(y.transport||0)+(y.industry||0);_>0&&w.push({code:h,name:g.name,value:Math.round(_*100)/100,year:y.year})}return w.sort((h,g)=>h.value-g.value),w}),E=rt(()=>{if(!n.value||!a.value)return[];const w=n.value.countries[a.value];if(!w)return[];const h="Price of electricity (US cents per kWh)",g=["1","2","3","4"];return Object.keys(w).filter(_=>/^\d{4}$/.test(_)).map(Number).sort((_,x)=>_-x).map(_=>{const x=w[_],b=g.map(N=>x?.[N]?.CPI0450!=null?Number(x[N].CPI0450):null);return{year:_,electricity:x?.[h]!=null?Number(x[h]):null,CPI0450:b}})});async function D(){if(!(t.value&&e.value&&n.value)){o.value=!0,u.value=null;try{const g=(await(await fetch("/MyEnergyProfile/data/energy_mix.json")).text()).replace(/:\s*NaN/g,": null");t.value=JSON.parse(g);const x=(await(await fetch("/MyEnergyProfile/data/energy_consumptions_by_sector.json")).text()).replace(/:\s*NaN/g,": null");e.value=JSON.parse(x);try{const F=(await(await fetch("/MyEnergyProfile/data/energy_prices.json")).text()).replace(/:\s*NaN/g,": null");n.value=JSON.parse(F)}catch(b){console.warn("Failed to load energy_prices.json",b),n.value=null}try{const N=await(await fetch("/MyEnergyProfile/data/eco_data.json")).text();r.value=JSON.parse(N.replace(/:\s*NaN/g,": null"))}catch(b){console.warn("eco_data.json not loaded",b),r.value=null}}catch(w){u.value=w.message,console.error("Failed to load energy data:",w)}finally{o.value=!1}}}function A(w){a.value=w}function $(w){w!==i.value&&(s.value=!0,requestAnimationFrame(()=>{i.value=w,zt(()=>{s.value=!1})}))}return{rawData:t,selectedCountryCode:a,selectedYear:i,isLoading:o,isYearChanging:s,error:u,countries:d,selectedCountry:f,metadata:p,availableYears:m,dependencyData:C,tradeData:k,productionConsumptionData:M,pieChartData:T,sunburstData:P,loadData:D,setSelectedCountry:A,setSelectedYear:$,pricesData:n,pricesLoaded:l,electricitySeries:E,ecoData:r,ecoLoaded:c,carbonIntensity:R,carbonIntensityRanking:H,emissionsPerCapita:S,emissionsPerCapitaRanking:Y,emissionsTotal:L}});function Tn(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function jo(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ii(t){let e,n,r;t.length!==2?(e=Tn,n=(s,u)=>Tn(t(s),u),r=(s,u)=>t(s)-u):(e=t===Tn||t===jo?t:Zo,n=t,r=t);function a(s,u,l=0,c=s.length){if(l<c){if(e(u,u)!==0)return c;do{const d=l+c>>>1;n(s[d],u)<0?l=d+1:c=d}while(l<c)}return l}function i(s,u,l=0,c=s.length){if(l<c){if(e(u,u)!==0)return c;do{const d=l+c>>>1;n(s[d],u)<=0?l=d+1:c=d}while(l<c)}return l}function o(s,u,l=0,c=s.length){const d=a(s,u,l,c-1);return d>l&&r(s[d-1],u)>-r(s[d],u)?d-1:d}return{left:a,center:o,right:i}}function Zo(){return 0}function Jo(t){return t===null?NaN:+t}const Qo=Ii(Tn),ts=Qo.right;Ii(Jo).center;function es(t,e){let n,r;for(const a of t)a!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)));return[n,r]}class fe{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let r=0;for(let a=0;a<this._n&&a<32;a++){const i=n[a],o=e+i,s=Math.abs(e)<Math.abs(i)?e-(o-i):i-(o-e);s&&(n[r++]=s),e=o}return n[r]=e,this._n=r+1,this}valueOf(){const e=this._partials;let n=this._n,r,a,i,o=0;if(n>0){for(o=e[--n];n>0&&(r=o,a=e[--n],o=r+a,i=a-(o-r),!i););n>0&&(i<0&&e[n-1]<0||i>0&&e[n-1]>0)&&(a=i*2,r=o+a,a==r-o&&(o=r))}return o}}const ns=Math.sqrt(50),rs=Math.sqrt(10),as=Math.sqrt(2);function Dn(t,e,n){const r=(e-t)/Math.max(0,n),a=Math.floor(Math.log10(r)),i=r/Math.pow(10,a),o=i>=ns?10:i>=rs?5:i>=as?2:1;let s,u,l;return a<0?(l=Math.pow(10,-a)/o,s=Math.round(t*l),u=Math.round(e*l),s/l<t&&++s,u/l>e&&--u,l=-l):(l=Math.pow(10,a)*o,s=Math.round(t/l),u=Math.round(e/l),s*l<t&&++s,u*l>e&&--u),u<s&&.5<=n&&n<2?Dn(t,e,n*2):[s,u,l]}function is(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[a,i,o]=r?Dn(e,t,n):Dn(t,e,n);if(!(i>=a))return[];const s=i-a+1,u=new Array(s);if(r)if(o<0)for(let l=0;l<s;++l)u[l]=(i-l)/-o;else for(let l=0;l<s;++l)u[l]=(i-l)*o;else if(o<0)for(let l=0;l<s;++l)u[l]=(a+l)/-o;else for(let l=0;l<s;++l)u[l]=(a+l)*o;return u}function Ir(t,e,n){return e=+e,t=+t,n=+n,Dn(t,e,n)[2]}function os(t,e,n){e=+e,t=+t,n=+n;const r=e<t,a=r?Ir(e,t,n):Ir(t,e,n);return(r?-1:1)*(a<0?1/-a:a)}function hn(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let a of t)(a=e(a,++r,t))!=null&&(n<a||n===void 0&&a>=a)&&(n=a)}return n}function ss(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function*ls(t){for(const e of t)yield*e}function Di(t){return Array.from(ls(t))}function cs(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let a of t)(a=+e(a,++r,t))&&(n+=a)}return n}function us(t){return t}var wr=1,br=2,Dr=3,qe=4,Na=1e-6;function fs(t){return"translate("+t+",0)"}function ds(t){return"translate(0,"+t+")"}function hs(t){return e=>+t(e)}function ps(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function gs(){return!this.__axis}function Hi(t,e){var n=[],r=null,a=null,i=6,o=6,s=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=t===wr||t===qe?-1:1,c=t===qe||t===br?"x":"y",d=t===wr||t===Dr?fs:ds;function f(p){var m=r??(e.ticks?e.ticks.apply(e,n):e.domain()),C=a??(e.tickFormat?e.tickFormat.apply(e,n):us),k=Math.max(i,0)+s,M=e.range(),T=+M[0]+u,P=+M[M.length-1]+u,R=(e.bandwidth?ps:hs)(e.copy(),u),H=p.selection?p.selection():p,S=H.selectAll(".domain").data([null]),L=H.selectAll(".tick").data(m,e).order(),Y=L.exit(),E=L.enter().append("g").attr("class","tick"),D=L.select("line"),A=L.select("text");S=S.merge(S.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),L=L.merge(E),D=D.merge(E.append("line").attr("stroke","currentColor").attr(c+"2",l*i)),A=A.merge(E.append("text").attr("fill","currentColor").attr(c,l*k).attr("dy",t===wr?"0em":t===Dr?"0.71em":"0.32em")),p!==H&&(S=S.transition(p),L=L.transition(p),D=D.transition(p),A=A.transition(p),Y=Y.transition(p).attr("opacity",Na).attr("transform",function($){return isFinite($=R($))?d($+u):this.getAttribute("transform")}),E.attr("opacity",Na).attr("transform",function($){var w=this.parentNode.__axis;return d((w&&isFinite(w=w($))?w:R($))+u)})),Y.remove(),S.attr("d",t===qe||t===br?o?"M"+l*o+","+T+"H"+u+"V"+P+"H"+l*o:"M"+u+","+T+"V"+P:o?"M"+T+","+l*o+"V"+u+"H"+P+"V"+l*o:"M"+T+","+u+"H"+P),L.attr("opacity",1).attr("transform",function($){return d(R($)+u)}),D.attr(c+"2",l*i),A.attr(c,l*k).text(C),H.filter(gs).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===br?"start":t===qe?"end":"middle"),H.each(function(){this.__axis=R})}return f.scale=function(p){return arguments.length?(e=p,f):e},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(p){return arguments.length?(n=p==null?[]:Array.from(p),f):n.slice()},f.tickValues=function(p){return arguments.length?(r=p==null?null:Array.from(p),f):r&&r.slice()},f.tickFormat=function(p){return arguments.length?(a=p,f):a},f.tickSize=function(p){return arguments.length?(i=o=+p,f):i},f.tickSizeInner=function(p){return arguments.length?(i=+p,f):i},f.tickSizeOuter=function(p){return arguments.length?(o=+p,f):o},f.tickPadding=function(p){return arguments.length?(s=+p,f):s},f.offset=function(p){return arguments.length?(u=+p,f):u},f}function Li(t){return Hi(Dr,t)}function Fi(t){return Hi(qe,t)}var ys={value:()=>{}};function ya(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new An(n)}function An(t){this._=t}function ms(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",a=n.indexOf(".");if(a>=0&&(r=n.slice(a+1),n=n.slice(0,a)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}An.prototype=ya.prototype={constructor:An,on:function(t,e){var n=this._,r=ms(t+"",n),a,i=-1,o=r.length;if(arguments.length<2){for(;++i<o;)if((a=(t=r[i]).type)&&(a=vs(n[a],t.name)))return a;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++i<o;)if(a=(t=r[i]).type)n[a]=Ra(n[a],t.name,e);else if(e==null)for(a in n)n[a]=Ra(n[a],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new An(t)},call:function(t,e){if((a=arguments.length-2)>0)for(var n=new Array(a),r=0,a,i;r<a;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=this._[t],r=0,a=i.length;r<a;++r)i[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],a=0,i=r.length;a<i;++a)r[a].value.apply(e,n)}};function vs(t,e){for(var n=0,r=t.length,a;n<r;++n)if((a=t[n]).name===e)return a.value}function Ra(t,e,n){for(var r=0,a=t.length;r<a;++r)if(t[r].name===e){t[r]=ys,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Hr="http://www.w3.org/1999/xhtml";const Pa={svg:"http://www.w3.org/2000/svg",xhtml:Hr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function dr(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Pa.hasOwnProperty(e)?{space:Pa[e],local:t}:t}function _s(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Hr&&e.documentElement.namespaceURI===Hr?e.createElement(t):e.createElementNS(n,t)}}function xs(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function zi(t){var e=dr(t);return(e.local?xs:_s)(e)}function ws(){}function ma(t){return t==null?ws:function(){return this.querySelector(t)}}function bs(t){typeof t!="function"&&(t=ma(t));for(var e=this._groups,n=e.length,r=new Array(n),a=0;a<n;++a)for(var i=e[a],o=i.length,s=r[a]=new Array(o),u,l,c=0;c<o;++c)(u=i[c])&&(l=t.call(u,u.__data__,c,i))&&("__data__"in u&&(l.__data__=u.__data__),s[c]=l);return new Gt(r,this._parents)}function Gi(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Cs(){return[]}function Yi(t){return t==null?Cs:function(){return this.querySelectorAll(t)}}function ks(t){return function(){return Gi(t.apply(this,arguments))}}function Ms(t){typeof t=="function"?t=ks(t):t=Yi(t);for(var e=this._groups,n=e.length,r=[],a=[],i=0;i<n;++i)for(var o=e[i],s=o.length,u,l=0;l<s;++l)(u=o[l])&&(r.push(t.call(u,u.__data__,l,o)),a.push(u));return new Gt(r,a)}function Bi(t){return function(){return this.matches(t)}}function Wi(t){return function(e){return e.matches(t)}}var Ss=Array.prototype.find;function $s(t){return function(){return Ss.call(this.children,t)}}function Es(){return this.firstElementChild}function Ts(t){return this.select(t==null?Es:$s(typeof t=="function"?t:Wi(t)))}var As=Array.prototype.filter;function Ns(){return Array.from(this.children)}function Rs(t){return function(){return As.call(this.children,t)}}function Ps(t){return this.selectAll(t==null?Ns:Rs(typeof t=="function"?t:Wi(t)))}function Os(t){typeof t!="function"&&(t=Bi(t));for(var e=this._groups,n=e.length,r=new Array(n),a=0;a<n;++a)for(var i=e[a],o=i.length,s=r[a]=[],u,l=0;l<o;++l)(u=i[l])&&t.call(u,u.__data__,l,i)&&s.push(u);return new Gt(r,this._parents)}function Ui(t){return new Array(t.length)}function Is(){return new Gt(this._enter||this._groups.map(Ui),this._parents)}function Hn(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Hn.prototype={constructor:Hn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Ds(t){return function(){return t}}function Hs(t,e,n,r,a,i){for(var o=0,s,u=e.length,l=i.length;o<l;++o)(s=e[o])?(s.__data__=i[o],r[o]=s):n[o]=new Hn(t,i[o]);for(;o<u;++o)(s=e[o])&&(a[o]=s)}function Ls(t,e,n,r,a,i,o){var s,u,l=new Map,c=e.length,d=i.length,f=new Array(c),p;for(s=0;s<c;++s)(u=e[s])&&(f[s]=p=o.call(u,u.__data__,s,e)+"",l.has(p)?a[s]=u:l.set(p,u));for(s=0;s<d;++s)p=o.call(t,i[s],s,i)+"",(u=l.get(p))?(r[s]=u,u.__data__=i[s],l.delete(p)):n[s]=new Hn(t,i[s]);for(s=0;s<c;++s)(u=e[s])&&l.get(f[s])===u&&(a[s]=u)}function Fs(t){return t.__data__}function zs(t,e){if(!arguments.length)return Array.from(this,Fs);var n=e?Ls:Hs,r=this._parents,a=this._groups;typeof t!="function"&&(t=Ds(t));for(var i=a.length,o=new Array(i),s=new Array(i),u=new Array(i),l=0;l<i;++l){var c=r[l],d=a[l],f=d.length,p=Gs(t.call(c,c&&c.__data__,l,r)),m=p.length,C=s[l]=new Array(m),k=o[l]=new Array(m),M=u[l]=new Array(f);n(c,d,C,k,M,p,e);for(var T=0,P=0,R,H;T<m;++T)if(R=C[T]){for(T>=P&&(P=T+1);!(H=k[P])&&++P<m;);R._next=H||null}}return o=new Gt(o,r),o._enter=s,o._exit=u,o}function Gs(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ys(){return new Gt(this._exit||this._groups.map(Ui),this._parents)}function Bs(t,e,n){var r=this.enter(),a=this,i=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(a=e(a),a&&(a=a.selection())),n==null?i.remove():n(i),r&&a?r.merge(a).order():a}function Ws(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,a=n.length,i=r.length,o=Math.min(a,i),s=new Array(a),u=0;u<o;++u)for(var l=n[u],c=r[u],d=l.length,f=s[u]=new Array(d),p,m=0;m<d;++m)(p=l[m]||c[m])&&(f[m]=p);for(;u<a;++u)s[u]=n[u];return new Gt(s,this._parents)}function Us(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],a=r.length-1,i=r[a],o;--a>=0;)(o=r[a])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function Vs(t){t||(t=Xs);function e(d,f){return d&&f?t(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,a=new Array(r),i=0;i<r;++i){for(var o=n[i],s=o.length,u=a[i]=new Array(s),l,c=0;c<s;++c)(l=o[c])&&(u[c]=l);u.sort(e)}return new Gt(a,this._parents).order()}function Xs(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Ks(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function qs(){return Array.from(this)}function js(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],a=0,i=r.length;a<i;++a){var o=r[a];if(o)return o}return null}function Zs(){let t=0;for(const e of this)++t;return t}function Js(){return!this.node()}function Qs(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var a=e[n],i=0,o=a.length,s;i<o;++i)(s=a[i])&&t.call(s,s.__data__,i,a);return this}function tl(t){return function(){this.removeAttribute(t)}}function el(t){return function(){this.removeAttributeNS(t.space,t.local)}}function nl(t,e){return function(){this.setAttribute(t,e)}}function rl(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function al(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function il(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function ol(t,e){var n=dr(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?el:tl:typeof e=="function"?n.local?il:al:n.local?rl:nl)(n,e))}function Vi(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function sl(t){return function(){this.style.removeProperty(t)}}function ll(t,e,n){return function(){this.style.setProperty(t,e,n)}}function cl(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function ul(t,e,n){return arguments.length>1?this.each((e==null?sl:typeof e=="function"?cl:ll)(t,e,n??"")):Ge(this.node(),t)}function Ge(t,e){return t.style.getPropertyValue(e)||Vi(t).getComputedStyle(t,null).getPropertyValue(e)}function fl(t){return function(){delete this[t]}}function dl(t,e){return function(){this[t]=e}}function hl(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function pl(t,e){return arguments.length>1?this.each((e==null?fl:typeof e=="function"?hl:dl)(t,e)):this.node()[t]}function Xi(t){return t.trim().split(/^|\s+/)}function va(t){return t.classList||new Ki(t)}function Ki(t){this._node=t,this._names=Xi(t.getAttribute("class")||"")}Ki.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function qi(t,e){for(var n=va(t),r=-1,a=e.length;++r<a;)n.add(e[r])}function ji(t,e){for(var n=va(t),r=-1,a=e.length;++r<a;)n.remove(e[r])}function gl(t){return function(){qi(this,t)}}function yl(t){return function(){ji(this,t)}}function ml(t,e){return function(){(e.apply(this,arguments)?qi:ji)(this,t)}}function vl(t,e){var n=Xi(t+"");if(arguments.length<2){for(var r=va(this.node()),a=-1,i=n.length;++a<i;)if(!r.contains(n[a]))return!1;return!0}return this.each((typeof e=="function"?ml:e?gl:yl)(n,e))}function _l(){this.textContent=""}function xl(t){return function(){this.textContent=t}}function wl(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function bl(t){return arguments.length?this.each(t==null?_l:(typeof t=="function"?wl:xl)(t)):this.node().textContent}function Cl(){this.innerHTML=""}function kl(t){return function(){this.innerHTML=t}}function Ml(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Sl(t){return arguments.length?this.each(t==null?Cl:(typeof t=="function"?Ml:kl)(t)):this.node().innerHTML}function $l(){this.nextSibling&&this.parentNode.appendChild(this)}function El(){return this.each($l)}function Tl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Al(){return this.each(Tl)}function Nl(t){var e=typeof t=="function"?t:zi(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Rl(){return null}function Pl(t,e){var n=typeof t=="function"?t:zi(t),r=e==null?Rl:typeof e=="function"?e:ma(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Ol(){var t=this.parentNode;t&&t.removeChild(this)}function Il(){return this.each(Ol)}function Dl(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Hl(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ll(t){return this.select(t?Hl:Dl)}function Fl(t){return arguments.length?this.property("__data__",t):this.node().__data__}function zl(t){return function(e){t.call(this,e,this.__data__)}}function Gl(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Yl(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,a=e.length,i;n<a;++n)i=e[n],(!t.type||i.type===t.type)&&i.name===t.name?this.removeEventListener(i.type,i.listener,i.options):e[++r]=i;++r?e.length=r:delete this.__on}}}function Bl(t,e,n){return function(){var r=this.__on,a,i=zl(e);if(r){for(var o=0,s=r.length;o<s;++o)if((a=r[o]).type===t.type&&a.name===t.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=i,a.options=n),a.value=e;return}}this.addEventListener(t.type,i,n),a={type:t.type,name:t.name,value:e,listener:i,options:n},r?r.push(a):this.__on=[a]}}function Wl(t,e,n){var r=Gl(t+""),a,i=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,l=s.length,c;u<l;++u)for(a=0,c=s[u];a<i;++a)if((o=r[a]).type===c.type&&o.name===c.name)return c.value}return}for(s=e?Bl:Yl,a=0;a<i;++a)this.each(s(r[a],e,n));return this}function Zi(t,e,n){var r=Vi(t),a=r.CustomEvent;typeof a=="function"?a=new a(e,n):(a=r.document.createEvent("Event"),n?(a.initEvent(e,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(e,!1,!1)),t.dispatchEvent(a)}function Ul(t,e){return function(){return Zi(this,t,e)}}function Vl(t,e){return function(){return Zi(this,t,e.apply(this,arguments))}}function Xl(t,e){return this.each((typeof e=="function"?Vl:Ul)(t,e))}function*Kl(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],a=0,i=r.length,o;a<i;++a)(o=r[a])&&(yield o)}var _a=[null];function Gt(t,e){this._groups=t,this._parents=e}function pn(){return new Gt([[document.documentElement]],_a)}function ql(){return this}Gt.prototype=pn.prototype={constructor:Gt,select:bs,selectAll:Ms,selectChild:Ts,selectChildren:Ps,filter:Os,data:zs,enter:Is,exit:Ys,join:Bs,merge:Ws,selection:ql,order:Us,sort:Vs,call:Ks,nodes:qs,node:js,size:Zs,empty:Js,each:Qs,attr:ol,style:ul,property:pl,classed:vl,text:bl,html:Sl,raise:El,lower:Al,append:Nl,insert:Pl,remove:Il,clone:Ll,datum:Fl,on:Wl,dispatch:Xl,[Symbol.iterator]:Kl};function ht(t){return typeof t=="string"?new Gt([[document.querySelector(t)]],[document.documentElement]):new Gt([[t]],_a)}function jl(t){let e;for(;e=t.sourceEvent;)t=e;return t}function ke(t,e){if(t=jl(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}}return[t.pageX,t.pageY]}function Ln(t){return typeof t=="string"?new Gt([document.querySelectorAll(t)],[document.documentElement]):new Gt([Gi(t)],_a)}const Lr={capture:!0,passive:!1};function Fr(t){t.preventDefault(),t.stopImmediatePropagation()}function Zl(t){var e=t.document.documentElement,n=ht(t).on("dragstart.drag",Fr,Lr);"onselectstart"in e?n.on("selectstart.drag",Fr,Lr):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Jl(t,e){var n=t.document.documentElement,r=ht(t).on("dragstart.drag",null);e&&(r.on("click.drag",Fr,Lr),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function xa(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Ji(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function gn(){}var an=.7,Fn=1/an,ze="\\s*([+-]?\\d+)\\s*",on="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",de="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ql=/^#([0-9a-f]{3,8})$/,tc=new RegExp(`^rgb\\(${ze},${ze},${ze}\\)$`),ec=new RegExp(`^rgb\\(${de},${de},${de}\\)$`),nc=new RegExp(`^rgba\\(${ze},${ze},${ze},${on}\\)$`),rc=new RegExp(`^rgba\\(${de},${de},${de},${on}\\)$`),ac=new RegExp(`^hsl\\(${on},${de},${de}\\)$`),ic=new RegExp(`^hsla\\(${on},${de},${de},${on}\\)$`),Oa={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};xa(gn,be,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ia,formatHex:Ia,formatHex8:oc,formatHsl:sc,formatRgb:Da,toString:Da});function Ia(){return this.rgb().formatHex()}function oc(){return this.rgb().formatHex8()}function sc(){return Qi(this).formatHsl()}function Da(){return this.rgb().formatRgb()}function be(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ql.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Ha(e):n===3?new Wt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?mn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?mn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=tc.exec(t))?new Wt(e[1],e[2],e[3],1):(e=ec.exec(t))?new Wt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=nc.exec(t))?mn(e[1],e[2],e[3],e[4]):(e=rc.exec(t))?mn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=ac.exec(t))?za(e[1],e[2]/100,e[3]/100,1):(e=ic.exec(t))?za(e[1],e[2]/100,e[3]/100,e[4]):Oa.hasOwnProperty(t)?Ha(Oa[t]):t==="transparent"?new Wt(NaN,NaN,NaN,0):null}function Ha(t){return new Wt(t>>16&255,t>>8&255,t&255,1)}function mn(t,e,n,r){return r<=0&&(t=e=n=NaN),new Wt(t,e,n,r)}function lc(t){return t instanceof gn||(t=be(t)),t?(t=t.rgb(),new Wt(t.r,t.g,t.b,t.opacity)):new Wt}function zr(t,e,n,r){return arguments.length===1?lc(t):new Wt(t,e,n,r??1)}function Wt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}xa(Wt,zr,Ji(gn,{brighter(t){return t=t==null?Fn:Math.pow(Fn,t),new Wt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?an:Math.pow(an,t),new Wt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Wt(Re(this.r),Re(this.g),Re(this.b),zn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:La,formatHex:La,formatHex8:cc,formatRgb:Fa,toString:Fa}));function La(){return`#${Ae(this.r)}${Ae(this.g)}${Ae(this.b)}`}function cc(){return`#${Ae(this.r)}${Ae(this.g)}${Ae(this.b)}${Ae((isNaN(this.opacity)?1:this.opacity)*255)}`}function Fa(){const t=zn(this.opacity);return`${t===1?"rgb(":"rgba("}${Re(this.r)}, ${Re(this.g)}, ${Re(this.b)}${t===1?")":`, ${t})`}`}function zn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Re(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ae(t){return t=Re(t),(t<16?"0":"")+t.toString(16)}function za(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ne(t,e,n,r)}function Qi(t){if(t instanceof ne)return new ne(t.h,t.s,t.l,t.opacity);if(t instanceof gn||(t=be(t)),!t)return new ne;if(t instanceof ne)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,a=Math.min(e,n,r),i=Math.max(e,n,r),o=NaN,s=i-a,u=(i+a)/2;return s?(e===i?o=(n-r)/s+(n<r)*6:n===i?o=(r-e)/s+2:o=(e-n)/s+4,s/=u<.5?i+a:2-i-a,o*=60):s=u>0&&u<1?0:o,new ne(o,s,u,t.opacity)}function to(t,e,n,r){return arguments.length===1?Qi(t):new ne(t,e,n,r??1)}function ne(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}xa(ne,to,Ji(gn,{brighter(t){return t=t==null?Fn:Math.pow(Fn,t),new ne(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?an:Math.pow(an,t),new ne(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,a=2*n-r;return new Wt(Cr(t>=240?t-240:t+120,a,r),Cr(t,a,r),Cr(t<120?t+240:t-120,a,r),this.opacity)},clamp(){return new ne(Ga(this.h),vn(this.s),vn(this.l),zn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=zn(this.opacity);return`${t===1?"hsl(":"hsla("}${Ga(this.h)}, ${vn(this.s)*100}%, ${vn(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Ga(t){return t=(t||0)%360,t<0?t+360:t}function vn(t){return Math.max(0,Math.min(1,t||0))}function Cr(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const wa=t=>()=>t;function uc(t,e){return function(n){return t+n*e}}function fc(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function dc(t){return(t=+t)==1?eo:function(e,n){return n-e?fc(e,n,t):wa(isNaN(e)?n:e)}}function eo(t,e){var n=e-t;return n?uc(t,n):wa(isNaN(t)?e:t)}const Gn=(function t(e){var n=dc(e);function r(a,i){var o=n((a=zr(a)).r,(i=zr(i)).r),s=n(a.g,i.g),u=n(a.b,i.b),l=eo(a.opacity,i.opacity);return function(c){return a.r=o(c),a.g=s(c),a.b=u(c),a.opacity=l(c),a+""}}return r.gamma=t,r})(1);function hc(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),a;return function(i){for(a=0;a<n;++a)r[a]=t[a]*(1-i)+e[a]*i;return r}}function pc(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function gc(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,a=new Array(r),i=new Array(n),o;for(o=0;o<r;++o)a[o]=ba(t[o],e[o]);for(;o<n;++o)i[o]=e[o];return function(s){for(o=0;o<r;++o)i[o]=a[o](s);return i}}function yc(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function ee(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function mc(t,e){var n={},r={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?n[a]=ba(t[a],e[a]):r[a]=e[a];return function(i){for(a in n)r[a]=n[a](i);return r}}var Gr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,kr=new RegExp(Gr.source,"g");function vc(t){return function(){return t}}function _c(t){return function(e){return t(e)+""}}function no(t,e){var n=Gr.lastIndex=kr.lastIndex=0,r,a,i,o=-1,s=[],u=[];for(t=t+"",e=e+"";(r=Gr.exec(t))&&(a=kr.exec(e));)(i=a.index)>n&&(i=e.slice(n,i),s[o]?s[o]+=i:s[++o]=i),(r=r[0])===(a=a[0])?s[o]?s[o]+=a:s[++o]=a:(s[++o]=null,u.push({i:o,x:ee(r,a)})),n=kr.lastIndex;return n<e.length&&(i=e.slice(n),s[o]?s[o]+=i:s[++o]=i),s.length<2?u[0]?_c(u[0].x):vc(e):(e=u.length,function(l){for(var c=0,d;c<e;++c)s[(d=u[c]).i]=d.x(l);return s.join("")})}function ba(t,e){var n=typeof e,r;return e==null||n==="boolean"?wa(e):(n==="number"?ee:n==="string"?(r=be(e))?(e=r,Gn):no:e instanceof be?Gn:e instanceof Date?yc:pc(e)?hc:Array.isArray(e)?gc:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?mc:ee)(t,e)}function xc(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Ya=180/Math.PI,Yr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ro(t,e,n,r,a,i){var o,s,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,o=-o),{translateX:a,translateY:i,rotate:Math.atan2(e,t)*Ya,skewX:Math.atan(u)*Ya,scaleX:o,scaleY:s}}var _n;function wc(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Yr:ro(e.a,e.b,e.c,e.d,e.e,e.f)}function bc(t){return t==null||(_n||(_n=document.createElementNS("http://www.w3.org/2000/svg","g")),_n.setAttribute("transform",t),!(t=_n.transform.baseVal.consolidate()))?Yr:(t=t.matrix,ro(t.a,t.b,t.c,t.d,t.e,t.f))}function ao(t,e,n,r){function a(l){return l.length?l.pop()+" ":""}function i(l,c,d,f,p,m){if(l!==d||c!==f){var C=p.push("translate(",null,e,null,n);m.push({i:C-4,x:ee(l,d)},{i:C-2,x:ee(c,f)})}else(d||f)&&p.push("translate("+d+e+f+n)}function o(l,c,d,f){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),f.push({i:d.push(a(d)+"rotate(",null,r)-2,x:ee(l,c)})):c&&d.push(a(d)+"rotate("+c+r)}function s(l,c,d,f){l!==c?f.push({i:d.push(a(d)+"skewX(",null,r)-2,x:ee(l,c)}):c&&d.push(a(d)+"skewX("+c+r)}function u(l,c,d,f,p,m){if(l!==d||c!==f){var C=p.push(a(p)+"scale(",null,",",null,")");m.push({i:C-4,x:ee(l,d)},{i:C-2,x:ee(c,f)})}else(d!==1||f!==1)&&p.push(a(p)+"scale("+d+","+f+")")}return function(l,c){var d=[],f=[];return l=t(l),c=t(c),i(l.translateX,l.translateY,c.translateX,c.translateY,d,f),o(l.rotate,c.rotate,d,f),s(l.skewX,c.skewX,d,f),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,d,f),l=c=null,function(p){for(var m=-1,C=f.length,k;++m<C;)d[(k=f[m]).i]=k.x(p);return d.join("")}}}var Cc=ao(wc,"px, ","px)","deg)"),kc=ao(bc,", ",")",")"),Mc=1e-12;function Ba(t){return((t=Math.exp(t))+1/t)/2}function Sc(t){return((t=Math.exp(t))-1/t)/2}function $c(t){return((t=Math.exp(2*t))-1)/(t+1)}const Ec=(function t(e,n,r){function a(i,o){var s=i[0],u=i[1],l=i[2],c=o[0],d=o[1],f=o[2],p=c-s,m=d-u,C=p*p+m*m,k,M;if(C<Mc)M=Math.log(f/l)/e,k=function(L){return[s+L*p,u+L*m,l*Math.exp(e*L*M)]};else{var T=Math.sqrt(C),P=(f*f-l*l+r*C)/(2*l*n*T),R=(f*f-l*l-r*C)/(2*f*n*T),H=Math.log(Math.sqrt(P*P+1)-P),S=Math.log(Math.sqrt(R*R+1)-R);M=(S-H)/e,k=function(L){var Y=L*M,E=Ba(H),D=l/(n*T)*(E*$c(e*Y+H)-Sc(H));return[s+D*p,u+D*m,l*E/Ba(e*Y+H)]}}return k.duration=M*1e3*e/Math.SQRT2,k}return a.rho=function(i){var o=Math.max(.001,+i),s=o*o,u=s*s;return t(o,s,u)},a})(Math.SQRT2,2,4);var Ye=0,je=0,Ve=0,io=1e3,Yn,Ze,Bn=0,Pe=0,hr=0,sn=typeof performance=="object"&&performance.now?performance:Date,oo=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Ca(){return Pe||(oo(Tc),Pe=sn.now()+hr)}function Tc(){Pe=0}function Wn(){this._call=this._time=this._next=null}Wn.prototype=so.prototype={constructor:Wn,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Ca():+n)+(e==null?0:+e),!this._next&&Ze!==this&&(Ze?Ze._next=this:Yn=this,Ze=this),this._call=t,this._time=n,Br()},stop:function(){this._call&&(this._call=null,this._time=1/0,Br())}};function so(t,e,n){var r=new Wn;return r.restart(t,e,n),r}function Ac(){Ca(),++Ye;for(var t=Yn,e;t;)(e=Pe-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Ye}function Wa(){Pe=(Bn=sn.now())+hr,Ye=je=0;try{Ac()}finally{Ye=0,Rc(),Pe=0}}function Nc(){var t=sn.now(),e=t-Bn;e>io&&(hr-=e,Bn=t)}function Rc(){for(var t,e=Yn,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Yn=n);Ze=t,Br(r)}function Br(t){if(!Ye){je&&(je=clearTimeout(je));var e=t-Pe;e>24?(t<1/0&&(je=setTimeout(Wa,t-sn.now()-hr)),Ve&&(Ve=clearInterval(Ve))):(Ve||(Bn=sn.now(),Ve=setInterval(Nc,io)),Ye=1,oo(Wa))}}function Ua(t,e,n){var r=new Wn;return e=e==null?0:+e,r.restart(a=>{r.stop(),t(a+e)},e,n),r}var Pc=ya("start","end","cancel","interrupt"),Oc=[],lo=0,Va=1,Wr=2,Nn=3,Xa=4,Ur=5,Rn=6;function pr(t,e,n,r,a,i){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;Ic(t,n,{name:e,index:r,group:a,on:Pc,tween:Oc,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:lo})}function ka(t,e){var n=se(t,e);if(n.state>lo)throw new Error("too late; already scheduled");return n}function pe(t,e){var n=se(t,e);if(n.state>Nn)throw new Error("too late; already running");return n}function se(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ic(t,e,n){var r=t.__transition,a;r[e]=n,n.timer=so(i,0,n.time);function i(l){n.state=Va,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,d,f,p;if(n.state!==Va)return u();for(c in r)if(p=r[c],p.name===n.name){if(p.state===Nn)return Ua(o);p.state===Xa?(p.state=Rn,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete r[c]):+c<e&&(p.state=Rn,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete r[c])}if(Ua(function(){n.state===Nn&&(n.state=Xa,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=Wr,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Wr){for(n.state=Nn,a=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(p=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(a[++d]=p);a.length=d+1}}function s(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=Ur,1),d=-1,f=a.length;++d<f;)a[d].call(t,c);n.state===Ur&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=Rn,n.timer.stop(),delete r[e];for(var l in r)return;delete t.__transition}}function Pn(t,e){var n=t.__transition,r,a,i=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){i=!1;continue}a=r.state>Wr&&r.state<Ur,r.state=Rn,r.timer.stop(),r.on.call(a?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}i&&delete t.__transition}}function Dc(t){return this.each(function(){Pn(this,t)})}function Hc(t,e){var n,r;return function(){var a=pe(this,t),i=a.tween;if(i!==n){r=n=i;for(var o=0,s=r.length;o<s;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}a.tween=r}}function Lc(t,e,n){var r,a;if(typeof n!="function")throw new Error;return function(){var i=pe(this,t),o=i.tween;if(o!==r){a=(r=o).slice();for(var s={name:e,value:n},u=0,l=a.length;u<l;++u)if(a[u].name===e){a[u]=s;break}u===l&&a.push(s)}i.tween=a}}function Fc(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=se(this.node(),n).tween,a=0,i=r.length,o;a<i;++a)if((o=r[a]).name===t)return o.value;return null}return this.each((e==null?Hc:Lc)(n,t,e))}function Ma(t,e,n){var r=t._id;return t.each(function(){var a=pe(this,r);(a.value||(a.value={}))[e]=n.apply(this,arguments)}),function(a){return se(a,r).value[e]}}function co(t,e){var n;return(typeof e=="number"?ee:e instanceof be?Gn:(n=be(e))?(e=n,Gn):no)(t,e)}function zc(t){return function(){this.removeAttribute(t)}}function Gc(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Yc(t,e,n){var r,a=n+"",i;return function(){var o=this.getAttribute(t);return o===a?null:o===r?i:i=e(r=o,n)}}function Bc(t,e,n){var r,a=n+"",i;return function(){var o=this.getAttributeNS(t.space,t.local);return o===a?null:o===r?i:i=e(r=o,n)}}function Wc(t,e,n){var r,a,i;return function(){var o,s=n(this),u;return s==null?void this.removeAttribute(t):(o=this.getAttribute(t),u=s+"",o===u?null:o===r&&u===a?i:(a=u,i=e(r=o,s)))}}function Uc(t,e,n){var r,a,i;return function(){var o,s=n(this),u;return s==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),u=s+"",o===u?null:o===r&&u===a?i:(a=u,i=e(r=o,s)))}}function Vc(t,e){var n=dr(t),r=n==="transform"?kc:co;return this.attrTween(t,typeof e=="function"?(n.local?Uc:Wc)(n,r,Ma(this,"attr."+t,e)):e==null?(n.local?Gc:zc)(n):(n.local?Bc:Yc)(n,r,e))}function Xc(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Kc(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function qc(t,e){var n,r;function a(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&Kc(t,i)),n}return a._value=e,a}function jc(t,e){var n,r;function a(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&Xc(t,i)),n}return a._value=e,a}function Zc(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=dr(t);return this.tween(n,(r.local?qc:jc)(r,e))}function Jc(t,e){return function(){ka(this,t).delay=+e.apply(this,arguments)}}function Qc(t,e){return e=+e,function(){ka(this,t).delay=e}}function tu(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Jc:Qc)(e,t)):se(this.node(),e).delay}function eu(t,e){return function(){pe(this,t).duration=+e.apply(this,arguments)}}function nu(t,e){return e=+e,function(){pe(this,t).duration=e}}function ru(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?eu:nu)(e,t)):se(this.node(),e).duration}function au(t,e){if(typeof e!="function")throw new Error;return function(){pe(this,t).ease=e}}function iu(t){var e=this._id;return arguments.length?this.each(au(e,t)):se(this.node(),e).ease}function ou(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;pe(this,t).ease=n}}function su(t){if(typeof t!="function")throw new Error;return this.each(ou(this._id,t))}function lu(t){typeof t!="function"&&(t=Bi(t));for(var e=this._groups,n=e.length,r=new Array(n),a=0;a<n;++a)for(var i=e[a],o=i.length,s=r[a]=[],u,l=0;l<o;++l)(u=i[l])&&t.call(u,u.__data__,l,i)&&s.push(u);return new ve(r,this._parents,this._name,this._id)}function cu(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,a=n.length,i=Math.min(r,a),o=new Array(r),s=0;s<i;++s)for(var u=e[s],l=n[s],c=u.length,d=o[s]=new Array(c),f,p=0;p<c;++p)(f=u[p]||l[p])&&(d[p]=f);for(;s<r;++s)o[s]=e[s];return new ve(o,this._parents,this._name,this._id)}function uu(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function fu(t,e,n){var r,a,i=uu(e)?ka:pe;return function(){var o=i(this,t),s=o.on;s!==r&&(a=(r=s).copy()).on(e,n),o.on=a}}function du(t,e){var n=this._id;return arguments.length<2?se(this.node(),n).on.on(t):this.each(fu(n,t,e))}function hu(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function pu(){return this.on("end.remove",hu(this._id))}function gu(t){var e=this._name,n=this._id;typeof t!="function"&&(t=ma(t));for(var r=this._groups,a=r.length,i=new Array(a),o=0;o<a;++o)for(var s=r[o],u=s.length,l=i[o]=new Array(u),c,d,f=0;f<u;++f)(c=s[f])&&(d=t.call(c,c.__data__,f,s))&&("__data__"in c&&(d.__data__=c.__data__),l[f]=d,pr(l[f],e,n,f,l,se(c,n)));return new ve(i,this._parents,e,n)}function yu(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Yi(t));for(var r=this._groups,a=r.length,i=[],o=[],s=0;s<a;++s)for(var u=r[s],l=u.length,c,d=0;d<l;++d)if(c=u[d]){for(var f=t.call(c,c.__data__,d,u),p,m=se(c,n),C=0,k=f.length;C<k;++C)(p=f[C])&&pr(p,e,n,C,f,m);i.push(f),o.push(c)}return new ve(i,o,e,n)}var mu=pn.prototype.constructor;function vu(){return new mu(this._groups,this._parents)}function _u(t,e){var n,r,a;return function(){var i=Ge(this,t),o=(this.style.removeProperty(t),Ge(this,t));return i===o?null:i===n&&o===r?a:a=e(n=i,r=o)}}function uo(t){return function(){this.style.removeProperty(t)}}function xu(t,e,n){var r,a=n+"",i;return function(){var o=Ge(this,t);return o===a?null:o===r?i:i=e(r=o,n)}}function wu(t,e,n){var r,a,i;return function(){var o=Ge(this,t),s=n(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(t),Ge(this,t))),o===u?null:o===r&&u===a?i:(a=u,i=e(r=o,s))}}function bu(t,e){var n,r,a,i="style."+e,o="end."+i,s;return function(){var u=pe(this,t),l=u.on,c=u.value[i]==null?s||(s=uo(e)):void 0;(l!==n||a!==c)&&(r=(n=l).copy()).on(o,a=c),u.on=r}}function Cu(t,e,n){var r=(t+="")=="transform"?Cc:co;return e==null?this.styleTween(t,_u(t,r)).on("end.style."+t,uo(t)):typeof e=="function"?this.styleTween(t,wu(t,r,Ma(this,"style."+t,e))).each(bu(this._id,t)):this.styleTween(t,xu(t,r,e),n).on("end.style."+t,null)}function ku(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Mu(t,e,n){var r,a;function i(){var o=e.apply(this,arguments);return o!==a&&(r=(a=o)&&ku(t,o,n)),r}return i._value=e,i}function Su(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Mu(t,e,n??""))}function $u(t){return function(){this.textContent=t}}function Eu(t){return function(){var e=t(this);this.textContent=e??""}}function Tu(t){return this.tween("text",typeof t=="function"?Eu(Ma(this,"text",t)):$u(t==null?"":t+""))}function Au(t){return function(e){this.textContent=t.call(this,e)}}function Nu(t){var e,n;function r(){var a=t.apply(this,arguments);return a!==n&&(e=(n=a)&&Au(a)),e}return r._value=t,r}function Ru(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Nu(t))}function Pu(){for(var t=this._name,e=this._id,n=fo(),r=this._groups,a=r.length,i=0;i<a;++i)for(var o=r[i],s=o.length,u,l=0;l<s;++l)if(u=o[l]){var c=se(u,e);pr(u,t,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new ve(r,this._parents,t,n)}function Ou(){var t,e,n=this,r=n._id,a=n.size();return new Promise(function(i,o){var s={value:o},u={value:function(){--a===0&&i()}};n.each(function(){var l=pe(this,r),c=l.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(u)),l.on=e}),a===0&&i()})}var Iu=0;function ve(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function fo(){return++Iu}var ge=pn.prototype;ve.prototype={constructor:ve,select:gu,selectAll:yu,selectChild:ge.selectChild,selectChildren:ge.selectChildren,filter:lu,merge:cu,selection:vu,transition:Pu,call:ge.call,nodes:ge.nodes,node:ge.node,size:ge.size,empty:ge.empty,each:ge.each,on:du,attr:Vc,attrTween:Zc,style:Cu,styleTween:Su,text:Tu,textTween:Ru,remove:pu,tween:Fc,delay:tu,duration:ru,ease:iu,easeVarying:su,end:Ou,[Symbol.iterator]:ge[Symbol.iterator]};function Du(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Hu={time:null,delay:0,duration:250,ease:Du};function Lu(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Fu(t){var e,n;t instanceof ve?(e=t._id,t=t._name):(e=fo(),(n=Hu).time=Ca(),t=t==null?null:t+"");for(var r=this._groups,a=r.length,i=0;i<a;++i)for(var o=r[i],s=o.length,u,l=0;l<s;++l)(u=o[l])&&pr(u,t,e,l,o,n||Lu(u,e));return new ve(r,this._parents,t,e)}pn.prototype.interrupt=Dc;pn.prototype.transition=Fu;const Vr=Math.PI,Xr=2*Vr,$e=1e-6,zu=Xr-$e;function ho(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Gu(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return ho;const n=10**e;return function(r){this._+=r[0];for(let a=1,i=r.length;a<i;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}class Yu{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?ho:Gu(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,a){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+a}`}bezierCurveTo(e,n,r,a,i,o){this._append`C${+e},${+n},${+r},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(e,n,r,a,i){if(e=+e,n=+n,r=+r,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,s=this._y1,u=r-e,l=a-n,c=o-e,d=s-n,f=c*c+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>$e)if(!(Math.abs(d*u-l*c)>$e)||!i)this._append`L${this._x1=e},${this._y1=n}`;else{let p=r-o,m=a-s,C=u*u+l*l,k=p*p+m*m,M=Math.sqrt(C),T=Math.sqrt(f),P=i*Math.tan((Vr-Math.acos((C+f-k)/(2*M*T)))/2),R=P/T,H=P/M;Math.abs(R-1)>$e&&this._append`L${e+R*c},${n+R*d}`,this._append`A${i},${i},0,0,${+(d*p>c*m)},${this._x1=e+H*u},${this._y1=n+H*l}`}}arc(e,n,r,a,i,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(a),u=r*Math.sin(a),l=e+s,c=n+u,d=1^o,f=o?a-i:i-a;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>$e||Math.abs(this._y1-c)>$e)&&this._append`L${l},${c}`,r&&(f<0&&(f=f%Xr+Xr),f>zu?this._append`A${r},${r},0,1,${d},${e-s},${n-u}A${r},${r},0,1,${d},${this._x1=l},${this._y1=c}`:f>$e&&this._append`A${r},${r},0,${+(f>=Vr)},${d},${this._x1=e+r*Math.cos(i)},${this._y1=n+r*Math.sin(i)}`)}rect(e,n,r,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+a}h${-r}Z`}toString(){return this._}}function Bu(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Un(t,e){if(!isFinite(t)||t===0)return null;var n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Be(t){return t=Un(Math.abs(t)),t?t[1]:NaN}function Wu(t,e){return function(n,r){for(var a=n.length,i=[],o=0,s=t[0],u=0;a>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),i.push(n.substring(a-=s,a+s)),!((u+=s+1)>r));)s=t[o=(o+1)%t.length];return i.reverse().join(e)}}function Uu(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Vu=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Vn(t){if(!(e=Vu.exec(t)))throw new Error("invalid format: "+t);var e;return new Sa({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Vn.prototype=Sa.prototype;function Sa(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Sa.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Xu(t){t:for(var e=t.length,n=1,r=-1,a;n<e;++n)switch(t[n]){case".":r=a=n;break;case"0":r===0&&(r=n),a=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(a+1):t}var Xn;function Ku(t,e){var n=Un(t,e);if(!n)return Xn=void 0,t.toPrecision(e);var r=n[0],a=n[1],i=a-(Xn=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+Un(t,Math.max(0,e+i-1))[0]}function Ka(t,e){var n=Un(t,e);if(!n)return t+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}const qa={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Bu,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Ka(t*100,e),r:Ka,s:Ku,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function ja(t){return t}var Za=Array.prototype.map,Ja=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function qu(t){var e=t.grouping===void 0||t.thousands===void 0?ja:Wu(Za.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?ja:Uu(Za.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function l(d,f){d=Vn(d);var p=d.fill,m=d.align,C=d.sign,k=d.symbol,M=d.zero,T=d.width,P=d.comma,R=d.precision,H=d.trim,S=d.type;S==="n"?(P=!0,S="g"):qa[S]||(R===void 0&&(R=12),H=!0,S="g"),(M||p==="0"&&m==="=")&&(M=!0,p="0",m="=");var L=(f&&f.prefix!==void 0?f.prefix:"")+(k==="$"?n:k==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():""),Y=(k==="$"?r:/[%p]/.test(S)?o:"")+(f&&f.suffix!==void 0?f.suffix:""),E=qa[S],D=/[defgprs%]/.test(S);R=R===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,R)):Math.max(0,Math.min(20,R));function A($){var w=L,h=Y,g,y,_;if(S==="c")h=E($)+h,$="";else{$=+$;var x=$<0||1/$<0;if($=isNaN($)?u:E(Math.abs($),R),H&&($=Xu($)),x&&+$==0&&C!=="+"&&(x=!1),w=(x?C==="("?C:s:C==="-"||C==="("?"":C)+w,h=(S==="s"&&!isNaN($)&&Xn!==void 0?Ja[8+Xn/3]:"")+h+(x&&C==="("?")":""),D){for(g=-1,y=$.length;++g<y;)if(_=$.charCodeAt(g),48>_||_>57){h=(_===46?a+$.slice(g+1):$.slice(g))+h,$=$.slice(0,g);break}}}P&&!M&&($=e($,1/0));var b=w.length+$.length+h.length,N=b<T?new Array(T-b+1).join(p):"";switch(P&&M&&($=e(N+$,N.length?T-h.length:1/0),N=""),m){case"<":$=w+$+h+N;break;case"=":$=w+N+$+h;break;case"^":$=N.slice(0,b=N.length>>1)+w+$+h+N.slice(b);break;default:$=N+w+$+h;break}return i($)}return A.toString=function(){return d+""},A}function c(d,f){var p=Math.max(-8,Math.min(8,Math.floor(Be(f)/3)))*3,m=Math.pow(10,-p),C=l((d=Vn(d),d.type="f",d),{suffix:Ja[8+p/3]});return function(k){return C(m*k)}}return{format:l,formatPrefix:c}}var xn,gr,po;ju({thousands:",",grouping:[3],currency:["$",""]});function ju(t){return xn=qu(t),gr=xn.format,po=xn.formatPrefix,xn}function Zu(t){return Math.max(0,-Be(Math.abs(t)))}function Ju(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Be(e)/3)))*3-Be(Math.abs(t)))}function Qu(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Be(e)-Be(t))+1}var bt=1e-6,Kr=1e-12,vt=Math.PI,qt=vt/2,Qa=vt/4,Zt=vt*2,te=180/vt,St=vt/180,Mt=Math.abs,tf=Math.atan,Oe=Math.atan2,_t=Math.cos,qr=Math.hypot,xt=Math.sin,ef=Math.sign||function(t){return t>0?1:t<0?-1:0},Ce=Math.sqrt;function nf(t){return t>1?0:t<-1?vt:Math.acos(t)}function Ie(t){return t>1?qt:t<-1?-qt:Math.asin(t)}function Ut(){}function Kn(t,e){t&&ei.hasOwnProperty(t.type)&&ei[t.type](t,e)}var ti={Feature:function(t,e){Kn(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,a=n.length;++r<a;)Kn(n[r].geometry,e)}},ei={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,a=n.length;++r<a;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){jr(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,a=n.length;++r<a;)jr(n[r],e,0)},Polygon:function(t,e){ni(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,a=n.length;++r<a;)ni(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,a=n.length;++r<a;)Kn(n[r],e)}};function jr(t,e,n){var r=-1,a=t.length-n,i;for(e.lineStart();++r<a;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function ni(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)jr(t[n],e,1);e.polygonEnd()}function Te(t,e){t&&ti.hasOwnProperty(t.type)?ti[t.type](t,e):Kn(t,e)}function Zr(t){return[Oe(t[1],t[0]),Ie(t[2])]}function We(t){var e=t[0],n=t[1],r=_t(n);return[r*_t(e),r*xt(e),xt(n)]}function wn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function qn(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Mr(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function bn(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Jr(t){var e=Ce(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var Je,jn,Zn,Jn,Qn,tr,er,nr,Qr,ta,ea,go,yo,Ht,Lt,Ft,re={sphere:Ut,point:$a,lineStart:ri,lineEnd:ai,polygonStart:function(){re.lineStart=of,re.lineEnd=sf},polygonEnd:function(){re.lineStart=ri,re.lineEnd=ai}};function $a(t,e){t*=St,e*=St;var n=_t(e);yn(n*_t(t),n*xt(t),xt(e))}function yn(t,e,n){++Je,Zn+=(t-Zn)/Je,Jn+=(e-Jn)/Je,Qn+=(n-Qn)/Je}function ri(){re.point=rf}function rf(t,e){t*=St,e*=St;var n=_t(e);Ht=n*_t(t),Lt=n*xt(t),Ft=xt(e),re.point=af,yn(Ht,Lt,Ft)}function af(t,e){t*=St,e*=St;var n=_t(e),r=n*_t(t),a=n*xt(t),i=xt(e),o=Oe(Ce((o=Lt*i-Ft*a)*o+(o=Ft*r-Ht*i)*o+(o=Ht*a-Lt*r)*o),Ht*r+Lt*a+Ft*i);jn+=o,tr+=o*(Ht+(Ht=r)),er+=o*(Lt+(Lt=a)),nr+=o*(Ft+(Ft=i)),yn(Ht,Lt,Ft)}function ai(){re.point=$a}function of(){re.point=lf}function sf(){mo(go,yo),re.point=$a}function lf(t,e){go=t,yo=e,t*=St,e*=St,re.point=mo;var n=_t(e);Ht=n*_t(t),Lt=n*xt(t),Ft=xt(e),yn(Ht,Lt,Ft)}function mo(t,e){t*=St,e*=St;var n=_t(e),r=n*_t(t),a=n*xt(t),i=xt(e),o=Lt*i-Ft*a,s=Ft*r-Ht*i,u=Ht*a-Lt*r,l=qr(o,s,u),c=Ie(l),d=l&&-c/l;Qr.add(d*o),ta.add(d*s),ea.add(d*u),jn+=c,tr+=c*(Ht+(Ht=r)),er+=c*(Lt+(Lt=a)),nr+=c*(Ft+(Ft=i)),yn(Ht,Lt,Ft)}function cf(t){Je=jn=Zn=Jn=Qn=tr=er=nr=0,Qr=new fe,ta=new fe,ea=new fe,Te(t,re);var e=+Qr,n=+ta,r=+ea,a=qr(e,n,r);return a<Kr&&(e=tr,n=er,r=nr,jn<bt&&(e=Zn,n=Jn,r=Qn),a=qr(e,n,r),a<Kr)?[NaN,NaN]:[Oe(n,e)*te,Ie(r/a)*te]}function na(t,e){function n(r,a){return r=t(r,a),e(r[0],r[1])}return t.invert&&e.invert&&(n.invert=function(r,a){return r=e.invert(r,a),r&&t.invert(r[0],r[1])}),n}function ra(t,e){return Mt(t)>vt&&(t-=Math.round(t/Zt)*Zt),[t,e]}ra.invert=ra;function uf(t,e,n){return(t%=Zt)?e||n?na(oi(t),si(e,n)):oi(t):e||n?si(e,n):ra}function ii(t){return function(e,n){return e+=t,Mt(e)>vt&&(e-=Math.round(e/Zt)*Zt),[e,n]}}function oi(t){var e=ii(t);return e.invert=ii(-t),e}function si(t,e){var n=_t(t),r=xt(t),a=_t(e),i=xt(e);function o(s,u){var l=_t(u),c=_t(s)*l,d=xt(s)*l,f=xt(u),p=f*n+c*r;return[Oe(d*a-p*i,c*n-f*r),Ie(p*a+d*i)]}return o.invert=function(s,u){var l=_t(u),c=_t(s)*l,d=xt(s)*l,f=xt(u),p=f*a-d*i;return[Oe(d*a+f*i,c*n+p*r),Ie(p*n-c*r)]},o}function ff(t,e,n,r,a,i){if(n){var o=_t(e),s=xt(e),u=r*n;a==null?(a=e+r*Zt,i=e-u/2):(a=li(o,a),i=li(o,i),(r>0?a<i:a>i)&&(a+=r*Zt));for(var l,c=a;r>0?c>i:c<i;c-=u)l=Zr([o,-s*_t(c),-s*xt(c)]),t.point(l[0],l[1])}}function li(t,e){e=We(e),e[0]-=t,Jr(e);var n=nf(-e[1]);return((-e[2]<0?-n:n)+Zt-bt)%Zt}function vo(){var t=[],e;return{point:function(n,r,a){e.push([n,r,a])},lineStart:function(){t.push(e=[])},lineEnd:Ut,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function On(t,e){return Mt(t[0]-e[0])<bt&&Mt(t[1]-e[1])<bt}function Cn(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function _o(t,e,n,r,a){var i=[],o=[],s,u;if(t.forEach(function(m){if(!((C=m.length-1)<=0)){var C,k=m[0],M=m[C],T;if(On(k,M)){if(!k[2]&&!M[2]){for(a.lineStart(),s=0;s<C;++s)a.point((k=m[s])[0],k[1]);a.lineEnd();return}M[0]+=2*bt}i.push(T=new Cn(k,m,null,!0)),o.push(T.o=new Cn(k,null,T,!1)),i.push(T=new Cn(M,m,null,!1)),o.push(T.o=new Cn(M,null,T,!0))}}),!!i.length){for(o.sort(e),ci(i),ci(o),s=0,u=o.length;s<u;++s)o[s].e=n=!n;for(var l=i[0],c,d;;){for(var f=l,p=!0;f.v;)if((f=f.n)===l)return;c=f.z,a.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(s=0,u=c.length;s<u;++s)a.point((d=c[s])[0],d[1]);else r(f.x,f.n.x,1,a);f=f.n}else{if(p)for(c=f.p.z,s=c.length-1;s>=0;--s)a.point((d=c[s])[0],d[1]);else r(f.x,f.p.x,-1,a);f=f.p}f=f.o,c=f.z,p=!p}while(!f.v);a.lineEnd()}}}function ci(t){if(e=t.length){for(var e,n=0,r=t[0],a;++n<e;)r.n=a=t[n],a.p=r,r=a;r.n=a=t[0],a.p=r}}function Sr(t){return Mt(t[0])<=vt?t[0]:ef(t[0])*((Mt(t[0])+vt)%Zt-vt)}function df(t,e){var n=Sr(e),r=e[1],a=xt(r),i=[xt(n),-_t(n),0],o=0,s=0,u=new fe;a===1?r=qt+bt:a===-1&&(r=-qt-bt);for(var l=0,c=t.length;l<c;++l)if(f=(d=t[l]).length)for(var d,f,p=d[f-1],m=Sr(p),C=p[1]/2+Qa,k=xt(C),M=_t(C),T=0;T<f;++T,m=R,k=S,M=L,p=P){var P=d[T],R=Sr(P),H=P[1]/2+Qa,S=xt(H),L=_t(H),Y=R-m,E=Y>=0?1:-1,D=E*Y,A=D>vt,$=k*S;if(u.add(Oe($*E*xt(D),M*L+$*_t(D))),o+=A?Y+E*Zt:Y,A^m>=n^R>=n){var w=qn(We(p),We(P));Jr(w);var h=qn(i,w);Jr(h);var g=(A^Y>=0?-1:1)*Ie(h[2]);(r>g||r===g&&(w[0]||w[1]))&&(s+=A^Y>=0?1:-1)}}return(o<-bt||o<bt&&u<-Kr)^s&1}function xo(t,e,n,r){return function(a){var i=e(a),o=vo(),s=e(o),u=!1,l,c,d,f={point:p,lineStart:C,lineEnd:k,polygonStart:function(){f.point=M,f.lineStart=T,f.lineEnd=P,c=[],l=[]},polygonEnd:function(){f.point=p,f.lineStart=C,f.lineEnd=k,c=Di(c);var R=df(l,r);c.length?(u||(a.polygonStart(),u=!0),_o(c,pf,R,n,a)):R&&(u||(a.polygonStart(),u=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),u&&(a.polygonEnd(),u=!1),c=l=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function p(R,H){t(R,H)&&a.point(R,H)}function m(R,H){i.point(R,H)}function C(){f.point=m,i.lineStart()}function k(){f.point=p,i.lineEnd()}function M(R,H){d.push([R,H]),s.point(R,H)}function T(){s.lineStart(),d=[]}function P(){M(d[0][0],d[0][1]),s.lineEnd();var R=s.clean(),H=o.result(),S,L=H.length,Y,E,D;if(d.pop(),l.push(d),d=null,!!L){if(R&1){if(E=H[0],(Y=E.length-1)>0){for(u||(a.polygonStart(),u=!0),a.lineStart(),S=0;S<Y;++S)a.point((D=E[S])[0],D[1]);a.lineEnd()}return}L>1&&R&2&&H.push(H.pop().concat(H.shift())),c.push(H.filter(hf))}}return f}}function hf(t){return t.length>1}function pf(t,e){return((t=t.x)[0]<0?t[1]-qt-bt:qt-t[1])-((e=e.x)[0]<0?e[1]-qt-bt:qt-e[1])}const ui=xo(function(){return!0},gf,mf,[-vt,-qt]);function gf(t){var e=NaN,n=NaN,r=NaN,a;return{lineStart:function(){t.lineStart(),a=1},point:function(i,o){var s=i>0?vt:-vt,u=Mt(i-e);Mt(u-vt)<bt?(t.point(e,n=(n+o)/2>0?qt:-qt),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(s,n),t.point(i,n),a=0):r!==s&&u>=vt&&(Mt(e-r)<bt&&(e-=r*bt),Mt(i-s)<bt&&(i-=s*bt),n=yf(e,n,i,o),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(s,n),a=0),t.point(e=i,n=o),r=s},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-a}}}function yf(t,e,n,r){var a,i,o=xt(t-n);return Mt(o)>bt?tf((xt(e)*(i=_t(r))*xt(n)-xt(r)*(a=_t(e))*xt(t))/(a*i*o)):(e+r)/2}function mf(t,e,n,r){var a;if(t==null)a=n*qt,r.point(-vt,a),r.point(0,a),r.point(vt,a),r.point(vt,0),r.point(vt,-a),r.point(0,-a),r.point(-vt,-a),r.point(-vt,0),r.point(-vt,a);else if(Mt(t[0]-e[0])>bt){var i=t[0]<e[0]?vt:-vt;a=n*i/2,r.point(-i,a),r.point(0,a),r.point(i,a)}else r.point(e[0],e[1])}function vf(t){var e=_t(t),n=2*St,r=e>0,a=Mt(e)>bt;function i(c,d,f,p){ff(p,t,n,f,c,d)}function o(c,d){return _t(c)*_t(d)>e}function s(c){var d,f,p,m,C;return{lineStart:function(){m=p=!1,C=1},point:function(k,M){var T=[k,M],P,R=o(k,M),H=r?R?0:l(k,M):R?l(k+(k<0?vt:-vt),M):0;if(!d&&(m=p=R)&&c.lineStart(),R!==p&&(P=u(d,T),(!P||On(d,P)||On(T,P))&&(T[2]=1)),R!==p)C=0,R?(c.lineStart(),P=u(T,d),c.point(P[0],P[1])):(P=u(d,T),c.point(P[0],P[1],2),c.lineEnd()),d=P;else if(a&&d&&r^R){var S;!(H&f)&&(S=u(T,d,!0))&&(C=0,r?(c.lineStart(),c.point(S[0][0],S[0][1]),c.point(S[1][0],S[1][1]),c.lineEnd()):(c.point(S[1][0],S[1][1]),c.lineEnd(),c.lineStart(),c.point(S[0][0],S[0][1],3)))}R&&(!d||!On(d,T))&&c.point(T[0],T[1]),d=T,p=R,f=H},lineEnd:function(){p&&c.lineEnd(),d=null},clean:function(){return C|(m&&p)<<1}}}function u(c,d,f){var p=We(c),m=We(d),C=[1,0,0],k=qn(p,m),M=wn(k,k),T=k[0],P=M-T*T;if(!P)return!f&&c;var R=e*M/P,H=-e*T/P,S=qn(C,k),L=bn(C,R),Y=bn(k,H);Mr(L,Y);var E=S,D=wn(L,E),A=wn(E,E),$=D*D-A*(wn(L,L)-1);if(!($<0)){var w=Ce($),h=bn(E,(-D-w)/A);if(Mr(h,L),h=Zr(h),!f)return h;var g=c[0],y=d[0],_=c[1],x=d[1],b;y<g&&(b=g,g=y,y=b);var N=y-g,F=Mt(N-vt)<bt,B=F||N<bt;if(!F&&x<_&&(b=_,_=x,x=b),B?F?_+x>0^h[1]<(Mt(h[0]-g)<bt?_:x):_<=h[1]&&h[1]<=x:N>vt^(g<=h[0]&&h[0]<=y)){var K=bn(E,(-D+w)/A);return Mr(K,L),[h,Zr(K)]}}}function l(c,d){var f=r?t:vt-t,p=0;return c<-f?p|=1:c>f&&(p|=2),d<-f?p|=4:d>f&&(p|=8),p}return xo(o,s,i,r?[0,-t]:[-vt,t-vt])}function _f(t,e,n,r,a,i){var o=t[0],s=t[1],u=e[0],l=e[1],c=0,d=1,f=u-o,p=l-s,m;if(m=n-o,!(!f&&m>0)){if(m/=f,f<0){if(m<c)return;m<d&&(d=m)}else if(f>0){if(m>d)return;m>c&&(c=m)}if(m=a-o,!(!f&&m<0)){if(m/=f,f<0){if(m>d)return;m>c&&(c=m)}else if(f>0){if(m<c)return;m<d&&(d=m)}if(m=r-s,!(!p&&m>0)){if(m/=p,p<0){if(m<c)return;m<d&&(d=m)}else if(p>0){if(m>d)return;m>c&&(c=m)}if(m=i-s,!(!p&&m<0)){if(m/=p,p<0){if(m>d)return;m>c&&(c=m)}else if(p>0){if(m<c)return;m<d&&(d=m)}return c>0&&(t[0]=o+c*f,t[1]=s+c*p),d<1&&(e[0]=o+d*f,e[1]=s+d*p),!0}}}}}var Qe=1e9,kn=-Qe;function xf(t,e,n,r){function a(l,c){return t<=l&&l<=n&&e<=c&&c<=r}function i(l,c,d,f){var p=0,m=0;if(l==null||(p=o(l,d))!==(m=o(c,d))||u(l,c)<0^d>0)do f.point(p===0||p===3?t:n,p>1?r:e);while((p=(p+d+4)%4)!==m);else f.point(c[0],c[1])}function o(l,c){return Mt(l[0]-t)<bt?c>0?0:3:Mt(l[0]-n)<bt?c>0?2:1:Mt(l[1]-e)<bt?c>0?1:0:c>0?3:2}function s(l,c){return u(l.x,c.x)}function u(l,c){var d=o(l,1),f=o(c,1);return d!==f?d-f:d===0?c[1]-l[1]:d===1?l[0]-c[0]:d===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,d=vo(),f,p,m,C,k,M,T,P,R,H,S,L={point:Y,lineStart:$,lineEnd:w,polygonStart:D,polygonEnd:A};function Y(g,y){a(g,y)&&c.point(g,y)}function E(){for(var g=0,y=0,_=p.length;y<_;++y)for(var x=p[y],b=1,N=x.length,F=x[0],B,K,U=F[0],Q=F[1];b<N;++b)B=U,K=Q,F=x[b],U=F[0],Q=F[1],K<=r?Q>r&&(U-B)*(r-K)>(Q-K)*(t-B)&&++g:Q<=r&&(U-B)*(r-K)<(Q-K)*(t-B)&&--g;return g}function D(){c=d,f=[],p=[],S=!0}function A(){var g=E(),y=S&&g,_=(f=Di(f)).length;(y||_)&&(l.polygonStart(),y&&(l.lineStart(),i(null,null,1,l),l.lineEnd()),_&&_o(f,s,g,i,l),l.polygonEnd()),c=l,f=p=m=null}function $(){L.point=h,p&&p.push(m=[]),H=!0,R=!1,T=P=NaN}function w(){f&&(h(C,k),M&&R&&d.rejoin(),f.push(d.result())),L.point=Y,R&&c.lineEnd()}function h(g,y){var _=a(g,y);if(p&&m.push([g,y]),H)C=g,k=y,M=_,H=!1,_&&(c.lineStart(),c.point(g,y));else if(_&&R)c.point(g,y);else{var x=[T=Math.max(kn,Math.min(Qe,T)),P=Math.max(kn,Math.min(Qe,P))],b=[g=Math.max(kn,Math.min(Qe,g)),y=Math.max(kn,Math.min(Qe,y))];_f(x,b,t,e,n,r)?(R||(c.lineStart(),c.point(x[0],x[1])),c.point(b[0],b[1]),_||c.lineEnd(),S=!1):_&&(c.lineStart(),c.point(g,y),S=!1)}T=g,P=y,R=_}return L}}const aa=t=>t;var $r=new fe,ia=new fe,wo,bo,oa,sa,ye={point:Ut,lineStart:Ut,lineEnd:Ut,polygonStart:function(){ye.lineStart=wf,ye.lineEnd=Cf},polygonEnd:function(){ye.lineStart=ye.lineEnd=ye.point=Ut,$r.add(Mt(ia)),ia=new fe},result:function(){var t=$r/2;return $r=new fe,t}};function wf(){ye.point=bf}function bf(t,e){ye.point=Co,wo=oa=t,bo=sa=e}function Co(t,e){ia.add(sa*t-oa*e),oa=t,sa=e}function Cf(){Co(wo,bo)}var Ue=1/0,rr=Ue,ln=-Ue,ar=ln,ir={point:kf,lineStart:Ut,lineEnd:Ut,polygonStart:Ut,polygonEnd:Ut,result:function(){var t=[[Ue,rr],[ln,ar]];return ln=ar=-(rr=Ue=1/0),t}};function kf(t,e){t<Ue&&(Ue=t),t>ln&&(ln=t),e<rr&&(rr=e),e>ar&&(ar=e)}var la=0,ca=0,tn=0,or=0,sr=0,He=0,ua=0,fa=0,en=0,ko,Mo,ce,ue,Kt={point:De,lineStart:fi,lineEnd:di,polygonStart:function(){Kt.lineStart=$f,Kt.lineEnd=Ef},polygonEnd:function(){Kt.point=De,Kt.lineStart=fi,Kt.lineEnd=di},result:function(){var t=en?[ua/en,fa/en]:He?[or/He,sr/He]:tn?[la/tn,ca/tn]:[NaN,NaN];return la=ca=tn=or=sr=He=ua=fa=en=0,t}};function De(t,e){la+=t,ca+=e,++tn}function fi(){Kt.point=Mf}function Mf(t,e){Kt.point=Sf,De(ce=t,ue=e)}function Sf(t,e){var n=t-ce,r=e-ue,a=Ce(n*n+r*r);or+=a*(ce+t)/2,sr+=a*(ue+e)/2,He+=a,De(ce=t,ue=e)}function di(){Kt.point=De}function $f(){Kt.point=Tf}function Ef(){So(ko,Mo)}function Tf(t,e){Kt.point=So,De(ko=ce=t,Mo=ue=e)}function So(t,e){var n=t-ce,r=e-ue,a=Ce(n*n+r*r);or+=a*(ce+t)/2,sr+=a*(ue+e)/2,He+=a,a=ue*t-ce*e,ua+=a*(ce+t),fa+=a*(ue+e),en+=a*3,De(ce=t,ue=e)}function $o(t){this._context=t}$o.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Zt);break}}},result:Ut};var da=new fe,Er,Eo,To,nn,rn,cn={point:Ut,lineStart:function(){cn.point=Af},lineEnd:function(){Er&&Ao(Eo,To),cn.point=Ut},polygonStart:function(){Er=!0},polygonEnd:function(){Er=null},result:function(){var t=+da;return da=new fe,t}};function Af(t,e){cn.point=Ao,Eo=nn=t,To=rn=e}function Ao(t,e){nn-=t,rn-=e,da.add(Ce(nn*nn+rn*rn)),nn=t,rn=e}let hi,lr,pi,gi;class yi{constructor(e){this._append=e==null?No:Nf(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==pi||this._append!==lr){const r=this._radius,a=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,pi=r,lr=this._append,gi=this._,this._=a}this._+=gi;break}}}result(){const e=this._;return this._="",e.length?e:null}}function No(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Nf(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return No;if(e!==hi){const n=10**e;hi=e,lr=function(a){let i=1;this._+=a[0];for(const o=a.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+a[i]}}return lr}function Rf(t,e){let n=3,r=4.5,a,i;function o(s){return s&&(typeof r=="function"&&i.pointRadius(+r.apply(this,arguments)),Te(s,a(i))),i.result()}return o.area=function(s){return Te(s,a(ye)),ye.result()},o.measure=function(s){return Te(s,a(cn)),cn.result()},o.bounds=function(s){return Te(s,a(ir)),ir.result()},o.centroid=function(s){return Te(s,a(Kt)),Kt.result()},o.projection=function(s){return arguments.length?(a=s==null?(t=null,aa):(t=s).stream,o):t},o.context=function(s){return arguments.length?(i=s==null?(e=null,new yi(n)):new $o(e=s),typeof r!="function"&&i.pointRadius(r),o):e},o.pointRadius=function(s){return arguments.length?(r=typeof s=="function"?s:(i.pointRadius(+s),+s),o):r},o.digits=function(s){if(!arguments.length)return n;if(s==null)n=null;else{const u=Math.floor(s);if(!(u>=0))throw new RangeError(`invalid digits: ${s}`);n=u}return e===null&&(i=new yi(n)),o},o.projection(t).digits(n).context(e)}function Ea(t){return function(e){var n=new ha;for(var r in t)n[r]=t[r];return n.stream=e,n}}function ha(){}ha.prototype={constructor:ha,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Ta(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),Te(n,t.stream(ir)),e(ir.result()),r!=null&&t.clipExtent(r),t}function Ro(t,e,n){return Ta(t,function(r){var a=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=Math.min(a/(r[1][0]-r[0][0]),i/(r[1][1]-r[0][1])),s=+e[0][0]+(a-o*(r[1][0]+r[0][0]))/2,u=+e[0][1]+(i-o*(r[1][1]+r[0][1]))/2;t.scale(150*o).translate([s,u])},n)}function Pf(t,e,n){return Ro(t,[[0,0],e],n)}function Of(t,e,n){return Ta(t,function(r){var a=+e,i=a/(r[1][0]-r[0][0]),o=(a-i*(r[1][0]+r[0][0]))/2,s=-i*r[0][1];t.scale(150*i).translate([o,s])},n)}function If(t,e,n){return Ta(t,function(r){var a=+e,i=a/(r[1][1]-r[0][1]),o=-i*r[0][0],s=(a-i*(r[1][1]+r[0][1]))/2;t.scale(150*i).translate([o,s])},n)}var mi=16,Df=_t(30*St);function vi(t,e){return+e?Lf(t,e):Hf(t)}function Hf(t){return Ea({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function Lf(t,e){function n(r,a,i,o,s,u,l,c,d,f,p,m,C,k){var M=l-r,T=c-a,P=M*M+T*T;if(P>4*e&&C--){var R=o+f,H=s+p,S=u+m,L=Ce(R*R+H*H+S*S),Y=Ie(S/=L),E=Mt(Mt(S)-1)<bt||Mt(i-d)<bt?(i+d)/2:Oe(H,R),D=t(E,Y),A=D[0],$=D[1],w=A-r,h=$-a,g=T*w-M*h;(g*g/P>e||Mt((M*w+T*h)/P-.5)>.3||o*f+s*p+u*m<Df)&&(n(r,a,i,o,s,u,A,$,E,R/=L,H/=L,S,C,k),k.point(A,$),n(A,$,E,R,H,S,l,c,d,f,p,m,C,k))}}return function(r){var a,i,o,s,u,l,c,d,f,p,m,C,k={point:M,lineStart:T,lineEnd:R,polygonStart:function(){r.polygonStart(),k.lineStart=H},polygonEnd:function(){r.polygonEnd(),k.lineStart=T}};function M(Y,E){Y=t(Y,E),r.point(Y[0],Y[1])}function T(){d=NaN,k.point=P,r.lineStart()}function P(Y,E){var D=We([Y,E]),A=t(Y,E);n(d,f,c,p,m,C,d=A[0],f=A[1],c=Y,p=D[0],m=D[1],C=D[2],mi,r),r.point(d,f)}function R(){k.point=M,r.lineEnd()}function H(){T(),k.point=S,k.lineEnd=L}function S(Y,E){P(a=Y,E),i=d,o=f,s=p,u=m,l=C,k.point=P}function L(){n(d,f,c,p,m,C,i,o,a,s,u,l,mi,r),k.lineEnd=R,R()}return k}}var Ff=Ea({point:function(t,e){this.stream.point(t*St,e*St)}});function zf(t){return Ea({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}function Gf(t,e,n,r,a){function i(o,s){return o*=r,s*=a,[e+t*o,n-t*s]}return i.invert=function(o,s){return[(o-e)/t*r,(n-s)/t*a]},i}function _i(t,e,n,r,a,i){if(!i)return Gf(t,e,n,r,a);var o=_t(i),s=xt(i),u=o*t,l=s*t,c=o/t,d=s/t,f=(s*n-o*e)/t,p=(s*e+o*n)/t;function m(C,k){return C*=r,k*=a,[u*C-l*k+e,n-l*C-u*k]}return m.invert=function(C,k){return[r*(c*C-d*k+f),a*(p-d*C-c*k)]},m}function Yf(t){return Bf(function(){return t})()}function Bf(t){var e,n=150,r=480,a=250,i=0,o=0,s=0,u=0,l=0,c,d=0,f=1,p=1,m=null,C=ui,k=null,M,T,P,R=aa,H=.5,S,L,Y,E,D;function A(g){return Y(g[0]*St,g[1]*St)}function $(g){return g=Y.invert(g[0],g[1]),g&&[g[0]*te,g[1]*te]}A.stream=function(g){return E&&D===g?E:E=Ff(zf(c)(C(S(R(D=g)))))},A.preclip=function(g){return arguments.length?(C=g,m=void 0,h()):C},A.postclip=function(g){return arguments.length?(R=g,k=M=T=P=null,h()):R},A.clipAngle=function(g){return arguments.length?(C=+g?vf(m=g*St):(m=null,ui),h()):m*te},A.clipExtent=function(g){return arguments.length?(R=g==null?(k=M=T=P=null,aa):xf(k=+g[0][0],M=+g[0][1],T=+g[1][0],P=+g[1][1]),h()):k==null?null:[[k,M],[T,P]]},A.scale=function(g){return arguments.length?(n=+g,w()):n},A.translate=function(g){return arguments.length?(r=+g[0],a=+g[1],w()):[r,a]},A.center=function(g){return arguments.length?(i=g[0]%360*St,o=g[1]%360*St,w()):[i*te,o*te]},A.rotate=function(g){return arguments.length?(s=g[0]%360*St,u=g[1]%360*St,l=g.length>2?g[2]%360*St:0,w()):[s*te,u*te,l*te]},A.angle=function(g){return arguments.length?(d=g%360*St,w()):d*te},A.reflectX=function(g){return arguments.length?(f=g?-1:1,w()):f<0},A.reflectY=function(g){return arguments.length?(p=g?-1:1,w()):p<0},A.precision=function(g){return arguments.length?(S=vi(L,H=g*g),h()):Ce(H)},A.fitExtent=function(g,y){return Ro(A,g,y)},A.fitSize=function(g,y){return Pf(A,g,y)},A.fitWidth=function(g,y){return Of(A,g,y)},A.fitHeight=function(g,y){return If(A,g,y)};function w(){var g=_i(n,0,0,f,p,d).apply(null,e(i,o)),y=_i(n,r-g[0],a-g[1],f,p,d);return c=uf(s,u,l),L=na(e,y),Y=na(c,L),S=vi(L,H),h()}function h(){return E=D=null,A}return function(){return e=t.apply(this,arguments),A.invert=e.invert&&$,w()}}function Po(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),e*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}Po.invert=function(t,e){var n=e,r=25,a;do{var i=n*n,o=i*i;n-=a=(n*(1.007226+i*(.015085+o*(-.044475+.028874*i-.005916*o)))-e)/(1.007226+i*(.015085*3+o*(-.044475*7+.028874*9*i-.005916*11*o)))}while(Mt(a)>bt&&--r>0);return[t/(.8707+(i=n*n)*(-.131979+i*(-.013791+i*i*i*(.003971-.001529*i)))),n]};function Wf(){return Yf(Po).scale(175.295)}function Uf(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function Vf(){return this.eachAfter(Uf)}function Xf(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this}function Kf(t,e){for(var n=this,r=[n],a,i,o=-1;n=r.pop();)if(t.call(e,n,++o,this),a=n.children)for(i=a.length-1;i>=0;--i)r.push(a[i]);return this}function qf(t,e){for(var n=this,r=[n],a=[],i,o,s,u=-1;n=r.pop();)if(a.push(n),i=n.children)for(o=0,s=i.length;o<s;++o)r.push(i[o]);for(;n=a.pop();)t.call(e,n,++u,this);return this}function jf(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r}function Zf(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,a=r&&r.length;--a>=0;)n+=r[a].value;e.value=n})}function Jf(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function Qf(t){for(var e=this,n=td(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var a=r.length;t!==n;)r.splice(a,0,t),t=t.parent;return r}function td(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),a=null;for(t=n.pop(),e=r.pop();t===e;)a=t,t=n.pop(),e=r.pop();return a}function ed(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function nd(){return Array.from(this)}function rd(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function ad(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*id(){var t=this,e,n=[t],r,a,i;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,r=t.children)for(a=0,i=r.length;a<i;++a)n.push(r[a]);while(n.length)}function Aa(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=ld)):e===void 0&&(e=sd);for(var n=new cr(t),r,a=[n],i,o,s,u;r=a.pop();)if((o=e(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,s=u-1;s>=0;--s)a.push(i=o[s]=new cr(o[s])),i.parent=r,i.depth=r.depth+1;return n.eachBefore(ud)}function od(){return Aa(this).eachBefore(cd)}function sd(t){return t.children}function ld(t){return Array.isArray(t)?t[1]:null}function cd(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function ud(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function cr(t){this.data=t,this.depth=this.height=0,this.parent=null}cr.prototype=Aa.prototype={constructor:cr,count:Vf,each:Xf,eachAfter:qf,eachBefore:Kf,find:jf,sum:Zf,sort:Jf,path:Qf,ancestors:ed,descendants:nd,leaves:rd,links:ad,copy:od,[Symbol.iterator]:id};function fd(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function dd(t,e,n,r,a){for(var i=t.children,o,s=-1,u=i.length,l=t.value&&(r-e)/t.value;++s<u;)o=i[s],o.y0=n,o.y1=a,o.x0=e,o.x1=e+=o.value*l}function hd(){var t=1,e=1,n=0,r=!1;function a(o){var s=o.height+1;return o.x0=o.y0=n,o.x1=t,o.y1=e/s,o.eachBefore(i(e,s)),r&&o.eachBefore(fd),o}function i(o,s){return function(u){u.children&&dd(u,u.x0,o*(u.depth+1)/s,u.x1,o*(u.depth+2)/s);var l=u.x0,c=u.y0,d=u.x1-n,f=u.y1-n;d<l&&(l=d=(l+d)/2),f<c&&(c=f=(c+f)/2),u.x0=l,u.y0=c,u.x1=d,u.y1=f}}return a.round=function(o){return arguments.length?(r=!!o,a):r},a.size=function(o){return arguments.length?(t=+o[0],e=+o[1],a):[t,e]},a.padding=function(o){return arguments.length?(n=+o,a):n},a}function pd(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function gd(t){return function(){return t}}function yd(t){return+t}var xi=[0,1];function Le(t){return t}function pa(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:gd(isNaN(e)?NaN:.5)}function md(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function vd(t,e,n){var r=t[0],a=t[1],i=e[0],o=e[1];return a<r?(r=pa(a,r),i=n(o,i)):(r=pa(r,a),i=n(i,o)),function(s){return i(r(s))}}function _d(t,e,n){var r=Math.min(t.length,e.length)-1,a=new Array(r),i=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)a[o]=pa(t[o],t[o+1]),i[o]=n(e[o],e[o+1]);return function(s){var u=ts(t,s,1,r)-1;return i[u](a[u](s))}}function xd(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function wd(){var t=xi,e=xi,n=ba,r,a,i,o=Le,s,u,l;function c(){var f=Math.min(t.length,e.length);return o!==Le&&(o=md(t[0],t[f-1])),s=f>2?_d:vd,u=l=null,d}function d(f){return f==null||isNaN(f=+f)?i:(u||(u=s(t.map(r),e,n)))(r(o(f)))}return d.invert=function(f){return o(a((l||(l=s(e,t.map(r),ee)))(f)))},d.domain=function(f){return arguments.length?(t=Array.from(f,yd),c()):t.slice()},d.range=function(f){return arguments.length?(e=Array.from(f),c()):e.slice()},d.rangeRound=function(f){return e=Array.from(f),n=xc,c()},d.clamp=function(f){return arguments.length?(o=f?!0:Le,c()):o!==Le},d.interpolate=function(f){return arguments.length?(n=f,c()):n},d.unknown=function(f){return arguments.length?(i=f,d):i},function(f,p){return r=f,a=p,c()}}function bd(){return wd()(Le,Le)}function Cd(t,e,n,r){var a=os(t,e,n),i;switch(r=Vn(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(i=Ju(a,o))&&(r.precision=i),po(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=Qu(a,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=Zu(a))&&(r.precision=i-(r.type==="%")*2);break}}return gr(r)}function kd(t){var e=t.domain;return t.ticks=function(n){var r=e();return is(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var a=e();return Cd(a[0],a[a.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),a=0,i=r.length-1,o=r[a],s=r[i],u,l,c=10;for(s<o&&(l=o,o=s,s=l,l=a,a=i,i=l);c-- >0;){if(l=Ir(o,s,n),l===u)return r[a]=o,r[i]=s,e(r);if(l>0)o=Math.floor(o/l)*l,s=Math.ceil(s/l)*l;else if(l<0)o=Math.ceil(o*l)/l,s=Math.floor(s*l)/l;else break;u=l}return t},t}function ie(){var t=bd();return t.copy=function(){return xd(t,ie())},pd.apply(t,arguments),kd(t)}function Et(t){return function(){return t}}const wi=Math.abs,It=Math.atan2,Me=Math.cos,Md=Math.max,Tr=Math.min,le=Math.sin,Fe=Math.sqrt,Yt=1e-12,un=Math.PI,ur=un/2,In=2*un;function Sd(t){return t>1?0:t<-1?un:Math.acos(t)}function bi(t){return t>=1?ur:t<=-1?-ur:Math.asin(t)}function Oo(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Yu(e)}function $d(t){return t.innerRadius}function Ed(t){return t.outerRadius}function Td(t){return t.startAngle}function Ad(t){return t.endAngle}function Nd(t){return t&&t.padAngle}function Rd(t,e,n,r,a,i,o,s){var u=n-t,l=r-e,c=o-a,d=s-i,f=d*u-c*l;if(!(f*f<Yt))return f=(c*(e-i)-d*(t-a))/f,[t+f*u,e+f*l]}function Mn(t,e,n,r,a,i,o){var s=t-n,u=e-r,l=(o?i:-i)/Fe(s*s+u*u),c=l*u,d=-l*s,f=t+c,p=e+d,m=n+c,C=r+d,k=(f+m)/2,M=(p+C)/2,T=m-f,P=C-p,R=T*T+P*P,H=a-i,S=f*C-m*p,L=(P<0?-1:1)*Fe(Md(0,H*H*R-S*S)),Y=(S*P-T*L)/R,E=(-S*T-P*L)/R,D=(S*P+T*L)/R,A=(-S*T+P*L)/R,$=Y-k,w=E-M,h=D-k,g=A-M;return $*$+w*w>h*h+g*g&&(Y=D,E=A),{cx:Y,cy:E,x01:-c,y01:-d,x11:Y*(a/H-1),y11:E*(a/H-1)}}function fn(){var t=$d,e=Ed,n=Et(0),r=null,a=Td,i=Ad,o=Nd,s=null,u=Oo(l);function l(){var c,d,f=+t.apply(this,arguments),p=+e.apply(this,arguments),m=a.apply(this,arguments)-ur,C=i.apply(this,arguments)-ur,k=wi(C-m),M=C>m;if(s||(s=c=u()),p<f&&(d=p,p=f,f=d),!(p>Yt))s.moveTo(0,0);else if(k>In-Yt)s.moveTo(p*Me(m),p*le(m)),s.arc(0,0,p,m,C,!M),f>Yt&&(s.moveTo(f*Me(C),f*le(C)),s.arc(0,0,f,C,m,M));else{var T=m,P=C,R=m,H=C,S=k,L=k,Y=o.apply(this,arguments)/2,E=Y>Yt&&(r?+r.apply(this,arguments):Fe(f*f+p*p)),D=Tr(wi(p-f)/2,+n.apply(this,arguments)),A=D,$=D,w,h;if(E>Yt){var g=bi(E/f*le(Y)),y=bi(E/p*le(Y));(S-=g*2)>Yt?(g*=M?1:-1,R+=g,H-=g):(S=0,R=H=(m+C)/2),(L-=y*2)>Yt?(y*=M?1:-1,T+=y,P-=y):(L=0,T=P=(m+C)/2)}var _=p*Me(T),x=p*le(T),b=f*Me(H),N=f*le(H);if(D>Yt){var F=p*Me(P),B=p*le(P),K=f*Me(R),U=f*le(R),Q;if(k<un)if(Q=Rd(_,x,K,U,F,B,b,N)){var Z=_-Q[0],at=x-Q[1],pt=F-Q[0],J=B-Q[1],Pt=1/le(Sd((Z*pt+at*J)/(Fe(Z*Z+at*at)*Fe(pt*pt+J*J)))/2),Rt=Fe(Q[0]*Q[0]+Q[1]*Q[1]);A=Tr(D,(f-Rt)/(Pt-1)),$=Tr(D,(p-Rt)/(Pt+1))}else A=$=0}L>Yt?$>Yt?(w=Mn(K,U,_,x,p,$,M),h=Mn(F,B,b,N,p,$,M),s.moveTo(w.cx+w.x01,w.cy+w.y01),$<D?s.arc(w.cx,w.cy,$,It(w.y01,w.x01),It(h.y01,h.x01),!M):(s.arc(w.cx,w.cy,$,It(w.y01,w.x01),It(w.y11,w.x11),!M),s.arc(0,0,p,It(w.cy+w.y11,w.cx+w.x11),It(h.cy+h.y11,h.cx+h.x11),!M),s.arc(h.cx,h.cy,$,It(h.y11,h.x11),It(h.y01,h.x01),!M))):(s.moveTo(_,x),s.arc(0,0,p,T,P,!M)):s.moveTo(_,x),!(f>Yt)||!(S>Yt)?s.lineTo(b,N):A>Yt?(w=Mn(b,N,F,B,f,-A,M),h=Mn(_,x,K,U,f,-A,M),s.lineTo(w.cx+w.x01,w.cy+w.y01),A<D?s.arc(w.cx,w.cy,A,It(w.y01,w.x01),It(h.y01,h.x01),!M):(s.arc(w.cx,w.cy,A,It(w.y01,w.x01),It(w.y11,w.x11),!M),s.arc(0,0,f,It(w.cy+w.y11,w.cx+w.x11),It(h.cy+h.y11,h.cx+h.x11),M),s.arc(h.cx,h.cy,A,It(h.y11,h.x11),It(h.y01,h.x01),!M))):s.arc(0,0,f,H,R,M)}if(s.closePath(),c)return s=null,c+""||null}return l.centroid=function(){var c=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,d=(+a.apply(this,arguments)+ +i.apply(this,arguments))/2-un/2;return[Me(d)*c,le(d)*c]},l.innerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Et(+c),l):t},l.outerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:Et(+c),l):e},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:Et(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:Et(+c),l):r},l.startAngle=function(c){return arguments.length?(a=typeof c=="function"?c:Et(+c),l):a},l.endAngle=function(c){return arguments.length?(i=typeof c=="function"?c:Et(+c),l):i},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:Et(+c),l):o},l.context=function(c){return arguments.length?(s=c??null,l):s},l}function Io(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Do(t){this._context=t}Do.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Pd(t){return new Do(t)}function Od(t){return t[0]}function Id(t){return t[1]}function Ee(t,e){var n=Et(!0),r=null,a=Pd,i=null,o=Oo(s);t=typeof t=="function"?t:t===void 0?Od:Et(t),e=typeof e=="function"?e:e===void 0?Id:Et(e);function s(u){var l,c=(u=Io(u)).length,d,f=!1,p;for(r==null&&(i=a(p=o())),l=0;l<=c;++l)!(l<c&&n(d=u[l],l,u))===f&&((f=!f)?i.lineStart():i.lineEnd()),f&&i.point(+t(d,l,u),+e(d,l,u));if(p)return i=null,p+""||null}return s.x=function(u){return arguments.length?(t=typeof u=="function"?u:Et(+u),s):t},s.y=function(u){return arguments.length?(e=typeof u=="function"?u:Et(+u),s):e},s.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Et(!!u),s):n},s.curve=function(u){return arguments.length?(a=u,r!=null&&(i=a(r)),s):a},s.context=function(u){return arguments.length?(u==null?r=i=null:i=a(r=u),s):r},s}function Dd(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function Hd(t){return t}function Ho(){var t=Hd,e=Dd,n=null,r=Et(0),a=Et(In),i=Et(0);function o(s){var u,l=(s=Io(s)).length,c,d,f=0,p=new Array(l),m=new Array(l),C=+r.apply(this,arguments),k=Math.min(In,Math.max(-In,a.apply(this,arguments)-C)),M,T=Math.min(Math.abs(k)/l,i.apply(this,arguments)),P=T*(k<0?-1:1),R;for(u=0;u<l;++u)(R=m[p[u]=u]=+t(s[u],u,s))>0&&(f+=R);for(e!=null?p.sort(function(H,S){return e(m[H],m[S])}):n!=null&&p.sort(function(H,S){return n(s[H],s[S])}),u=0,d=f?(k-l*P)/f:0;u<l;++u,C=M)c=p[u],R=m[c],M=C+(R>0?R*d:0)+P,m[c]={data:s[c],index:u,value:R,startAngle:C,endAngle:M,padAngle:T};return m}return o.value=function(s){return arguments.length?(t=typeof s=="function"?s:Et(+s),o):t},o.sortValues=function(s){return arguments.length?(e=s,n=null,o):e},o.sort=function(s){return arguments.length?(n=s,e=null,o):n},o.startAngle=function(s){return arguments.length?(r=typeof s=="function"?s:Et(+s),o):r},o.endAngle=function(s){return arguments.length?(a=typeof s=="function"?s:Et(+s),o):a},o.padAngle=function(s){return arguments.length?(i=typeof s=="function"?s:Et(+s),o):i},o}function Ci(t){return t<0?-1:1}function ki(t,e,n){var r=t._x1-t._x0,a=e-t._x1,i=(t._y1-t._y0)/(r||a<0&&-0),o=(n-t._y1)/(a||r<0&&-0),s=(i*a+o*r)/(r+a);return(Ci(i)+Ci(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(s))||0}function Mi(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Ar(t,e,n){var r=t._x0,a=t._y0,i=t._x1,o=t._y1,s=(i-r)/3;t._context.bezierCurveTo(r+s,a+s*e,i-s,o-s*n,i,o)}function fr(t){this._context=t}fr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ar(this,this._t0,Mi(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Ar(this,Mi(this,n=ki(this,t,e)),n);break;default:Ar(this,this._t0,n=ki(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};Object.create(fr.prototype).point=function(t,e){fr.prototype.point.call(this,e,t)};function Xe(t){return new fr(t)}const Sn=t=>()=>t;function Ld(t,{sourceEvent:e,target:n,transform:r,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:a}})}function me(t,e,n){this.k=t,this.x=e,this.y=n}me.prototype={constructor:me,scale:function(t){return t===1?this:new me(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new me(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var dn=new me(1,0,0);me.prototype;function Nr(t){t.stopImmediatePropagation()}function Ke(t){t.preventDefault(),t.stopImmediatePropagation()}function Fd(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function zd(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Si(){return this.__zoom||dn}function Gd(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Yd(){return navigator.maxTouchPoints||"ontouchstart"in this}function Bd(t,e,n){var r=t.invertX(e[0][0])-n[0][0],a=t.invertX(e[1][0])-n[1][0],i=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(a>r?(r+a)/2:Math.min(0,r)||Math.max(0,a),o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o))}function Lo(){var t=Fd,e=zd,n=Bd,r=Gd,a=Yd,i=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],s=250,u=Ec,l=ya("start","zoom","end"),c,d,f,p=500,m=150,C=0,k=10;function M(h){h.property("__zoom",Si).on("wheel.zoom",Y,{passive:!1}).on("mousedown.zoom",E).on("dblclick.zoom",D).filter(a).on("touchstart.zoom",A).on("touchmove.zoom",$).on("touchend.zoom touchcancel.zoom",w).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}M.transform=function(h,g,y,_){var x=h.selection?h.selection():h;x.property("__zoom",Si),h!==x?H(h,g,y,_):x.interrupt().each(function(){S(this,arguments).event(_).start().zoom(null,typeof g=="function"?g.apply(this,arguments):g).end()})},M.scaleBy=function(h,g,y,_){M.scaleTo(h,function(){var x=this.__zoom.k,b=typeof g=="function"?g.apply(this,arguments):g;return x*b},y,_)},M.scaleTo=function(h,g,y,_){M.transform(h,function(){var x=e.apply(this,arguments),b=this.__zoom,N=y==null?R(x):typeof y=="function"?y.apply(this,arguments):y,F=b.invert(N),B=typeof g=="function"?g.apply(this,arguments):g;return n(P(T(b,B),N,F),x,o)},y,_)},M.translateBy=function(h,g,y,_){M.transform(h,function(){return n(this.__zoom.translate(typeof g=="function"?g.apply(this,arguments):g,typeof y=="function"?y.apply(this,arguments):y),e.apply(this,arguments),o)},null,_)},M.translateTo=function(h,g,y,_,x){M.transform(h,function(){var b=e.apply(this,arguments),N=this.__zoom,F=_==null?R(b):typeof _=="function"?_.apply(this,arguments):_;return n(dn.translate(F[0],F[1]).scale(N.k).translate(typeof g=="function"?-g.apply(this,arguments):-g,typeof y=="function"?-y.apply(this,arguments):-y),b,o)},_,x)};function T(h,g){return g=Math.max(i[0],Math.min(i[1],g)),g===h.k?h:new me(g,h.x,h.y)}function P(h,g,y){var _=g[0]-y[0]*h.k,x=g[1]-y[1]*h.k;return _===h.x&&x===h.y?h:new me(h.k,_,x)}function R(h){return[(+h[0][0]+ +h[1][0])/2,(+h[0][1]+ +h[1][1])/2]}function H(h,g,y,_){h.on("start.zoom",function(){S(this,arguments).event(_).start()}).on("interrupt.zoom end.zoom",function(){S(this,arguments).event(_).end()}).tween("zoom",function(){var x=this,b=arguments,N=S(x,b).event(_),F=e.apply(x,b),B=y==null?R(F):typeof y=="function"?y.apply(x,b):y,K=Math.max(F[1][0]-F[0][0],F[1][1]-F[0][1]),U=x.__zoom,Q=typeof g=="function"?g.apply(x,b):g,Z=u(U.invert(B).concat(K/U.k),Q.invert(B).concat(K/Q.k));return function(at){if(at===1)at=Q;else{var pt=Z(at),J=K/pt[2];at=new me(J,B[0]-pt[0]*J,B[1]-pt[1]*J)}N.zoom(null,at)}})}function S(h,g,y){return!y&&h.__zooming||new L(h,g)}function L(h,g){this.that=h,this.args=g,this.active=0,this.sourceEvent=null,this.extent=e.apply(h,g),this.taps=0}L.prototype={event:function(h){return h&&(this.sourceEvent=h),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(h,g){return this.mouse&&h!=="mouse"&&(this.mouse[1]=g.invert(this.mouse[0])),this.touch0&&h!=="touch"&&(this.touch0[1]=g.invert(this.touch0[0])),this.touch1&&h!=="touch"&&(this.touch1[1]=g.invert(this.touch1[0])),this.that.__zoom=g,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(h){var g=ht(this.that).datum();l.call(h,this.that,new Ld(h,{sourceEvent:this.sourceEvent,target:M,transform:this.that.__zoom,dispatch:l}),g)}};function Y(h,...g){if(!t.apply(this,arguments))return;var y=S(this,g).event(h),_=this.__zoom,x=Math.max(i[0],Math.min(i[1],_.k*Math.pow(2,r.apply(this,arguments)))),b=ke(h);if(y.wheel)(y.mouse[0][0]!==b[0]||y.mouse[0][1]!==b[1])&&(y.mouse[1]=_.invert(y.mouse[0]=b)),clearTimeout(y.wheel);else{if(_.k===x)return;y.mouse=[b,_.invert(b)],Pn(this),y.start()}Ke(h),y.wheel=setTimeout(N,m),y.zoom("mouse",n(P(T(_,x),y.mouse[0],y.mouse[1]),y.extent,o));function N(){y.wheel=null,y.end()}}function E(h,...g){if(f||!t.apply(this,arguments))return;var y=h.currentTarget,_=S(this,g,!0).event(h),x=ht(h.view).on("mousemove.zoom",B,!0).on("mouseup.zoom",K,!0),b=ke(h,y),N=h.clientX,F=h.clientY;Zl(h.view),Nr(h),_.mouse=[b,this.__zoom.invert(b)],Pn(this),_.start();function B(U){if(Ke(U),!_.moved){var Q=U.clientX-N,Z=U.clientY-F;_.moved=Q*Q+Z*Z>C}_.event(U).zoom("mouse",n(P(_.that.__zoom,_.mouse[0]=ke(U,y),_.mouse[1]),_.extent,o))}function K(U){x.on("mousemove.zoom mouseup.zoom",null),Jl(U.view,_.moved),Ke(U),_.event(U).end()}}function D(h,...g){if(t.apply(this,arguments)){var y=this.__zoom,_=ke(h.changedTouches?h.changedTouches[0]:h,this),x=y.invert(_),b=y.k*(h.shiftKey?.5:2),N=n(P(T(y,b),_,x),e.apply(this,g),o);Ke(h),s>0?ht(this).transition().duration(s).call(H,N,_,h):ht(this).call(M.transform,N,_,h)}}function A(h,...g){if(t.apply(this,arguments)){var y=h.touches,_=y.length,x=S(this,g,h.changedTouches.length===_).event(h),b,N,F,B;for(Nr(h),N=0;N<_;++N)F=y[N],B=ke(F,this),B=[B,this.__zoom.invert(B),F.identifier],x.touch0?!x.touch1&&x.touch0[2]!==B[2]&&(x.touch1=B,x.taps=0):(x.touch0=B,b=!0,x.taps=1+!!c);c&&(c=clearTimeout(c)),b&&(x.taps<2&&(d=B[0],c=setTimeout(function(){c=null},p)),Pn(this),x.start())}}function $(h,...g){if(this.__zooming){var y=S(this,g).event(h),_=h.changedTouches,x=_.length,b,N,F,B;for(Ke(h),b=0;b<x;++b)N=_[b],F=ke(N,this),y.touch0&&y.touch0[2]===N.identifier?y.touch0[0]=F:y.touch1&&y.touch1[2]===N.identifier&&(y.touch1[0]=F);if(N=y.that.__zoom,y.touch1){var K=y.touch0[0],U=y.touch0[1],Q=y.touch1[0],Z=y.touch1[1],at=(at=Q[0]-K[0])*at+(at=Q[1]-K[1])*at,pt=(pt=Z[0]-U[0])*pt+(pt=Z[1]-U[1])*pt;N=T(N,Math.sqrt(at/pt)),F=[(K[0]+Q[0])/2,(K[1]+Q[1])/2],B=[(U[0]+Z[0])/2,(U[1]+Z[1])/2]}else if(y.touch0)F=y.touch0[0],B=y.touch0[1];else return;y.zoom("touch",n(P(N,F,B),y.extent,o))}}function w(h,...g){if(this.__zooming){var y=S(this,g).event(h),_=h.changedTouches,x=_.length,b,N;for(Nr(h),f&&clearTimeout(f),f=setTimeout(function(){f=null},p),b=0;b<x;++b)N=_[b],y.touch0&&y.touch0[2]===N.identifier?delete y.touch0:y.touch1&&y.touch1[2]===N.identifier&&delete y.touch1;if(y.touch1&&!y.touch0&&(y.touch0=y.touch1,delete y.touch1),y.touch0)y.touch0[1]=this.__zoom.invert(y.touch0[0]);else if(y.end(),y.taps===2&&(N=ke(N,this),Math.hypot(d[0]-N[0],d[1]-N[1])<k)){var F=ht(this).on("dblclick.zoom");F&&F.apply(this,arguments)}}}return M.wheelDelta=function(h){return arguments.length?(r=typeof h=="function"?h:Sn(+h),M):r},M.filter=function(h){return arguments.length?(t=typeof h=="function"?h:Sn(!!h),M):t},M.touchable=function(h){return arguments.length?(a=typeof h=="function"?h:Sn(!!h),M):a},M.extent=function(h){return arguments.length?(e=typeof h=="function"?h:Sn([[+h[0][0],+h[0][1]],[+h[1][0],+h[1][1]]]),M):e},M.scaleExtent=function(h){return arguments.length?(i[0]=+h[0],i[1]=+h[1],M):[i[0],i[1]]},M.translateExtent=function(h){return arguments.length?(o[0][0]=+h[0][0],o[1][0]=+h[1][0],o[0][1]=+h[0][1],o[1][1]=+h[1][1],M):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},M.constrain=function(h){return arguments.length?(n=h,M):n},M.duration=function(h){return arguments.length?(s=+h,M):s},M.interpolate=function(h){return arguments.length?(u=h,M):u},M.on=function(){var h=l.on.apply(l,arguments);return h===l?M:h},M.clickDistance=function(h){return arguments.length?(C=(h=+h)*h,M):Math.sqrt(C)},M.tapDistance=function(h){return arguments.length?(k=+h,M):k},M}const Wd={__name:"SunburstChart",props:{data:{type:Object,default:()=>({})},year:{type:[String,Number],default:null},country:{type:Object,default:null}},setup(t){const e=t,n=ft(null),r=ft(null),a={top:60,right:20,bottom:20,left:60},i=ft(500),o=ft(500);function s(f,p){return Math.min(f,p)/2-Math.max(a.top,a.right,a.bottom,a.left)}const u={residential:"#63b3df",service:"#76d76b",industry:"#898989",transport:"#ffb56b"};function l(){if(!e.data||!e.data.children||e.data.children.length===0)return;const f=i.value,p=o.value,m=s(f,p),C=ht(n.value);C.selectAll("*").remove(),C.attr("width",f).attr("height",p).attr("viewBox",`0 0 ${f} ${p}`);const k=C.append("g").attr("transform",`translate(${f/2},${p/2})`),M=hd().size([2*Math.PI,m*1.2]),T=fn().startAngle(S=>S.x0).endAngle(S=>S.x1).innerRadius(S=>S.y0).outerRadius(S=>S.y1),P=c(e.data),R=Aa(P).sum(S=>S.children?0:S.value).sort((S,L)=>L.value-S.value);M(R),hn(R.descendants(),S=>S.depth),Ln(".tooltip-container").remove();const H=ht("body").append("div").attr("class","tooltip-container");k.selectAll("path").data(R.descendants()).enter().append("path").attr("d",T).style("fill",S=>S.depth===2?u[S.parent.data.name.toLowerCase()]:S.depth===1?u[S.data.name.toLowerCase()]:"none").style("stroke","#fff").style("stroke-width","1px").style("cursor","pointer").on("mouseover",function(S,L){ht(this).style("opacity",.7),H.style("display","block").html(`
        <div style="font-weight:bold">
          ${L.data.name||"Unknown"}
        </div>
        <div>
          ${(L.value||0).toFixed(2)} PJ
        </div>
      `)}).on("mousemove",function(S){H.style("left",S.pageX+12+"px").style("top",S.pageY-28+"px")}).on("mouseout",function(){ht(this).style("opacity",1),H.style("display","none")}),k.selectAll("text").data(R.descendants().filter(S=>S.depth>0&&S.x1-S.x0>.05)).enter().append("text").attr("transform",S=>{const L=(S.x0+S.x1)/2,Y=(S.y0+S.y1)/2,E=L*180/Math.PI;return`
      rotate(${E-90})
      translate(${Y}, 0)
      rotate(${E<180?0:180})
    `}).attr("text-anchor","middle").attr("dy","0.35em").style("font-size",S=>S.depth===2?"10px":"13px").style("fill","#333").style("font-weight","bold").text(S=>S.data.name.length>15?S.data.name.substring(0,12)+"...":S.data.name)}function c(f){if(!f.children)return f;const p=f.children.map(c).filter(m=>m.children?cs(m.children,C=>C.value??0)>0:(m.value??0)>0);return p.length===0?{name:f.name,value:f.value}:{...f,children:p}}oe(()=>{zt(()=>{const f=r.value?r.value.getBoundingClientRect():{width:500},p=Math.max(200,Math.min(f.width,500));i.value=p,o.value=p;const m=new ResizeObserver(C=>{for(const k of C){const M=k.contentRect,T=Math.max(200,Math.min(M.width,500));i.value=T,o.value=T,zt(()=>l())}});r.value&&m.observe(r.value),d.value=m,l()})}),Vt(()=>[e.data,e.year,e.country],()=>{zt(()=>{l()})},{deep:!0});const d=ft(null);return _e(()=>{if(d.value)try{d.value.disconnect()}catch{}Ln(".tooltip-container").remove()}),(f,p)=>(G(),z("div",{class:"chart",ref_key:"containerRef",ref:r,style:{width:"100%"}},[(G(),z("svg",{ref_key:"svgRef",ref:n,preserveAspectRatio:"xMidYMid meet"},null,512))],512))}},Ud={id:"consumption",class:"page-section"},Vd={class:"section-container"},Xd={key:0,class:"no-data"},Kd={key:1,class:"loading"},qd={key:2,class:"error"},jd={key:3,class:"charts-container"},Zd={__name:"Consumption",setup(t){const e=Jt(),n=rt(()=>e.sunburstData.name?.length>0&&e.pieChartData[0]);return(r,a)=>(G(),z("section",Ud,[a[2]||(a[2]=v("div",{class:"chart-header"},[v("h2",null,"How Different Sectors Use Energy?")],-1)),v("div",Vd,[n.value?j(e).isLoading?(G(),z("div",Kd,"Loading energy data...")):j(e).error?(G(),z("div",qd,gt(j(e).error),1)):(G(),z("div",jd,[Ct(Wd,{data:j(e).sunburstData,year:j(e).selectedYear,country:j(e).selectedCountry},null,8,["data","year","country"])])):(G(),z("div",Xd,[...a[0]||(a[0]=[v("span",null,"No consumption data available for this configuration.",-1)])])),a[1]||(a[1]=v("div",{class:"text-container"},[v("p",null,[wt(" Have you ever wondered which sectors actually consume the most energy across countries? Energy use varies greatly between "),v("strong",null,"households, services, transport, and industry"),wt(". We often assume industry dominates because energy-intensive production processes requires large amounts of heat and power. But as you can see with this sunburst chart, many countries consume nearly as much or sometimes more energy in the transport and residential sectors as in industry. ")]),v("p",null," But still the largest energy use by sector comes mostly from industry. The biggest industrial slice is often Manufacturing, which combines food production, textiles, machinery, electronics, and more. "),v("p",null," Transport accounts only slightly behind industry. It is dominated by cars and trucks, which is always the largest share of transport demand. "),v("p",null," Within households, space heating is almost always the dominant enduse. Kosovo and Estonia appears with unusual high residential energy use not because households consume an unusually large amount of energy, but because its transport and industrial energy use are very small. "),v("p",null," Most countries have relatively low energy demand in the service sector, but some service-intensive economies such as Malta have a high share of energy demand in the service sector due to their tourism-driven economy. ")],-1))]),a[3]||(a[3]=he('<div class="chart-meta" data-v-7c93b4b5><div class="meta-section" data-v-7c93b4b5><span class="meta-label" data-v-7c93b4b5>Source</span><ul class="meta-list" data-v-7c93b4b5><li data-v-7c93b4b5><strong data-v-7c93b4b5>IEA</strong><a href="https://www.iea.org/data-and-statistics/data-product/energy-efficiency-indicators-highlights" target="_blank" rel="noopener" data-v-7c93b4b5> Energy End-Uses &amp; Efficiency Indicators </a> (sector-level consumption by end-use category). Columns: <code data-v-7c93b4b5>Country</code>, <code data-v-7c93b4b5>End use</code>, <code data-v-7c93b4b5>Product</code>. </li></ul></div></div>',1))]))}},Jd=Tt(Zd,[["__scopeId","data-v-7c93b4b5"]]),Qd="data:image/svg+xml,%3csvg%20width='4408'%20height='1516'%20viewBox='0%200%204408%201516'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M4345.75%201289.5C4318.88%201266.74%204285.87%201256.39%204263.37%201226.27C4215.24%201161.87%204240.84%201054.7%204245.2%20963.611C4254.04%20779.158%204143.98%20598.469%204007.7%20573.693C3976.53%20568.026%203944.11%20569.383%203914.77%20554.151C3832.84%20511.617%203814.46%20370.555%203767.31%20270.965C3708.15%20145.992%203590.36%2081.0607%203481.06%20100.083C3371.76%20119.106%203273.88%20215.253%203217.19%20342.28L3215.54%20346.616C3141.46%20442.432%203018.53%20461.059%202930.44%20389.818C2844.63%20320.423%202799.7%20185.661%202720.28%20103.687C2643.06%2024.0011%202538.86%202.11167%202442.71%2022.5201C2346.55%2042.9262%202257.17%20101.884%202174.39%20170.723C2136.22%20202.463%202098.86%20236.616%202057.69%20260.664C1924.73%20338.345%201757.48%20293.507%201656.86%20153.213C1632.87%20119.755%201612.3%2081.416%201584.83%2053.1893C1514.79%20-18.7896%201414.51%20-9.71456%201332.3%2033.1184C1250.09%2075.9514%201177.88%20147.586%201097.41%20196.006C1016.93%20244.425%20919.93%20267.45%20842.534%20210.685C793.435%20174.676%20757.04%20109.945%20704.609%2083.7586C645.759%2054.3683%20575.757%2082.7327%20532.484%20143.867C489.211%20205.003%20471.348%20293.793%20476.988%20377.832C480.953%20436.91%20495.584%20494.349%20496.491%20553.653C498.371%20676.623%20433.823%20796.067%20346.234%20831.692C271.321%20862.164%20186.681%20835.987%20115.242%20878.962C30.6368%20929.857%20-10.2127%201069.12%202.17795%201192.58C14.5686%201316.05%2069.8738%201424.47%20133.479%201515.1H4393.5C4424.46%201434.74%204402.72%201337.73%204345.75%201289.5Z'%20fill='%23D9CEC4'/%3e%3cpath%20d='M2938.07%20743.111C2947.65%20743.111%202956.6%20745.725%202964.32%20750.215C2971.32%20729.89%202990.56%20715.263%203013.26%20715.263C3016.97%20715.263%203020.59%20715.669%203024.07%20716.411C3033.02%20680.562%203065.42%20654%203104.04%20654C3142.34%20654%203174.52%20680.118%203183.78%20715.512C3185.41%20715.396%203187.04%20715.263%203188.7%20715.263C3201.29%20715.263%203213.05%20718.687%203223.22%20724.574C3232.7%20718.707%203243.84%20715.263%203255.81%20715.263C3290.1%20715.263%203317.9%20743.064%203317.9%20777.361H3257.4H3193.71H3175.57H3132.01H3119.98H3108.68H3064.02H3032.51H2987.14H2985.78H2962.49H2889C2896.38%20757.385%202915.54%20743.111%202938.07%20743.111Z'%20fill='%23FCF1E6'/%3e%3cpath%20d='M805.303%20601.706C817.853%20601.706%20829.576%20605.697%20839.695%20612.552C848.864%20581.52%20858.665%20552.678%20888.411%20552.678C893.273%20552.678%20909.905%20506.661%20947.249%20527.273C966.248%20534.144%20953.8%20496.737%20983.376%20466.2C1015.39%20438.717%201061.9%20453.986%201071.73%20513.532C1073.86%20513.356%201136.03%20488.339%201153.75%20520.615C1167.51%20538.937%201165.61%20564.415%201178.93%20573.403C1191.36%20564.446%201205.95%20559.187%201221.63%20559.187C1266.57%20559.187%201303%20601.635%201303%20654H1223.72H1140.26H1116.5H1059.42H1043.66H1028.86H970.335H929.042H869.6H867.811H837.301H741C750.669%20623.5%20775.77%20601.706%20805.303%20601.706Z'%20fill='%23FCF1E6'/%3e%3cpath%20d='M2251.37%20584.529H2187.31H2167.01H2165.82H2126.28H2098.8H2059.87H2050.02H2039.54H2001.56H1985.76H1930.23H1877.49C1877.49%20554.634%201901.73%20530.396%201931.63%20530.396C1938.09%20530.396%201944.26%20531.589%201950.01%20533.665C1960.66%20524.114%201974.69%20518.259%201990.13%20518.259C1997.35%20518.259%202004.24%20519.598%202010.66%20521.929C2017.63%20513.769%202027.97%20508.579%202039.54%20508.579C2047.7%20508.579%202055.24%20511.175%202061.43%20515.554C2072.81%20499.015%202091.85%20488.157%202113.44%20488.157C2143.69%20488.157%202168.93%20509.441%202175.09%20537.84C2183.43%20528.804%202195.33%20523.111%202208.6%20523.111C2233.8%20523.111%202254.24%20543.542%202254.24%20568.748C2254.23%20574.306%202253.19%20579.606%202251.37%20584.529Z'%20fill='%23FCF1E6'/%3e%3c/svg%3e",t0="/MyEnergyProfile/assets/consumption_service-D0ioY7Vx.svg",e0="/MyEnergyProfile/assets/consumption_residential-C9jPUtXp.svg",n0="/MyEnergyProfile/assets/consumption_transport-qyh_MufO.svg",r0="/MyEnergyProfile/assets/consumption_industry-C8RP9hDo.svg",a0={__name:"PieChart",props:{data:{type:Object,default:()=>({})},year:{type:[String,Number],default:null},selectedSector:{type:String,default:"Residential"},country:{type:Object,default:null}},setup(t){const e=t,n=ft(null),r=ft(null),a=ft(500),i=ft(500),o={top:60,right:20,bottom:20,left:60},s=ft(null);function u(d,f){return Math.min(d,f)/2-Math.max(o.top,o.right,o.bottom,o.left)}const l={motor:"rgb(162, 158, 162)",jet:"rgb(109, 151, 214)",lpg:"rgb(240, 220, 120)",electricity:"rgb(99, 179, 223)",heat:"rgb(255, 130, 130)",biofuel:"rgb(144, 210, 125)",gas:"rgb(128, 128, 128)",coal:"rgb(70, 70, 70)",other:"rgb(150, 180, 220)","Oil and oil products":"rgb(236, 154, 111)","Heavy fuel oil":"rgb(139, 99, 11)",diesel:"rgb(205, 149, 88)"};function c(){const d=e.data.find(E=>E?.name===e.selectedSector)?.energyType,f=a.value,p=i.value,m=u(f,p);if(!e.data||!d||d.length===0)return;const C=ht(n.value);C.selectAll("*").remove(),C.attr("width",f).attr("height",p).attr("viewBox",`0 0 ${f} ${p}`);const k=C.append("g").attr("transform",`translate(${f/2},${p/2})`),M=Ho().value(E=>E.value).sort(null),T=fn().innerRadius(0).outerRadius(m),P=M(d),R=ht("body").append("div").attr("class","tooltip-container");k.selectAll("path").data(P).enter().append("path").attr("d",T).style("fill",E=>{const D=Object.entries(l).find(([A])=>E.data.name.toLowerCase().includes(A.toLowerCase()));return D?D[1]:"#fff"}).style("stroke","#fff").style("stroke-width","1px").style("cursor","pointer").on("mouseover",function(E,D){ht(this).style("opacity",.7),R.style("display","block").html(`
          <div style="font-weight: bold;">${D.data.name}</div>
          <div>${D.data.value?D.data.value.toFixed(2)+" PJ":""}</div>
        `)}).on("mousemove",function(E){R.style("left",E.pageX+12+"px").style("top",E.pageY-28+"px")}).on("mouseout",function(){ht(this).style("opacity",1),R.style("display","none")});const H=fn().innerRadius(m*.7).outerRadius(m*.7),S=m,L=20,Y=[];k.selectAll("text").data(P).enter().append("text").attr("class","pie-label").attr("transform",function(E,D){const[A,$]=H.centroid(E),w=Math.atan2($,A);let h=S+L,g=0,y,_;for(;g<5&&(y=h*Math.cos(w),_=h*Math.sin(w),!!Y.some(b=>Math.hypot(b.x-y,b.y-_)<25));)h+=12,g++;return Y.push({x:y,y:_}),`translate(${y}, ${_})`}).attr("text-anchor",E=>{const[D,A]=H.centroid(E);return D>=0?"start":"end"}).attr("dy","0.35em").style("font-size","15px").text(E=>E.data.name),k.selectAll("polyline").data(P).enter().append("polyline").attr("points",function(E,D){const A=Y[D];if(!A)return"";const[$,w]=H.centroid(E),h=Math.atan2(w,$),g=S*Math.cos(h),y=S*Math.sin(h),_=(S+L/2)*Math.cos(h),x=(S+L/2)*Math.sin(h),b=5,N=A.x-b*Math.cos(h),F=A.y-b*Math.sin(h);return[[g,y],[_,x],[N,F]]}).style("fill","none").style("stroke","black").style("stroke-width","1")}return oe(()=>{zt(()=>{const d=r.value?r.value.getBoundingClientRect():{width:500},f=Math.max(200,Math.min(d.width,400));a.value=f*1.5,i.value=f*.8;const p=new ResizeObserver(m=>{for(const C of m){const k=C.contentRect,M=Math.max(200,Math.min(k.width,400));a.value=M*1.5,i.value=M*.8,zt(()=>c())}});r.value&&p.observe(r.value),s.value=p,c()})}),Vt(()=>[e.data,e.year,e.selectedSector,e.country],()=>{zt(()=>{c()})},{deep:!0}),_e(()=>{if(s.value)try{s.value.disconnect()}catch{}Ln(".tooltip-container").remove()}),(d,f)=>(G(),z("div",{class:"chart",ref_key:"containerRef",ref:r,style:{width:"100%"}},[(G(),z("svg",{ref_key:"svgRef",ref:n,preserveAspectRatio:"xMidYMid meet"},null,512))],512))}},i0={id:"sectorfuels",class:"page-section"},o0={class:"section-container"},s0={key:0,class:"no-data"},l0={key:1,class:"loading"},c0={key:2,class:"error"},u0={key:3,class:"charts-container"},f0={class:"interactive-graphic"},d0={class:"interactive-image-container"},h0={__name:"SectorFuels",setup(t){const e=Jt(),n=ft("Residential"),r=rt(()=>e.sunburstData.name?.length>0&&e.pieChartData[0]);return(a,i)=>(G(),z("section",i0,[i[7]||(i[7]=v("div",{class:"chart-header"},[v("h2",null,"What Energy Sources Do Different Sectors Rely On?")],-1)),v("div",o0,[r.value?j(e).isLoading?(G(),z("div",l0,"Loading energy data...")):j(e).error?(G(),z("div",c0,gt(j(e).error),1)):(G(),z("div",u0,[v("div",f0,[v("img",{src:Qd,alt:"Energy Consumption Background",style:{width:"100%",cursor:"pointer"},onClick:i[0]||(i[0]=o=>n.value="Residential"),class:"bg-image"}),v("div",d0,[v("img",{src:t0,alt:"Energy Consumption Service",style:{width:"20%",cursor:"pointer"},onClick:i[1]||(i[1]=o=>n.value="Service"),class:Bt([{active:n.value==="Service"},"interactive-image svg-glow"])},null,2),v("img",{src:e0,alt:"Energy Consumption Residential",style:{width:"15%",cursor:"pointer"},onClick:i[2]||(i[2]=o=>n.value="Residential"),class:Bt([{active:n.value==="Residential"},"interactive-image svg-glow"])},null,2),v("img",{src:n0,alt:"Energy Consumption Transport",style:{width:"20%",cursor:"pointer"},onClick:i[3]||(i[3]=o=>n.value="Transport"),class:Bt([{active:n.value==="Transport"},"interactive-image svg-glow"])},null,2),v("img",{src:r0,alt:"Energy Consumption Industry",style:{width:"30%",cursor:"pointer"},onClick:i[4]||(i[4]=o=>n.value="Industry"),class:Bt([{active:n.value==="Industry"},"interactive-image svg-glow"])},null,2)])]),Ct(a0,{data:j(e).pieChartData,year:j(e).selectedYear,country:j(e).selectedCountry,selectedSector:n.value},null,8,["data","year","country","selectedSector"])])):(G(),z("div",s0,[...i[5]||(i[5]=[v("span",null,"No consumption data available for this configuration.",-1)])])),i[6]||(i[6]=v("div",{class:"text-container"},[v("p",null," This visualization shows how different sectors rely on different types of energy sources. Although the exact shares change from country to country and over time, some broad patterns appear consistently across the dataset. "),v("p",null,[v("strong",null,"Residential"),wt(" energy use is mixed. Households tend to combine several energy carriers, commonly electricity, gas, biofuels, or district heat, depending on climate conditions, building types, and heating technologies. In many countries electricity and gas form the core of household consumption. ")]),v("p",null,[v("strong",null,"Transport"),wt(" relies primarily on oilbased fuels. Across almost all countries and years, road, air, and freight transport are dominated by gasoline, diesel, jet fuel, and other oil products. Alternative fuels such as electricity or gas are present but remain small compared to oil. ")]),v("p",null,[v("strong",null,"Services"),wt(" rely heavily on electricity. Hotels, offices, public buildings, and commercial activities typically use electricity as their main energy source, with gas or heat sometimes contributing depending on the country. Oil and coal appear only as small shares in most cases. ")]),v("p",null,[v("strong",null,"Industry"),wt(" uses a varied mix. Manufacturing and industrial processes draw on electricity, gas, coal, bioenergy, and oil to different extents. This reflects the diverse technical needs of industrial production, from hightemperature heat to mechanical power. ")])],-1))]),i[8]||(i[8]=v("div",{class:"chart-meta"},[v("div",{class:"meta-section"},[v("span",{class:"meta-label"},"Source"),v("ul",{class:"meta-list"},[v("li",null,"Same table as above.")])])],-1))]))}},p0=Tt(h0,[["__scopeId","data-v-d7551cc1"]]),g0={class:"kpi"},y0={key:0},m0={key:0},v0={key:1},_0={key:1},x0={key:0},w0={key:1,class:"kpi-value"},b0={key:2,class:"kpi-sub"},C0=["aria-label"],k0=300,M0={__name:"PricesFocusContext",props:{data:{type:Array,default:()=>[]},focusYear:{type:[Number,null],default:null},series:{type:String,default:"energy"},view:{type:String,default:"annual"},width:{type:Number,default:null},height:{type:Number,default:320},activeSeries:{type:String,default:"energy"}},emits:["update:focusYear","rangeChange","update:series"],setup(t,{emit:e}){const n=t,r=e,a=ft(null),i=ft(null),o=ft(null);let s=null,u=null,l=null,c=null,d=null;const f={top:20,right:14,bottom:40,left:56},p=rt(()=>(n.data||[]).slice().sort((E,D)=>E.year-D.year)),m=rt(()=>p.value.map(E=>E.year)),C=rt(()=>p.value.map(E=>E.electricity));function k(E){if(!Array.isArray(E))return E==null?null:Number(E);const D=E.filter(A=>A!=null).map(Number);return D.length?D.reduce((A,$)=>A+$,0)/D.length:null}const M=rt(()=>p.value.map(E=>k(E.CPI0450))),T=rt(()=>p.value.length?p.value[p.value.length-1]:null),P=rt(()=>{if(n.focusYear)return p.value.find(E=>E.year===n.focusYear)||T.value;if(n.activeSeries==="electricity"){for(let E=p.value.length-1;E>=0;E--){const D=p.value[E];if(D&&D.electricity!=null)return D}return T.value}return T.value}),R=rt(()=>T.value?`Electricity price ${T.value} US cents per kilowatt hour in ${T.year}. Use controls to zoom and focus.`:"No price data available"),H=ft(500),S=ft(500);function L(){if(!i.value)return;ht(i.value).selectAll("*").remove();const E=H.value||Math.max(420,(a.value?.clientWidth||720)-0),D=S.value,A=E-f.left-f.right,$=D-f.top-f.bottom-12;s=ht(i.value).append("svg").attr("width",E).attr("height",D).attr("viewBox",`0 0 ${E} ${D}`).attr("preserveAspectRatio","xMidYMid meet");const w=s.append("g").attr("class","main").attr("transform",`translate(${f.left},${f.top})`),h=ie().domain(es(m.value.length?m.value:[new Date().getFullYear()-5,new Date().getFullYear()])).range([0,A]).nice();function g(q,tt=0,st=1){const lt=(q||[]).filter(I=>I!=null&&Number.isFinite(Number(I))).map(Number);return lt.length?[ss(lt),hn(lt)]:[tt,st]}const[y,_]=n.activeSeries==="energy"?g(M.value,0,1):g(C.value,0,1),x=ie().domain([y,_]).nice().range([$,0]);function b(q){const tt=Math.floor(q),st=q-tt;if(Math.abs(st)<1e-6)return gr("d")(tt)}const N=Li(h).ticks(Math.min(10,Math.max(4,m.value.length))).tickFormat(b),F=Fi(x).ticks(4);w.append("g").attr("class","y axis").call(F);const B=w.append("g").attr("class","x axis").attr("transform",`translate(0,${$})`).call(N),K=n.activeSeries==="energy"?"Energy CPI (index)":"US cents / kWh";w.append("text").attr("class","y-label").attr("transform","rotate(-90)").attr("y",-54).attr("x",-$/2).attr("dy","1em").style("text-anchor","middle").text(K);function U(q){const tt=[];return q.forEach(st=>{const lt=st.CPI0450;if(Array.isArray(lt))for(let I=0;I<lt.length;I++)tt.push({year:st.year+I/4,qIndex:I+1,value:Number(lt[I])})}),tt}function Q(q){return n.activeSeries==="electricity"?Ee().defined(tt=>tt.electricity!=null).x(tt=>q(tt.year)).y(tt=>x(tt.electricity)).curve(Xe):Ee().defined(tt=>k(tt.CPI0450)!=null).x(tt=>q(tt.year)).y(tt=>x(k(tt.CPI0450))).curve(Xe)}const Z=w.append("path").attr("class","line main-line").attr("fill","none"),at=w.append("path").attr("class","line annual-line"),pt=w.append("path").attr("class","line quarterly-line"),J=w.append("g").attr("class","points"),Pt=w.append("g").attr("class","cpi-quarter"),Rt=w.append("g").attr("class","focused-annual");function mt(q,tt=!1){const st=Q(q);if(n.activeSeries==="electricity"){Z.attr("stroke","#2c7be5").attr("stroke-width",2).attr("opacity",1),at.attr("stroke","#ffb86b").attr("stroke-width",2).attr("fill","none").datum(p.value).attr("d",Ee().defined(O=>k(O.CPI0450)!=null).x(O=>q(O.year)).y(O=>x(k(O.CPI0450))).curve(Xe)),Z.datum(p.value).attr("d",st);const lt=Z.node();if((lt&&lt.getTotalLength?lt.getTotalLength():0)<2){const O=p.value.filter(ct=>ct.electricity!=null).slice().sort((ct,X)=>ct.year-X.year);let V=null,et=null;if(n.focusYear!=null){const ct=O.findIndex(X=>X.year===n.focusYear);ct>=0&&(V=O[ct],et=O[ct+1]||O[ct-1]||null)}if(!V){const ct=q.domain?(q.domain()[0]+q.domain()[1])/2:null,X=O.map(ot=>({d:ot,dist:Math.abs(ot.year-(ct||0))})).sort((ot,ut)=>ot.dist-ut.dist);V=X[0]?X[0].d:null,et=X[1]?X[1].d:X[0]?X[0].d:null}if(V&&et){const ct=Ee().defined(X=>X&&X.electricity!=null).x(X=>q(X.year)).y(X=>x(X.electricity));Z.datum([V,et]).attr("d",ct).attr("stroke-width",3)}}J.selectAll("circle").data(p.value.filter(O=>O.electricity!=null),O=>O.year).join(O=>O.append("circle").attr("cx",V=>q(V.year)).attr("cy",V=>x(V.electricity)).attr("r",V=>n.focusYear===V.year?6:3.5).attr("fill",V=>n.focusYear===V.year?"#ff7b54":"#fff").attr("stroke",V=>n.focusYear===V.year?"#ff7b54":"#2c7be5").attr("stroke-width",1.5).style("cursor","pointer").on("click",(V,et)=>r("update:focusYear",et.year)).on("mouseenter",(V,et)=>Xt(V,et)).on("mouseleave",At),O=>O.call(V=>V.attr("cx",et=>q(et.year)).attr("cy",et=>x(et.electricity)).attr("r",et=>n.focusYear===et.year?6:3.5)),O=>O.remove()),Pt.selectAll("*").remove()}else if(Z.attr("stroke","#ffb86b").attr("stroke-width",2).attr("stroke-dasharray","3 0"),!tt)Z.datum(p.value).attr("d",st),J.selectAll("circle").data(p.value.filter(I=>k(I.CPI0450)!=null),I=>I.year).join(I=>I.append("circle").attr("cx",W=>q(W.year)).attr("cy",W=>x(k(W.CPI0450))).attr("r",W=>n.focusYear===W.year?5:3).attr("fill","#fff").attr("stroke","#ffb86b").attr("stroke-width",1.25).style("cursor","pointer").on("click",(W,O)=>r("update:focusYear",O.year)).on("mouseenter",(W,O)=>Xt(W,O)).on("mouseleave",At),I=>I.call(W=>W.attr("cx",O=>q(O.year)).attr("cy",O=>x(k(O.CPI0450))).attr("r",O=>n.focusYear===O.year?5:3)),I=>I.remove()),Pt.selectAll("*").remove();else{const lt=U(p.value);pt.attr("stroke","#ffb86b").attr("stroke-width",1.5).attr("fill","none").datum(lt).attr("d",Ee().defined(O=>O.value!=null).x(O=>q(O.year)).y(O=>x(O.value)).curve(Xe));const I=Ee().defined(O=>O.value!=null).x(O=>q(O.year)).y(O=>x(O.value)).curve(Xe);Z.datum(lt).attr("d",I),J.selectAll("*").remove(),Pt.selectAll("circle").data(lt,O=>`${O.year}-${O.qIndex}`).join(O=>O.append("circle").attr("cx",V=>q(V.year)).attr("cy",V=>x(V.value)).attr("r",2.5).attr("fill","#ffb86b").on("mouseenter",(V,et)=>kt(V,et)).on("mouseleave",At),O=>O.call(V=>V.attr("cx",et=>q(et.year)).attr("cy",et=>x(et.value))),O=>O.remove())}w.select(".y.axis").call(F),B.call(N.scale(q)),typeof d=="function"&&d(q)}d=function(q){const tt=n.focusYear!=null?n.focusYear:T.value&&T.value.year;if(tt==null){w.selectAll(".focus-line,.focus-annotation").remove();return}const st=p.value.find(W=>W.year===tt)||null,lt=q(tt);if(w.selectAll(".focus-line").data([tt]).join("line").attr("class","focus-line").attr("x1",lt).attr("x2",lt).attr("y1",0).attr("y2",$).attr("stroke","#ff7b54").attr("stroke-dasharray","3 3").attr("stroke-width",1),w.selectAll(".focus-annotation").remove(),st){if(n.activeSeries==="electricity"&&st.electricity!=null){const W=Math.max(12,x(st.electricity)-12);w.append("text").attr("x",lt+8).attr("y",W).attr("class","focus-annotation").text(`${st.electricity} US/kWh  ${st.year}`)}else if(n.activeSeries==="energy"){const W=k(st.CPI0450);if(W!=null){const O=Math.min($-6,x(W)+14);w.append("text").attr("x",lt+8).attr("y",O).attr("class","focus-annotation").style("fill","#8a5b00").text(`${W.toFixed(1)} CPI  ${st.year}`)}}}if(o.value&&tt&&(o.value.textContent=`Chart centered on ${tt}`),Rt.selectAll("*").remove(),n.focusYear!=null&&n.activeSeries==="electricity"){const W=p.value.find(O=>O.year===n.focusYear);if(W&&W.electricity!=null){const O=q(W.year),V=x(W.electricity),et=Math.abs(q(W.year+1)-q(W.year)),ct=Math.max(6,Math.min(14,et*.08));Rt.append("circle").attr("cx",O).attr("cy",V).attr("r",ct).attr("fill","#fff").attr("stroke","#2c7be5").attr("stroke-width",1.75).style("cursor","pointer").on("mouseenter",(X,ot)=>Xt(X,W)).on("mouseleave",At);try{Rt.raise()}catch{}}}},d&&d(h),mt(h,!1);const Ot=ht(a.value).selectAll(".chart-tooltip").data([null]).join("div").attr("class","chart-tooltip").style("position","absolute").style("pointer-events","none").style("opacity",0);function Xt(q,tt){const st=a.value.getBoundingClientRect(),lt=k(tt.CPI0450);let I=`<div class="tt-year">${tt.year}</div>`;n.activeSeries==="electricity"?I+=tt.electricity!=null?`<div class="tt-val">${tt.electricity} US/kWh</div>`:'<div class="tt-val">No electricity data</div>':I+=lt!=null?`<div class="tt-val">Energy CPI (annual mean): ${lt.toFixed(1)}</div>`:'<div class="tt-val">No CPI data</div>',I+='<div class="tt-hint">Use header toggle to switch series</div>',Ot.style("opacity",1).html(I).style("left",`${q.clientX-st.left+12}px`).style("top",`${q.clientY-st.top-12}px`)}function kt(q,tt){const st=a.value.getBoundingClientRect(),lt=Math.floor(tt.year),I=tt.qIndex||Math.round((tt.year-lt)*4)+1,W=Number(tt.value),O=`<div class="tt-year">${lt} Q${I}</div><div class="tt-val">Energy CPI: ${Number.isFinite(W)?W.toFixed(2):""}</div><div class="tt-hint">Quarterly detail  use zoom out to return to annual view</div>`;Ot.style("opacity",1).html(O).style("left",`${q.clientX-st.left+12}px`).style("top",`${q.clientY-st.top-12}px`)}function At(){Ot.style("opacity",0)}u=Lo().scaleExtent([1,16]).translateExtent([[-50,-100],[A+50,$+100]]).on("zoom",q=>{const tt=q.transform.rescaleX(h);l=q.transform;const[st,lt]=tt.domain(),I=n.activeSeries==="energy"&&(lt-st<=1.5||q.transform.k>=6);let W=[];n.activeSeries==="electricity"?W=p.value.filter(ct=>ct.electricity!=null&&ct.year>=st&&ct.year<=lt).map(ct=>ct.electricity):I?W=U(p.value).filter(X=>X.value!=null&&X.year>=st&&X.year<=lt).map(X=>X.value):W=p.value.filter(ct=>k(ct.CPI0450)!=null&&ct.year>=Math.floor(st)&&ct.year<=Math.ceil(lt)).map(ct=>k(ct.CPI0450));const[O,V]=g(W,x.domain()[0],x.domain()[1]),et=(V-O)*.08||1;x.domain([Math.max(0,O-et),V+et]).nice(),I?(at.style("display","none"),pt.style("display",null)):(at.style("display",null),pt.style("display","none")),mt(tt,I)}),s.call(u),l?s.call(u.transform,l):l=dn,c=function(q,tt={span:null}){if(q==null)return;const st=tt&&Number.isFinite(tt.span)&&tt.span>0?(function(){const it=Number(tt.span),dt=Math.max(h.domain()[0],q-it),$t=Math.min(h.domain()[1],q+it),yt=Math.max(1,h($t)-h(dt));return Math.max(1,Math.min(16,A/yt))})():l&&l.k?l.k:1,lt=h(q),I=E/2-lt*st,W=dn.translate(I,0).scale(st);s.transition().duration(k0).call(u.transform,W),l=W;const O=W.rescaleX(h),[V,et]=O.domain(),ct=tt&&Number.isFinite(tt.span)&&tt.span<=2||et-V<=1.5||W.k>=6;let X=[];n.activeSeries==="electricity"?X=p.value.filter(it=>it.electricity!=null&&it.year>=V&&it.year<=et).map(it=>it.electricity):ct?X=U(p.value).filter(dt=>dt.value!=null&&dt.year>=V&&dt.year<=et).map(dt=>dt.value):X=p.value.filter(it=>k(it.CPI0450)!=null&&it.year>=Math.floor(V)&&it.year<=Math.ceil(et)).map(it=>k(it.CPI0450));const[ot,ut]=g(X,x.domain()[0],x.domain()[1]),nt=(ut-ot)*.08||1;x.domain([Math.max(0,ot-nt),ut+nt]).nice();try{mt(O,ct)}catch{mt(h,!1)}typeof d=="function"&&d(O),o.value&&(o.value.textContent=`Chart centered on ${q}`)}}oe(()=>{zt(()=>{const E=a.value?a.value.getBoundingClientRect():{width:500},D=Math.max(200,Math.min(E.width,500));H.value=D,S.value=D/2;const A=new ResizeObserver($=>{for(const w of $){const h=w.contentRect,g=Math.max(200,Math.min(h.width,500));H.value=g,S.value=g/2,zt(()=>L())}});a.value&&A.observe(a.value),Y.value=A,L()}),window.addEventListener("resize",L)}),Vt(()=>n.data,()=>{zt(L)},{deep:!0}),Vt(()=>n.focusYear,E=>{E!=null&&setTimeout(()=>{typeof c=="function"&&c(E,{span:2})},0)},{immediate:!0});const Y=ft(null);return _e(()=>{if(Y.value)try{Y.value.disconnect()}catch{}Ln(".tooltip-container").remove()}),(E,D)=>(G(),z("div",{class:"prices-focus-chart",ref_key:"containerRef",ref:a,style:{width:"100%"}},[v("div",g0,[P.value&&n.activeSeries==="electricity"?(G(),z("div",y0,[P.value.electricity!=null?(G(),z("h3",m0,[wt(gt(P.value.electricity)+" ",1),D[0]||(D[0]=v("span",{class:"unit"},"US/kWh",-1))])):(G(),z("h3",v0,"No electricity data for this year"))])):P.value&&n.activeSeries==="energy"?(G(),z("div",_0,[k(P.value.CPI0450)!=null?(G(),z("h3",x0,"Energy CPI: "+gt(k(P.value.CPI0450).toFixed(1)),1)):(G(),z("h3",w0,"No CPI data"))])):jt("",!0),P.value?(G(),z("div",b0,gt(n.focusYear||P.value.year),1)):jt("",!0)]),v("div",{class:"chart-area",ref_key:"chartRef",ref:i,tabindex:"0",role:"img","aria-label":R.value},null,8,C0),v("div",{class:"sr-only",ref_key:"liveRef",ref:o,"aria-live":"polite"},null,512)],512))}},$i=Tt(M0,[["__scopeId","data-v-68932f70"]]),S0={id:"costs",class:"page-section"},$0={class:"section-container"},E0={key:0,class:"loading"},T0={key:1,class:"error"},A0={key:0,class:"no-data"},N0={key:1,class:"charts-container"},R0={__name:"Costs",setup(t){const e=Jt(),n=ft("annual");function r(a){a&&e.setSelectedYear(Number(a))}return(a,i)=>(G(),z("section",S0,[i[1]||(i[1]=v("div",{class:"chart-header"},[v("h2",null,"Evolution of Energy and Electricity Prices")],-1)),v("div",$0,[j(e).isLoading?(G(),z("div",E0,"Loading energy data...")):j(e).error?(G(),z("div",T0,gt(j(e).error),1)):(G(),z(ae,{key:2},[j(e).pricesLoaded?(G(),z("div",N0,[Ct($i,{data:j(e).electricitySeries,focusYear:j(e).selectedYear,view:n.value,activeSeries:"energy","onUpdate:focusYear":r},null,8,["data","focusYear","view"]),Ct($i,{data:j(e).electricitySeries,focusYear:j(e).selectedYear,view:n.value,activeSeries:"electricity","onUpdate:focusYear":r},null,8,["data","focusYear","view"])])):(G(),z("div",A0,"Price data not available for this country."))],64)),i[0]||(i[0]=v("p",{class:"text-container"}," Was energy always this expensive? The line charts show how the Energy Consumer Price Index (CPI) has evolved over time, reflecting broader economic developments and changing market conditions. Sharp increases in household energy prices influence production decisions, consumption behaviour, and public perception. As prices rise, energy becomes more visible in everyday life, as both households and industries directly feel the economic impact. By exploring the data, it becomes clear that Germany, a country highly dependent on major energy suppliers, has experienced some of the strongest increases in energy prices in recent years. ",-1))]),i[2]||(i[2]=he('<div class="chart-meta" data-v-90ed0d82><div class="meta-section" data-v-90ed0d82><span class="meta-label" data-v-90ed0d82>Source</span><ul class="meta-list" data-v-90ed0d82><li data-v-90ed0d82><strong data-v-90ed0d82>EnergyCPI</strong><a href="https://github.com/MilesIParker/EnergyCPI" target="_blank" rel="noopener" data-v-90ed0d82> Global Energy Consumer Price Index </a> (IMF/Eurostat). Series: <code data-v-90ed0d82>CPI0450</code> (Electricity, gas &amp; fuels). </li><li data-v-90ed0d82><strong data-v-90ed0d82>World Bank</strong><a href="https://databank.worldbank.org/embed/Electric-Prices-by-Country/id/7b12e700" target="_blank" rel="noopener" data-v-90ed0d82> Electric Prices by Country </a> . Electricity price (US cents/kWh). </li></ul></div><div class="meta-section" data-v-90ed0d82><span class="meta-label" data-v-90ed0d82>Data Hints</span><ul class="meta-list" data-v-90ed0d82><li data-v-90ed0d82>World Bank electricity prices are only available for 2014 to 2019.</li></ul></div></div>',1))]))}},P0=Tt(R0,[["__scopeId","data-v-90ed0d82"]]),Fo={"008":"AL","020":"AD","040":"AT","056":"BE","070":"BA",100:"BG",112:"BY",191:"HR",196:"CY",203:"CZ",208:"DK",233:"EE",246:"FI",250:"FR",276:"DE",300:"GR",348:"HU",352:"IS",372:"IE",380:"IT",428:"LV",438:"LI",440:"LT",442:"LU",807:"MK",470:"MT",498:"MD",492:"MC",499:"ME",528:"NL",578:"NO",616:"PL",620:"PT",642:"RO",643:"RU",674:"SM",688:"RS",703:"SK",705:"SI",724:"ES",752:"SE",756:"CH",804:"UA",826:"GB",336:"VA","012":"DZ","024":"AO","031":"AZ","032":"AR","036":"AU","048":"BH","076":"BR","096":"BN",124:"CA",156:"CN",170:"CO",178:"CG",180:"CD",218:"EC",818:"EG",226:"GQ",266:"GA",268:"GE",288:"GH",356:"IN",360:"ID",364:"IR",368:"IQ",376:"IL",392:"JP",398:"KZ",400:"JO",414:"KW",422:"LB",434:"LY",458:"MY",484:"MX",504:"MA",508:"MZ",516:"NA",566:"NG",512:"OM",586:"PK",608:"PH",634:"QA",682:"SA",702:"SG",710:"ZA",410:"KR",729:"SD",728:"SS",760:"SY",764:"TH",780:"TT",788:"TN",792:"TR",795:"TM",784:"AE",840:"US",860:"UZ",862:"VE",704:"VN",887:"YE","004":"AF","050":"BD","064":"BT","068":"BO","072":"BW","084":"BZ","090":"SB",104:"MM",108:"BI",116:"KH",120:"CM",132:"CV",140:"CF",144:"LK",148:"TD",152:"CL",158:"TW",174:"KM",188:"CR",192:"CU",204:"BJ",214:"DO",222:"SV",231:"ET",232:"ER",242:"FJ",262:"DJ",270:"GM",275:"PS",292:"GI",296:"KI",308:"GD",320:"GT",324:"GN",328:"GY",332:"HT",340:"HN",344:"HK",384:"CI",388:"JM",404:"KE",408:"KP",417:"KG",418:"LA",426:"LS",430:"LR",446:"MO",450:"MG",454:"MW",462:"MV",466:"ML",478:"MR",480:"MU",496:"MN",524:"NP",540:"NC",548:"VU",554:"NZ",558:"NI",562:"NE",591:"PA",598:"PG",600:"PY",604:"PE",638:"RE",646:"RW",662:"LC",678:"ST",686:"SN",694:"SL",706:"SO",716:"ZW",732:"EH",740:"SR",748:"SZ",762:"TJ",834:"TZ",768:"TG",776:"TO",800:"UG",854:"BF",858:"UY",882:"WS",894:"ZM",926:"XK"},O0=Object.fromEntries(Object.entries(Fo).map(([t,e])=>[e,t])),I0={EL:"GR",UK:"GB"},D0=new Set(["EUR_OTH","AFR_OTH","AME_OTH","ASI_OTH","ASI_NME_OTH","EU27_2020","EA19","EA20","WORLD","TOTAL","OTH","OTHER","UNKNOWN"]);function H0(t){return t?D0.has(t.toUpperCase()):!1}function ga(t){if(!t)return null;const e=t.toUpperCase();return I0[e]||e}function L0(t){if(!t)return null;const e=ga(t);return O0[e]||null}function Rr(t){if(!t)return null;const e=String(t).padStart(3,"0");return Fo[e]||null}const Ei={AL:"Albania",AD:"Andorra",AT:"Austria",BE:"Belgium",BA:"Bosnia and Herzegovina",BG:"Bulgaria",BY:"Belarus",HR:"Croatia",CY:"Cyprus",CZ:"Czechia",DK:"Denmark",EE:"Estonia",FI:"Finland",FR:"France",DE:"Germany",GR:"Greece",HU:"Hungary",IS:"Iceland",IE:"Ireland",IT:"Italy",LV:"Latvia",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MK:"North Macedonia",MT:"Malta",MD:"Moldova",MC:"Monaco",ME:"Montenegro",NL:"Netherlands",NO:"Norway",PL:"Poland",PT:"Portugal",RO:"Romania",RU:"Russia",SM:"San Marino",RS:"Serbia",SK:"Slovakia",SI:"Slovenia",ES:"Spain",SE:"Sweden",CH:"Switzerland",UA:"Ukraine",GB:"United Kingdom",VA:"Vatican City",XK:"Kosovo",DZ:"Algeria",AO:"Angola",AZ:"Azerbaijan",AR:"Argentina",AU:"Australia",BH:"Bahrain",BR:"Brazil",BN:"Brunei",CA:"Canada",CN:"China",CO:"Colombia",CG:"Congo",CD:"DR Congo",EC:"Ecuador",EG:"Egypt",GQ:"Equatorial Guinea",GA:"Gabon",GE:"Georgia",GH:"Ghana",IN:"India",ID:"Indonesia",IR:"Iran",IQ:"Iraq",IL:"Israel",JP:"Japan",KZ:"Kazakhstan",JO:"Jordan",KW:"Kuwait",LB:"Lebanon",LY:"Libya",MY:"Malaysia",MX:"Mexico",MA:"Morocco",MZ:"Mozambique",NA:"Namibia",NG:"Nigeria",OM:"Oman",PK:"Pakistan",PH:"Philippines",QA:"Qatar",SA:"Saudi Arabia",SG:"Singapore",ZA:"South Africa",KR:"South Korea",SD:"Sudan",SS:"South Sudan",SY:"Syria",TH:"Thailand",TT:"Trinidad and Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",AE:"UAE",US:"United States",UZ:"Uzbekistan",VE:"Venezuela",VN:"Vietnam",YE:"Yemen",AF:"Afghanistan",BD:"Bangladesh",BT:"Bhutan",BO:"Bolivia",BW:"Botswana",BZ:"Belize",SB:"Solomon Islands",MM:"Myanmar",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CV:"Cape Verde",CF:"Central African Republic",LK:"Sri Lanka",TD:"Chad",CL:"Chile",TW:"Taiwan",KM:"Comoros",CR:"Costa Rica",CU:"Cuba",BJ:"Benin",DO:"Dominican Republic",SV:"El Salvador",ET:"Ethiopia",ER:"Eritrea",FJ:"Fiji",DJ:"Djibouti",GM:"Gambia",PS:"Palestine",GI:"Gibraltar",KI:"Kiribati",GD:"Grenada",GT:"Guatemala",GN:"Guinea",GY:"Guyana",HT:"Haiti",HN:"Honduras",HK:"Hong Kong",CI:"Ivory Coast",JM:"Jamaica",KE:"Kenya",KP:"North Korea",KG:"Kyrgyzstan",LA:"Laos",LS:"Lesotho",LR:"Liberia",MO:"Macao",MG:"Madagascar",MW:"Malawi",MV:"Maldives",ML:"Mali",MR:"Mauritania",MU:"Mauritius",MN:"Mongolia",NP:"Nepal",NC:"New Caledonia",VU:"Vanuatu",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",RE:"Reunion",RW:"Rwanda",LC:"Saint Lucia",ST:"Sao Tome and Principe",SN:"Senegal",SL:"Sierra Leone",SO:"Somalia",ZW:"Zimbabwe",EH:"Western Sahara",SR:"Suriname",SZ:"Eswatini",TJ:"Tajikistan",TZ:"Tanzania",TG:"Togo",TO:"Tonga",UG:"Uganda",BF:"Burkina Faso",UY:"Uruguay",WS:"Samoa",ZM:"Zambia"},F0={class:"trading-partners-map"},z0={key:0,class:"no-data"},G0={key:1,class:"map-wrapper"},Y0={class:"map-container"},B0={class:"volume-summary"},W0={class:"volume-grid"},U0=["onClick"],V0={class:"checkbox-icon"},X0={class:"volume-value"},K0={class:"volume-unit"},q0={class:"checkbox-icon"},j0={class:"volume-value"},Z0={class:"volume-unit"},J0={class:"map-controls"},Q0={class:"cutoff-slider"},th={class:"cutoff-value"},eh={__name:"TradingPartnersMap",props:{tradeData:{type:Object,default:null},country:{type:Object,default:null},year:{type:Number,default:null}},setup(t){function e(h,g){return typeof g=="string"&&(g=h.objects[g]),g.type==="GeometryCollection"?{type:"FeatureCollection",features:g.geometries.map(y=>n(h,y))}:n(h,g)}function n(h,g){const y=g.id,_=g.bbox,x=g.properties||{},b=r(h,g);return y==null&&_==null?{type:"Feature",properties:x,geometry:b}:_==null?{type:"Feature",id:y,properties:x,geometry:b}:{type:"Feature",id:y,bbox:_,properties:x,geometry:b}}function r(h,g){const y=g.type;if(y==="GeometryCollection")return{type:y,geometries:g.geometries.map(x=>r(h,x))};if(y==="Point")return{type:y,coordinates:a(h,g.coordinates)};if(y==="MultiPoint")return{type:y,coordinates:g.coordinates.map(x=>a(h,x))};const _=g.arcs;return y==="LineString"?{type:y,coordinates:i(h,_)}:y==="MultiLineString"||y==="Polygon"?{type:y,coordinates:_.map(x=>i(h,x))}:y==="MultiPolygon"?{type:y,coordinates:_.map(x=>x.map(b=>i(h,b)))}:null}function a(h,g){const y=h.transform;if(!y)return g.slice();const _=y.scale,x=y.translate;return[g[0]*_[0]+x[0],g[1]*_[1]+x[1]]}function i(h,g){const y=[],_=h.arcs,x=h.transform;for(let b=0;b<g.length;b++){let N=g[b];const F=N<0;F&&(N=~N);const B=_[N],K=[];let U=0,Q=0;for(let at=0;at<B.length;at++){U+=B[at][0],Q+=B[at][1];const pt=x?[U*x.scale[0]+x.translate[0],Q*x.scale[1]+x.translate[1]]:[U,Q];K.push(pt)}F&&K.reverse();const Z=b===0?0:1;for(let at=Z;at<K.length;at++)y.push(K[at])}return y}const o=t,s=[{code:"SFF",label:"Coal",unit:"thousand tonnes",color:"#8b4513"},{code:"OIL",label:"Oil",unit:"thousand tonnes",color:"#1a1a1a"},{code:"GAS",label:"Gas",unit:"TJ",color:"#2980b9"},{code:"BIO",label:"Biofuels",unit:"thousand tonnes",color:"#27ae60"},{code:"EH",label:"Electricity",unit:"GWh",color:"#f1c40f"}],u=ft(new Set(["OIL","GAS","EH"])),l=ft(new Set(["imports"])),c=ft(3),d=ft(null);let f=null,p=null,m=null,C=null;function k(){!d.value||!C||(m=null,E())}function M(h){u.value.has(h)?(u.value.delete(h),u.value=new Set(u.value)):(u.value.add(h),u.value=new Set(u.value))}function T(h){l.value.has(h)?(l.value.delete(h),l.value=new Set(l.value)):(l.value.add(h),l.value=new Set(l.value))}function P(h,g){return(h==="imports"?o.tradeData?.imports?.total_by_type:o.tradeData?.exports?.total_by_type)?.[g]?.value??null}const R=rt(()=>o.tradeData?.imports||o.tradeData?.exports);function H(h){return h==null?"N/A":String(Math.round(h)).replace(/\B(?=(\d{3})+(?!\d))/g," ")}function S(h){return H0(h)}function L(h){const g=h==="imports"?o.tradeData?.imports:o.tradeData?.exports;if(!g?.partners_by_type)return[];const y=[];for(const _ of u.value){const x=g.partners_by_type[_];if(!x)continue;const b=s.find(F=>F.code===_),N=b?.color||"#666";for(const F of x){if(!F.share_pct||F.share_pct<c.value||S(F.geo))continue;const B=ga(F.geo);y.push({partnerGeo:B,partnerName:Ei[B]||F.name||B,value:F.value,sharePercent:F.share_pct,color:N,typeCode:_,typeName:b?.label||_,direction:h})}}return y}async function Y(){if(p)return p;try{return p=await(await fetch("/MyEnergyProfile/data/countries-110m.json")).json(),p}catch(h){return console.error("Failed to load world map data:",h),null}}async function E(){if(!d.value||!R.value)return;ht(d.value).selectAll("*").remove();const h=await Y();if(!h){ht(d.value).append("div").attr("class","map-error").text("Failed to load map data");return}const g=d.value,y=g.clientWidth||600,_=Math.min(y,400),x=ht(g).append("svg").attr("width",y).attr("height",_).attr("viewBox",`0 0 ${y} ${_}`).style("cursor","grab"),b=x.append("defs"),N=x.append("g").attr("class","map-group"),F=Math.max(y,_)*.5;C=Lo().scaleExtent([1,8]).translateExtent([[-F,-F],[y+F,_+F]]).on("zoom",X=>{N.attr("transform",X.transform),m=X.transform}).on("start",()=>{x.style("cursor","grabbing")}).on("end",()=>{x.style("cursor","grab")}),x.call(C);const B={imports:"#e53935",exports:"#43a047"};for(const X of s)for(const ot of Object.keys(B)){const ut=B[ot];b.append("marker").attr("id",`arrow-${X.code}-${ot}`).attr("viewBox","0 0 10 10").attr("refX",0).attr("refY",5).attr("markerWidth",3).attr("markerHeight",4).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 0 1 L 3 5 L 0 9 z").attr("fill",X.color).attr("fill-opacity",.6).attr("stroke",ut).attr("stroke-opacity",.5).attr("stroke-width",.5)}const K=e(h,h.objects.countries),U=Wf().fitSize([y,_],K),Q=Rf().projection(U),Z=ga(o.country?.code),at=Z?L0(Z):null,pt=l.value.has("imports")?L("imports"):[],J=l.value.has("exports")?L("exports"):[],Pt=[...pt,...J],Rt=new Set(Pt.map(X=>X.partnerGeo));function mt(X,ot=.82){const ut=be(X);if(!ut)return"#e0e8f0";const nt=to(ut);return nt.l=ot,nt.s=Math.min(nt.s,.5),nt.formatHex()}const Ot=new Map;for(const X of Rt){const ot=Pt.filter(ut=>ut.partnerGeo===X);if(ot.length>0){const ut=new Map;for(const yt of ot){const Nt=ut.get(yt.typeCode)||{color:yt.color,share:0};Nt.share+=yt.sharePercent||0,ut.set(yt.typeCode,Nt)}const nt=Array.from(ut.values()).sort((yt,Nt)=>Nt.share-yt.share).slice(0,5),it=nt.reduce((yt,Nt)=>yt+Nt.share,0);let dt=0;const $t=[];for(const yt of nt){const Nt=yt.share/it*100;$t.push({color:mt(yt.color),start:dt,end:dt+Nt}),dt+=Nt}Ot.set(X,$t)}}for(const[X,ot]of Ot){const ut=b.append("linearGradient").attr("id",`partner-fill-${X}`).attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","100%");for(const nt of ot)ut.append("stop").attr("offset",`${nt.start}%`).attr("stop-color",nt.color),ut.append("stop").attr("offset",`${nt.end}%`).attr("stop-color",nt.color)}N.append("g").attr("class","countries").selectAll("path").data(K.features).join("path").attr("d",Q).attr("fill",X=>{const ot=String(X.id).padStart(3,"0"),ut=Rr(ot);return at&&ot===at?"#2c3e50":ut&&Rt.has(ut)?Ot.has(ut)?`url(#partner-fill-${ut})`:"#e0e8f0":"#f0f0f0"}).attr("stroke","#999").attr("stroke-width",.5).on("mouseenter",function(X,ot){const ut=String(ot.id).padStart(3,"0"),nt=Rr(ut),it=ot.properties?.name||Ei[nt]||nt,dt=nt&&Rt.has(nt),$t=at&&ut===at;($t||dt)&&ht(this).attr("stroke","#333").attr("stroke-width",1.5),A(X,it,nt,$t,dt,pt,J)}).on("mouseleave",function(){ht(this).attr("stroke","#999").attr("stroke-width",.5),w()});const kt={},At={};K.features.forEach(X=>{const ot=String(X.id).padStart(3,"0"),ut=Rr(ot);if(ut){const nt=cf(X);if(nt&&!isNaN(nt[0])&&!isNaN(nt[1])){kt[ut]=U(nt);const it=Q.bounds(X),dt=it[1][0]-it[0][0],$t=it[1][1]-it[0][1];At[ut]=Math.min(dt,$t)/2}}});const q={FR:[2.5,46.5],NL:[5.3,52.2],DK:[9.5,56],PT:[-8,39.5],ES:[-3.5,40],US:[-98,39.5],RU:[40,56],NO:[9,62]};for(const[X,ot]of Object.entries(q)){const ut=U(ot);ut&&(kt[X]=ut)}const tt={SG:[103.8,1.35],HK:[114.17,22.32],MO:[113.55,22.2],GI:[-5.35,36.14],MT:[14.5,35.9],LU:[6.13,49.61],AD:[1.52,42.51],MC:[7.42,43.73],SM:[12.46,43.94],VA:[12.45,41.9],LI:[9.55,47.16],BH:[50.55,26.07]};for(const[X,ot]of Object.entries(tt))if(!kt[X]){const ut=U(ot);ut&&(kt[X]=ut)}const st=Z?kt[Z]:null,lt=2.5;let I,W;if(st)I=st[0],W=st[1];else{const X=U([10,50]);I=X[0],W=X[1]}const O=y/2-I*lt,V=_/2-W*lt,et=dn.translate(O,V).scale(lt);if(x.on("dblclick.zoom",null),x.on("dblclick",()=>{x.transition().duration(300).call(C.transform,et),m=et}),m?x.call(C.transform,m):(x.call(C.transform,et),m=et),st&&(pt.length>0||J.length>0)){let X=function(it){const dt=nt.get(it)||0;return nt.set(it,dt+1),dt};const ot=N.append("g").attr("class","trade-flows"),ut=ie().domain([0,100]).range([0,6]).clamp(!0),nt=new Map;if(l.value.has("imports")){const it=At[Z]||10;pt.forEach(dt=>{const $t=kt[dt.partnerGeo];if(!$t)return;const yt=X(dt.partnerGeo);D(ot,$t,st,dt,ut,yt,dt.typeCode,dt.color,it)})}l.value.has("exports")&&J.forEach(it=>{const dt=kt[it.partnerGeo];if(!dt)return;const $t=X(it.partnerGeo),yt=At[it.partnerGeo]||10;D(ot,st,dt,it,ut,$t,it.typeCode,it.color,yt)})}let ct=ht(g).select(".map-tooltip");ct.empty()&&(ct=ht(g).append("div").attr("class","map-tooltip").style("opacity",0).style("position","absolute").style("pointer-events","none"))}function D(h,g,y,_,x,b,N,F,B){const K=y[0]-g[0],U=y[1]-g[1],Q=Math.sqrt(K*K+U*U),Z=K/Q,at=U/Q,pt=-at,J=Z,Rt=b*1,mt=_.direction==="exports"?.5:0,Ot=g[0]+Z*mt+pt*Rt,Xt=g[1]+at*mt+J*Rt,kt=_.direction==="imports"?2:0,At=b*kt,q=7,tt=Math.min(B*.3,5),st=_.direction==="imports"&&Q>q?tt:0,lt=y[0]-Z*st+pt*At,I=y[1]-at*st+J*At,W=Math.min(Q*.05,10),O=(Ot+lt)/2,V=(Xt+I)/2,et=O+pt*W,ct=V+J*W,X=Math.max(.2,x(_.sharePercent||0)),ot=X+.25,ut=`arrow-${N}-${_.direction}`,nt=1.5*X,it=Math.sqrt((lt-Ot)**2+(I-Xt)**2),dt=Math.min(nt,it*.5),$t=(lt-Ot)/it,yt=(I-Xt)/it,Nt=lt-$t*dt,yr=I-yt*dt,xe=`M ${Ot} ${Xt} Q ${et} ${ct} ${Nt} ${yr}`,mr=_.direction==="imports"?"#e53935":"#43a047";h.append("path").attr("d",xe).attr("fill","none").attr("stroke",mr).attr("stroke-width",ot).attr("stroke-opacity",.5).attr("class",`flow-arrow-outline flow-${N} flow-${_.direction}`).style("pointer-events","none"),h.append("path").attr("d",xe).attr("fill","none").attr("stroke",F).attr("stroke-width",X).attr("stroke-opacity",.6).attr("marker-end",`url(#${ut})`).attr("class",`flow-arrow flow-${N} flow-${_.direction}`).on("mouseenter",function(_r){ht(this).attr("stroke-opacity",.85);const Dt=_.direction==="imports"?"imports":"exports",Qt=`
        <strong>${_.partnerName}</strong><br/>
        <span style="color: ${F}">${_.typeName}</span><br/>
        ${H(_.value)}<br/>
        ${_.sharePercent?.toFixed(1)}% of ${_.typeName} ${Dt}
      `;$(_r,Qt)}).on("mouseleave",function(){ht(this).attr("stroke-opacity",.6),w()})}function A(h,g,y,_,x,b,N){const F=d.value;if(!F)return;let B=`<strong>${g}</strong>`;if(_)B+="<br/><em>Selected country</em>";else if(x){const U=b.filter(Z=>Z.partnerGeo===y),Q=N.filter(Z=>Z.partnerGeo===y);U.length>0&&(B+='<br/><span class="tooltip-section">Imports from:</span>',U.forEach(Z=>{const at=s.find(pt=>pt.code===Z.typeCode);B+=`<br/>  <span style="color: ${Z.color}">${at?.label||Z.typeCode}</span>: ${H(Z.value)} (${Z.sharePercent?.toFixed(1)}%)`})),Q.length>0&&(B+='<br/><span class="tooltip-section">Exports to:</span>',Q.forEach(Z=>{const at=s.find(pt=>pt.code===Z.typeCode);B+=`<br/>  <span style="color: ${Z.color}">${at?.label||Z.typeCode}</span>: ${H(Z.value)} (${Z.sharePercent?.toFixed(1)}%)`}))}const K=ht(F).select(".map-tooltip");if(!K.empty()){const U=F.getBoundingClientRect();K.html(B).style("left",`${h.clientX-U.left+10}px`).style("top",`${h.clientY-U.top-10}px`).style("opacity",1)}}function $(h,g){const y=d.value;if(!y)return;const _=ht(y).select(".map-tooltip");if(!_.empty()){const x=y.getBoundingClientRect();_.html(g).style("left",`${h.clientX-x.left+10}px`).style("top",`${h.clientY-x.top-10}px`).style("opacity",1)}}function w(){const h=d.value;if(!h)return;const g=ht(h).select(".map-tooltip");g.empty()||g.style("opacity",0)}return Vt(()=>o.country,()=>{m=null}),Vt(()=>[o.tradeData,o.country,o.year,u.value,l.value,c.value],()=>{zt(()=>E())},{deep:!0}),oe(()=>{E(),f=new ResizeObserver(()=>{E()}),d.value&&f.observe(d.value)}),_e(()=>{f&&f.disconnect()}),(h,g)=>(G(),z("div",F0,[R.value?(G(),z("div",G0,[v("div",Y0,[v("div",B0,[v("div",W0,[g[6]||(g[6]=v("div",{class:"volume-row-label"},null,-1)),(G(),z(ae,null,Ne(s,y=>v("button",{key:y.code,class:Bt(["volume-header-btn",{active:u.value.has(y.code)}]),style:we({"--type-color":y.color,backgroundColor:u.value.has(y.code)?y.color:"transparent",color:u.value.has(y.code)?"#fff":y.color}),onClick:_=>M(y.code)},gt(y.label),15,U0)),64)),v("button",{class:Bt(["volume-row-label","imports-label","direction-toggle",{active:l.value.has("imports")}]),onClick:g[0]||(g[0]=y=>T("imports"))},[v("span",V0,gt(l.value.has("imports")?"":""),1),g[4]||(g[4]=wt(" Imports ",-1))],2),(G(),z(ae,null,Ne(s,y=>v("div",{key:"imp-"+y.code,class:Bt(["volume-cell","imports",{inactive:!u.value.has(y.code)}])},[v("span",X0,gt(H(P("imports",y.code))),1),v("span",K0,gt(y.unit),1)],2)),64)),v("button",{class:Bt(["volume-row-label","exports-label","direction-toggle",{active:l.value.has("exports")}]),onClick:g[1]||(g[1]=y=>T("exports"))},[v("span",q0,gt(l.value.has("exports")?"":""),1),g[5]||(g[5]=wt(" Exports ",-1))],2),(G(),z(ae,null,Ne(s,y=>v("div",{key:"exp-"+y.code,class:Bt(["volume-cell","exports",{inactive:!u.value.has(y.code)}])},[v("span",j0,gt(H(P("exports",y.code))),1),v("span",Z0,gt(y.unit),1)],2)),64))])]),v("div",{ref_key:"mapContainerRef",ref:d,class:"map-svg-container"},null,512),v("div",J0,[v("div",{class:"controls-left"},[v("button",{class:"reset-zoom-btn",onClick:k,title:"Reset zoom"},[...g[7]||(g[7]=[v("span",{class:"material-symbols-outlined"},"zoom_out_map",-1)])]),g[8]||(g[8]=v("span",{class:"map-hint"},"Scroll to zoom, drag to pan, double-click to reset",-1))]),v("div",Q0,[g[9]||(g[9]=v("label",{class:"cutoff-label"},"Min trade %",-1)),Go(v("input",{type:"range","onUpdate:modelValue":g[2]||(g[2]=y=>c.value=y),min:"0",max:"10",step:"1",class:"cutoff-range"},null,512),[[Yo,c.value,void 0,{number:!0}]]),v("span",th,gt(c.value)+"%",1)])])])])):(G(),z("div",z0,[...g[3]||(g[3]=[v("span",{class:"no-data-icon"},"?",-1),v("span",null,"No trade data available for this year",-1)])]))]))}},nh=Tt(eh,[["__scopeId","data-v-29317453"]]),rh={id:"tradingpartner",class:"page-section"},ah={class:"section-container"},ih={key:0,class:"loading"},oh={key:1,class:"error"},sh={key:2,class:"charts-container"},lh={__name:"TradingPartner",setup(t){const e=Jt();return(n,r)=>(G(),z("section",rh,[r[1]||(r[1]=v("div",{class:"chart-header"},[v("h2",null,"The Trading Partners")],-1)),v("div",ah,[j(e).isLoading?(G(),z("div",ih,"Loading energy data...")):j(e).error?(G(),z("div",oh,gt(j(e).error),1)):(G(),z("div",sh,[Ct(nh,{tradeData:j(e).tradeData,country:j(e).selectedCountry,year:j(e).selectedYear},null,8,["tradeData","country","year"])])),r[0]||(r[0]=v("div",{class:"text-container"},[v("p",null,[wt(" Now that we understand how dependent countries are on energy imports, the next step is to examine where this energy originates. "),v("br"),v("br"),wt(" Despite their economic strength, many Western countries consume far more energy than they can produce themselves. "),v("br"),wt(" These energy dependencies arise from the uneven global distribution of resources. "),v("br"),wt(" Most Western countries rely heavily on imports of fossil energy sources such as oil, gas, and coal from a small number of key suppliers, including Russia, the United States, Saudi Arabia, and Australia. "),v("br"),wt(" Norway stands out as an exception, exporting significantly more oil and natural gas than it imports. "),v("br"),v("br"),wt(" In contrast, Germany and Italy import nearly all of their natural gas from a limited set of suppliers  a pattern that can be observed across many Western countries. "),v("br"),wt(" Electricity trade, however, is mainly regional. "),v("br"),wt(" Strong exchange between neighbouring Central European countries is visible, with France playing a key role as one of the most important electricity exporters due to its large nuclear power capacity. ")])],-1))]),r[2]||(r[2]=he('<div class="chart-meta"><div class="meta-section"><span class="meta-label">Source</span><ul class="meta-list"><li> Eurostat <a href="https://ec.europa.eu/eurostat/web/energy/database" target="_blank" rel="noopener">Energy Database</a> (European Commission) </li><li>Tables <code>nrg_ti_*</code> (imports) and <code>nrg_te_*</code> (exports) for sff, oil, gas, bio, eh</li><li>Derived: <code>share_pct</code> = partner value  total  100</li></ul></div><div class="meta-section"><span class="meta-label">Data Hints</span><ul class="meta-list"><li> EU-reported data only; non-EU partner volumes data may be incomplete or reflect only the EU perspective of the trade relationship. </li><li>Regional aggregates (e.g., &quot;Other Asian countries&quot;) excluded from map arrows but included in totals.</li></ul></div></div>',1))]))}},ch={key:0,class:"no-data"},uh={key:1,class:"chart-wrapper"},fh={class:"chart-container"},dh={class:"chart-heading"},hh={class:"formula-stack"},ph={key:0},gh={key:1},yh={__name:"DependencyChart",props:{dependencyData:{type:Object,default:null},year:{type:[String,Number],default:null},countryName:{type:String,default:""}},setup(t){const e=Bo({lowerBrace:{width:170,leftOffset:20,yOffset:0},upperBrace:{width:150,leftOffset:120,yOffset:0},lowerCell:{leftOffset:-50,yOffset:0},upperCell:{leftOffset:20,yOffset:0}}),n=t,r=ft(null),a=ft(null),i=ft(!1),o=ft(null),s=ft(0);let u=null;function l(){s.value=o.value?.offsetWidth??0}const c=rt(()=>({width:`${e.lowerBrace.width}px`,marginLeft:`${s.value+e.lowerBrace.leftOffset}px`,transform:`translateY(${e.lowerBrace.yOffset}px)`})),d=rt(()=>({width:`${e.upperBrace.width}px`,marginLeft:`${s.value+e.upperBrace.leftOffset}px`,transform:`translateY(${e.upperBrace.yOffset}px)`})),f=rt(()=>({marginLeft:`${s.value+e.lowerCell.leftOffset}px`,transform:`translateY(${e.lowerCell.yOffset}px)`})),p=rt(()=>({marginLeft:`${s.value+e.upperCell.leftOffset}px`,transform:`translateY(${e.upperCell.yOffset}px)`}));function m(A,$,w){if(i.value=!0,a.value&&r.value){r.value.getBoundingClientRect();const h=a.value;h.style.left=`${$+120}px`,h.style.top=`${w-10}px`}}function C(){i.value=!1}const k={coal:"Coal",anthracite:"Anthracite",coking_coal:"Coking Coal",other_bituminous:"Other Bituminous",other_bituminous_coal:"Other Bituminous",lignite:"Lignite",sub_bituminous_coal:"Sub-bituminous",gas:"Natural Gas",natural_gas:"Natural Gas",oil:"Oil",crude_oil:"Crude Oil",ngl:"NGL",peat:"Peat",nuclear_fuels:"Nuclear",renewable_fuels:"Renewables",electricity:"Electricity",C0110:"Anthracite",C0121:"Coking Coal",C0129:"Other Bituminous",C0210:"Lignite",C0220:"Sub-bituminous",G3000:"Natural Gas",O4000XBIO:"Oil",O4100_TOT:"Crude Oil",O4200:"NGL",P1100:"Oil Shale",S2000:"Nuclear",CF_R:"Renewables",E7000:"Electricity",SFF_OTH:"Other Solid Fuels"},M=["electricity","E7000","oil","O4000XBIO","crude_oil","O4100_TOT","ngl","O4200","gas","natural_gas","G3000","coal","C0000X0350-0370","anthracite","C0110","coking_coal","C0121","other_bituminous","other_bituminous_coal","C0129","sub_bituminous_coal","C0220","lignite","C0210","peat","P1100"],T=["nuclear_fuels","S2000","renewable_fuels","CF_R","SFF_OTH","other_solid_fossil_fuels"],P=["crude_oil","O4100_TOT","ngl","O4200","anthracite","C0110","coking_coal","C0121","other_bituminous_coal","other_bituminous","C0129","sub_bituminous_coal","C0220","lignite","C0210"],R=["electricity","E7000"],H={electricity:["electricity","E7000"],oil:["oil","O4000XBIO","crude_oil","O4100_TOT","ngl","O4200"],gas:["gas","natural_gas","G3000"],coal:["coal","C0000X0350-0370","anthracite","C0110","coking_coal","C0121","other_bituminous","other_bituminous_coal","C0129","sub_bituminous_coal","C0220","lignite","C0210"],peat:["peat","P1100"]},S=["oil","O4000XBIO","gas","natural_gas","G3000","coal","C0000X0350-0370","peat","P1100"],L=rt(()=>n.dependencyData&&(n.dependencyData.overall!=null||n.dependencyData.by_fuel&&Object.keys(n.dependencyData.by_fuel).length>0)),Y=rt(()=>{if(!n.dependencyData)return[];const A=[];if(A.push({key:"overall",name:"Overall",overall:n.dependencyData.overall,thirdCountries:n.dependencyData.third_countries,isOverall:!0}),n.dependencyData.by_fuel){const h=Object.entries(n.dependencyData.by_fuel);h.sort((g,y)=>{const _=M.indexOf(g[0]),x=M.indexOf(y[0]);return _!==-1&&x!==-1?_-x:_!==-1?-1:x!==-1?1:(k[g[0]]||g[0]).localeCompare(k[y[0]]||y[0])});for(const[g,y]of h)!y||typeof y!="object"||T.includes(g)||A.push({key:g,name:k[g]||E(g),overall:y.overall,thirdCountries:y.third_countries,gaeShare:y.gae_share??null,isOverall:!1,isSubcategory:P.includes(g),isElectricity:R.includes(g),isGroupStarter:S.includes(g)})}const $=["anthracite","coking_coal","other_bituminous_coal","sub_bituminous_coal","lignite"],w=["crude_oil","ngl"];for(const[h,g]of[["coal",$],["oil",w]]){let y=0,_=-1;for(let x=0;x<A.length;x++)g.includes(A[x].key)&&(y+=A[x].gaeShare??0,_=x);_>=0&&y<99.5&&A.splice(_+1,0,{key:`${h}_other`,name:"Other",overall:null,thirdCountries:null,gaeShare:Math.max(0,100-y),isOverall:!1,isSubcategory:!0,isOtherRemainder:!0,isElectricity:!1,isGroupStarter:!1})}return A});function E(A){return A.replace(/_/g," ").replace(/([A-Z])/g," $1").split(" ").map($=>$.charAt(0).toUpperCase()+$.slice(1).toLowerCase()).join(" ").trim()}function D(){if(!r.value||Y.value.length===0)return;ht(r.value).selectAll("*").remove();const $=r.value.clientWidth||600,w=20,h=10,g=4,y=24,_=Math.min($,565),x={top:20,right:110,bottom:10,left:100},b=_-x.left-x.right,N=[];let F=0;Y.value.forEach((I,W)=>{W>0&&(F+=I.isGroupStarter||I.isElectricity?y:g),N.push(F),F+=I.isOtherRemainder?h:w});const B=F,K=I=>I.includes("coal")||I.includes("anthracite")||I.includes("coking")||I.includes("bituminous")||I.includes("lignite")?"coal":"oil",U={};Y.value.forEach(I=>{if(!I.isSubcategory)return;const W=K(I.key);U[W]=(U[W]??0)+(I.gaeShare??0)});const Q=[];Y.value.forEach((I,W)=>{if(I.isSubcategory){const O=K(I.key),V=U[O]??0,et=I.gaeShare??0;Q[W]=V>100?et/V*100:et}else Q[W]=0});const Z=[];let at=0,pt=null;Y.value.forEach((I,W)=>{if(I.isSubcategory){const O=K(I.key);O!==pt&&(at=0,pt=O),Z[W]=at,at+=Math.min(Q[W],100)}else Z[W]=0,pt=null,at=0});const J=ht(r.value).append("svg").attr("width",_).attr("height",B+x.top+x.bottom).append("g").attr("transform",`translate(${x.left},${x.top})`),Pt=Math.max(100,...Y.value.map(I=>I.overall??0)),Rt=Math.ceil(Pt/10)*10,mt=ie().domain([0,Rt]).range([0,b]),Ot={third:{normal:"#c44536",soft:"#d4847a"},eu:{normal:"#e8a87c",soft:"#f0c9b0"},domestic:{normal:"#d9d9d9",soft:"#e8e8e8"},reserve:{normal:"#8b2500",soft:"#b86347"},reserveEu:{normal:"#b86b3a",soft:"#d4a07a"},exporter:{normal:"#4a90d9",soft:"#7ab3e8"}};J.append("defs").append("pattern").attr("id","crosshatch").attr("width",4).attr("height",4).attr("patternUnits","userSpaceOnUse").attr("patternTransform","rotate(45)").append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",4).attr("stroke","#c44536").attr("stroke-width",2),Rt>100&&(J.append("line").attr("x1",mt(100)).attr("x2",mt(100)).attr("y1",0).attr("y2",B).attr("stroke","#666").attr("stroke-width",1).attr("stroke-dasharray","4,2"),J.append("text").attr("x",mt(100)).attr("y",-4).attr("text-anchor","middle").attr("fill","#666").attr("font-size","9px").text("100%"));const kt={},At=[];Y.value.forEach((I,W)=>{let O=null;if(I.isOverall)O="overall";else{for(const[et,ct]of Object.entries(H))if(ct.includes(I.key)){O=et;break}!O&&I.key.endsWith("_other")&&(O=I.key.replace("_other",""))}if(!O)return;const V=I.isOtherRemainder?h:w;kt[O]?(kt[O].minY=Math.min(kt[O].minY,N[W]),kt[O].maxY=Math.max(kt[O].maxY,N[W]+V)):(kt[O]={minY:N[W],maxY:N[W]+V},At.push(O))});const q={x:8,y:5},tt=["rgba(0, 0, 0, 0.06)","rgba(0, 0, 0, 0)"];At.forEach((I,W)=>{const O=kt[I];J.append("rect").attr("class","group-bg").attr("x",-100+q.x).attr("y",O.minY-q.y).attr("width",_-q.x*2).attr("height",O.maxY-O.minY+q.y*2).attr("fill",tt[W%2]).attr("stroke","none")});const st=Math.min(...At.map(I=>kt[I].minY)),lt=Math.max(...At.map(I=>kt[I].maxY));J.append("rect").attr("class","chart-outline").attr("x",-100+q.x).attr("y",st-q.y).attr("width",_-q.x*2).attr("height",lt-st+q.y*2).attr("fill","none").attr("stroke","rgba(0, 0, 0, 0.2)").attr("stroke-width",1).attr("rx",6),Y.value.forEach((I,W)=>{const O=N[W],V=I.isOtherRemainder?h:w,et=I.isSubcategory;if(I.isOtherRemainder){const ot=mt(100),ut=ot*(Math.min(Q[W],100)/100),nt=ot*(Z[W]/100),it=4,dt=O+(V-it)/2;J.append("rect").attr("x",nt).attr("y",dt).attr("width",ut).attr("height",it).attr("fill","#bbb").attr("rx",2);return}if(et&&I.gaeShare!=null&&I.gaeShare<.5){J.append("text").attr("x",4).attr("y",O+V/2).attr("dy","0.35em").attr("text-anchor","start").attr("fill","#888").attr("font-size","9px").attr("font-style","italic").text("not used");return}const ct=ot=>Ot[ot].normal,X=I.isElectricity&&I.overall==null&&I.thirdCountries!=null?I.thirdCountries:I.overall;if(X!=null){const ot=X,ut=ot<0,nt=Math.max(0,ot),it=I.thirdCountries!=null?Math.max(0,I.thirdCountries):null,dt=mt(100),$t=et?Math.min(Q[W],100):100,yt=et?dt*($t/100):null,Nt=et?dt*(Z[W]/100):0;if(ut)et&&yt!=null&&yt>0?(J.append("rect").attr("class","bar-domestic").attr("x",Nt).attr("y",O).attr("width",yt).attr("height",V).attr("fill",ct("domestic")),J.append("rect").attr("class","bar-exporter").attr("x",Nt).attr("y",O).attr("width",yt).attr("height",V).attr("fill",ct("exporter")),J.append("text").attr("x",Nt+yt+4).attr("y",O+V/2).attr("dy","0.35em").attr("text-anchor","start").attr("fill","#7ab3e8").attr("font-size","9px").attr("font-weight","700").text(`${ot.toFixed(0)}%`)):(J.append("rect").attr("class","bar-exporter").attr("x",0).attr("y",O).attr("width",dt).attr("height",V).attr("fill",ct("exporter")),dt>50&&J.append("text").attr("x",dt/2).attr("y",O+V/2).attr("dy","0.35em").attr("text-anchor","middle").attr("fill","#fff").attr("font-size","9px").attr("font-weight","600").text("Net Exporter"),J.append("text").attr("x",dt+4).attr("y",O+V/2).attr("dy","0.35em").attr("text-anchor","start").attr("fill","#3a7bc8").attr("font-size","9px").attr("font-weight","700").text(`${ot.toFixed(0)}%`));else{const yr=nt<100?100-nt:0,xe=nt>100?nt-100:0;if(et&&yt!=null){if(yt>0){if(J.append("rect").attr("class","bar-domestic").attr("x",Nt).attr("y",O).attr("width",yt).attr("height",V).attr("fill",ct("domestic")),nt>0){const Dt=yt*(Math.min(nt,100)/100);J.append("rect").attr("class","bar-import").attr("x",Nt).attr("y",O).attr("width",Dt).attr("height",V).attr("fill",ct("eu"))}if(xe>0){const Dt=yt*(xe/100);J.append("rect").attr("class","bar-reserve").attr("x",Nt+yt).attr("y",O).attr("width",Dt).attr("height",V).attr("fill",ct("reserve")).attr("opacity",.85)}}}else{if(nt>0){const Dt=Math.min(nt,100);J.append("rect").attr("class","bar-import").attr("x",0).attr("y",O).attr("width",mt(Dt)).attr("height",V).attr("fill",ct("eu"))}if(xe>0){const Dt=mt(nt)-mt(100);J.append("rect").attr("class","bar-reserve").attr("x",mt(100)).attr("y",O).attr("width",Dt).attr("height",V).attr("fill",ct("reserve")).attr("opacity",.85)}yr>0&&J.append("rect").attr("class","bar-domestic").attr("x",mt(nt)).attr("y",O).attr("width",mt(100)-mt(nt)).attr("height",V).attr("fill",ct("domestic"))}if(it!=null&&it>0&&!I.isElectricity&&!et){const Dt=Math.min(it,nt),Qt=mt(Dt);Qt>0&&(J.append("rect").attr("x",0).attr("y",O).attr("width",Qt).attr("height",V).attr("fill","url(#crosshatch)").attr("opacity",.4),J.append("line").attr("x1",mt(Dt)).attr("y1",O).attr("x2",mt(Dt)).attr("y2",O+V).attr("stroke","#8b2500").attr("stroke-width",2),Qt>=35&&J.append("text").attr("x",Qt/2).attr("y",O+V/2).attr("dy","0.35em").attr("text-anchor","middle").attr("fill","#8b2500").attr("font-size","7px").attr("font-weight","700").text("non-EU"))}const mr=et&&xe>0?yt*(xe/100):0,vr=et?Nt+yt+mr+4:mt(nt)+4,_r=J.append("text").attr("x",vr).attr("y",O+V/2).attr("dy","0.35em").attr("text-anchor","start").attr("fill",nt>100?et?"#b86347":"#8b2500":"#444").attr("font-size","9px").attr("font-weight",nt>100?"700":"500").text(`${nt.toFixed(0)}%${nt>100?" (reserve draw)":""}`);if(I.isElectricity){const Dt=_r.node().getBBox().width,Qt=vr+Dt+10,xr=J.append("g").attr("class","electricity-warning-group").style("cursor","help");xr.append("circle").attr("cx",Qt).attr("cy",O+V/2).attr("r",6).attr("fill","#c44536"),xr.append("text").attr("x",Qt).attr("y",O+V/2).attr("dy","0.35em").attr("text-anchor","middle").attr("fill","#fff").attr("font-size","9px").attr("font-weight","700").style("pointer-events","none").text("!"),xr.append("circle").attr("cx",Qt).attr("cy",O+V/2).attr("r",10).attr("fill","transparent").on("mouseenter",function(zo){m(zo,Qt,O)}).on("mouseleave",C)}}}else{const ot=mt(100),ut=et?Math.min(Q[W],100):100,nt=et?ot*(ut/100):ot,it=et?ot*(Z[W]/100):0;if(J.append("rect").attr("class","bar-nodata").attr("x",it).attr("y",O).attr("width",nt).attr("height",V).attr("fill",et?"#e4e4e4":"#d9d9d9").attr("rx",3),nt>30&&J.append("text").attr("class","no-data-label").attr("x",it+nt/2).attr("y",O+V/2).attr("dy","0.35em").attr("text-anchor","middle").attr("fill","#777").attr("font-size","10px").text("No data"),I.isElectricity){const dt=mt(100)+14,$t=J.append("g").attr("class","electricity-warning-group").style("cursor","help");$t.append("circle").attr("cx",dt).attr("cy",O+V/2).attr("r",6).attr("fill","#c44536"),$t.append("text").attr("x",dt).attr("y",O+V/2).attr("dy","0.35em").attr("text-anchor","middle").attr("fill","#fff").attr("font-size","9px").attr("font-weight","700").style("pointer-events","none").text("!"),$t.append("circle").attr("cx",dt).attr("cy",O+V/2).attr("r",10).attr("fill","transparent").on("mouseenter",function(yt){m(yt,dt,O)}).on("mouseleave",C)}}}),Y.value.forEach((I,W)=>{const O=I.isSubcategory,V=I.isOtherRemainder?h:w;J.append("text").attr("x",-8).attr("y",N[W]+V/2).attr("dy","0.35em").attr("text-anchor","end").attr("fill",I.isOtherRemainder?"#777":O?"#555":"#222").attr("font-size",I.isOtherRemainder?"9px":"11px").attr("font-style",O||I.isOtherRemainder?"italic":"normal").text(I.name)})}return Vt(()=>[n.dependencyData,n.year],()=>{D()},{deep:!0}),Vt(()=>n.countryName,()=>{zt(l)}),oe(()=>{D(),zt(l),u=new ResizeObserver(()=>{D(),l()}),r.value&&u.observe(r.value)}),_e(()=>{u&&u.disconnect()}),(A,$)=>L.value?(G(),z("div",uh,[v("div",fh,[v("div",dh,[v("div",hh,[v("code",{class:"formula",style:we(p.value)},"Production + Imports  Exports  Stock Changes",4),(G(),z("svg",{class:"curly-brace",style:we(d.value),viewBox:"0 0 100 12",preserveAspectRatio:"none"},[...$[1]||($[1]=[v("path",{d:"M 0,12 Q 0,5 10,5 L 44,5 Q 50,5 50,0 Q 50,5 56,5 L 90,5 Q 100,5 100,12",fill:"none",stroke:"var(--text-color-gray, #666)","stroke-width":"1.5"},null,-1)])],4)),v("code",{class:"formula",style:we(f.value)},"(Imports  Exports) / Gross Available Energy",4),(G(),z("svg",{class:"curly-brace",style:we(c.value),viewBox:"0 0 100 12",preserveAspectRatio:"none"},[...$[2]||($[2]=[v("path",{d:"M 0,12 Q 0,5 10,5 L 44,5 Q 50,5 50,0 Q 50,5 56,5 L 90,5 Q 100,5 100,12",fill:"none",stroke:"var(--text-color-gray, #666)","stroke-width":"1.5"},null,-1)])],4))]),t.countryName?(G(),z("h3",ph,[v("span",{ref_key:"countryNameRef",ref:o},gt(t.countryName),513),$[3]||($[3]=wt("'s ",-1)),$[4]||($[4]=v("span",{class:"highlight-import"},"Import Dependency",-1)),$[5]||($[5]=wt(" as Percentage by Fuel Type (",-1)),$[6]||($[6]=v("a",{class:"heading-link",href:"https://ec.europa.eu/eurostat/statistics-explained/index.php?title=Glossary:Energy_dependency_rate",target:"_blank",rel:"noopener"},"Eurostat methodology",-1)),$[7]||($[7]=wt(") ",-1))])):(G(),z("h3",gh,[...$[8]||($[8]=[v("span",{class:"highlight-import"},"Import Dependency",-1),wt(" by Fuel Type (",-1),v("a",{class:"heading-link",href:"https://ec.europa.eu/eurostat/statistics-explained/index.php?title=Glossary:Energy_dependency_rate",target:"_blank",rel:"noopener"},"Eurostat methodology",-1),wt(")",-1)])]))]),v("div",{ref_key:"chartRef",ref:r,class:"chart-svg"},null,512),v("div",{ref_key:"tooltipRef",ref:a,class:Bt(["electricity-tooltip",{visible:i.value}])},[...$[9]||($[9]=[he("<strong data-v-a07a1fb7>Non-EU imports only.</strong> Eurostat doesn&#39;t calculate overall electricity dependency: <ul data-v-a07a1fb7><li data-v-a07a1fb7><em data-v-a07a1fb7>Origin:</em> Fuel dependency is counted at source (gas plant imports = gas dependency)</li><li data-v-a07a1fb7><em data-v-a07a1fb7>Losses:</em> ~33% of energy lost converting to electricity makes tracking difficult</li><li data-v-a07a1fb7><em data-v-a07a1fb7>Trade:</em> EU is near net-zero; grid constantly rebalances across borders</li><li data-v-a07a1fb7><em data-v-a07a1fb7>Focus:</em> Eurostat measures primary fuels (oil, gas) not transformed energy</li><li data-v-a07a1fb7><em data-v-a07a1fb7>Method:</em> Methodological complexities in how electricity trade interacts with primary fuels used to produce it </li></ul>",3)])],2)])])):(G(),z("div",ch,[...$[0]||($[0]=[v("span",{class:"no-data-icon"},"?",-1),v("span",null,"No dependency data available for this year",-1)])]))}},mh=Tt(yh,[["__scopeId","data-v-a07a1fb7"]]),vh={id:"dependency",class:"page-section"},_h={class:"section-container"},xh={key:0,class:"loading"},wh={key:1,class:"error"},bh={key:2,class:"charts-container"},Ch={__name:"Dependency",setup(t){const e=Jt();return(n,r)=>(G(),z("section",vh,[r[1]||(r[1]=v("div",{class:"chart-header"},[v("h2",null,"Fuel by Fuel: Measuring The Energy Import Dependence")],-1)),v("div",_h,[j(e).isLoading?(G(),z("div",xh,"Loading energy data...")):j(e).error?(G(),z("div",wh,gt(j(e).error),1)):jt("",!0),j(e).dependencyData?(G(),z("div",bh,[Ct(mh,{dependencyData:j(e).dependencyData,year:j(e).selectedYear,countryName:j(e).selectedCountry?.name||""},null,8,["dependencyData","year","countryName"])])):jt("",!0),r[0]||(r[0]=he('<div class="text-container" data-v-d2573c30><p data-v-d2573c30> The stacked bar chart shows how much of a countrys energy supply is produced <span style="color:#81b29a;font-weight:600;" data-v-d2573c30>domestically</span> and how much is <span style="color:#e8a87c;font-weight:600;" data-v-d2573c30>imported</span> from abroad. Import dependency highlights the degree to which national energy systems rely on foreign suppliers and therefore reflects vulnerability to geopolitical risks. </p><p data-v-d2573c30> NonEU neighbours such as Moldova (~68%) and Georgia (~30%) rely heavily on external <strong data-v-d2573c30>electricity</strong> providers, while Western Europe trades mostly within the EU. France is typically a <span style="color:#7b68ee;font-weight:600;" data-v-d2573c30>net exporter</span> thanks to its nuclear fleet. <strong data-v-d2573c30>0il &amp; petroleum</strong> are imported 90%+ (2022) by nearly all European countries. Dependence on <strong data-v-d2573c30>natural gas</strong> increased rapidly during the 2022 crisis, with some countries even <span style="color:#8b2500;font-weight:600;" data-v-d2573c30>drawing their reserves</span> from previous years, such as Germany (106%) and France (109%). </p><p data-v-d2573c30> Countries like Germany imported around half their needs of <strong data-v-d2573c30>Coal</strong>, while Poland and Czechia still rely heavily on domestic hard coal. Nearly all EU countries depend almost entirely on imports for <strong data-v-d2573c30>anthracite</strong> and <strong data-v-d2573c30>coking coal</strong>. <strong data-v-d2573c30>Lignite</strong> remains almost exclusively local due to poor transportability. </p><p data-v-d2573c30> Now that we know how reliant many countries are on imported energy, we can look at who they depend on. Europes fuel mix is shaped by a small set of major trading partners, from Norway for gas to Saudi Arabia and the U.S. for oil with Russias role sharply reduced after 2022. </p></div>',1))]),r[2]||(r[2]=he('<div class="chart-meta" data-v-d2573c30><div class="meta-section" data-v-d2573c30><span class="meta-label" data-v-d2573c30>Source</span><ul class="meta-list" data-v-d2573c30><li data-v-d2573c30> Eurostat <a href="https://ec.europa.eu/eurostat/web/energy/database" target="_blank" rel="noopener" data-v-d2573c30>Energy Database</a> (European Commission) </li><li data-v-d2573c30> Tables <code data-v-d2573c30>nrg_ind_id</code> (ID, overall dependency) and <code data-v-d2573c30>nrg_ind_id3cf</code> (ID3CF, third country dependency) </li><li data-v-d2573c30> Table <code data-v-d2573c30>nrg_bal_c</code> (complete energy balances): Gross Available Energy by SIEC subcategory, used for subcategory bar width proportions </li><li data-v-d2573c30>Fuel breakdown via SIEC codes mapped to display names</li></ul></div><div class="meta-section" data-v-d2573c30><span class="meta-label" data-v-d2573c30>Data Hints</span><ul class="meta-list" data-v-d2573c30><li data-v-d2573c30> Non-EU breakdown (hatched line) only available for main aggregates (Coal, Gas, Oil, Electricity). Subcategory bar widths are proportional to their share of the parent category&#39;s Gross Available Energy (GAE). </li><li data-v-d2573c30>Non-EU (third country) import dependency data is only available from 2010 to 2023.</li><li data-v-d2573c30>Electricity: Eurostat does not calculate overall import dependency; showing non-EU imports only.</li></ul></div></div>',1))]))}},kh=Tt(Ch,[["__scopeId","data-v-d2573c30"]]),Mh={name:"ItemsSlider",data(){return{scrollX:0,scrollEnd:!1,slidewith:100}},mounted(){this.$nextTick(()=>{const t=document.getElementById("slider-container");if(t){const e=t.clientWidth,n=document.documentElement.clientWidth<600?1:2;this.slidewith=e/n+(document.documentElement.clientWidth<600?10:0)}})},methods:{slide(t){this.$refs.scrl.scrollBy({left:t,behavior:"smooth"}),this.$refs.scrl.scrollLeft+=t,this.scrollX+=t,Math.floor(this.$refs.scrl.scrollWidth-this.$refs.scrl.scrollLeft)<=this.$refs.scrl.offsetWidth?this.scrollEnd=!0:this.scrollEnd=!1},scrollCheck(){this.scrollX=this.$refs.scrl.scrollLeft,Math.floor(this.$refs.scrl.scrollWidth-this.$refs.scrl.scrollLeft)<=this.$refs.scrl.offsetWidth?this.scrollEnd=!0:this.scrollEnd=!1}},props:{title:String}},Sh={class:"item-slider-container"},$h={class:"item-slider"};function Eh(t,e,n,r,a,i){return G(),z("div",Sh,[v("div",$h,[v("div",{onClick:e[0]||(e[0]=o=>i.slide(-a.slidewith)),class:Bt([{"is-disabled-hide":a.scrollX<1},"left-arrow-left"])},[...e[3]||(e[3]=[v("span",{class:"timeline-icon material-symbols-outlined"},"chevron_left",-1)])],2),v("div",{id:"slider-container",ref:"scrl",onScroll:e[1]||(e[1]=(...o)=>i.scrollCheck&&i.scrollCheck(...o)),class:"item-container"},[Wo(t.$slots,"default",{},void 0)],544),v("div",{onClick:e[2]||(e[2]=o=>i.slide(a.slidewith)),class:Bt([{"is-disabled-hide":a.scrollEnd},"right-arrow-right"])},[...e[4]||(e[4]=[v("span",{class:"timeline-icon material-symbols-outlined"},"chevron_right",-1)])],2)])])}const Th=Tt(Mh,[["render",Eh],["__scopeId","data-v-30c13bbe"]]),Ah="data:image/svg+xml,%3csvg%20width='4408'%20height='1516'%20viewBox='0%200%204408%201516'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M4345.75%201289.5C4318.88%201266.74%204285.87%201256.39%204263.37%201226.27C4215.24%201161.87%204240.84%201054.7%204245.2%20963.611C4254.04%20779.158%204143.98%20598.469%204007.7%20573.693C3976.53%20568.026%203944.11%20569.383%203914.77%20554.151C3832.84%20511.617%203814.46%20370.555%203767.31%20270.965C3708.15%20145.992%203590.36%2081.0607%203481.06%20100.083C3371.76%20119.106%203273.88%20215.253%203217.19%20342.28L3215.54%20346.616C3141.46%20442.432%203018.53%20461.059%202930.44%20389.818C2844.63%20320.423%202799.7%20185.661%202720.28%20103.687C2643.06%2024.0011%202538.86%202.11167%202442.71%2022.5201C2346.55%2042.9262%202257.17%20101.884%202174.39%20170.723C2136.22%20202.463%202098.86%20236.616%202057.69%20260.664C1924.73%20338.345%201757.48%20293.507%201656.86%20153.213C1632.87%20119.755%201612.3%2081.416%201584.83%2053.1893C1514.79%20-18.7896%201414.51%20-9.71456%201332.3%2033.1184C1250.09%2075.9514%201177.88%20147.586%201097.41%20196.006C1016.93%20244.425%20919.93%20267.45%20842.534%20210.685C793.435%20174.676%20757.04%20109.945%20704.609%2083.7586C645.759%2054.3683%20575.757%2082.7327%20532.484%20143.867C489.211%20205.003%20471.348%20293.793%20476.988%20377.832C480.953%20436.91%20495.584%20494.349%20496.491%20553.653C498.371%20676.623%20433.823%20796.067%20346.234%20831.692C271.321%20862.164%20186.681%20835.987%20115.242%20878.962C30.6368%20929.857%20-10.2127%201069.12%202.17795%201192.58C14.5686%201316.05%2069.8738%201424.47%20133.479%201515.1H4393.5C4424.46%201434.74%204402.72%201337.73%204345.75%201289.5Z'%20fill='%23D9CEC4'/%3e%3cpath%20d='M2938.07%20743.111C2947.65%20743.111%202956.6%20745.725%202964.32%20750.215C2971.32%20729.89%202990.56%20715.263%203013.26%20715.263C3016.97%20715.263%203020.59%20715.669%203024.07%20716.411C3033.02%20680.562%203065.42%20654%203104.04%20654C3142.34%20654%203174.52%20680.118%203183.78%20715.512C3185.41%20715.396%203187.04%20715.263%203188.7%20715.263C3201.29%20715.263%203213.05%20718.687%203223.22%20724.574C3232.7%20718.707%203243.84%20715.263%203255.81%20715.263C3290.1%20715.263%203317.9%20743.064%203317.9%20777.361H3257.4H3193.71H3175.57H3132.01H3119.98H3108.68H3064.02H3032.51H2987.14H2985.78H2962.49H2889C2896.38%20757.385%202915.54%20743.111%202938.07%20743.111Z'%20fill='%23FCF1E6'/%3e%3cpath%20d='M805.303%20601.706C817.853%20601.706%20829.576%20605.697%20839.695%20612.552C848.864%20581.52%20858.665%20552.678%20888.411%20552.678C893.273%20552.678%20909.905%20506.661%20947.249%20527.273C966.248%20534.144%20953.8%20496.737%20983.376%20466.2C1015.39%20438.717%201061.9%20453.986%201071.73%20513.532C1073.86%20513.356%201136.03%20488.339%201153.75%20520.615C1167.51%20538.937%201165.61%20564.415%201178.93%20573.403C1191.36%20564.446%201205.95%20559.187%201221.63%20559.187C1266.57%20559.187%201303%20601.635%201303%20654H1223.72H1140.26H1116.5H1059.42H1043.66H1028.86H970.335H929.042H869.6H867.811H837.301H741C750.669%20623.5%20775.77%20601.706%20805.303%20601.706Z'%20fill='%23FCF1E6'/%3e%3cpath%20d='M2251.37%20584.529H2187.31H2167.01H2165.82H2126.28H2098.8H2059.87H2050.02H2039.54H2001.56H1985.76H1930.23H1877.49C1877.49%20554.634%201901.73%20530.396%201931.63%20530.396C1938.09%20530.396%201944.26%20531.589%201950.01%20533.665C1960.66%20524.114%201974.69%20518.259%201990.13%20518.259C1997.35%20518.259%202004.24%20519.598%202010.66%20521.929C2017.63%20513.769%202027.97%20508.579%202039.54%20508.579C2047.7%20508.579%202055.24%20511.175%202061.43%20515.554C2072.81%20499.015%202091.85%20488.157%202113.44%20488.157C2143.69%20488.157%202168.93%20509.441%202175.09%20537.84C2183.43%20528.804%202195.33%20523.111%202208.6%20523.111C2233.8%20523.111%202254.24%20543.542%202254.24%20568.748C2254.23%20574.306%202253.19%20579.606%202251.37%20584.529Z'%20fill='%23FCF1E6'/%3e%3c/svg%3e",Nh="/MyEnergyProfile/assets/consumption_industry-C8RP9hDo.svg",Rh="/MyEnergyProfile/assets/consumption_residential-C9jPUtXp.svg",Ph="/MyEnergyProfile/assets/consumption_service-D0ioY7Vx.svg",Oh="/MyEnergyProfile/assets/consumption_transport-qyh_MufO.svg",Ih="/MyEnergyProfile/assets/fuel-anthracite-CEzPBKao.jpg",Dh="/MyEnergyProfile/assets/fuel-bituminous-BUdOayH8.jpg",Hh="/MyEnergyProfile/assets/fuel-coal-hdVqVBl5.jpg",Lh="/MyEnergyProfile/assets/fuel-coking-coal-D-ug1G7g.jpg",Fh="/MyEnergyProfile/assets/fuel-crude-oil-CpW_4MG2.webp",zh="/MyEnergyProfile/assets/fuel-electricity-CpJpkjVy.jpg",Gh="/MyEnergyProfile/assets/fuel-gas-DV2Ks9vZ.jpg",Yh="/MyEnergyProfile/assets/fuel-lignite-snSupppp.jpg",Bh="/MyEnergyProfile/assets/fuel-ngl-BDCsLaWK.webp",Wh="/MyEnergyProfile/assets/fuel-oil-Dzatq_PN.jpg",Uh="/MyEnergyProfile/assets/fuel-peat-98ECtOul.jpg",Vh="/MyEnergyProfile/assets/fuel-sub-bituminous-C-JRgDMV.jpg",Xh="/MyEnergyProfile/assets/logo-ksmtjNEn.png",Kh={class:"card"},qh=["src"],jh={class:"content"},Zh={__name:"Card",props:{title:String,imgSrc:String,content:String},setup(t){const e=r=>new URL(Object.assign({"../assets/img/consumption_background.svg":Ah,"../assets/img/consumption_industry.svg":Nh,"../assets/img/consumption_residential.svg":Rh,"../assets/img/consumption_service.svg":Ph,"../assets/img/consumption_transport.svg":Oh,"../assets/img/fuel-anthracite.jpg":Ih,"../assets/img/fuel-bituminous.jpg":Dh,"../assets/img/fuel-coal.jpg":Hh,"../assets/img/fuel-coking-coal.jpg":Lh,"../assets/img/fuel-crude-oil.webp":Fh,"../assets/img/fuel-electricity.jpg":zh,"../assets/img/fuel-gas.jpg":Gh,"../assets/img/fuel-lignite.jpg":Yh,"../assets/img/fuel-ngl.webp":Bh,"../assets/img/fuel-oil.jpg":Wh,"../assets/img/fuel-peat.jpg":Uh,"../assets/img/fuel-sub-bituminous.jpg":Vh,"../assets/img/logo.png":Xh})[`../assets/img/${r}`],import.meta.url).href,n=t;return oe(()=>{const r=document.getElementById("slider-container");r&&new ResizeObserver(i=>{const o=i[0].contentRect.width,s=10,u=document.documentElement.clientWidth<600?1:2,l=o/u-(document.documentElement.clientWidth<600?0:s);document.documentElement.style.setProperty("--item-width",`${l}px`)}).observe(r)}),(r,a)=>(G(),z("div",Kh,[n.imgSrc?(G(),z("img",{key:0,src:e(n.imgSrc),alt:"Card image"},null,8,qh)):jt("",!0),v("div",jh,[v("h4",null,gt(n.title),1),v("p",null,gt(n.content),1)])]))}},Jh=Tt(Zh,[["__scopeId","data-v-9cb0c764"]]),Qh={id:"fueltypes",class:"page-section"},tp={__name:"FuelTypes",setup(t){Jt();const e=[{title:"Electricity",imgSrc:"fuel-electricity.jpg",content:"A comon miss conception is to think of energy as just electricity. While it is the most versatile energy carrier for lighting, appliances, industry, and increasingly transport it's just a part of what is consumed at scale and often product from other fossil sources."},{title:"Oil & Petroleum",imgSrc:"fuel-gas.jpg",content:"The worlds largest primary energy source, essential for transport and petrochemicals. Thanks to its high energy density (~45MJ/kg), it remains the backbone of global mobility and industrial feedstocks."},{title:"Oil & Petroleum - Crude Oil",imgSrc:"fuel-crude-oil.webp",content:"Crude oil is sent to refineries where its separated into gasoline, diesel, jet fuel, and other products. Its properties vary widely, classified by sulfur content (sweet vs. sour) and density (light vs. heavy), which determine how easily it can be processed."},{title:"Oil & Petroleum - NGL",imgSrc:"fuel-ngl.webp",content:"Propane, butane, and ethane are natural gas liquids that are separated during natural gas processing before the gas is sent to pipelines. They serve as fuels, petrochemical feedstocks, and heating sources."},{title:"Natural Gas",imgSrc:"fuel-gas.jpg",content:"Primarily methane (CH), it burns about 50% cleaner than coal, making it a lowercarbon fossil fuel option. Its essential for heating, electricity generation, and fertilizer production, and is transported longdistance through pipelines or as liquefied natural gas (LNG) via tankers."},{title:"Coal",imgSrc:"fuel-coal.jpg",content:"The most carbonintensive fossil fuel, ranked by geological maturity from lignite  subbituminous  bituminous  anthracite. Despite declining use, it still plays a key role in power generation and steelmaking, but is being phased out across much of Europe under climate commitments."},{title:"Coal - Anthracite",imgSrc:"fuel-anthracite.jpg",content:"The highestgrade coal, about 8697% carbon with an energy content of 3035MJ/kg. It burns hot, clean, and smokeless, but is geologically rare compared to other coal types."},{title:"Coal - Coking Coal",imgSrc:"fuel-coking-coal.jpg",content:"A specialized grade of coal essential for blastfurnace steel production, where it is converted into metallurgical coke (the highcarbon, highstrength fuel needed to melt iron ore and support the furnace structure)."},{title:"Coal - Other Bituminous",imgSrc:"fuel-bituminous.jpg",content:"A midgrade coal used mainly in power generation, typically containing 4586% carbon with an energy content of 2435MJ/kg."},{title:"Coal - Sub-bituminous",imgSrc:"fuel-sub-bituminous.jpg",content:"A midrank coal between lignite and bituminous, typically containing 3545% carbon and delivering 1723MJ/kg. It is used mainly for power generation due to its moderate energy content and wide availability."},{title:"Coal - Lignite",imgSrc:"fuel-lignite.jpg",content:"Also known as brown coal, it contains 2535% carbon and can hold up to ~75% moisture, giving it very low energy density. Because it tends to crumble when dried and is hard to transport efficiently, lignite is rarely traded internationally and is mostly used near the mine mouth for power generation."},{title:"Peat",imgSrc:"fuel-peat.jpg",content:"Partially decomposed plant matter from bogs; a precoal fuel with very low energy density (812MJ/kg). Historically used for heating in northern Europe, but almost always sourced locally due to poor transportability."}];return(n,r)=>(G(),z("section",Qh,[r[0]||(r[0]=v("div",{class:"chart-header"},[v("h2",null,"Energy as a Resource: Understanding the Sources")],-1)),Ct(Th,{title:"Types of Fuel"},{default:Oi(()=>[(G(),z(ae,null,Ne(e,(a,i)=>v("div",{key:i},[Ct(Jh,{title:a.title,content:a.content,imgSrc:a.imgSrc},null,8,["title","content","imgSrc"])])),64))]),_:1})]))}},ep=Tt(tp,[["__scopeId","data-v-23b11aac"]]),np={class:"small-multiples-chart"},rp={key:0,class:"no-data"},ap={key:1,class:"chart-content"},ip={__name:"SmallMultiplesChart",props:{productionConsumptionData:{type:Object,default:null},countryYears:{type:Object,default:null},selectedYear:{type:Number,default:null},countryName:{type:String,default:""}},setup(t){const e=t,n=ft(null);let r=null;const a=[{code:"SFF",label:"Coal",color:"#8b4513"},{code:"OIL",label:"Oil",color:"#1a1a1a"},{code:"GAS",label:"Gas",color:"#2980b9"},{code:"BIO",label:"Biofuels",color:"#27ae60"},{code:"EH",label:"Electricity",color:"#f1c40f"}],i=rt(()=>e.countryYears&&Object.keys(e.countryYears).length>0),o=rt(()=>{if(!e.countryYears)return{years:[],series:{}};const l=Object.keys(e.countryYears).map(Number).filter(d=>!isNaN(d)).sort((d,f)=>d-f),c={};for(const d of a){const f=[],p=[];for(const m of l){const C=e.countryYears[m];f.push({year:m,value:C?.production?.[d.code]??null}),p.push({year:m,value:C?.consumption?.[d.code]??null})}c[d.code]={production:f,consumption:p}}return{years:l,series:c}});function s(l){return l>=1e3?`${(l/1e3).toFixed(1)}k`:l>=10?l.toFixed(0):l>=1?l.toFixed(1):l.toFixed(2)}function u(){if(!n.value||!i.value)return;ht(n.value).selectAll("*").remove();const{years:l,series:c}=o.value;if(l.length===0)return;const d=n.value,f=d.clientWidth||700,p=f<600?2:a.length,m=Math.ceil(a.length/p),C=2,k=["Production","Consumption"],M=["production","consumption"];let T=1/0,P=-1/0;for(const _ of a)for(const x of M){const b=c[_.code][x].filter(N=>N.value!=null);b.length>0&&(T=Math.min(T,b[0].year),P=Math.max(P,b[b.length-1].year))}isFinite(T)||(T=l[0],P=l[l.length-1]);const R=[T,P],H={top:18,right:10,bottom:30,left:46},S=20,L=4,Y=8,E=Math.max(100,(f-S-L*(p-1))/p),D=E*.85,A=E-H.left-H.right,$=D-H.top-H.bottom,w=16,h=S+p*E+(p-1)*L,g=m*(C*D+(C-1)*Y)+(m-1)*w,y=ht(d).append("svg").attr("width",h).attr("height",g);for(let _=0;_<m;_++){const x=_*(C*D+(C-1)*Y+w);for(let b=0;b<C;b++){const N=M[b],F=x+b*(D+Y);_===0&&y.append("text").attr("transform",`translate(12, ${F+D/2}) rotate(-90)`).attr("text-anchor","middle").attr("fill","#222").attr("font-size","12px").attr("font-weight","700").text(k[b]);for(let B=0;B<p&&_*p+B<a.length;B++){const K=_*p+B,U=a[K],Q=S+B*(E+L),Z=c[U.code][N],at=Z.filter(I=>I.value!=null),pt=U.code==="BIO"&&N==="production",J=y.append("g").attr("transform",`translate(${Q+H.left}, ${F+H.top})`);J.append("line").attr("x1",0).attr("x2",A).attr("y1",0).attr("y2",0).attr("stroke","#222").attr("stroke-width",1),J.append("line").attr("x1",A).attr("x2",A).attr("y1",0).attr("y2",$).attr("stroke","#222").attr("stroke-width",1),b===0&&y.append("text").attr("x",Q+E/2).attr("y",F+14).attr("text-anchor","middle").attr("fill",U.color).attr("font-size","12px").attr("font-weight","700").text(U.label);const Pt=ie().domain(R).range([0,A]),Rt=hn(at,I=>I.value)||1,mt=ie().domain([0,Rt*1.1]).range([$,0]),Ot=$<100?2:3,Xt=Fi(mt).ticks(Ot).tickSize(-A).tickFormat(I=>s(I)),kt=J.append("g").call(Xt);kt.selectAll(".domain").remove(),J.append("line").attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",$).attr("stroke","#222").attr("stroke-width",1),kt.selectAll(".tick line").remove(),kt.selectAll(".tick text").attr("fill","#222").attr("font-size","9px");const At=kt.selectAll(".tick text");if(!At.empty()){const I=At.nodes()[At.size()-1],W=ht(I).text();ht(I).text(W+" TWh")}const q=A<75?3:4,tt=Li(Pt).ticks(q).tickFormat(gr("d")),st=J.append("g").attr("transform",`translate(0, ${$})`).call(tt);if(st.selectAll(".domain").attr("stroke","#222"),st.selectAll(".tick line").remove(),st.selectAll(".tick text").attr("fill","#222").attr("font-size","9px"),pt||at.length===0){J.append("text").attr("x",A/2).attr("y",$/2).attr("text-anchor","middle").attr("fill","#bbb").attr("font-size","10px").attr("font-style","italic").text(pt?"No production data":"No data");continue}const lt=Ee().defined(I=>I.value!=null).x(I=>Pt(I.year)).y(I=>mt(I.value));if(J.append("path").datum(Z).attr("d",lt).attr("fill","none").attr("stroke",U.color).attr("stroke-width",1.5),J.selectAll(".dot").data(at).join("circle").attr("cx",I=>Pt(I.year)).attr("cy",I=>mt(I.value)).attr("r",at.length>40?1:at.length>20?1.5:2.5).attr("fill",U.color),e.selectedYear!=null){const I=Z.find(W=>W.year===e.selectedYear&&W.value!=null);I&&J.append("circle").attr("cx",Pt(I.year)).attr("cy",mt(I.value)).attr("r",4).attr("fill","none").attr("stroke","#e74c3c").attr("stroke-width",1.5)}}}}}return Vt(()=>[e.countryYears,e.selectedYear,e.countryName],()=>zt(()=>u()),{deep:!0}),oe(()=>{u(),r=new ResizeObserver(()=>u()),n.value&&r.observe(n.value)}),_e(()=>{r&&r.disconnect()}),(l,c)=>(G(),z("div",np,[i.value?(G(),z("div",ap,[v("div",{ref_key:"chartRef",ref:n,class:"chart-grid"},null,512),c[0]||(c[0]=he('<div class="chart-meta" data-v-5b940d18><div class="meta-section" data-v-5b940d18><span class="meta-label" data-v-5b940d18>Source</span><ul class="meta-list" data-v-5b940d18><li data-v-5b940d18><a href="https://github.com/owid/energy-data" target="_blank" rel="noopener" data-v-5b940d18>Our World in Data Energy Dataset</a>  <code data-v-5b940d18>*_production</code>, <code data-v-5b940d18>*_consumption</code> fields (TWh) </li><li data-v-5b940d18> Underlying data compiled by the <a href="https://www.energyinst.org/statistical-review" target="_blank" rel="noopener" data-v-5b940d18>Energy Institute</a> Statistical Review of World Energy </li></ul></div><div class="meta-section" data-v-5b940d18><span class="meta-label" data-v-5b940d18>Data Hints</span><ul class="meta-list" data-v-5b940d18><li data-v-5b940d18> Y-axis scales differ between production and consumption rows. This is necessary because production and consumption volumes can differ by orders of magnitude for most countries. </li></ul></div></div>',1))])):(G(),z("div",rp,"No production/consumption data available"))]))}},op=Tt(ip,[["__scopeId","data-v-5b940d18"]]),sp={id:"productionconsumption",class:"page-section"},lp={key:0,class:"loading"},cp={key:1,class:"error"},up={key:2},fp={__name:"ProductionConsumption",setup(t){const e=Jt();return(n,r)=>(G(),z("section",sp,[r[0]||(r[0]=v("div",{class:"chart-header"},[v("h2",null,"Production & Consumption of the Main Energy Sources Over Time")],-1)),v("div",null,[j(e).isLoading?(G(),z("div",lp,"Loading energy data...")):j(e).error?(G(),z("div",cp,gt(j(e).error),1)):(G(),z("div",up,[Ct(op,{productionConsumptionData:j(e).productionConsumptionData,countryYears:j(e).selectedCountry?.years,selectedYear:j(e).selectedYear,countryName:j(e).selectedCountry?.name||""},null,8,["productionConsumptionData","countryYears","selectedYear","countryName"])]))])]))}},dp=Tt(fp,[["__scopeId","data-v-1dda3e67"]]),hp={key:0,class:"no-data"},pp={key:1,class:"chart-wrapper"},gp={class:"chart-container scroll-container"},yp={class:"chart-scroll-outer"},mp={__name:"EmissionsPerCapitaRanking",props:{rankingData:{type:Array,default:()=>[]},selectedCountryCode:{type:String,default:""}},setup(t){const e=Jt(),n=t,r=ft(null),a=ft(null);let i=null;const o=rt(()=>n.rankingData&&n.rankingData.length>0);function s(){if(!r.value||!o.value)return;ht(r.value).selectAll("*").remove();const l=n.rankingData,c=r.value.clientWidth||500,d={top:10,right:120,bottom:5,left:175},f=26,p=42,m=3;let C=0;l.forEach(E=>{C+=(E.code===n.selectedCountryCode?p:f)+m});const k=d.top+d.bottom+C,M=c,T=M-d.left-d.right,R=ht(r.value).append("svg").attr("width",M).attr("height",k).append("g").attr("transform",`translate(${d.left}, ${d.top})`),H=hn(l,E=>E.value)||1,S=ie().domain([0,H*1.05]).range([0,T]),L=ie().domain([0,3,6,H]).range(["#27ae60","#8fce00","#f39c12","#e74c3c"]).clamp(!0);let Y=0;l.forEach(E=>{const D=E.code===n.selectedCountryCode,A=D?p:f,$=Y,w=R.append("g").attr("class","bar-row").style("cursor",D?"default":"pointer").on("click",()=>{D||e.setSelectedCountry(E.code)});w.append("rect").attr("x",-175).attr("y",$).attr("width",M).attr("height",A).attr("fill","transparent");const h=w.append("rect").attr("x",0).attr("y",$).attr("width",S(E.value)).attr("height",A).attr("fill",L(E.value)).attr("fill-opacity",D?1:.65).attr("stroke",D?"#222":"none").attr("stroke-width",D?2.5:0).attr("rx",3);D||w.on("mouseenter",()=>{h.attr("fill-opacity",.9)}).on("mouseleave",()=>{h.attr("fill-opacity",.65)}),D&&R.append("rect").attr("x",-4).attr("y",$-4).attr("width",S(E.value)+8).attr("height",A+8).attr("fill","none").attr("stroke",L(E.value)).attr("stroke-width",2.5).attr("stroke-opacity",.35).attr("rx",6),w.append("text").attr("x",-8).attr("y",$+A/2).attr("text-anchor","end").attr("dominant-baseline","central").attr("font-size",D?"15px":"10px").attr("font-weight",D?"900":"400").attr("fill",D?"#000":"#666").text(E.name),w.append("text").attr("x",S(E.value)+8).attr("y",$+A/2).attr("dominant-baseline","central").attr("font-size",D?"17px":"10px").attr("font-weight",D?"900":"400").attr("fill",D?"#000":"#666").text(D?`${E.value.toFixed(1)} tCO/cap`:`${E.value.toFixed(1)}`),Y+=A+m}),u(l,d.top,f,p,m)}function u(l,c,d,f,p){if(!a.value)return;const m=l.findIndex(T=>T.code===n.selectedCountryCode);if(m===-1)return;let C=c;for(let T=0;T<m;T++)C+=(l[T].code===n.selectedCountryCode?f:d)+p;const k=a.value.clientHeight,M=C-k*.35;a.value.scrollTop=Math.max(0,M)}return Vt(()=>[n.rankingData,n.selectedCountryCode],()=>{s()},{deep:!0}),oe(()=>{s(),i=new ResizeObserver(()=>{s()}),r.value&&i.observe(r.value)}),_e(()=>{i&&i.disconnect()}),(l,c)=>o.value?(G(),z("div",pp,[c[1]||(c[1]=v("h3",null,"CO2 Emissions - Europe Comparison",-1)),c[2]||(c[2]=v("p",null," No project about energy can be considered complete without a section dedicated to the ecological aspects of energy use. We will focus on the most fundamental one: carbon emissions. First wee look at the total CO2 emissions per person from energy use across all sectors (measured in tonnes per year). ",-1)),v("div",gp,[v("div",yp,[v("div",{ref_key:"scrollContainer",ref:a,class:"chart-scroll"},[v("div",{ref_key:"chartRef",ref:r,class:"chart-svg"},null,512)],512)])])])):(G(),z("div",hp,[...c[0]||(c[0]=[v("span",{class:"material-symbols-outlined"},"bar_chart_off",-1),v("p",null,"No emissions per capita ranking data available.",-1)])]))}},vp=Tt(mp,[["__scopeId","data-v-568b2464"]]),_p={key:0,class:"no-data"},xp={key:1,class:"chart-wrapper"},wp={class:"chart-container"},bp={__name:"EmissionsCloudPie",props:{emissionsData:{type:Object,default:null},countryName:{type:String,default:""}},setup(t){const e=t,n=ft(null);let r=null;const a=rt(()=>{if(!e.emissionsData)return!1;const s=e.emissionsData;return s.residential!=null||s.services!=null||s.transport!=null||s.industry!=null}),i=[{key:"residential",label:"Residential",color:"#63b3df"},{key:"transport",label:"Transport",color:"#ffb56b"},{key:"industry",label:"Industry",color:"#898989"},{key:"services",label:"Services",color:"#76d76b"}];function o(){if(!n.value||!a.value)return;ht(n.value).selectAll("*").remove();const s=n.value.clientWidth||460,u=Math.min(s,460),l=450,c=u/2,d=180,f=ht(n.value).append("svg").attr("width",u).attr("height",l).attr("viewBox",`0 0 ${u} ${l}`),p=e.emissionsData,m=i.filter(b=>p[b.key]!=null&&p[b.key]>0);if(m.length===0)return;const C=m.reduce((b,N)=>b+p[N.key],0),k=95,M=k*.38,T=f.append("defs");T.append("filter").attr("id","cloud-soft").attr("x","-30%").attr("y","-30%").attr("width","160%").attr("height","160%").append("feGaussianBlur").attr("in","SourceGraphic").attr("stdDeviation","6"),T.append("filter").attr("id","smoke-soft").attr("x","-50%").attr("y","-50%").attr("width","200%").attr("height","200%").append("feGaussianBlur").attr("in","SourceGraphic").attr("stdDeviation","4");const H=f.append("g").attr("filter","url(#cloud-soft)");[{x:0,y:0,r:k+40},{x:-70,y:12,r:58},{x:70,y:12,r:58},{x:-45,y:-42,r:52},{x:45,y:-42,r:52},{x:0,y:-58,r:46},{x:-90,y:-2,r:40},{x:90,y:-2,r:40},{x:-30,y:52,r:44},{x:30,y:52,r:44},{x:0,y:60,r:38},{x:-60,y:45,r:32},{x:60,y:45,r:32}].forEach(b=>{H.append("circle").attr("cx",c+b.x).attr("cy",d+b.y).attr("r",b.r).attr("fill","#90a4ae").attr("fill-opacity",.1)}),f.append("text").attr("x",c).attr("y",d-k-28).attr("text-anchor","middle").attr("font-size","15px").attr("font-weight","700").attr("letter-spacing","2px").attr("fill","#78909c").attr("fill-opacity",.45).text("CO");const L=395,Y=f.append("g").attr("filter","url(#smoke-soft)"),E=c-80;for(let b=0;b<8;b++){const N=b/7,F=L-50-N*(L-50-(d+k+15)),B=Math.sin(N*Math.PI*1.5)*18,K=E+N*50+B,U=6+N*22;Y.append("circle").attr("cx",K).attr("cy",F).attr("r",U).attr("fill","#90a4ae").attr("fill-opacity",.04+N*.05)}const D=c+80;for(let b=0;b<8;b++){const N=b/7,F=L-65-N*(L-65-(d+k+15)),B=Math.sin(N*Math.PI*1.5+1)*15,K=D-N*50+B,U=5+N*20;Y.append("circle").attr("cx",K).attr("cy",F).attr("r",U).attr("fill","#90a4ae").attr("fill-opacity",.04+N*.05)}const A=m.map(b=>({...b,value:p[b.key]})),w=Ho().value(b=>b.value).padAngle(.03).sort(null)(A),h=fn().innerRadius(M).outerRadius(k),g=fn().innerRadius(k+32).outerRadius(k+32);w.forEach(b=>{const N=b.data;f.append("path").attr("d",h(b)).attr("transform",`translate(${c}, ${d})`).attr("fill",N.color).attr("stroke",N.color).attr("stroke-width",1.5);const F=g.centroid(b),B=c+F[0],K=d+F[1],Q=(b.startAngle+b.endAngle)/2<Math.PI?"start":"end";f.append("text").attr("x",B).attr("y",K-7).attr("text-anchor",Q).attr("font-size","12px").attr("font-weight","600").attr("fill",N.color).text(N.label),f.append("text").attr("x",B).attr("y",K+8).attr("text-anchor",Q).attr("font-size","11px").attr("fill","#666").text(`${N.value.toFixed(2)} tCO/cap`)}),f.append("text").attr("x",c).attr("y",d-6).attr("text-anchor","middle").attr("font-size","20px").attr("font-weight","700").attr("fill","#333").text(`${C.toFixed(1)}`),f.append("text").attr("x",c).attr("y",d+14).attr("text-anchor","middle").attr("font-size","11px").attr("font-weight","500").attr("fill","#666").text("tCO/cap"),f.append("line").attr("x1",30).attr("y1",L).attr("x2",u-30).attr("y2",L).attr("stroke","#b0bec5").attr("stroke-width",1).attr("stroke-opacity",.4).attr("stroke-dasharray","6,4");const y=f.append("g").attr("transform",`translate(${c-115}, ${L})`);y.append("path").attr("d","M3,-3 L3,-11 L14,-11 L20,-21 L38,-21 L44,-11 L52,-11 L52,-3 Z").attr("fill","#546e7a").attr("fill-opacity",.55).attr("stroke","#37474f").attr("stroke-width",.8).attr("stroke-opacity",.3),y.append("path").attr("d","M16,-11 L21,-19 L27,-19 L27,-11 Z").attr("fill","#b0bec5").attr("fill-opacity",.35),y.append("path").attr("d","M29,-19 L36,-19 L41,-11 L29,-11 Z").attr("fill","#b0bec5").attr("fill-opacity",.3),y.append("circle").attr("cx",16).attr("cy",-1).attr("r",5).attr("fill","#263238").attr("fill-opacity",.6),y.append("circle").attr("cx",16).attr("cy",-1).attr("r",2.5).attr("fill","#546e7a").attr("fill-opacity",.4),y.append("circle").attr("cx",40).attr("cy",-1).attr("r",5).attr("fill","#263238").attr("fill-opacity",.6),y.append("circle").attr("cx",40).attr("cy",-1).attr("r",2.5).attr("fill","#546e7a").attr("fill-opacity",.4),y.append("rect").attr("x",50).attr("y",-5).attr("width",6).attr("height",3).attr("rx",1).attr("fill","#455a64").attr("fill-opacity",.5),[{x:59,y:-6,r:3.5},{x:64,y:-9,r:5},{x:67,y:-14,r:4.5},{x:70,y:-20,r:4}].forEach((b,N)=>{y.append("circle").attr("cx",b.x).attr("cy",b.y).attr("r",b.r).attr("fill","#78909c").attr("fill-opacity",.15-N*.02)}),y.append("circle").attr("cx",4).attr("cy",-7).attr("r",2).attr("fill","#ffcc02").attr("fill-opacity",.4);const _=f.append("g").attr("transform",`translate(${c+55}, ${L})`);_.append("rect").attr("x",0).attr("y",-32).attr("width",45).attr("height",32).attr("rx",2).attr("fill","#455a64").attr("fill-opacity",.45).attr("stroke","#37474f").attr("stroke-width",.8).attr("stroke-opacity",.25),_.append("rect").attr("x",7).attr("y",-60).attr("width",10).attr("height",28).attr("rx",1).attr("fill","#37474f").attr("fill-opacity",.5),_.append("rect").attr("x",5).attr("y",-62).attr("width",14).attr("height",3).attr("rx",1).attr("fill","#37474f").attr("fill-opacity",.55),_.append("rect").attr("x",30).attr("y",-48).attr("width",7).attr("height",16).attr("rx",1).attr("fill","#37474f").attr("fill-opacity",.45),[{x:4,y:-26,w:8,h:6},{x:15,y:-26,w:8,h:6},{x:26,y:-26,w:8,h:6},{x:4,y:-16,w:8,h:6},{x:15,y:-16,w:8,h:6},{x:26,y:-16,w:8,h:6}].forEach(b=>{_.append("rect").attr("x",b.x).attr("y",b.y).attr("width",b.w).attr("height",b.h).attr("rx",1).attr("fill","#ffc107").attr("fill-opacity",.3)}),_.append("rect").attr("x",18).attr("y",-9).attr("width",9).attr("height",9).attr("rx",1).attr("fill","#37474f").attr("fill-opacity",.3),[{x:12,y:-67,r:5},{x:14,y:-75,r:6},{x:11,y:-83,r:5.5},{x:34,y:-53,r:4},{x:36,y:-60,r:5}].forEach((b,N)=>{_.append("circle").attr("cx",b.x).attr("cy",b.y).attr("r",b.r).attr("fill","#78909c").attr("fill-opacity",.14-N*.015)});const x=f.append("g").attr("transform",`translate(${c+42}, ${L})`);[{x:-4,s:.9,fill:"#e74c3c",op:.3},{x:3,s:1.2,fill:"#e67e22",op:.35},{x:9,s:.7,fill:"#f39c12",op:.28},{x:-9,s:.6,fill:"#f39c12",op:.22}].forEach(b=>{x.append("path").attr("d","M0,0 C-3,-6 -5,-13 -2,-19 C-1,-21 1,-21 2,-19 C5,-13 3,-6 0,0 Z").attr("transform",`translate(${b.x}, 0) scale(${b.s})`).attr("fill",b.fill).attr("fill-opacity",b.op)}),x.append("path").attr("d","M0,0 C-1.5,-4 -2,-8 -0.5,-12 C0,-13 0.5,-13 1,-12 C2,-8 1.5,-4 0,0 Z").attr("transform","translate(3, 0) scale(1.1)").attr("fill","#fff176").attr("fill-opacity",.3),p.year&&f.append("text").attr("x",c).attr("y",l-8).attr("text-anchor","middle").attr("font-size","11px").attr("fill","#999").text(`Data year: ${p.year}`)}return Vt(()=>[e.emissionsData,e.countryName],async()=>{await zt(),o(),n.value&&!r&&(r=new ResizeObserver(()=>{o()}),r.observe(n.value))},{deep:!0}),oe(()=>{o(),n.value&&(r=new ResizeObserver(()=>{o()}),r.observe(n.value))}),_e(()=>{r&&r.disconnect()}),(s,u)=>a.value?(G(),z("div",xp,[v("div",wp,[v("div",{ref_key:"chartRef",ref:n,class:"chart-svg"},null,512)])])):(G(),z("div",_p,[...u[0]||(u[0]=[v("span",{class:"material-symbols-outlined"},"cloud_off",-1),v("p",null,"No per-capita emissions data available for this country.",-1)])]))}},Cp=Tt(bp,[["__scopeId","data-v-63407626"]]),kp={key:0,class:"no-data"},Mp={key:1,class:"chart-wrapper"},Sp={class:"chart-container scroll-container"},$p={class:"chart-scroll-outer"},Ep={__name:"CarbonIntensityRanking",props:{rankingData:{type:Array,default:()=>[]},selectedCountryCode:{type:String,default:""}},setup(t){const e=Jt(),n=t,r=ft(null),a=ft(null),i=ft(null);let o=null;const s=rt(()=>n.rankingData&&n.rankingData.length>0);function u(){if(!r.value||!s.value)return;ht(r.value).selectAll("*").remove();const c=n.rankingData,d=r.value.clientWidth||500,f={top:10,right:120,bottom:5,left:175},p=26,m=42,C=3;let k=0;c.forEach(A=>{k+=(A.code===n.selectedCountryCode?m:p)+C});const M=f.top+f.bottom+k,T=d,P=T-f.left-f.right,H=ht(r.value).append("svg").attr("width",T).attr("height",M).append("g").attr("transform",`translate(${f.left}, ${f.top})`),S=hn(c,A=>A.value)||1,L=ie().domain([0,S*1.05]).range([0,P]),Y=ie().domain([0,100,300,S]).range(["#27ae60","#8fce00","#f39c12","#e74c3c"]).clamp(!0);let E=0;c.forEach(A=>{const $=A.code===n.selectedCountryCode,w=$?m:p,h=E,g=H.append("g").attr("class","bar-row").style("cursor",$?"default":"pointer").on("click",()=>{$||e.setSelectedCountry(A.code)});g.append("rect").attr("x",-175).attr("y",h).attr("width",T).attr("height",w).attr("fill","transparent");const y=g.append("rect").attr("x",0).attr("y",h).attr("width",L(A.value)).attr("height",w).attr("fill",Y(A.value)).attr("fill-opacity",$?1:.65).attr("stroke",$?"#222":"none").attr("stroke-width",$?2.5:0).attr("rx",3);$||g.on("mouseenter",()=>{y.attr("fill-opacity",.9)}).on("mouseleave",()=>{y.attr("fill-opacity",.65)}),$&&H.append("rect").attr("x",-4).attr("y",h-4).attr("width",L(A.value)+8).attr("height",w+8).attr("fill","none").attr("stroke",Y(A.value)).attr("stroke-width",2.5).attr("stroke-opacity",.35).attr("rx",6),g.append("text").attr("x",-8).attr("y",h+w/2).attr("text-anchor","end").attr("dominant-baseline","central").attr("font-size",$?"15px":"10px").attr("font-weight",$?"900":"400").attr("fill",$?"#000":"#666").text(A.name),g.append("text").attr("x",L(A.value)+8).attr("y",h+w/2).attr("dominant-baseline","central").attr("font-size",$?"17px":"10px").attr("font-weight",$?"900":"400").attr("fill",$?"#000":"#666").text($?`${Math.round(A.value)} gCO/kWh`:`${Math.round(A.value)}`),E+=w+C});const D=L(100);D>0&&D<P?i.value=f.left+D:i.value=null,l(c,f.top,p,m,C)}function l(c,d,f,p,m){if(!a.value)return;const C=c.findIndex(P=>P.code===n.selectedCountryCode);if(C===-1)return;let k=d;for(let P=0;P<C;P++)k+=(c[P].code===n.selectedCountryCode?p:f)+m;const M=a.value.clientHeight,T=k-M*.35;a.value.scrollTop=Math.max(0,T)}return Vt(()=>[n.rankingData,n.selectedCountryCode],()=>{u()},{deep:!0}),oe(()=>{u(),o=new ResizeObserver(()=>{u()}),r.value&&o.observe(r.value)}),_e(()=>{o&&o.disconnect()}),(c,d)=>s.value?(G(),z("div",Mp,[d[2]||(d[2]=v("h3",null,"Carbon Intensity of the Energy Grid - Europe Comparison",-1)),d[3]||(d[3]=v("p",null,' Now lets look through the lens of carbon intensity, which relates electricity to carbon emissions. The chart below shows the average CO2 emitted per kilowatt-hour of electricity generated from all sources, indicating how clean the power grid is in terms of emissions. Heavy reliance on nuclear power contributes to low carbon intensity levels for electricity, as in the case of France for example, but referring to it as "clean energy" remains a topic of discussion. ',-1)),v("div",Sp,[i.value!=null?(G(),z("div",{key:0,class:"threshold-label",style:we({left:i.value+"px"})}," IEA / EU sustainable energy threshold (100 gCO/kWh) ",4)):jt("",!0),v("div",$p,[i.value!=null?(G(),z("div",{key:0,class:"threshold-line-overlay",style:we({left:i.value+"px"})},null,4)):jt("",!0),v("div",{ref_key:"scrollContainer",ref:a,class:"chart-scroll"},[v("div",{ref_key:"chartRef",ref:r,class:"chart-svg"},null,512)],512)]),d[1]||(d[1]=he('<div class="chart-meta" data-v-17aac383><div class="meta-section" data-v-17aac383><span class="meta-label" data-v-17aac383>Source</span><ul data-v-17aac383><li data-v-17aac383><strong data-v-17aac383>OWID</strong><a href="https://github.com/owid/energy-data" target="_blank" rel="noopener" data-v-17aac383> Energy Data </a> . Column: <code data-v-17aac383>carbon_intensity_elec</code> (gCO2/kWh) </li></ul></div><div class="meta-section" data-v-17aac383></div></div>',1))])])):(G(),z("div",kp,[...d[0]||(d[0]=[v("span",{class:"material-symbols-outlined"},"bar_chart_off",-1),v("p",null,"No carbon intensity ranking data available.",-1)])]))}},Tp=Tt(Ep,[["__scopeId","data-v-17aac383"]]),Ap={key:0,class:"no-data"},Np={key:1,class:"stat-cards-wrapper"},Rp={class:"group-label"},Pp={class:"stat-cards-grid"},Op={class:"card-icon"},Ip={class:"material-symbols-outlined"},Dp={class:"card-content"},Hp={class:"card-title"},Lp={class:"card-result"},Fp={class:"card-detail"},Se=3.7,zp=1.6,Gp=.125,Yp=.49,Ti=3,$n=215,Pr=3600,Ai=77400,Or=885,Bp=1.3,Ni=55,En=9,Wp=2.2,Ri=400,Up=50,Vp={__name:"StatCards",props:{gridIntensity:{type:Number,default:null}},setup(t){const e=t;function n(i,o){const s=i/o;return s<.5?"card-green":s<=1?"card-yellow":"card-red"}const r=rt(()=>{const i=e.gridIntensity;if(i==null)return[];const o=[],s=Se/zp;o.push({id:"ev",group:"transport",icon:"electric_car",title:"Electric Car vs Petrol Car",result:`${s.toFixed(1)}x less energy per passenger-km`,detail:"EV: 1.22.0 MJ/pkm. Petrol: 3.04.4 MJ/pkm. Total energy incl. vehicle manufacturing.",colorClass:"card-green"});const u=Se/Gp,l=Se/Yp;o.push({id:"train",group:"transport",icon:"train",title:"Train & Tram vs Car",result:`Train ~${Math.round(u)}x, Tram ~${Math.round(l)}x less energy`,detail:"Train: 0.050.2 MJ/pkm. Tram: 0.170.8 MJ/pkm. Car: 3.04.4 MJ/pkm. Incl. manufacturing.",colorClass:"card-green"});const c=i/Ti,d=($n-c)/$n*100;o.push({id:"hp",group:"household",icon:"heat_pump",title:"Heat Pump vs Gas Heating",result:d>0?`${Math.round(d)}% less CO`:`${Math.round(-d)}% more CO`,detail:`HP: ${Math.round(c)} gCO/kWh_th (SCOP ${Ti}). Gas boiler: ${$n} gCO/kWh_th.`,colorClass:n(c,$n)});const f=Pr*i/1e6,p=Pr*3.6,m=Math.round(p/Se);o.push({id:"footprint",group:"household",icon:"home",title:"Household Electricity Footprint",result:`${f.toFixed(2)} tCO/yr  ${m.toLocaleString()} passenger-km by car`,detail:`From ${Pr.toLocaleString()} kWh/yr (EU avg). Energy equivalent at ${Se} MJ/pkm (PTUA, incl. manufacturing).`,colorClass:f<.5?"card-green":f<1.5?"card-yellow":"card-red"});const C=Ai*3.6,k=Math.round(C/Se);o.push({id:"datacenter",group:"services",icon:"dns",title:"Data Center (NTT Frankfurt 1)",result:`1 hr of operation  ${k.toLocaleString()} passenger-km by car`,detail:`Est. ${Ai.toLocaleString()} kWh/hr (77.4 MW IT load). Car: ${Se} MJ/pkm (PTUA).`,colorClass:k<5e4?"card-green":k<15e4?"card-yellow":"card-red"});const M=Bp*i,T=Or/M;o.push({id:"truck",group:"services",icon:"local_shipping",title:"Electric Truck vs Diesel Truck (Logistics)",result:T>=1?`${T.toFixed(1)}x less CO per km`:`${(1/T).toFixed(1)}x more CO per km`,detail:`Electric: ${Math.round(M)} gCO/km (1.30 kWh/km). Diesel: ${Or} gCO/km (33 L/100km, 40t).`,colorClass:n(M,Or)});const P=Ni*i/1e3,R=(En-P)/En*100;o.push({id:"green-h2",group:"industry",icon:"science",title:"Green Hydrogen vs Grey Hydrogen",result:R>0?`${Math.round(R)}% less CO per kg H`:`${Math.round(-R)}% more CO per kg H`,detail:`Electrolysis: ${P.toFixed(1)} kgCO/kgH (${Ni} kWh/kg). SMR: ${En} kgCO/kgH.`,colorClass:n(P,En)});const S=Ri*i/1e3+Up,L=Wp*1e3,Y=(L-S)/L*100;return o.push({id:"steel",group:"industry",icon:"construction",title:"Electric Arc Furnace vs Blast Furnace",result:Y>0?`${Math.round(Y)}% less CO per tonne steel`:`${Math.round(-Y)}% more CO per tonne steel`,detail:`EAF: ${Math.round(S)} kgCO/t (${Ri} kWh). BF-BOF: ${L.toLocaleString()} kgCO/t.`,colorClass:n(S,L)}),o}),a=rt(()=>[{key:"transport",label:"Transport",icon:"directions_car",color:"#ffb56b"},{key:"household",label:"Household",icon:"home",color:"#63b3df"},{key:"services",label:"Services",icon:"business",color:"#76d76b"},{key:"industry",label:"Industry",icon:"factory",color:"#898989"}].map(o=>({...o,cards:r.value.filter(s=>s.group===o.key)})).filter(o=>o.cards.length>0));return(i,o)=>t.gridIntensity==null?(G(),z("div",Ap,[...o[0]||(o[0]=[v("span",{class:"material-symbols-outlined"},"info",-1),v("p",null,"No grid intensity data available to compute comparisons.",-1)])])):(G(),z("div",Np,[(G(!0),z(ae,null,Ne(a.value,s=>(G(),z("div",{key:s.label,class:"stat-group"},[v("h4",Rp,[v("span",{class:"material-symbols-outlined group-icon",style:we({color:s.color})},gt(s.icon),5),wt(" "+gt(s.label),1)]),v("div",Pp,[(G(!0),z(ae,null,Ne(s.cards,u=>(G(),z("div",{key:u.id,class:Bt(["stat-card",u.colorClass])},[v("div",Op,[v("span",Ip,gt(u.icon),1)]),v("div",Dp,[v("h5",Hp,gt(u.title),1),v("p",Lp,gt(u.result),1),v("p",Fp,gt(u.detail),1)])],2))),128))])]))),128))]))}},Xp=Tt(Vp,[["__scopeId","data-v-e191c0ca"]]),Kp={id:"eco",class:"page-section"},qp={class:"eco-subsection"},jp={class:"section-container"},Zp={key:0,class:"loading"},Jp={key:1,class:"error"},Qp={key:0,class:"no-data"},t1={key:1,class:"charts-container"},e1={class:"charts-fill"},n1={class:"text-container"},r1={key:0},a1={class:"highlight-value"},i1={class:"highlight-value"},o1={key:1},s1={class:"eco-subsection"},l1={class:"section-container"},c1={key:0,class:"loading"},u1={key:1,class:"error"},f1={key:0,class:"no-data"},d1={key:1,class:"charts-container"},h1={class:"charts-fill"},p1={class:"text-container"},g1={key:0},y1={class:"highlight-value"},m1={class:"highlight-value"},v1={key:1},_1={__name:"Eco",setup(t){const e=Jt(),n=rt(()=>{const r=e.emissionsPerCapita;if(!r)return null;const a=(r.residential||0)+(r.services||0)+(r.transport||0)+(r.industry||0);return a>0?a.toFixed(1):null});return(r,a)=>(G(),z("section",Kp,[a[12]||(a[12]=v("div",{class:"chart-header"},[v("h2",null,"Carbon Footprint of Energy Use")],-1)),v("div",qp,[v("div",jp,[j(e).isLoading?(G(),z("div",Zp,"Loading energy data...")):j(e).error?(G(),z("div",Jp,gt(j(e).error),1)):(G(),z(ae,{key:2},[j(e).ecoLoaded?(G(),z("div",t1,[v("div",e1,[a[0]||(a[0]=v("p",null," Of course no project about energy can be considered complete without a section dedicated to the ecological aspects of energy use. While there are other important environmental impacts to consider, we will focus on the most fundamental one: carbon emissions. First in a broad per capita breakdown, and then through the lens of carbon intensity, which relates electricity to carbon emissions. This is a key factor determining how much impact measures, that we consider as sustainable, will have in practice. ",-1)),Ct(vp,{rankingData:j(e).emissionsPerCapitaRanking,selectedCountryCode:j(e).selectedCountryCode},null,8,["rankingData","selectedCountryCode"])])])):(G(),z("div",Qp,"Eco data not available."))],64)),v("div",n1,[n.value!=null?(G(),z("h3",r1,[a[1]||(a[1]=wt(" Where are the ",-1)),v("span",a1,gt(n.value)+" tCO",1),a[2]||(a[2]=wt(" emissions in ",-1)),v("span",i1,gt(j(e).selectedCountry?.name),1),a[3]||(a[3]=wt(" emitted? ",-1))])):(G(),z("h3",o1,"Where are the emissions in your country emitted?")),a[4]||(a[4]=v("p",null," The chart below breaks down how much CO2 each person causes through four major sectors: residential energy use (heating, appliances), services (commercial buildings, offices), transport (cars, trucks), and industry (manufacturing). ",-1)),Ct(Cp,{emissionsData:j(e).emissionsPerCapita,countryName:j(e).selectedCountry?.name||""},null,8,["emissionsData","countryName"]),a[5]||(a[5]=v("p",null," Transport tends to be the single largest contributor in most European countries, reflecting heavy reliance on fossil fuels for road mobility. In Lithuania, transport accounts for roughly two-thirds of per-capita emissions. In Denmark, Spain, and Portugal it exceeds half. At the other extreme, industry dominates in Slovakia and Czechia, where steel production, automotive manufacturing, and a heavy reliance on coal for heating, industry, and electricity generation push totals above 4 tCO per person. Residential emissions vary depending on climate, insulation standards, and the fuel mix for heating. Norway stands out with residential emissions near zero (0.08 tCO/cap), thanks to a grid that is 98% renewable (almost entirely hydropower), widespread use of heat pumps for heating, and the world's highest EV adoption rate, keeping its overall footprint remarkably low for a country with such a high standard of living. ",-1))])]),a[6]||(a[6]=he('<div class="chart-meta" data-v-8edee89a><div class="meta-section" data-v-8edee89a><span class="meta-label" data-v-8edee89a>Source</span><ul data-v-8edee89a><li data-v-8edee89a><strong data-v-8edee89a>IEA</strong><a href="https://www.iea.org/data-and-statistics/data-product/energy-efficiency-indicators-highlights" target="_blank" rel="noopener" data-v-8edee89a> Energy End-Uses &amp; Efficiency </a> (per-capita CO by sector). Indicator: <code data-v-8edee89a>Carbon intensity per capita (t CO2/capita)</code>. End uses: <code data-v-8edee89a>Total residential</code>, <code data-v-8edee89a>Total services</code>, <code data-v-8edee89a>Cars/light trucks</code> + <code data-v-8edee89a>Freight trucks</code> (transport) </li><li data-v-8edee89a> Industry per-capita derived from IEA total emissions (indicator: <code data-v-8edee89a>Total final use (kt CO2)</code>, end use containing <code data-v-8edee89a>Manufacturing</code>) divided by <strong data-v-8edee89a>OWID</strong><a href="https://github.com/owid/energy-data" target="_blank" rel="noopener" data-v-8edee89a> Energy Data </a><code data-v-8edee89a>population</code> column. IEA provides per-capita indicators for residential, services, and transport, but only per-value-added (gCO/USD) for industry. </li></ul></div><div class="meta-section" data-v-8edee89a><span class="meta-label" data-v-8edee89a>Data Hints</span><ul data-v-8edee89a><li data-v-8edee89a>Some countries may lack transport data. The total shown is the sum of available sectors.</li></ul></div></div>',1))]),v("div",s1,[v("div",l1,[j(e).isLoading?(G(),z("div",c1,"Loading energy data...")):j(e).error?(G(),z("div",u1,gt(j(e).error),1)):(G(),z(ae,{key:2},[j(e).ecoLoaded?(G(),z("div",d1,[v("div",h1,[Ct(Tp,{rankingData:j(e).carbonIntensityRanking,selectedCountryCode:j(e).selectedCountryCode},null,8,["rankingData","selectedCountryCode"])])])):(G(),z("div",f1,"Eco data not available."))],64)),v("div",p1,[j(e).carbonIntensity?.latest_value!=null?(G(),z("h3",g1,[a[7]||(a[7]=wt(" What does a carbon intensity of ",-1)),v("span",y1,gt(Math.round(j(e).carbonIntensity.latest_value))+" gCO/kWh",1),a[8]||(a[8]=wt(" for ",-1)),v("span",m1,gt(j(e).selectedCountry?.name),1),a[9]||(a[9]=wt(" mean in practice? ",-1))])):(G(),z("h3",v1,"What does your grid intensity mean in practice?")),a[10]||(a[10]=v("p",null," Most people are familiar with electrification as a fundamental part of decarbonization, where processes directly reliant on fossil fuels, if they cannot be done without, are replaced by electric alternatives. The electric car being a prime example of this. A fact that can be lost in this though, is that any benefits in terms of emissions through often costly and disruptive switches, are only as beneficial as the electricity is clean. The cards below (based on broad averages and approximations) demonstrate how impactful the effect can be, essentially highlighting the importance of electricity obtained from clean sources. ",-1)),Ct(Xp,{gridIntensity:j(e).carbonIntensity?.latest_value},null,8,["gridIntensity"]),a[11]||(a[11]=he('<details class="sources-details" data-v-8edee89a><summary data-v-8edee89a>Data sources and assumptions</summary><ul class="sources-list" data-v-8edee89a><li data-v-8edee89a><strong data-v-8edee89a>Car, EV, Train &amp; Tram energy (MJ/pkm)</strong>: <a href="https://ptua.org.au/myths/energy/" target="_blank" data-v-8edee89a>PTUA  Myth: Public transport doesn&#39;t really save energy</a>. Total energy per passenger-km including vehicle manufacturing. Car (ICE): 3.04.4, EV: 1.22.0, Train: 0.050.2, Tram: 0.170.8 MJ/pkm. Ranges reflect occupancy assumptions (cars: 1.11.5 passengers; trains/trams: peak vs off-peak patronage). </li><li data-v-8edee89a><strong data-v-8edee89a>Heat pump SCOP (3.0)</strong>: <a href="https://www.iea.org/reports/the-future-of-heat-pumps" target="_blank" data-v-8edee89a>IEA The Future of Heat Pumps</a>, &quot;How a heat pump works&quot; section, opening paragraph states COP ~4. SCOP 3.0 is a conservative seasonal figure accounting for cold-climate performance drops. </li><li data-v-8edee89a><strong data-v-8edee89a>Gas heating (215 gCO/kWh_th)</strong>: Natural gas space heating. Based on emission factor ~205 gCO/kWh with typical boiler efficiency ~90%. </li><li data-v-8edee89a><strong data-v-8edee89a>Household electricity (3,600 kWh/yr)</strong>: <a href="https://www.odyssee-mure.eu/publications/efficiency-by-sector/households/electricity-consumption-dwelling.html" target="_blank" data-v-8edee89a>Odyssee-MURE  Electricity consumption per dwelling</a>. EU average of 3.6 MWh per dwelling, widely used as a median for medium-sized households. Varies greatly by country (from ~1.8 MWh in Romania to ~8.5 MWh in Sweden). </li><li data-v-8edee89a><strong data-v-8edee89a>Data center: NTT Frankfurt 1 (77.4 MW IT)</strong>: <a href="https://services.global.ntt/en-us/services-and-products/global-data-centers/global-locations/emea/frankfurt-1-data-center" target="_blank" data-v-8edee89a>NTT Frankfurt 1</a>, Overview section (&quot;Secure and flexible space built to your specifications&quot; paragraph) and Specifications &gt; Power (70.1 MW operational + 7.3 MW under construction). </li><li data-v-8edee89a><strong data-v-8edee89a>Diesel truck (885 gCO/km)</strong>: Derived from 32.6 L/100 km (40t tractor-trailer, Long Haul cycle) x 2.68 kgCO/L. <a href="https://theicct.org/publication/lca-ghg-emissions-hdv-fuels-europe-feb23/" target="_blank" data-v-8edee89a>ICCT Feb 2023 LCA</a>, referencing the <a href="https://theicct.org/wp-content/uploads/2021/06/HDV_fuel-consumption_comparison_fs_20180418.pdf" target="_blank" data-v-8edee89a>ICCT April 2018 Fact Sheet</a>, average tractor-trailer fuel consumption figure. </li><li data-v-8edee89a><strong data-v-8edee89a>Electric truck (1.30 kWh/km)</strong>: <a href="https://theicct.org/publication/rw-use-cases-for-zet-heavy-tractor-trailers-for-goods-transport-in-the-eu-aug25/" target="_blank" data-v-8edee89a>ICCT Aug 2025</a>, Key Findings section: real-world range of 92 to 150 kWh/100 km for 40t tractor-trailers. 1.30 kWh/km (130 kWh/100 km) is within this range. </li><li data-v-8edee89a><strong data-v-8edee89a>PEM electrolysis (55 kWh/kgH)</strong>: <a href="https://www.hydrogen.energy.gov/docs/hydrogenprogramlibraries/pdfs/24005-clean-hydrogen-production-cost-pem-electrolyzer.pdf" target="_blank" data-v-8edee89a>DOE H2 Program Record #24005</a> (May 2024), main analysis section: beginning-of-life system electricity 55.2 kWh/kg (stack 51 + balance-of-plant 4.2). Lifetime average: 57.5 kWh/kg. </li><li data-v-8edee89a><strong data-v-8edee89a>Grey hydrogen SMR (9 kgCO/kgH)</strong>: <a href="https://www.iea.org/reports/global-hydrogen-review-2024" target="_blank" data-v-8edee89a>IEA Global Hydrogen Review 2024</a>, Ch. 8 &quot;GHG emissions of hydrogen&quot;, Highlights, 1st bullet: unabated natural gas emits 10 to 12 kgCO-eq/kgH (lifecycle). The value 9 represents direct combustion emissions only, excluding upstream methane. </li><li data-v-8edee89a><strong data-v-8edee89a>Blast furnace steel (2.2 tCO/t)</strong>: <a href="https://www.iea.org/energy-system/industry/steel" target="_blank" data-v-8edee89a>IEA Steel tracking page</a>, &quot;Direct CO intensity of crude steel production&quot; interactive chart. IEA reports ~2.0 to 2.3 tCO/t for BF-BOF globally; 2.2 is within this range. </li><li data-v-8edee89a><strong data-v-8edee89a>EAF steel (400 kWh/t + 50 kgCO/t process)</strong>: <a href="https://www.iea.org/reports/iron-and-steel-technology-roadmap" target="_blank" data-v-8edee89a>IEA Iron &amp; Steel Roadmap</a>. Industry literature (AIST) commonly cites 300 to 400 kWh/t for scrap-based EAF electricity. The 50 kgCO/t accounts for electrode and lime process emissions. </li></ul></details>',1))])])])]))}},x1=Tt(_1,[["__scopeId","data-v-8edee89a"]]),w1={class:"app-select-wrapper"},b1=["for"],C1={class:"app-select-container"},k1=["id","value","disabled"],M1={key:0,value:"",disabled:""},S1=["value"],$1={__name:"AppSelect",props:{modelValue:{type:[String,Number],default:""},options:{type:Array,required:!0,validator:t=>t.every(e=>e.value!==void 0&&e.label!==void 0)},label:{type:String,default:""},placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`select-${Math.random().toString(36).substr(2,9)}`}},emits:["update:modelValue"],setup(t){return(e,n)=>(G(),z("div",w1,[t.label?(G(),z("label",{key:0,for:t.id,class:"app-select-label"},gt(t.label),9,b1)):jt("",!0),v("div",C1,[v("select",{id:t.id,value:t.modelValue,class:"app-select",disabled:t.disabled,onChange:n[0]||(n[0]=r=>e.$emit("update:modelValue",r.target.value))},[t.placeholder?(G(),z("option",M1,gt(t.placeholder),1)):jt("",!0),(G(!0),z(ae,null,Ne(t.options,r=>(G(),z("option",{key:r.key,value:r.value},gt(r.label),9,S1))),128))],40,k1),n[1]||(n[1]=v("span",{class:"app-select-icon"},[v("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[v("path",{d:"M4 6L8 10L12 6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})])],-1))])]))}},E1=Tt($1,[["__scopeId","data-v-e0a5461e"]]),T1={class:"year-slot"},A1={key:0,class:"year-slot-label"},N1={class:"year-slot-row"},R1=["disabled"],P1={class:"year-slot-display"},O1={class:"year-adj"},I1={class:"year-drum"},D1={class:"year-adj"},H1=["disabled"],L1={__name:"YearSlot",props:{modelValue:{type:Number,required:!0},years:{type:Array,required:!0},label:{type:String,default:""}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=e,a=ft(!1),i=ft(n.modelValue),o=rt(()=>n.years.indexOf(n.modelValue)),s=rt(()=>o.value>0),u=rt(()=>o.value<n.years.length-1),l=rt(()=>s.value?n.years[o.value-1]:null),c=rt(()=>u.value?n.years[o.value+1]:null);Vt(()=>n.modelValue,p=>{i.value=p});function d(p){const m=o.value+p;m>=0&&m<n.years.length&&f(n.years[m])}function f(p){p!==n.modelValue&&(a.value=!0,i.value=p,r("update:modelValue",p),setTimeout(()=>{a.value=!1},200))}return(p,m)=>(G(),z("div",T1,[t.label?(G(),z("label",A1,gt(t.label),1)):jt("",!0),v("div",N1,[v("button",{class:"year-slot-btn",disabled:!s.value,onClick:m[0]||(m[0]=C=>d(-1)),type:"button"},[...m[2]||(m[2]=[v("svg",{width:"10",height:"10",viewBox:"0 0 10 10"},[v("path",{d:"M7 1L3 5L7 9",stroke:"currentColor","stroke-width":"1.5",fill:"none"})],-1)])],8,R1),v("div",P1,[v("span",O1,gt(l.value||""),1),v("div",I1,[v("span",{class:Bt(["year-current",{"year-pop":a.value}])},gt(i.value),3)]),v("span",D1,gt(c.value||""),1)]),v("button",{class:"year-slot-btn",disabled:!u.value,onClick:m[1]||(m[1]=C=>d(1)),type:"button"},[...m[3]||(m[3]=[v("svg",{width:"10",height:"10",viewBox:"0 0 10 10"},[v("path",{d:"M3 1L7 5L3 9",stroke:"currentColor","stroke-width":"1.5",fill:"none"})],-1)])],8,H1)])]))}},F1=Tt(L1,[["__scopeId","data-v-63b2739e"]]),z1=Pi("globalConfig",()=>{const t=ft({min:1990,max:2024}),e=rt(()=>t.value.min),n=rt(()=>t.value.max),r=rt(()=>{const o=[];for(let s=t.value.max;s>=t.value.min;s--)o.push(s);return o}),a=rt(()=>{const o=[];for(let s=t.value.min;s<=t.value.max;s++)o.push(s);return o});function i(o,s){t.value={min:o,max:s}}return{yearRange:t,minYear:e,maxYear:n,yearsDescending:r,yearsAscending:a,setYearRange:i}}),G1={class:"config-header"},Y1={__name:"ConfigHeader",setup(t){const e=Jt(),n=z1(),r=rt(()=>e.countries.map(c=>({value:c.code,label:c.name}))),a=rt({get:()=>e.selectedCountryCode,set:c=>e.setSelectedCountry(c)}),i=rt({get:()=>e.selectedYear,set:c=>e.setSelectedYear(Number(c))});oe(()=>{e.loadData()});const o=Uo(),s=Vo(),u=rt(()=>s.path.startsWith("/info"));function l(){o.push("/info")}return(c,d)=>(G(),z("div",G1,[u.value?jt("",!0):(G(),z(ae,{key:0},[Ct(E1,{class:"config-item",options:r.value,label:"Country",modelValue:a.value,"onUpdate:modelValue":d[0]||(d[0]=f=>a.value=f),placeholder:"Select country"},null,8,["options","modelValue"]),Ct(F1,{class:"config-item",years:j(n).yearsDescending,label:"Year",modelValue:i.value,"onUpdate:modelValue":d[1]||(d[1]=f=>i.value=f)},null,8,["years","modelValue"])],64)),v("button",{class:"methodology-button",onClick:l,type:"button","aria-label":"Info / Methodology",title:"Info / Methodology"},[...d[2]||(d[2]=[v("span",{class:"material-symbols-outlined"},"info",-1)])])]))}},B1=Tt(Y1,[["__scopeId","data-v-93895074"]]),W1={id:"app-container"},U1={class:"main-content main-with-config"},V1={key:0,class:"year-loading-overlay"},X1={__name:"Home",setup(t){const e=Jt(),n=ft([{id:"fueltypes",name:"Types of Fuel",icon:"oil_barrel"},{id:"dependency",name:"Dependency on Imports",icon:"trending_up"},{id:"tradingpartner",name:"Trading Partners",icon:"cycle"},{id:"consumption",name:"Sectoral Energy Use",icon:"battery_android_frame_5"},{id:"sectorfuels",name:"Energy Sources",icon:"delivery_truck_bolt"},{id:"productionconsumption",name:"Production & Consumption",icon:"instant_mix"},{id:"costs",name:"Energy Prices",icon:"euro"},{id:"eco",name:"Carbon Footprint",icon:"energy_savings_leaf"}]);return(r,a)=>(G(),z("div",W1,[Ct(Ko,{sections:n.value},null,8,["sections"]),v("main",null,[Ct(B1),v("div",U1,[Ct(Xo,{name:"fade"},{default:Oi(()=>[j(e).isYearChanging?(G(),z("div",V1,[...a[0]||(a[0]=[v("div",{class:"year-loading-spinner"},null,-1)])])):jt("",!0)]),_:1}),Ct(ep),Ct(kh),Ct(lh),Ct(Jd),Ct(p0),Ct(dp),Ct(P0),Ct(x1)]),Ct(qo)])]))}},j1=Tt(X1,[["__scopeId","data-v-f486dc99"]]);export{j1 as default};
