import{d as Di,c as rt,r as ft,n as zt,o as ie,w as Kt,a as _e,b as z,e as G,_ as Tt,f as v,g as he,u as X,t as pt,h as Ct,i as bt,j as Wt,k as Gt,F as ue,l as Ne,m as we,p as Wo,v as Uo,q as Vo,s as Ko,x as Hi,y as Xo,z as qo,T as jo}from"./index-CmR9GIIv.js";import{S as Zo,F as Jo}from"./Footer-DUCL3Qzc.js";const Jt=Di("energyData",()=>{const t=ft(null),e=ft(null),n=ft(null),r=ft(null),a=ft("IT"),i=ft(2023),o=ft(!1),s=ft(!1),u=ft(null),l=rt(()=>!!n.value),c=rt(()=>!!r.value),d=rt(()=>t.value?.countries?Object.entries(t.value.countries).map(([b,h])=>({code:b,name:h.name})).sort((b,h)=>b.name.localeCompare(h.name)):[]),f=rt(()=>{if(!t.value?.countries||!a.value)return null;const b=t.value.countries[a.value];return b?{code:a.value,name:b.name,years:b.years}:null}),p=rt(()=>t.value?.metadata||null),m=rt(()=>f.value?.years?Object.keys(f.value.years).map(Number).sort((b,h)=>h-b):[]),C=rt(()=>!f.value?.years||!i.value?null:f.value.years[i.value]?.dependency||null),$=rt(()=>{if(!f.value?.years||!i.value)return null;const b=f.value.years[i.value];return b?{imports:b.imports||null,exports:b.exports||null}:null}),S=rt(()=>{if(!f.value?.years||!i.value)return null;const b=f.value.years[i.value];return b?{production:b.production||null,consumption:b.consumption||null}:null}),A=rt(()=>{if(!e.value||!f.value?.name||!i.value)return[];const b=e.value.countries[f.value.name];return b?["Industry","Residential","Transport","Service"].map(g=>{const y=b[g];if(!y)return null;const _=y[i.value];if(!_)return null;const x={};return Object.entries(_).forEach(([w,N])=>{(w.includes("Manufacturing")||w.includes("Total residential")||w.includes("Total passenger and freight transport")||w.includes("Total services"))&&Object.entries(N.products).forEach(([F,B])=>{F.includes("Total")||(x[F.replace("(PJ)","").trim()]=B||0)})}),{name:g,energyType:Object.entries(x).map(([w,N])=>({name:w,value:N}))}}):[]}),P=rt(()=>{if(!e.value||!f.value?.name||!i.value)return[];const b=e.value.countries[f.value.name];if(!b)return[];const g=["Industry","Residential","Transport","Service"].map(y=>{const _=b[y];if(!_)return null;const x=_[i.value];if(!x)return null;const w=[];let N=0;switch(y){case"Industry":Object.entries(x).forEach(([F,B])=>{const U=(B.products||{})["Total final use (PJ)"]||0;w.push({name:F,value:U}),N+=U});break;case"Transport":Object.entries(x).forEach(([F,B])=>{if(!F.includes("Total")||["Total trains","Total airplanes","Total ships"].includes(F)){const U=(B.products||{})["Total final use (PJ)"]||0;w.push({name:F,value:U}),N+=U}if(N===0){const q=x["Total passenger and freight transport"];q&&(N=q.products?.["Total final use (PJ)"]||0)}});break;default:Object.entries(x).forEach(([F,B])=>{if(!F.includes("Total residential")&&!F.includes("Total services")){const U=(B.products||{})["Total final use (PJ)"]||0;w.push({name:F,value:U}),N+=U}}),N==0&&Object.entries(x).forEach(([F,B])=>{if(F="Total residential"){const U=(B.products||{})["Total final use (PJ)"]||0;N+=U}});break}return{name:y,value:N,children:w}}).filter(y=>y&&y.children.length>0);return{name:f.value.name+" "+i.value,children:g}}),R=rt(()=>!r.value?.countries||!a.value?null:r.value.countries[a.value]?.carbon_intensity||null),H=rt(()=>r.value?.carbon_intensity_ranking?r.value.carbon_intensity_ranking:[]),k=rt(()=>!r.value?.countries||!a.value?null:r.value.countries[a.value]?.emissions_per_capita||null),L=rt(()=>!r.value?.countries||!a.value?null:r.value.countries[a.value]?.emissions_total_kt||null),Y=rt(()=>{if(!r.value?.countries)return[];const b=[];for(const[h,g]of Object.entries(r.value.countries)){const y=g.emissions_per_capita;if(!y)continue;const _=(y.residential||0)+(y.services||0)+(y.transport||0)+(y.industry||0);_>0&&b.push({code:h,name:g.name,value:Math.round(_*100)/100,year:y.year})}return b.sort((h,g)=>h.value-g.value),b}),E=rt(()=>{if(!n.value||!a.value)return[];const b=n.value.countries[a.value];if(!b)return[];const h="Price of electricity (US cents per kWh)",g=["1","2","3","4"];return Object.keys(b).filter(_=>/^\d{4}$/.test(_)).map(Number).sort((_,x)=>_-x).map(_=>{const x=b[_],w=g.map(N=>x?.[N]?.CPI0450!=null?Number(x[N].CPI0450):null);return{year:_,electricity:x?.[h]!=null?Number(x[h]):null,CPI0450:w}})});async function D(){if(!(t.value&&e.value&&n.value)){o.value=!0,u.value=null;try{const g=(await(await fetch("/MyEnergyProfile/data/energy_mix.json")).text()).replace(/:\s*NaN/g,": null");t.value=JSON.parse(g);const x=(await(await fetch("/MyEnergyProfile/data/energy_consumptions_by_sector.json")).text()).replace(/:\s*NaN/g,": null");e.value=JSON.parse(x);try{const F=(await(await fetch("/MyEnergyProfile/data/energy_prices.json")).text()).replace(/:\s*NaN/g,": null");n.value=JSON.parse(F)}catch(w){console.warn("Failed to load energy_prices.json",w),n.value=null}try{const N=await(await fetch("/MyEnergyProfile/data/eco_data.json")).text();r.value=JSON.parse(N.replace(/:\s*NaN/g,": null"))}catch(w){console.warn("eco_data.json not loaded",w),r.value=null}}catch(b){u.value=b.message,console.error("Failed to load energy data:",b)}finally{o.value=!1}}}function T(b){a.value=b}function M(b){b!==i.value&&(s.value=!0,requestAnimationFrame(()=>{i.value=b,zt(()=>{s.value=!1})}))}return{rawData:t,selectedCountryCode:a,selectedYear:i,isLoading:o,isYearChanging:s,error:u,countries:d,selectedCountry:f,metadata:p,availableYears:m,dependencyData:C,tradeData:$,productionConsumptionData:S,pieChartData:A,sunburstData:P,loadData:D,setSelectedCountry:T,setSelectedYear:M,pricesData:n,pricesLoaded:l,electricitySeries:E,ecoData:r,ecoLoaded:c,carbonIntensity:R,carbonIntensityRanking:H,emissionsPerCapita:k,emissionsPerCapitaRanking:Y,emissionsTotal:L}});function Tn(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Qo(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Li(t){let e,n,r;t.length!==2?(e=Tn,n=(s,u)=>Tn(t(s),u),r=(s,u)=>t(s)-u):(e=t===Tn||t===Qo?t:ts,n=t,r=t);function a(s,u,l=0,c=s.length){if(l<c){if(e(u,u)!==0)return c;do{const d=l+c>>>1;n(s[d],u)<0?l=d+1:c=d}while(l<c)}return l}function i(s,u,l=0,c=s.length){if(l<c){if(e(u,u)!==0)return c;do{const d=l+c>>>1;n(s[d],u)<=0?l=d+1:c=d}while(l<c)}return l}function o(s,u,l=0,c=s.length){const d=a(s,u,l,c-1);return d>l&&r(s[d-1],u)>-r(s[d],u)?d-1:d}return{left:a,center:o,right:i}}function ts(){return 0}function es(t){return t===null?NaN:+t}const ns=Li(Tn),rs=ns.right;Li(es).center;function as(t,e){let n,r;for(const a of t)a!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)));return[n,r]}class fe{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let r=0;for(let a=0;a<this._n&&a<32;a++){const i=n[a],o=e+i,s=Math.abs(e)<Math.abs(i)?e-(o-i):i-(o-e);s&&(n[r++]=s),e=o}return n[r]=e,this._n=r+1,this}valueOf(){const e=this._partials;let n=this._n,r,a,i,o=0;if(n>0){for(o=e[--n];n>0&&(r=o,a=e[--n],o=r+a,i=a-(o-r),!i););n>0&&(i<0&&e[n-1]<0||i>0&&e[n-1]>0)&&(a=i*2,r=o+a,a==r-o&&(o=r))}return o}}const is=Math.sqrt(50),os=Math.sqrt(10),ss=Math.sqrt(2);function Dn(t,e,n){const r=(e-t)/Math.max(0,n),a=Math.floor(Math.log10(r)),i=r/Math.pow(10,a),o=i>=is?10:i>=os?5:i>=ss?2:1;let s,u,l;return a<0?(l=Math.pow(10,-a)/o,s=Math.round(t*l),u=Math.round(e*l),s/l<t&&++s,u/l>e&&--u,l=-l):(l=Math.pow(10,a)*o,s=Math.round(t/l),u=Math.round(e/l),s*l<t&&++s,u*l>e&&--u),u<s&&.5<=n&&n<2?Dn(t,e,n*2):[s,u,l]}function ls(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[a,i,o]=r?Dn(e,t,n):Dn(t,e,n);if(!(i>=a))return[];const s=i-a+1,u=new Array(s);if(r)if(o<0)for(let l=0;l<s;++l)u[l]=(i-l)/-o;else for(let l=0;l<s;++l)u[l]=(i-l)*o;else if(o<0)for(let l=0;l<s;++l)u[l]=(a+l)/-o;else for(let l=0;l<s;++l)u[l]=(a+l)*o;return u}function Ir(t,e,n){return e=+e,t=+t,n=+n,Dn(t,e,n)[2]}function cs(t,e,n){e=+e,t=+t,n=+n;const r=e<t,a=r?Ir(e,t,n):Ir(t,e,n);return(r?-1:1)*(a<0?1/-a:a)}function hn(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let a of t)(a=e(a,++r,t))!=null&&(n<a||n===void 0&&a>=a)&&(n=a)}return n}function us(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function*fs(t){for(const e of t)yield*e}function Fi(t){return Array.from(fs(t))}function ds(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let a of t)(a=+e(a,++r,t))&&(n+=a)}return n}function hs(t){return t}var br=1,wr=2,Dr=3,qe=4,Na=1e-6;function ps(t){return"translate("+t+",0)"}function gs(t){return"translate(0,"+t+")"}function ys(t){return e=>+t(e)}function ms(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function vs(){return!this.__axis}function zi(t,e){var n=[],r=null,a=null,i=6,o=6,s=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=t===br||t===qe?-1:1,c=t===qe||t===wr?"x":"y",d=t===br||t===Dr?ps:gs;function f(p){var m=r??(e.ticks?e.ticks.apply(e,n):e.domain()),C=a??(e.tickFormat?e.tickFormat.apply(e,n):hs),$=Math.max(i,0)+s,S=e.range(),A=+S[0]+u,P=+S[S.length-1]+u,R=(e.bandwidth?ms:ys)(e.copy(),u),H=p.selection?p.selection():p,k=H.selectAll(".domain").data([null]),L=H.selectAll(".tick").data(m,e).order(),Y=L.exit(),E=L.enter().append("g").attr("class","tick"),D=L.select("line"),T=L.select("text");k=k.merge(k.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),L=L.merge(E),D=D.merge(E.append("line").attr("stroke","currentColor").attr(c+"2",l*i)),T=T.merge(E.append("text").attr("fill","currentColor").attr(c,l*$).attr("dy",t===br?"0em":t===Dr?"0.71em":"0.32em")),p!==H&&(k=k.transition(p),L=L.transition(p),D=D.transition(p),T=T.transition(p),Y=Y.transition(p).attr("opacity",Na).attr("transform",function(M){return isFinite(M=R(M))?d(M+u):this.getAttribute("transform")}),E.attr("opacity",Na).attr("transform",function(M){var b=this.parentNode.__axis;return d((b&&isFinite(b=b(M))?b:R(M))+u)})),Y.remove(),k.attr("d",t===qe||t===wr?o?"M"+l*o+","+A+"H"+u+"V"+P+"H"+l*o:"M"+u+","+A+"V"+P:o?"M"+A+","+l*o+"V"+u+"H"+P+"V"+l*o:"M"+A+","+u+"H"+P),L.attr("opacity",1).attr("transform",function(M){return d(R(M)+u)}),D.attr(c+"2",l*i),T.attr(c,l*$).text(C),H.filter(vs).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===wr?"start":t===qe?"end":"middle"),H.each(function(){this.__axis=R})}return f.scale=function(p){return arguments.length?(e=p,f):e},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(p){return arguments.length?(n=p==null?[]:Array.from(p),f):n.slice()},f.tickValues=function(p){return arguments.length?(r=p==null?null:Array.from(p),f):r&&r.slice()},f.tickFormat=function(p){return arguments.length?(a=p,f):a},f.tickSize=function(p){return arguments.length?(i=o=+p,f):i},f.tickSizeInner=function(p){return arguments.length?(i=+p,f):i},f.tickSizeOuter=function(p){return arguments.length?(o=+p,f):o},f.tickPadding=function(p){return arguments.length?(s=+p,f):s},f.offset=function(p){return arguments.length?(u=+p,f):u},f}function Gi(t){return zi(Dr,t)}function Yi(t){return zi(qe,t)}var _s={value:()=>{}};function ya(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new An(n)}function An(t){this._=t}function xs(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",a=n.indexOf(".");if(a>=0&&(r=n.slice(a+1),n=n.slice(0,a)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}An.prototype=ya.prototype={constructor:An,on:function(t,e){var n=this._,r=xs(t+"",n),a,i=-1,o=r.length;if(arguments.length<2){for(;++i<o;)if((a=(t=r[i]).type)&&(a=bs(n[a],t.name)))return a;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++i<o;)if(a=(t=r[i]).type)n[a]=Ra(n[a],t.name,e);else if(e==null)for(a in n)n[a]=Ra(n[a],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new An(t)},call:function(t,e){if((a=arguments.length-2)>0)for(var n=new Array(a),r=0,a,i;r<a;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=this._[t],r=0,a=i.length;r<a;++r)i[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],a=0,i=r.length;a<i;++a)r[a].value.apply(e,n)}};function bs(t,e){for(var n=0,r=t.length,a;n<r;++n)if((a=t[n]).name===e)return a.value}function Ra(t,e,n){for(var r=0,a=t.length;r<a;++r)if(t[r].name===e){t[r]=_s,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Hr="http://www.w3.org/1999/xhtml";const Pa={svg:"http://www.w3.org/2000/svg",xhtml:Hr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function dr(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Pa.hasOwnProperty(e)?{space:Pa[e],local:t}:t}function ws(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Hr&&e.documentElement.namespaceURI===Hr?e.createElement(t):e.createElementNS(n,t)}}function Cs(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Bi(t){var e=dr(t);return(e.local?Cs:ws)(e)}function ks(){}function ma(t){return t==null?ks:function(){return this.querySelector(t)}}function $s(t){typeof t!="function"&&(t=ma(t));for(var e=this._groups,n=e.length,r=new Array(n),a=0;a<n;++a)for(var i=e[a],o=i.length,s=r[a]=new Array(o),u,l,c=0;c<o;++c)(u=i[c])&&(l=t.call(u,u.__data__,c,i))&&("__data__"in u&&(l.__data__=u.__data__),s[c]=l);return new Yt(r,this._parents)}function Wi(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Ss(){return[]}function Ui(t){return t==null?Ss:function(){return this.querySelectorAll(t)}}function Ms(t){return function(){return Wi(t.apply(this,arguments))}}function Es(t){typeof t=="function"?t=Ms(t):t=Ui(t);for(var e=this._groups,n=e.length,r=[],a=[],i=0;i<n;++i)for(var o=e[i],s=o.length,u,l=0;l<s;++l)(u=o[l])&&(r.push(t.call(u,u.__data__,l,o)),a.push(u));return new Yt(r,a)}function Vi(t){return function(){return this.matches(t)}}function Ki(t){return function(e){return e.matches(t)}}var Ts=Array.prototype.find;function As(t){return function(){return Ts.call(this.children,t)}}function Ns(){return this.firstElementChild}function Rs(t){return this.select(t==null?Ns:As(typeof t=="function"?t:Ki(t)))}var Ps=Array.prototype.filter;function Os(){return Array.from(this.children)}function Is(t){return function(){return Ps.call(this.children,t)}}function Ds(t){return this.selectAll(t==null?Os:Is(typeof t=="function"?t:Ki(t)))}function Hs(t){typeof t!="function"&&(t=Vi(t));for(var e=this._groups,n=e.length,r=new Array(n),a=0;a<n;++a)for(var i=e[a],o=i.length,s=r[a]=[],u,l=0;l<o;++l)(u=i[l])&&t.call(u,u.__data__,l,i)&&s.push(u);return new Yt(r,this._parents)}function Xi(t){return new Array(t.length)}function Ls(){return new Yt(this._enter||this._groups.map(Xi),this._parents)}function Hn(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Hn.prototype={constructor:Hn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Fs(t){return function(){return t}}function zs(t,e,n,r,a,i){for(var o=0,s,u=e.length,l=i.length;o<l;++o)(s=e[o])?(s.__data__=i[o],r[o]=s):n[o]=new Hn(t,i[o]);for(;o<u;++o)(s=e[o])&&(a[o]=s)}function Gs(t,e,n,r,a,i,o){var s,u,l=new Map,c=e.length,d=i.length,f=new Array(c),p;for(s=0;s<c;++s)(u=e[s])&&(f[s]=p=o.call(u,u.__data__,s,e)+"",l.has(p)?a[s]=u:l.set(p,u));for(s=0;s<d;++s)p=o.call(t,i[s],s,i)+"",(u=l.get(p))?(r[s]=u,u.__data__=i[s],l.delete(p)):n[s]=new Hn(t,i[s]);for(s=0;s<c;++s)(u=e[s])&&l.get(f[s])===u&&(a[s]=u)}function Ys(t){return t.__data__}function Bs(t,e){if(!arguments.length)return Array.from(this,Ys);var n=e?Gs:zs,r=this._parents,a=this._groups;typeof t!="function"&&(t=Fs(t));for(var i=a.length,o=new Array(i),s=new Array(i),u=new Array(i),l=0;l<i;++l){var c=r[l],d=a[l],f=d.length,p=Ws(t.call(c,c&&c.__data__,l,r)),m=p.length,C=s[l]=new Array(m),$=o[l]=new Array(m),S=u[l]=new Array(f);n(c,d,C,$,S,p,e);for(var A=0,P=0,R,H;A<m;++A)if(R=C[A]){for(A>=P&&(P=A+1);!(H=$[P])&&++P<m;);R._next=H||null}}return o=new Yt(o,r),o._enter=s,o._exit=u,o}function Ws(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Us(){return new Yt(this._exit||this._groups.map(Xi),this._parents)}function Vs(t,e,n){var r=this.enter(),a=this,i=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(a=e(a),a&&(a=a.selection())),n==null?i.remove():n(i),r&&a?r.merge(a).order():a}function Ks(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,a=n.length,i=r.length,o=Math.min(a,i),s=new Array(a),u=0;u<o;++u)for(var l=n[u],c=r[u],d=l.length,f=s[u]=new Array(d),p,m=0;m<d;++m)(p=l[m]||c[m])&&(f[m]=p);for(;u<a;++u)s[u]=n[u];return new Yt(s,this._parents)}function Xs(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],a=r.length-1,i=r[a],o;--a>=0;)(o=r[a])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function qs(t){t||(t=js);function e(d,f){return d&&f?t(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,a=new Array(r),i=0;i<r;++i){for(var o=n[i],s=o.length,u=a[i]=new Array(s),l,c=0;c<s;++c)(l=o[c])&&(u[c]=l);u.sort(e)}return new Yt(a,this._parents).order()}function js(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Zs(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Js(){return Array.from(this)}function Qs(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],a=0,i=r.length;a<i;++a){var o=r[a];if(o)return o}return null}function tl(){let t=0;for(const e of this)++t;return t}function el(){return!this.node()}function nl(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var a=e[n],i=0,o=a.length,s;i<o;++i)(s=a[i])&&t.call(s,s.__data__,i,a);return this}function rl(t){return function(){this.removeAttribute(t)}}function al(t){return function(){this.removeAttributeNS(t.space,t.local)}}function il(t,e){return function(){this.setAttribute(t,e)}}function ol(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function sl(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function ll(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function cl(t,e){var n=dr(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?al:rl:typeof e=="function"?n.local?ll:sl:n.local?ol:il)(n,e))}function qi(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function ul(t){return function(){this.style.removeProperty(t)}}function fl(t,e,n){return function(){this.style.setProperty(t,e,n)}}function dl(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function hl(t,e,n){return arguments.length>1?this.each((e==null?ul:typeof e=="function"?dl:fl)(t,e,n??"")):Ge(this.node(),t)}function Ge(t,e){return t.style.getPropertyValue(e)||qi(t).getComputedStyle(t,null).getPropertyValue(e)}function pl(t){return function(){delete this[t]}}function gl(t,e){return function(){this[t]=e}}function yl(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function ml(t,e){return arguments.length>1?this.each((e==null?pl:typeof e=="function"?yl:gl)(t,e)):this.node()[t]}function ji(t){return t.trim().split(/^|\s+/)}function va(t){return t.classList||new Zi(t)}function Zi(t){this._node=t,this._names=ji(t.getAttribute("class")||"")}Zi.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Ji(t,e){for(var n=va(t),r=-1,a=e.length;++r<a;)n.add(e[r])}function Qi(t,e){for(var n=va(t),r=-1,a=e.length;++r<a;)n.remove(e[r])}function vl(t){return function(){Ji(this,t)}}function _l(t){return function(){Qi(this,t)}}function xl(t,e){return function(){(e.apply(this,arguments)?Ji:Qi)(this,t)}}function bl(t,e){var n=ji(t+"");if(arguments.length<2){for(var r=va(this.node()),a=-1,i=n.length;++a<i;)if(!r.contains(n[a]))return!1;return!0}return this.each((typeof e=="function"?xl:e?vl:_l)(n,e))}function wl(){this.textContent=""}function Cl(t){return function(){this.textContent=t}}function kl(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function $l(t){return arguments.length?this.each(t==null?wl:(typeof t=="function"?kl:Cl)(t)):this.node().textContent}function Sl(){this.innerHTML=""}function Ml(t){return function(){this.innerHTML=t}}function El(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Tl(t){return arguments.length?this.each(t==null?Sl:(typeof t=="function"?El:Ml)(t)):this.node().innerHTML}function Al(){this.nextSibling&&this.parentNode.appendChild(this)}function Nl(){return this.each(Al)}function Rl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Pl(){return this.each(Rl)}function Ol(t){var e=typeof t=="function"?t:Bi(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Il(){return null}function Dl(t,e){var n=typeof t=="function"?t:Bi(t),r=e==null?Il:typeof e=="function"?e:ma(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Hl(){var t=this.parentNode;t&&t.removeChild(this)}function Ll(){return this.each(Hl)}function Fl(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function zl(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Gl(t){return this.select(t?zl:Fl)}function Yl(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Bl(t){return function(e){t.call(this,e,this.__data__)}}function Wl(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Ul(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,a=e.length,i;n<a;++n)i=e[n],(!t.type||i.type===t.type)&&i.name===t.name?this.removeEventListener(i.type,i.listener,i.options):e[++r]=i;++r?e.length=r:delete this.__on}}}function Vl(t,e,n){return function(){var r=this.__on,a,i=Bl(e);if(r){for(var o=0,s=r.length;o<s;++o)if((a=r[o]).type===t.type&&a.name===t.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=i,a.options=n),a.value=e;return}}this.addEventListener(t.type,i,n),a={type:t.type,name:t.name,value:e,listener:i,options:n},r?r.push(a):this.__on=[a]}}function Kl(t,e,n){var r=Wl(t+""),a,i=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,l=s.length,c;u<l;++u)for(a=0,c=s[u];a<i;++a)if((o=r[a]).type===c.type&&o.name===c.name)return c.value}return}for(s=e?Vl:Ul,a=0;a<i;++a)this.each(s(r[a],e,n));return this}function to(t,e,n){var r=qi(t),a=r.CustomEvent;typeof a=="function"?a=new a(e,n):(a=r.document.createEvent("Event"),n?(a.initEvent(e,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(e,!1,!1)),t.dispatchEvent(a)}function Xl(t,e){return function(){return to(this,t,e)}}function ql(t,e){return function(){return to(this,t,e.apply(this,arguments))}}function jl(t,e){return this.each((typeof e=="function"?ql:Xl)(t,e))}function*Zl(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],a=0,i=r.length,o;a<i;++a)(o=r[a])&&(yield o)}var _a=[null];function Yt(t,e){this._groups=t,this._parents=e}function pn(){return new Yt([[document.documentElement]],_a)}function Jl(){return this}Yt.prototype=pn.prototype={constructor:Yt,select:$s,selectAll:Es,selectChild:Rs,selectChildren:Ds,filter:Hs,data:Bs,enter:Ls,exit:Us,join:Vs,merge:Ks,selection:Jl,order:Xs,sort:qs,call:Zs,nodes:Js,node:Qs,size:tl,empty:el,each:nl,attr:cl,style:hl,property:ml,classed:bl,text:$l,html:Tl,raise:Nl,lower:Pl,append:Ol,insert:Dl,remove:Ll,clone:Gl,datum:Yl,on:Kl,dispatch:jl,[Symbol.iterator]:Zl};function ht(t){return typeof t=="string"?new Yt([[document.querySelector(t)]],[document.documentElement]):new Yt([[t]],_a)}function Ql(t){let e;for(;e=t.sourceEvent;)t=e;return t}function $e(t,e){if(t=Ql(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}}return[t.pageX,t.pageY]}function Ln(t){return typeof t=="string"?new Yt([document.querySelectorAll(t)],[document.documentElement]):new Yt([Wi(t)],_a)}const Lr={capture:!0,passive:!1};function Fr(t){t.preventDefault(),t.stopImmediatePropagation()}function tc(t){var e=t.document.documentElement,n=ht(t).on("dragstart.drag",Fr,Lr);"onselectstart"in e?n.on("selectstart.drag",Fr,Lr):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function ec(t,e){var n=t.document.documentElement,r=ht(t).on("dragstart.drag",null);e&&(r.on("click.drag",Fr,Lr),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function xa(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function eo(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function gn(){}var an=.7,Fn=1/an,ze="\\s*([+-]?\\d+)\\s*",on="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",de="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nc=/^#([0-9a-f]{3,8})$/,rc=new RegExp(`^rgb\\(${ze},${ze},${ze}\\)$`),ac=new RegExp(`^rgb\\(${de},${de},${de}\\)$`),ic=new RegExp(`^rgba\\(${ze},${ze},${ze},${on}\\)$`),oc=new RegExp(`^rgba\\(${de},${de},${de},${on}\\)$`),sc=new RegExp(`^hsl\\(${on},${de},${de}\\)$`),lc=new RegExp(`^hsla\\(${on},${de},${de},${on}\\)$`),Oa={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};xa(gn,Ce,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ia,formatHex:Ia,formatHex8:cc,formatHsl:uc,formatRgb:Da,toString:Da});function Ia(){return this.rgb().formatHex()}function cc(){return this.rgb().formatHex8()}function uc(){return no(this).formatHsl()}function Da(){return this.rgb().formatRgb()}function Ce(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=nc.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Ha(e):n===3?new Ut(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?mn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?mn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=rc.exec(t))?new Ut(e[1],e[2],e[3],1):(e=ac.exec(t))?new Ut(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=ic.exec(t))?mn(e[1],e[2],e[3],e[4]):(e=oc.exec(t))?mn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=sc.exec(t))?za(e[1],e[2]/100,e[3]/100,1):(e=lc.exec(t))?za(e[1],e[2]/100,e[3]/100,e[4]):Oa.hasOwnProperty(t)?Ha(Oa[t]):t==="transparent"?new Ut(NaN,NaN,NaN,0):null}function Ha(t){return new Ut(t>>16&255,t>>8&255,t&255,1)}function mn(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ut(t,e,n,r)}function fc(t){return t instanceof gn||(t=Ce(t)),t?(t=t.rgb(),new Ut(t.r,t.g,t.b,t.opacity)):new Ut}function zr(t,e,n,r){return arguments.length===1?fc(t):new Ut(t,e,n,r??1)}function Ut(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}xa(Ut,zr,eo(gn,{brighter(t){return t=t==null?Fn:Math.pow(Fn,t),new Ut(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?an:Math.pow(an,t),new Ut(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ut(Re(this.r),Re(this.g),Re(this.b),zn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:La,formatHex:La,formatHex8:dc,formatRgb:Fa,toString:Fa}));function La(){return`#${Ae(this.r)}${Ae(this.g)}${Ae(this.b)}`}function dc(){return`#${Ae(this.r)}${Ae(this.g)}${Ae(this.b)}${Ae((isNaN(this.opacity)?1:this.opacity)*255)}`}function Fa(){const t=zn(this.opacity);return`${t===1?"rgb(":"rgba("}${Re(this.r)}, ${Re(this.g)}, ${Re(this.b)}${t===1?")":`, ${t})`}`}function zn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Re(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ae(t){return t=Re(t),(t<16?"0":"")+t.toString(16)}function za(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ne(t,e,n,r)}function no(t){if(t instanceof ne)return new ne(t.h,t.s,t.l,t.opacity);if(t instanceof gn||(t=Ce(t)),!t)return new ne;if(t instanceof ne)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,a=Math.min(e,n,r),i=Math.max(e,n,r),o=NaN,s=i-a,u=(i+a)/2;return s?(e===i?o=(n-r)/s+(n<r)*6:n===i?o=(r-e)/s+2:o=(e-n)/s+4,s/=u<.5?i+a:2-i-a,o*=60):s=u>0&&u<1?0:o,new ne(o,s,u,t.opacity)}function ro(t,e,n,r){return arguments.length===1?no(t):new ne(t,e,n,r??1)}function ne(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}xa(ne,ro,eo(gn,{brighter(t){return t=t==null?Fn:Math.pow(Fn,t),new ne(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?an:Math.pow(an,t),new ne(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,a=2*n-r;return new Ut(Cr(t>=240?t-240:t+120,a,r),Cr(t,a,r),Cr(t<120?t+240:t-120,a,r),this.opacity)},clamp(){return new ne(Ga(this.h),vn(this.s),vn(this.l),zn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=zn(this.opacity);return`${t===1?"hsl(":"hsla("}${Ga(this.h)}, ${vn(this.s)*100}%, ${vn(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Ga(t){return t=(t||0)%360,t<0?t+360:t}function vn(t){return Math.max(0,Math.min(1,t||0))}function Cr(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const ba=t=>()=>t;function hc(t,e){return function(n){return t+n*e}}function pc(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function gc(t){return(t=+t)==1?ao:function(e,n){return n-e?pc(e,n,t):ba(isNaN(e)?n:e)}}function ao(t,e){var n=e-t;return n?hc(t,n):ba(isNaN(t)?e:t)}const Gn=(function t(e){var n=gc(e);function r(a,i){var o=n((a=zr(a)).r,(i=zr(i)).r),s=n(a.g,i.g),u=n(a.b,i.b),l=ao(a.opacity,i.opacity);return function(c){return a.r=o(c),a.g=s(c),a.b=u(c),a.opacity=l(c),a+""}}return r.gamma=t,r})(1);function yc(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),a;return function(i){for(a=0;a<n;++a)r[a]=t[a]*(1-i)+e[a]*i;return r}}function mc(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function vc(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,a=new Array(r),i=new Array(n),o;for(o=0;o<r;++o)a[o]=wa(t[o],e[o]);for(;o<n;++o)i[o]=e[o];return function(s){for(o=0;o<r;++o)i[o]=a[o](s);return i}}function _c(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function ee(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function xc(t,e){var n={},r={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?n[a]=wa(t[a],e[a]):r[a]=e[a];return function(i){for(a in n)r[a]=n[a](i);return r}}var Gr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,kr=new RegExp(Gr.source,"g");function bc(t){return function(){return t}}function wc(t){return function(e){return t(e)+""}}function io(t,e){var n=Gr.lastIndex=kr.lastIndex=0,r,a,i,o=-1,s=[],u=[];for(t=t+"",e=e+"";(r=Gr.exec(t))&&(a=kr.exec(e));)(i=a.index)>n&&(i=e.slice(n,i),s[o]?s[o]+=i:s[++o]=i),(r=r[0])===(a=a[0])?s[o]?s[o]+=a:s[++o]=a:(s[++o]=null,u.push({i:o,x:ee(r,a)})),n=kr.lastIndex;return n<e.length&&(i=e.slice(n),s[o]?s[o]+=i:s[++o]=i),s.length<2?u[0]?wc(u[0].x):bc(e):(e=u.length,function(l){for(var c=0,d;c<e;++c)s[(d=u[c]).i]=d.x(l);return s.join("")})}function wa(t,e){var n=typeof e,r;return e==null||n==="boolean"?ba(e):(n==="number"?ee:n==="string"?(r=Ce(e))?(e=r,Gn):io:e instanceof Ce?Gn:e instanceof Date?_c:mc(e)?yc:Array.isArray(e)?vc:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?xc:ee)(t,e)}function Cc(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Ya=180/Math.PI,Yr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function oo(t,e,n,r,a,i){var o,s,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,o=-o),{translateX:a,translateY:i,rotate:Math.atan2(e,t)*Ya,skewX:Math.atan(u)*Ya,scaleX:o,scaleY:s}}var _n;function kc(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Yr:oo(e.a,e.b,e.c,e.d,e.e,e.f)}function $c(t){return t==null||(_n||(_n=document.createElementNS("http://www.w3.org/2000/svg","g")),_n.setAttribute("transform",t),!(t=_n.transform.baseVal.consolidate()))?Yr:(t=t.matrix,oo(t.a,t.b,t.c,t.d,t.e,t.f))}function so(t,e,n,r){function a(l){return l.length?l.pop()+" ":""}function i(l,c,d,f,p,m){if(l!==d||c!==f){var C=p.push("translate(",null,e,null,n);m.push({i:C-4,x:ee(l,d)},{i:C-2,x:ee(c,f)})}else(d||f)&&p.push("translate("+d+e+f+n)}function o(l,c,d,f){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),f.push({i:d.push(a(d)+"rotate(",null,r)-2,x:ee(l,c)})):c&&d.push(a(d)+"rotate("+c+r)}function s(l,c,d,f){l!==c?f.push({i:d.push(a(d)+"skewX(",null,r)-2,x:ee(l,c)}):c&&d.push(a(d)+"skewX("+c+r)}function u(l,c,d,f,p,m){if(l!==d||c!==f){var C=p.push(a(p)+"scale(",null,",",null,")");m.push({i:C-4,x:ee(l,d)},{i:C-2,x:ee(c,f)})}else(d!==1||f!==1)&&p.push(a(p)+"scale("+d+","+f+")")}return function(l,c){var d=[],f=[];return l=t(l),c=t(c),i(l.translateX,l.translateY,c.translateX,c.translateY,d,f),o(l.rotate,c.rotate,d,f),s(l.skewX,c.skewX,d,f),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,d,f),l=c=null,function(p){for(var m=-1,C=f.length,$;++m<C;)d[($=f[m]).i]=$.x(p);return d.join("")}}}var Sc=so(kc,"px, ","px)","deg)"),Mc=so($c,", ",")",")"),Ec=1e-12;function Ba(t){return((t=Math.exp(t))+1/t)/2}function Tc(t){return((t=Math.exp(t))-1/t)/2}function Ac(t){return((t=Math.exp(2*t))-1)/(t+1)}const Nc=(function t(e,n,r){function a(i,o){var s=i[0],u=i[1],l=i[2],c=o[0],d=o[1],f=o[2],p=c-s,m=d-u,C=p*p+m*m,$,S;if(C<Ec)S=Math.log(f/l)/e,$=function(L){return[s+L*p,u+L*m,l*Math.exp(e*L*S)]};else{var A=Math.sqrt(C),P=(f*f-l*l+r*C)/(2*l*n*A),R=(f*f-l*l-r*C)/(2*f*n*A),H=Math.log(Math.sqrt(P*P+1)-P),k=Math.log(Math.sqrt(R*R+1)-R);S=(k-H)/e,$=function(L){var Y=L*S,E=Ba(H),D=l/(n*A)*(E*Ac(e*Y+H)-Tc(H));return[s+D*p,u+D*m,l*E/Ba(e*Y+H)]}}return $.duration=S*1e3*e/Math.SQRT2,$}return a.rho=function(i){var o=Math.max(.001,+i),s=o*o,u=s*s;return t(o,s,u)},a})(Math.SQRT2,2,4);var Ye=0,je=0,Ve=0,lo=1e3,Yn,Ze,Bn=0,Pe=0,hr=0,sn=typeof performance=="object"&&performance.now?performance:Date,co=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Ca(){return Pe||(co(Rc),Pe=sn.now()+hr)}function Rc(){Pe=0}function Wn(){this._call=this._time=this._next=null}Wn.prototype=uo.prototype={constructor:Wn,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Ca():+n)+(e==null?0:+e),!this._next&&Ze!==this&&(Ze?Ze._next=this:Yn=this,Ze=this),this._call=t,this._time=n,Br()},stop:function(){this._call&&(this._call=null,this._time=1/0,Br())}};function uo(t,e,n){var r=new Wn;return r.restart(t,e,n),r}function Pc(){Ca(),++Ye;for(var t=Yn,e;t;)(e=Pe-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Ye}function Wa(){Pe=(Bn=sn.now())+hr,Ye=je=0;try{Pc()}finally{Ye=0,Ic(),Pe=0}}function Oc(){var t=sn.now(),e=t-Bn;e>lo&&(hr-=e,Bn=t)}function Ic(){for(var t,e=Yn,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Yn=n);Ze=t,Br(r)}function Br(t){if(!Ye){je&&(je=clearTimeout(je));var e=t-Pe;e>24?(t<1/0&&(je=setTimeout(Wa,t-sn.now()-hr)),Ve&&(Ve=clearInterval(Ve))):(Ve||(Bn=sn.now(),Ve=setInterval(Oc,lo)),Ye=1,co(Wa))}}function Ua(t,e,n){var r=new Wn;return e=e==null?0:+e,r.restart(a=>{r.stop(),t(a+e)},e,n),r}var Dc=ya("start","end","cancel","interrupt"),Hc=[],fo=0,Va=1,Wr=2,Nn=3,Ka=4,Ur=5,Rn=6;function pr(t,e,n,r,a,i){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;Lc(t,n,{name:e,index:r,group:a,on:Dc,tween:Hc,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:fo})}function ka(t,e){var n=oe(t,e);if(n.state>fo)throw new Error("too late; already scheduled");return n}function pe(t,e){var n=oe(t,e);if(n.state>Nn)throw new Error("too late; already running");return n}function oe(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Lc(t,e,n){var r=t.__transition,a;r[e]=n,n.timer=uo(i,0,n.time);function i(l){n.state=Va,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,d,f,p;if(n.state!==Va)return u();for(c in r)if(p=r[c],p.name===n.name){if(p.state===Nn)return Ua(o);p.state===Ka?(p.state=Rn,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete r[c]):+c<e&&(p.state=Rn,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete r[c])}if(Ua(function(){n.state===Nn&&(n.state=Ka,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=Wr,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Wr){for(n.state=Nn,a=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(p=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(a[++d]=p);a.length=d+1}}function s(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=Ur,1),d=-1,f=a.length;++d<f;)a[d].call(t,c);n.state===Ur&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=Rn,n.timer.stop(),delete r[e];for(var l in r)return;delete t.__transition}}function Pn(t,e){var n=t.__transition,r,a,i=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){i=!1;continue}a=r.state>Wr&&r.state<Ur,r.state=Rn,r.timer.stop(),r.on.call(a?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}i&&delete t.__transition}}function Fc(t){return this.each(function(){Pn(this,t)})}function zc(t,e){var n,r;return function(){var a=pe(this,t),i=a.tween;if(i!==n){r=n=i;for(var o=0,s=r.length;o<s;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}a.tween=r}}function Gc(t,e,n){var r,a;if(typeof n!="function")throw new Error;return function(){var i=pe(this,t),o=i.tween;if(o!==r){a=(r=o).slice();for(var s={name:e,value:n},u=0,l=a.length;u<l;++u)if(a[u].name===e){a[u]=s;break}u===l&&a.push(s)}i.tween=a}}function Yc(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=oe(this.node(),n).tween,a=0,i=r.length,o;a<i;++a)if((o=r[a]).name===t)return o.value;return null}return this.each((e==null?zc:Gc)(n,t,e))}function $a(t,e,n){var r=t._id;return t.each(function(){var a=pe(this,r);(a.value||(a.value={}))[e]=n.apply(this,arguments)}),function(a){return oe(a,r).value[e]}}function ho(t,e){var n;return(typeof e=="number"?ee:e instanceof Ce?Gn:(n=Ce(e))?(e=n,Gn):io)(t,e)}function Bc(t){return function(){this.removeAttribute(t)}}function Wc(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Uc(t,e,n){var r,a=n+"",i;return function(){var o=this.getAttribute(t);return o===a?null:o===r?i:i=e(r=o,n)}}function Vc(t,e,n){var r,a=n+"",i;return function(){var o=this.getAttributeNS(t.space,t.local);return o===a?null:o===r?i:i=e(r=o,n)}}function Kc(t,e,n){var r,a,i;return function(){var o,s=n(this),u;return s==null?void this.removeAttribute(t):(o=this.getAttribute(t),u=s+"",o===u?null:o===r&&u===a?i:(a=u,i=e(r=o,s)))}}function Xc(t,e,n){var r,a,i;return function(){var o,s=n(this),u;return s==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),u=s+"",o===u?null:o===r&&u===a?i:(a=u,i=e(r=o,s)))}}function qc(t,e){var n=dr(t),r=n==="transform"?Mc:ho;return this.attrTween(t,typeof e=="function"?(n.local?Xc:Kc)(n,r,$a(this,"attr."+t,e)):e==null?(n.local?Wc:Bc)(n):(n.local?Vc:Uc)(n,r,e))}function jc(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Zc(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Jc(t,e){var n,r;function a(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&Zc(t,i)),n}return a._value=e,a}function Qc(t,e){var n,r;function a(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&jc(t,i)),n}return a._value=e,a}function tu(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=dr(t);return this.tween(n,(r.local?Jc:Qc)(r,e))}function eu(t,e){return function(){ka(this,t).delay=+e.apply(this,arguments)}}function nu(t,e){return e=+e,function(){ka(this,t).delay=e}}function ru(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?eu:nu)(e,t)):oe(this.node(),e).delay}function au(t,e){return function(){pe(this,t).duration=+e.apply(this,arguments)}}function iu(t,e){return e=+e,function(){pe(this,t).duration=e}}function ou(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?au:iu)(e,t)):oe(this.node(),e).duration}function su(t,e){if(typeof e!="function")throw new Error;return function(){pe(this,t).ease=e}}function lu(t){var e=this._id;return arguments.length?this.each(su(e,t)):oe(this.node(),e).ease}function cu(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;pe(this,t).ease=n}}function uu(t){if(typeof t!="function")throw new Error;return this.each(cu(this._id,t))}function fu(t){typeof t!="function"&&(t=Vi(t));for(var e=this._groups,n=e.length,r=new Array(n),a=0;a<n;++a)for(var i=e[a],o=i.length,s=r[a]=[],u,l=0;l<o;++l)(u=i[l])&&t.call(u,u.__data__,l,i)&&s.push(u);return new ve(r,this._parents,this._name,this._id)}function du(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,a=n.length,i=Math.min(r,a),o=new Array(r),s=0;s<i;++s)for(var u=e[s],l=n[s],c=u.length,d=o[s]=new Array(c),f,p=0;p<c;++p)(f=u[p]||l[p])&&(d[p]=f);for(;s<r;++s)o[s]=e[s];return new ve(o,this._parents,this._name,this._id)}function hu(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function pu(t,e,n){var r,a,i=hu(e)?ka:pe;return function(){var o=i(this,t),s=o.on;s!==r&&(a=(r=s).copy()).on(e,n),o.on=a}}function gu(t,e){var n=this._id;return arguments.length<2?oe(this.node(),n).on.on(t):this.each(pu(n,t,e))}function yu(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function mu(){return this.on("end.remove",yu(this._id))}function vu(t){var e=this._name,n=this._id;typeof t!="function"&&(t=ma(t));for(var r=this._groups,a=r.length,i=new Array(a),o=0;o<a;++o)for(var s=r[o],u=s.length,l=i[o]=new Array(u),c,d,f=0;f<u;++f)(c=s[f])&&(d=t.call(c,c.__data__,f,s))&&("__data__"in c&&(d.__data__=c.__data__),l[f]=d,pr(l[f],e,n,f,l,oe(c,n)));return new ve(i,this._parents,e,n)}function _u(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ui(t));for(var r=this._groups,a=r.length,i=[],o=[],s=0;s<a;++s)for(var u=r[s],l=u.length,c,d=0;d<l;++d)if(c=u[d]){for(var f=t.call(c,c.__data__,d,u),p,m=oe(c,n),C=0,$=f.length;C<$;++C)(p=f[C])&&pr(p,e,n,C,f,m);i.push(f),o.push(c)}return new ve(i,o,e,n)}var xu=pn.prototype.constructor;function bu(){return new xu(this._groups,this._parents)}function wu(t,e){var n,r,a;return function(){var i=Ge(this,t),o=(this.style.removeProperty(t),Ge(this,t));return i===o?null:i===n&&o===r?a:a=e(n=i,r=o)}}function po(t){return function(){this.style.removeProperty(t)}}function Cu(t,e,n){var r,a=n+"",i;return function(){var o=Ge(this,t);return o===a?null:o===r?i:i=e(r=o,n)}}function ku(t,e,n){var r,a,i;return function(){var o=Ge(this,t),s=n(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(t),Ge(this,t))),o===u?null:o===r&&u===a?i:(a=u,i=e(r=o,s))}}function $u(t,e){var n,r,a,i="style."+e,o="end."+i,s;return function(){var u=pe(this,t),l=u.on,c=u.value[i]==null?s||(s=po(e)):void 0;(l!==n||a!==c)&&(r=(n=l).copy()).on(o,a=c),u.on=r}}function Su(t,e,n){var r=(t+="")=="transform"?Sc:ho;return e==null?this.styleTween(t,wu(t,r)).on("end.style."+t,po(t)):typeof e=="function"?this.styleTween(t,ku(t,r,$a(this,"style."+t,e))).each($u(this._id,t)):this.styleTween(t,Cu(t,r,e),n).on("end.style."+t,null)}function Mu(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Eu(t,e,n){var r,a;function i(){var o=e.apply(this,arguments);return o!==a&&(r=(a=o)&&Mu(t,o,n)),r}return i._value=e,i}function Tu(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Eu(t,e,n??""))}function Au(t){return function(){this.textContent=t}}function Nu(t){return function(){var e=t(this);this.textContent=e??""}}function Ru(t){return this.tween("text",typeof t=="function"?Nu($a(this,"text",t)):Au(t==null?"":t+""))}function Pu(t){return function(e){this.textContent=t.call(this,e)}}function Ou(t){var e,n;function r(){var a=t.apply(this,arguments);return a!==n&&(e=(n=a)&&Pu(a)),e}return r._value=t,r}function Iu(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Ou(t))}function Du(){for(var t=this._name,e=this._id,n=go(),r=this._groups,a=r.length,i=0;i<a;++i)for(var o=r[i],s=o.length,u,l=0;l<s;++l)if(u=o[l]){var c=oe(u,e);pr(u,t,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new ve(r,this._parents,t,n)}function Hu(){var t,e,n=this,r=n._id,a=n.size();return new Promise(function(i,o){var s={value:o},u={value:function(){--a===0&&i()}};n.each(function(){var l=pe(this,r),c=l.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(u)),l.on=e}),a===0&&i()})}var Lu=0;function ve(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function go(){return++Lu}var ge=pn.prototype;ve.prototype={constructor:ve,select:vu,selectAll:_u,selectChild:ge.selectChild,selectChildren:ge.selectChildren,filter:fu,merge:du,selection:bu,transition:Du,call:ge.call,nodes:ge.nodes,node:ge.node,size:ge.size,empty:ge.empty,each:ge.each,on:gu,attr:qc,attrTween:tu,style:Su,styleTween:Tu,text:Ru,textTween:Iu,remove:mu,tween:Yc,delay:ru,duration:ou,ease:lu,easeVarying:uu,end:Hu,[Symbol.iterator]:ge[Symbol.iterator]};function Fu(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var zu={time:null,delay:0,duration:250,ease:Fu};function Gu(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Yu(t){var e,n;t instanceof ve?(e=t._id,t=t._name):(e=go(),(n=zu).time=Ca(),t=t==null?null:t+"");for(var r=this._groups,a=r.length,i=0;i<a;++i)for(var o=r[i],s=o.length,u,l=0;l<s;++l)(u=o[l])&&pr(u,t,e,l,o,n||Gu(u,e));return new ve(r,this._parents,t,e)}pn.prototype.interrupt=Fc;pn.prototype.transition=Yu;const Vr=Math.PI,Kr=2*Vr,Me=1e-6,Bu=Kr-Me;function yo(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Wu(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return yo;const n=10**e;return function(r){this._+=r[0];for(let a=1,i=r.length;a<i;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}class Uu{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?yo:Wu(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,a){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+a}`}bezierCurveTo(e,n,r,a,i,o){this._append`C${+e},${+n},${+r},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(e,n,r,a,i){if(e=+e,n=+n,r=+r,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,s=this._y1,u=r-e,l=a-n,c=o-e,d=s-n,f=c*c+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>Me)if(!(Math.abs(d*u-l*c)>Me)||!i)this._append`L${this._x1=e},${this._y1=n}`;else{let p=r-o,m=a-s,C=u*u+l*l,$=p*p+m*m,S=Math.sqrt(C),A=Math.sqrt(f),P=i*Math.tan((Vr-Math.acos((C+f-$)/(2*S*A)))/2),R=P/A,H=P/S;Math.abs(R-1)>Me&&this._append`L${e+R*c},${n+R*d}`,this._append`A${i},${i},0,0,${+(d*p>c*m)},${this._x1=e+H*u},${this._y1=n+H*l}`}}arc(e,n,r,a,i,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(a),u=r*Math.sin(a),l=e+s,c=n+u,d=1^o,f=o?a-i:i-a;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Me||Math.abs(this._y1-c)>Me)&&this._append`L${l},${c}`,r&&(f<0&&(f=f%Kr+Kr),f>Bu?this._append`A${r},${r},0,1,${d},${e-s},${n-u}A${r},${r},0,1,${d},${this._x1=l},${this._y1=c}`:f>Me&&this._append`A${r},${r},0,${+(f>=Vr)},${d},${this._x1=e+r*Math.cos(i)},${this._y1=n+r*Math.sin(i)}`)}rect(e,n,r,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+a}h${-r}Z`}toString(){return this._}}function Vu(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Un(t,e){if(!isFinite(t)||t===0)return null;var n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Be(t){return t=Un(Math.abs(t)),t?t[1]:NaN}function Ku(t,e){return function(n,r){for(var a=n.length,i=[],o=0,s=t[0],u=0;a>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),i.push(n.substring(a-=s,a+s)),!((u+=s+1)>r));)s=t[o=(o+1)%t.length];return i.reverse().join(e)}}function Xu(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var qu=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Vn(t){if(!(e=qu.exec(t)))throw new Error("invalid format: "+t);var e;return new Sa({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Vn.prototype=Sa.prototype;function Sa(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Sa.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ju(t){t:for(var e=t.length,n=1,r=-1,a;n<e;++n)switch(t[n]){case".":r=a=n;break;case"0":r===0&&(r=n),a=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(a+1):t}var Kn;function Zu(t,e){var n=Un(t,e);if(!n)return Kn=void 0,t.toPrecision(e);var r=n[0],a=n[1],i=a-(Kn=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+Un(t,Math.max(0,e+i-1))[0]}function Xa(t,e){var n=Un(t,e);if(!n)return t+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}const qa={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Vu,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Xa(t*100,e),r:Xa,s:Zu,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function ja(t){return t}var Za=Array.prototype.map,Ja=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Ju(t){var e=t.grouping===void 0||t.thousands===void 0?ja:Ku(Za.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?ja:Xu(Za.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function l(d,f){d=Vn(d);var p=d.fill,m=d.align,C=d.sign,$=d.symbol,S=d.zero,A=d.width,P=d.comma,R=d.precision,H=d.trim,k=d.type;k==="n"?(P=!0,k="g"):qa[k]||(R===void 0&&(R=12),H=!0,k="g"),(S||p==="0"&&m==="=")&&(S=!0,p="0",m="=");var L=(f&&f.prefix!==void 0?f.prefix:"")+($==="$"?n:$==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():""),Y=($==="$"?r:/[%p]/.test(k)?o:"")+(f&&f.suffix!==void 0?f.suffix:""),E=qa[k],D=/[defgprs%]/.test(k);R=R===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,R)):Math.max(0,Math.min(20,R));function T(M){var b=L,h=Y,g,y,_;if(k==="c")h=E(M)+h,M="";else{M=+M;var x=M<0||1/M<0;if(M=isNaN(M)?u:E(Math.abs(M),R),H&&(M=ju(M)),x&&+M==0&&C!=="+"&&(x=!1),b=(x?C==="("?C:s:C==="-"||C==="("?"":C)+b,h=(k==="s"&&!isNaN(M)&&Kn!==void 0?Ja[8+Kn/3]:"")+h+(x&&C==="("?")":""),D){for(g=-1,y=M.length;++g<y;)if(_=M.charCodeAt(g),48>_||_>57){h=(_===46?a+M.slice(g+1):M.slice(g))+h,M=M.slice(0,g);break}}}P&&!S&&(M=e(M,1/0));var w=b.length+M.length+h.length,N=w<A?new Array(A-w+1).join(p):"";switch(P&&S&&(M=e(N+M,N.length?A-h.length:1/0),N=""),m){case"<":M=b+M+h+N;break;case"=":M=b+N+M+h;break;case"^":M=N.slice(0,w=N.length>>1)+b+M+h+N.slice(w);break;default:M=N+b+M+h;break}return i(M)}return T.toString=function(){return d+""},T}function c(d,f){var p=Math.max(-8,Math.min(8,Math.floor(Be(f)/3)))*3,m=Math.pow(10,-p),C=l((d=Vn(d),d.type="f",d),{suffix:Ja[8+p/3]});return function($){return C(m*$)}}return{format:l,formatPrefix:c}}var xn,gr,mo;Qu({thousands:",",grouping:[3],currency:["$",""]});function Qu(t){return xn=Ju(t),gr=xn.format,mo=xn.formatPrefix,xn}function t0(t){return Math.max(0,-Be(Math.abs(t)))}function e0(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Be(e)/3)))*3-Be(Math.abs(t)))}function n0(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Be(e)-Be(t))+1}var wt=1e-6,Xr=1e-12,vt=Math.PI,jt=vt/2,Qa=vt/4,Zt=vt*2,te=180/vt,St=vt/180,$t=Math.abs,r0=Math.atan,Oe=Math.atan2,_t=Math.cos,qr=Math.hypot,xt=Math.sin,a0=Math.sign||function(t){return t>0?1:t<0?-1:0},ke=Math.sqrt;function i0(t){return t>1?0:t<-1?vt:Math.acos(t)}function Ie(t){return t>1?jt:t<-1?-jt:Math.asin(t)}function Vt(){}function Xn(t,e){t&&ei.hasOwnProperty(t.type)&&ei[t.type](t,e)}var ti={Feature:function(t,e){Xn(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,a=n.length;++r<a;)Xn(n[r].geometry,e)}},ei={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,a=n.length;++r<a;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){jr(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,a=n.length;++r<a;)jr(n[r],e,0)},Polygon:function(t,e){ni(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,a=n.length;++r<a;)ni(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,a=n.length;++r<a;)Xn(n[r],e)}};function jr(t,e,n){var r=-1,a=t.length-n,i;for(e.lineStart();++r<a;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function ni(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)jr(t[n],e,1);e.polygonEnd()}function Te(t,e){t&&ti.hasOwnProperty(t.type)?ti[t.type](t,e):Xn(t,e)}function Zr(t){return[Oe(t[1],t[0]),Ie(t[2])]}function We(t){var e=t[0],n=t[1],r=_t(n);return[r*_t(e),r*xt(e),xt(n)]}function bn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function qn(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function $r(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function wn(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Jr(t){var e=ke(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var Je,jn,Zn,Jn,Qn,tr,er,nr,Qr,ta,ea,vo,_o,Ht,Lt,Ft,re={sphere:Vt,point:Ma,lineStart:ri,lineEnd:ai,polygonStart:function(){re.lineStart=l0,re.lineEnd=c0},polygonEnd:function(){re.lineStart=ri,re.lineEnd=ai}};function Ma(t,e){t*=St,e*=St;var n=_t(e);yn(n*_t(t),n*xt(t),xt(e))}function yn(t,e,n){++Je,Zn+=(t-Zn)/Je,Jn+=(e-Jn)/Je,Qn+=(n-Qn)/Je}function ri(){re.point=o0}function o0(t,e){t*=St,e*=St;var n=_t(e);Ht=n*_t(t),Lt=n*xt(t),Ft=xt(e),re.point=s0,yn(Ht,Lt,Ft)}function s0(t,e){t*=St,e*=St;var n=_t(e),r=n*_t(t),a=n*xt(t),i=xt(e),o=Oe(ke((o=Lt*i-Ft*a)*o+(o=Ft*r-Ht*i)*o+(o=Ht*a-Lt*r)*o),Ht*r+Lt*a+Ft*i);jn+=o,tr+=o*(Ht+(Ht=r)),er+=o*(Lt+(Lt=a)),nr+=o*(Ft+(Ft=i)),yn(Ht,Lt,Ft)}function ai(){re.point=Ma}function l0(){re.point=u0}function c0(){xo(vo,_o),re.point=Ma}function u0(t,e){vo=t,_o=e,t*=St,e*=St,re.point=xo;var n=_t(e);Ht=n*_t(t),Lt=n*xt(t),Ft=xt(e),yn(Ht,Lt,Ft)}function xo(t,e){t*=St,e*=St;var n=_t(e),r=n*_t(t),a=n*xt(t),i=xt(e),o=Lt*i-Ft*a,s=Ft*r-Ht*i,u=Ht*a-Lt*r,l=qr(o,s,u),c=Ie(l),d=l&&-c/l;Qr.add(d*o),ta.add(d*s),ea.add(d*u),jn+=c,tr+=c*(Ht+(Ht=r)),er+=c*(Lt+(Lt=a)),nr+=c*(Ft+(Ft=i)),yn(Ht,Lt,Ft)}function f0(t){Je=jn=Zn=Jn=Qn=tr=er=nr=0,Qr=new fe,ta=new fe,ea=new fe,Te(t,re);var e=+Qr,n=+ta,r=+ea,a=qr(e,n,r);return a<Xr&&(e=tr,n=er,r=nr,jn<wt&&(e=Zn,n=Jn,r=Qn),a=qr(e,n,r),a<Xr)?[NaN,NaN]:[Oe(n,e)*te,Ie(r/a)*te]}function na(t,e){function n(r,a){return r=t(r,a),e(r[0],r[1])}return t.invert&&e.invert&&(n.invert=function(r,a){return r=e.invert(r,a),r&&t.invert(r[0],r[1])}),n}function ra(t,e){return $t(t)>vt&&(t-=Math.round(t/Zt)*Zt),[t,e]}ra.invert=ra;function d0(t,e,n){return(t%=Zt)?e||n?na(oi(t),si(e,n)):oi(t):e||n?si(e,n):ra}function ii(t){return function(e,n){return e+=t,$t(e)>vt&&(e-=Math.round(e/Zt)*Zt),[e,n]}}function oi(t){var e=ii(t);return e.invert=ii(-t),e}function si(t,e){var n=_t(t),r=xt(t),a=_t(e),i=xt(e);function o(s,u){var l=_t(u),c=_t(s)*l,d=xt(s)*l,f=xt(u),p=f*n+c*r;return[Oe(d*a-p*i,c*n-f*r),Ie(p*a+d*i)]}return o.invert=function(s,u){var l=_t(u),c=_t(s)*l,d=xt(s)*l,f=xt(u),p=f*a-d*i;return[Oe(d*a+f*i,c*n+p*r),Ie(p*n-c*r)]},o}function h0(t,e,n,r,a,i){if(n){var o=_t(e),s=xt(e),u=r*n;a==null?(a=e+r*Zt,i=e-u/2):(a=li(o,a),i=li(o,i),(r>0?a<i:a>i)&&(a+=r*Zt));for(var l,c=a;r>0?c>i:c<i;c-=u)l=Zr([o,-s*_t(c),-s*xt(c)]),t.point(l[0],l[1])}}function li(t,e){e=We(e),e[0]-=t,Jr(e);var n=i0(-e[1]);return((-e[2]<0?-n:n)+Zt-wt)%Zt}function bo(){var t=[],e;return{point:function(n,r,a){e.push([n,r,a])},lineStart:function(){t.push(e=[])},lineEnd:Vt,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function On(t,e){return $t(t[0]-e[0])<wt&&$t(t[1]-e[1])<wt}function Cn(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function wo(t,e,n,r,a){var i=[],o=[],s,u;if(t.forEach(function(m){if(!((C=m.length-1)<=0)){var C,$=m[0],S=m[C],A;if(On($,S)){if(!$[2]&&!S[2]){for(a.lineStart(),s=0;s<C;++s)a.point(($=m[s])[0],$[1]);a.lineEnd();return}S[0]+=2*wt}i.push(A=new Cn($,m,null,!0)),o.push(A.o=new Cn($,null,A,!1)),i.push(A=new Cn(S,m,null,!1)),o.push(A.o=new Cn(S,null,A,!0))}}),!!i.length){for(o.sort(e),ci(i),ci(o),s=0,u=o.length;s<u;++s)o[s].e=n=!n;for(var l=i[0],c,d;;){for(var f=l,p=!0;f.v;)if((f=f.n)===l)return;c=f.z,a.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(s=0,u=c.length;s<u;++s)a.point((d=c[s])[0],d[1]);else r(f.x,f.n.x,1,a);f=f.n}else{if(p)for(c=f.p.z,s=c.length-1;s>=0;--s)a.point((d=c[s])[0],d[1]);else r(f.x,f.p.x,-1,a);f=f.p}f=f.o,c=f.z,p=!p}while(!f.v);a.lineEnd()}}}function ci(t){if(e=t.length){for(var e,n=0,r=t[0],a;++n<e;)r.n=a=t[n],a.p=r,r=a;r.n=a=t[0],a.p=r}}function Sr(t){return $t(t[0])<=vt?t[0]:a0(t[0])*(($t(t[0])+vt)%Zt-vt)}function p0(t,e){var n=Sr(e),r=e[1],a=xt(r),i=[xt(n),-_t(n),0],o=0,s=0,u=new fe;a===1?r=jt+wt:a===-1&&(r=-jt-wt);for(var l=0,c=t.length;l<c;++l)if(f=(d=t[l]).length)for(var d,f,p=d[f-1],m=Sr(p),C=p[1]/2+Qa,$=xt(C),S=_t(C),A=0;A<f;++A,m=R,$=k,S=L,p=P){var P=d[A],R=Sr(P),H=P[1]/2+Qa,k=xt(H),L=_t(H),Y=R-m,E=Y>=0?1:-1,D=E*Y,T=D>vt,M=$*k;if(u.add(Oe(M*E*xt(D),S*L+M*_t(D))),o+=T?Y+E*Zt:Y,T^m>=n^R>=n){var b=qn(We(p),We(P));Jr(b);var h=qn(i,b);Jr(h);var g=(T^Y>=0?-1:1)*Ie(h[2]);(r>g||r===g&&(b[0]||b[1]))&&(s+=T^Y>=0?1:-1)}}return(o<-wt||o<wt&&u<-Xr)^s&1}function Co(t,e,n,r){return function(a){var i=e(a),o=bo(),s=e(o),u=!1,l,c,d,f={point:p,lineStart:C,lineEnd:$,polygonStart:function(){f.point=S,f.lineStart=A,f.lineEnd=P,c=[],l=[]},polygonEnd:function(){f.point=p,f.lineStart=C,f.lineEnd=$,c=Fi(c);var R=p0(l,r);c.length?(u||(a.polygonStart(),u=!0),wo(c,y0,R,n,a)):R&&(u||(a.polygonStart(),u=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),u&&(a.polygonEnd(),u=!1),c=l=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function p(R,H){t(R,H)&&a.point(R,H)}function m(R,H){i.point(R,H)}function C(){f.point=m,i.lineStart()}function $(){f.point=p,i.lineEnd()}function S(R,H){d.push([R,H]),s.point(R,H)}function A(){s.lineStart(),d=[]}function P(){S(d[0][0],d[0][1]),s.lineEnd();var R=s.clean(),H=o.result(),k,L=H.length,Y,E,D;if(d.pop(),l.push(d),d=null,!!L){if(R&1){if(E=H[0],(Y=E.length-1)>0){for(u||(a.polygonStart(),u=!0),a.lineStart(),k=0;k<Y;++k)a.point((D=E[k])[0],D[1]);a.lineEnd()}return}L>1&&R&2&&H.push(H.pop().concat(H.shift())),c.push(H.filter(g0))}}return f}}function g0(t){return t.length>1}function y0(t,e){return((t=t.x)[0]<0?t[1]-jt-wt:jt-t[1])-((e=e.x)[0]<0?e[1]-jt-wt:jt-e[1])}const ui=Co(function(){return!0},m0,_0,[-vt,-jt]);function m0(t){var e=NaN,n=NaN,r=NaN,a;return{lineStart:function(){t.lineStart(),a=1},point:function(i,o){var s=i>0?vt:-vt,u=$t(i-e);$t(u-vt)<wt?(t.point(e,n=(n+o)/2>0?jt:-jt),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(s,n),t.point(i,n),a=0):r!==s&&u>=vt&&($t(e-r)<wt&&(e-=r*wt),$t(i-s)<wt&&(i-=s*wt),n=v0(e,n,i,o),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(s,n),a=0),t.point(e=i,n=o),r=s},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-a}}}function v0(t,e,n,r){var a,i,o=xt(t-n);return $t(o)>wt?r0((xt(e)*(i=_t(r))*xt(n)-xt(r)*(a=_t(e))*xt(t))/(a*i*o)):(e+r)/2}function _0(t,e,n,r){var a;if(t==null)a=n*jt,r.point(-vt,a),r.point(0,a),r.point(vt,a),r.point(vt,0),r.point(vt,-a),r.point(0,-a),r.point(-vt,-a),r.point(-vt,0),r.point(-vt,a);else if($t(t[0]-e[0])>wt){var i=t[0]<e[0]?vt:-vt;a=n*i/2,r.point(-i,a),r.point(0,a),r.point(i,a)}else r.point(e[0],e[1])}function x0(t){var e=_t(t),n=2*St,r=e>0,a=$t(e)>wt;function i(c,d,f,p){h0(p,t,n,f,c,d)}function o(c,d){return _t(c)*_t(d)>e}function s(c){var d,f,p,m,C;return{lineStart:function(){m=p=!1,C=1},point:function($,S){var A=[$,S],P,R=o($,S),H=r?R?0:l($,S):R?l($+($<0?vt:-vt),S):0;if(!d&&(m=p=R)&&c.lineStart(),R!==p&&(P=u(d,A),(!P||On(d,P)||On(A,P))&&(A[2]=1)),R!==p)C=0,R?(c.lineStart(),P=u(A,d),c.point(P[0],P[1])):(P=u(d,A),c.point(P[0],P[1],2),c.lineEnd()),d=P;else if(a&&d&&r^R){var k;!(H&f)&&(k=u(A,d,!0))&&(C=0,r?(c.lineStart(),c.point(k[0][0],k[0][1]),c.point(k[1][0],k[1][1]),c.lineEnd()):(c.point(k[1][0],k[1][1]),c.lineEnd(),c.lineStart(),c.point(k[0][0],k[0][1],3)))}R&&(!d||!On(d,A))&&c.point(A[0],A[1]),d=A,p=R,f=H},lineEnd:function(){p&&c.lineEnd(),d=null},clean:function(){return C|(m&&p)<<1}}}function u(c,d,f){var p=We(c),m=We(d),C=[1,0,0],$=qn(p,m),S=bn($,$),A=$[0],P=S-A*A;if(!P)return!f&&c;var R=e*S/P,H=-e*A/P,k=qn(C,$),L=wn(C,R),Y=wn($,H);$r(L,Y);var E=k,D=bn(L,E),T=bn(E,E),M=D*D-T*(bn(L,L)-1);if(!(M<0)){var b=ke(M),h=wn(E,(-D-b)/T);if($r(h,L),h=Zr(h),!f)return h;var g=c[0],y=d[0],_=c[1],x=d[1],w;y<g&&(w=g,g=y,y=w);var N=y-g,F=$t(N-vt)<wt,B=F||N<wt;if(!F&&x<_&&(w=_,_=x,x=w),B?F?_+x>0^h[1]<($t(h[0]-g)<wt?_:x):_<=h[1]&&h[1]<=x:N>vt^(g<=h[0]&&h[0]<=y)){var q=wn(E,(-D+b)/T);return $r(q,L),[h,Zr(q)]}}}function l(c,d){var f=r?t:vt-t,p=0;return c<-f?p|=1:c>f&&(p|=2),d<-f?p|=4:d>f&&(p|=8),p}return Co(o,s,i,r?[0,-t]:[-vt,t-vt])}function b0(t,e,n,r,a,i){var o=t[0],s=t[1],u=e[0],l=e[1],c=0,d=1,f=u-o,p=l-s,m;if(m=n-o,!(!f&&m>0)){if(m/=f,f<0){if(m<c)return;m<d&&(d=m)}else if(f>0){if(m>d)return;m>c&&(c=m)}if(m=a-o,!(!f&&m<0)){if(m/=f,f<0){if(m>d)return;m>c&&(c=m)}else if(f>0){if(m<c)return;m<d&&(d=m)}if(m=r-s,!(!p&&m>0)){if(m/=p,p<0){if(m<c)return;m<d&&(d=m)}else if(p>0){if(m>d)return;m>c&&(c=m)}if(m=i-s,!(!p&&m<0)){if(m/=p,p<0){if(m>d)return;m>c&&(c=m)}else if(p>0){if(m<c)return;m<d&&(d=m)}return c>0&&(t[0]=o+c*f,t[1]=s+c*p),d<1&&(e[0]=o+d*f,e[1]=s+d*p),!0}}}}}var Qe=1e9,kn=-Qe;function w0(t,e,n,r){function a(l,c){return t<=l&&l<=n&&e<=c&&c<=r}function i(l,c,d,f){var p=0,m=0;if(l==null||(p=o(l,d))!==(m=o(c,d))||u(l,c)<0^d>0)do f.point(p===0||p===3?t:n,p>1?r:e);while((p=(p+d+4)%4)!==m);else f.point(c[0],c[1])}function o(l,c){return $t(l[0]-t)<wt?c>0?0:3:$t(l[0]-n)<wt?c>0?2:1:$t(l[1]-e)<wt?c>0?1:0:c>0?3:2}function s(l,c){return u(l.x,c.x)}function u(l,c){var d=o(l,1),f=o(c,1);return d!==f?d-f:d===0?c[1]-l[1]:d===1?l[0]-c[0]:d===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,d=bo(),f,p,m,C,$,S,A,P,R,H,k,L={point:Y,lineStart:M,lineEnd:b,polygonStart:D,polygonEnd:T};function Y(g,y){a(g,y)&&c.point(g,y)}function E(){for(var g=0,y=0,_=p.length;y<_;++y)for(var x=p[y],w=1,N=x.length,F=x[0],B,q,U=F[0],Q=F[1];w<N;++w)B=U,q=Q,F=x[w],U=F[0],Q=F[1],q<=r?Q>r&&(U-B)*(r-q)>(Q-q)*(t-B)&&++g:Q<=r&&(U-B)*(r-q)<(Q-q)*(t-B)&&--g;return g}function D(){c=d,f=[],p=[],k=!0}function T(){var g=E(),y=k&&g,_=(f=Fi(f)).length;(y||_)&&(l.polygonStart(),y&&(l.lineStart(),i(null,null,1,l),l.lineEnd()),_&&wo(f,s,g,i,l),l.polygonEnd()),c=l,f=p=m=null}function M(){L.point=h,p&&p.push(m=[]),H=!0,R=!1,A=P=NaN}function b(){f&&(h(C,$),S&&R&&d.rejoin(),f.push(d.result())),L.point=Y,R&&c.lineEnd()}function h(g,y){var _=a(g,y);if(p&&m.push([g,y]),H)C=g,$=y,S=_,H=!1,_&&(c.lineStart(),c.point(g,y));else if(_&&R)c.point(g,y);else{var x=[A=Math.max(kn,Math.min(Qe,A)),P=Math.max(kn,Math.min(Qe,P))],w=[g=Math.max(kn,Math.min(Qe,g)),y=Math.max(kn,Math.min(Qe,y))];b0(x,w,t,e,n,r)?(R||(c.lineStart(),c.point(x[0],x[1])),c.point(w[0],w[1]),_||c.lineEnd(),k=!1):_&&(c.lineStart(),c.point(g,y),k=!1)}A=g,P=y,R=_}return L}}const aa=t=>t;var Mr=new fe,ia=new fe,ko,$o,oa,sa,ye={point:Vt,lineStart:Vt,lineEnd:Vt,polygonStart:function(){ye.lineStart=C0,ye.lineEnd=$0},polygonEnd:function(){ye.lineStart=ye.lineEnd=ye.point=Vt,Mr.add($t(ia)),ia=new fe},result:function(){var t=Mr/2;return Mr=new fe,t}};function C0(){ye.point=k0}function k0(t,e){ye.point=So,ko=oa=t,$o=sa=e}function So(t,e){ia.add(sa*t-oa*e),oa=t,sa=e}function $0(){So(ko,$o)}var Ue=1/0,rr=Ue,ln=-Ue,ar=ln,ir={point:S0,lineStart:Vt,lineEnd:Vt,polygonStart:Vt,polygonEnd:Vt,result:function(){var t=[[Ue,rr],[ln,ar]];return ln=ar=-(rr=Ue=1/0),t}};function S0(t,e){t<Ue&&(Ue=t),t>ln&&(ln=t),e<rr&&(rr=e),e>ar&&(ar=e)}var la=0,ca=0,tn=0,or=0,sr=0,He=0,ua=0,fa=0,en=0,Mo,Eo,le,ce,qt={point:De,lineStart:fi,lineEnd:di,polygonStart:function(){qt.lineStart=T0,qt.lineEnd=A0},polygonEnd:function(){qt.point=De,qt.lineStart=fi,qt.lineEnd=di},result:function(){var t=en?[ua/en,fa/en]:He?[or/He,sr/He]:tn?[la/tn,ca/tn]:[NaN,NaN];return la=ca=tn=or=sr=He=ua=fa=en=0,t}};function De(t,e){la+=t,ca+=e,++tn}function fi(){qt.point=M0}function M0(t,e){qt.point=E0,De(le=t,ce=e)}function E0(t,e){var n=t-le,r=e-ce,a=ke(n*n+r*r);or+=a*(le+t)/2,sr+=a*(ce+e)/2,He+=a,De(le=t,ce=e)}function di(){qt.point=De}function T0(){qt.point=N0}function A0(){To(Mo,Eo)}function N0(t,e){qt.point=To,De(Mo=le=t,Eo=ce=e)}function To(t,e){var n=t-le,r=e-ce,a=ke(n*n+r*r);or+=a*(le+t)/2,sr+=a*(ce+e)/2,He+=a,a=ce*t-le*e,ua+=a*(le+t),fa+=a*(ce+e),en+=a*3,De(le=t,ce=e)}function Ao(t){this._context=t}Ao.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Zt);break}}},result:Vt};var da=new fe,Er,No,Ro,nn,rn,cn={point:Vt,lineStart:function(){cn.point=R0},lineEnd:function(){Er&&Po(No,Ro),cn.point=Vt},polygonStart:function(){Er=!0},polygonEnd:function(){Er=null},result:function(){var t=+da;return da=new fe,t}};function R0(t,e){cn.point=Po,No=nn=t,Ro=rn=e}function Po(t,e){nn-=t,rn-=e,da.add(ke(nn*nn+rn*rn)),nn=t,rn=e}let hi,lr,pi,gi;class yi{constructor(e){this._append=e==null?Oo:P0(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==pi||this._append!==lr){const r=this._radius,a=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,pi=r,lr=this._append,gi=this._,this._=a}this._+=gi;break}}}result(){const e=this._;return this._="",e.length?e:null}}function Oo(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function P0(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return Oo;if(e!==hi){const n=10**e;hi=e,lr=function(a){let i=1;this._+=a[0];for(const o=a.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+a[i]}}return lr}function O0(t,e){let n=3,r=4.5,a,i;function o(s){return s&&(typeof r=="function"&&i.pointRadius(+r.apply(this,arguments)),Te(s,a(i))),i.result()}return o.area=function(s){return Te(s,a(ye)),ye.result()},o.measure=function(s){return Te(s,a(cn)),cn.result()},o.bounds=function(s){return Te(s,a(ir)),ir.result()},o.centroid=function(s){return Te(s,a(qt)),qt.result()},o.projection=function(s){return arguments.length?(a=s==null?(t=null,aa):(t=s).stream,o):t},o.context=function(s){return arguments.length?(i=s==null?(e=null,new yi(n)):new Ao(e=s),typeof r!="function"&&i.pointRadius(r),o):e},o.pointRadius=function(s){return arguments.length?(r=typeof s=="function"?s:(i.pointRadius(+s),+s),o):r},o.digits=function(s){if(!arguments.length)return n;if(s==null)n=null;else{const u=Math.floor(s);if(!(u>=0))throw new RangeError(`invalid digits: ${s}`);n=u}return e===null&&(i=new yi(n)),o},o.projection(t).digits(n).context(e)}function Ea(t){return function(e){var n=new ha;for(var r in t)n[r]=t[r];return n.stream=e,n}}function ha(){}ha.prototype={constructor:ha,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Ta(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),Te(n,t.stream(ir)),e(ir.result()),r!=null&&t.clipExtent(r),t}function Io(t,e,n){return Ta(t,function(r){var a=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=Math.min(a/(r[1][0]-r[0][0]),i/(r[1][1]-r[0][1])),s=+e[0][0]+(a-o*(r[1][0]+r[0][0]))/2,u=+e[0][1]+(i-o*(r[1][1]+r[0][1]))/2;t.scale(150*o).translate([s,u])},n)}function I0(t,e,n){return Io(t,[[0,0],e],n)}function D0(t,e,n){return Ta(t,function(r){var a=+e,i=a/(r[1][0]-r[0][0]),o=(a-i*(r[1][0]+r[0][0]))/2,s=-i*r[0][1];t.scale(150*i).translate([o,s])},n)}function H0(t,e,n){return Ta(t,function(r){var a=+e,i=a/(r[1][1]-r[0][1]),o=-i*r[0][0],s=(a-i*(r[1][1]+r[0][1]))/2;t.scale(150*i).translate([o,s])},n)}var mi=16,L0=_t(30*St);function vi(t,e){return+e?z0(t,e):F0(t)}function F0(t){return Ea({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function z0(t,e){function n(r,a,i,o,s,u,l,c,d,f,p,m,C,$){var S=l-r,A=c-a,P=S*S+A*A;if(P>4*e&&C--){var R=o+f,H=s+p,k=u+m,L=ke(R*R+H*H+k*k),Y=Ie(k/=L),E=$t($t(k)-1)<wt||$t(i-d)<wt?(i+d)/2:Oe(H,R),D=t(E,Y),T=D[0],M=D[1],b=T-r,h=M-a,g=A*b-S*h;(g*g/P>e||$t((S*b+A*h)/P-.5)>.3||o*f+s*p+u*m<L0)&&(n(r,a,i,o,s,u,T,M,E,R/=L,H/=L,k,C,$),$.point(T,M),n(T,M,E,R,H,k,l,c,d,f,p,m,C,$))}}return function(r){var a,i,o,s,u,l,c,d,f,p,m,C,$={point:S,lineStart:A,lineEnd:R,polygonStart:function(){r.polygonStart(),$.lineStart=H},polygonEnd:function(){r.polygonEnd(),$.lineStart=A}};function S(Y,E){Y=t(Y,E),r.point(Y[0],Y[1])}function A(){d=NaN,$.point=P,r.lineStart()}function P(Y,E){var D=We([Y,E]),T=t(Y,E);n(d,f,c,p,m,C,d=T[0],f=T[1],c=Y,p=D[0],m=D[1],C=D[2],mi,r),r.point(d,f)}function R(){$.point=S,r.lineEnd()}function H(){A(),$.point=k,$.lineEnd=L}function k(Y,E){P(a=Y,E),i=d,o=f,s=p,u=m,l=C,$.point=P}function L(){n(d,f,c,p,m,C,i,o,a,s,u,l,mi,r),$.lineEnd=R,R()}return $}}var G0=Ea({point:function(t,e){this.stream.point(t*St,e*St)}});function Y0(t){return Ea({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}function B0(t,e,n,r,a){function i(o,s){return o*=r,s*=a,[e+t*o,n-t*s]}return i.invert=function(o,s){return[(o-e)/t*r,(n-s)/t*a]},i}function _i(t,e,n,r,a,i){if(!i)return B0(t,e,n,r,a);var o=_t(i),s=xt(i),u=o*t,l=s*t,c=o/t,d=s/t,f=(s*n-o*e)/t,p=(s*e+o*n)/t;function m(C,$){return C*=r,$*=a,[u*C-l*$+e,n-l*C-u*$]}return m.invert=function(C,$){return[r*(c*C-d*$+f),a*(p-d*C-c*$)]},m}function W0(t){return U0(function(){return t})()}function U0(t){var e,n=150,r=480,a=250,i=0,o=0,s=0,u=0,l=0,c,d=0,f=1,p=1,m=null,C=ui,$=null,S,A,P,R=aa,H=.5,k,L,Y,E,D;function T(g){return Y(g[0]*St,g[1]*St)}function M(g){return g=Y.invert(g[0],g[1]),g&&[g[0]*te,g[1]*te]}T.stream=function(g){return E&&D===g?E:E=G0(Y0(c)(C(k(R(D=g)))))},T.preclip=function(g){return arguments.length?(C=g,m=void 0,h()):C},T.postclip=function(g){return arguments.length?(R=g,$=S=A=P=null,h()):R},T.clipAngle=function(g){return arguments.length?(C=+g?x0(m=g*St):(m=null,ui),h()):m*te},T.clipExtent=function(g){return arguments.length?(R=g==null?($=S=A=P=null,aa):w0($=+g[0][0],S=+g[0][1],A=+g[1][0],P=+g[1][1]),h()):$==null?null:[[$,S],[A,P]]},T.scale=function(g){return arguments.length?(n=+g,b()):n},T.translate=function(g){return arguments.length?(r=+g[0],a=+g[1],b()):[r,a]},T.center=function(g){return arguments.length?(i=g[0]%360*St,o=g[1]%360*St,b()):[i*te,o*te]},T.rotate=function(g){return arguments.length?(s=g[0]%360*St,u=g[1]%360*St,l=g.length>2?g[2]%360*St:0,b()):[s*te,u*te,l*te]},T.angle=function(g){return arguments.length?(d=g%360*St,b()):d*te},T.reflectX=function(g){return arguments.length?(f=g?-1:1,b()):f<0},T.reflectY=function(g){return arguments.length?(p=g?-1:1,b()):p<0},T.precision=function(g){return arguments.length?(k=vi(L,H=g*g),h()):ke(H)},T.fitExtent=function(g,y){return Io(T,g,y)},T.fitSize=function(g,y){return I0(T,g,y)},T.fitWidth=function(g,y){return D0(T,g,y)},T.fitHeight=function(g,y){return H0(T,g,y)};function b(){var g=_i(n,0,0,f,p,d).apply(null,e(i,o)),y=_i(n,r-g[0],a-g[1],f,p,d);return c=d0(s,u,l),L=na(e,y),Y=na(c,L),k=vi(L,H),h()}function h(){return E=D=null,T}return function(){return e=t.apply(this,arguments),T.invert=e.invert&&M,b()}}function Do(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),e*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}Do.invert=function(t,e){var n=e,r=25,a;do{var i=n*n,o=i*i;n-=a=(n*(1.007226+i*(.015085+o*(-.044475+.028874*i-.005916*o)))-e)/(1.007226+i*(.015085*3+o*(-.044475*7+.028874*9*i-.005916*11*o)))}while($t(a)>wt&&--r>0);return[t/(.8707+(i=n*n)*(-.131979+i*(-.013791+i*i*i*(.003971-.001529*i)))),n]};function V0(){return W0(Do).scale(175.295)}function K0(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function X0(){return this.eachAfter(K0)}function q0(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this}function j0(t,e){for(var n=this,r=[n],a,i,o=-1;n=r.pop();)if(t.call(e,n,++o,this),a=n.children)for(i=a.length-1;i>=0;--i)r.push(a[i]);return this}function Z0(t,e){for(var n=this,r=[n],a=[],i,o,s,u=-1;n=r.pop();)if(a.push(n),i=n.children)for(o=0,s=i.length;o<s;++o)r.push(i[o]);for(;n=a.pop();)t.call(e,n,++u,this);return this}function J0(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r}function Q0(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,a=r&&r.length;--a>=0;)n+=r[a].value;e.value=n})}function tf(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function ef(t){for(var e=this,n=nf(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var a=r.length;t!==n;)r.splice(a,0,t),t=t.parent;return r}function nf(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),a=null;for(t=n.pop(),e=r.pop();t===e;)a=t,t=n.pop(),e=r.pop();return a}function rf(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function af(){return Array.from(this)}function of(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function sf(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*lf(){var t=this,e,n=[t],r,a,i;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,r=t.children)for(a=0,i=r.length;a<i;++a)n.push(r[a]);while(n.length)}function Aa(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=ff)):e===void 0&&(e=uf);for(var n=new cr(t),r,a=[n],i,o,s,u;r=a.pop();)if((o=e(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,s=u-1;s>=0;--s)a.push(i=o[s]=new cr(o[s])),i.parent=r,i.depth=r.depth+1;return n.eachBefore(hf)}function cf(){return Aa(this).eachBefore(df)}function uf(t){return t.children}function ff(t){return Array.isArray(t)?t[1]:null}function df(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function hf(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function cr(t){this.data=t,this.depth=this.height=0,this.parent=null}cr.prototype=Aa.prototype={constructor:cr,count:X0,each:q0,eachAfter:Z0,eachBefore:j0,find:J0,sum:Q0,sort:tf,path:ef,ancestors:rf,descendants:af,leaves:of,links:sf,copy:cf,[Symbol.iterator]:lf};function pf(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function gf(t,e,n,r,a){for(var i=t.children,o,s=-1,u=i.length,l=t.value&&(r-e)/t.value;++s<u;)o=i[s],o.y0=n,o.y1=a,o.x0=e,o.x1=e+=o.value*l}function yf(){var t=1,e=1,n=0,r=!1;function a(o){var s=o.height+1;return o.x0=o.y0=n,o.x1=t,o.y1=e/s,o.eachBefore(i(e,s)),r&&o.eachBefore(pf),o}function i(o,s){return function(u){u.children&&gf(u,u.x0,o*(u.depth+1)/s,u.x1,o*(u.depth+2)/s);var l=u.x0,c=u.y0,d=u.x1-n,f=u.y1-n;d<l&&(l=d=(l+d)/2),f<c&&(c=f=(c+f)/2),u.x0=l,u.y0=c,u.x1=d,u.y1=f}}return a.round=function(o){return arguments.length?(r=!!o,a):r},a.size=function(o){return arguments.length?(t=+o[0],e=+o[1],a):[t,e]},a.padding=function(o){return arguments.length?(n=+o,a):n},a}function mf(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function vf(t){return function(){return t}}function _f(t){return+t}var xi=[0,1];function Le(t){return t}function pa(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:vf(isNaN(e)?NaN:.5)}function xf(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function bf(t,e,n){var r=t[0],a=t[1],i=e[0],o=e[1];return a<r?(r=pa(a,r),i=n(o,i)):(r=pa(r,a),i=n(i,o)),function(s){return i(r(s))}}function wf(t,e,n){var r=Math.min(t.length,e.length)-1,a=new Array(r),i=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)a[o]=pa(t[o],t[o+1]),i[o]=n(e[o],e[o+1]);return function(s){var u=rs(t,s,1,r)-1;return i[u](a[u](s))}}function Cf(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function kf(){var t=xi,e=xi,n=wa,r,a,i,o=Le,s,u,l;function c(){var f=Math.min(t.length,e.length);return o!==Le&&(o=xf(t[0],t[f-1])),s=f>2?wf:bf,u=l=null,d}function d(f){return f==null||isNaN(f=+f)?i:(u||(u=s(t.map(r),e,n)))(r(o(f)))}return d.invert=function(f){return o(a((l||(l=s(e,t.map(r),ee)))(f)))},d.domain=function(f){return arguments.length?(t=Array.from(f,_f),c()):t.slice()},d.range=function(f){return arguments.length?(e=Array.from(f),c()):e.slice()},d.rangeRound=function(f){return e=Array.from(f),n=Cc,c()},d.clamp=function(f){return arguments.length?(o=f?!0:Le,c()):o!==Le},d.interpolate=function(f){return arguments.length?(n=f,c()):n},d.unknown=function(f){return arguments.length?(i=f,d):i},function(f,p){return r=f,a=p,c()}}function $f(){return kf()(Le,Le)}function Sf(t,e,n,r){var a=cs(t,e,n),i;switch(r=Vn(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(i=e0(a,o))&&(r.precision=i),mo(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=n0(a,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=t0(a))&&(r.precision=i-(r.type==="%")*2);break}}return gr(r)}function Mf(t){var e=t.domain;return t.ticks=function(n){var r=e();return ls(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var a=e();return Sf(a[0],a[a.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),a=0,i=r.length-1,o=r[a],s=r[i],u,l,c=10;for(s<o&&(l=o,o=s,s=l,l=a,a=i,i=l);c-- >0;){if(l=Ir(o,s,n),l===u)return r[a]=o,r[i]=s,e(r);if(l>0)o=Math.floor(o/l)*l,s=Math.ceil(s/l)*l;else if(l<0)o=Math.ceil(o*l)/l,s=Math.floor(s*l)/l;else break;u=l}return t},t}function ae(){var t=$f();return t.copy=function(){return Cf(t,ae())},mf.apply(t,arguments),Mf(t)}function Et(t){return function(){return t}}const bi=Math.abs,It=Math.atan2,Se=Math.cos,Ef=Math.max,Tr=Math.min,se=Math.sin,Fe=Math.sqrt,Bt=1e-12,un=Math.PI,ur=un/2,In=2*un;function Tf(t){return t>1?0:t<-1?un:Math.acos(t)}function wi(t){return t>=1?ur:t<=-1?-ur:Math.asin(t)}function Ho(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Uu(e)}function Af(t){return t.innerRadius}function Nf(t){return t.outerRadius}function Rf(t){return t.startAngle}function Pf(t){return t.endAngle}function Of(t){return t&&t.padAngle}function If(t,e,n,r,a,i,o,s){var u=n-t,l=r-e,c=o-a,d=s-i,f=d*u-c*l;if(!(f*f<Bt))return f=(c*(e-i)-d*(t-a))/f,[t+f*u,e+f*l]}function $n(t,e,n,r,a,i,o){var s=t-n,u=e-r,l=(o?i:-i)/Fe(s*s+u*u),c=l*u,d=-l*s,f=t+c,p=e+d,m=n+c,C=r+d,$=(f+m)/2,S=(p+C)/2,A=m-f,P=C-p,R=A*A+P*P,H=a-i,k=f*C-m*p,L=(P<0?-1:1)*Fe(Ef(0,H*H*R-k*k)),Y=(k*P-A*L)/R,E=(-k*A-P*L)/R,D=(k*P+A*L)/R,T=(-k*A+P*L)/R,M=Y-$,b=E-S,h=D-$,g=T-S;return M*M+b*b>h*h+g*g&&(Y=D,E=T),{cx:Y,cy:E,x01:-c,y01:-d,x11:Y*(a/H-1),y11:E*(a/H-1)}}function fn(){var t=Af,e=Nf,n=Et(0),r=null,a=Rf,i=Pf,o=Of,s=null,u=Ho(l);function l(){var c,d,f=+t.apply(this,arguments),p=+e.apply(this,arguments),m=a.apply(this,arguments)-ur,C=i.apply(this,arguments)-ur,$=bi(C-m),S=C>m;if(s||(s=c=u()),p<f&&(d=p,p=f,f=d),!(p>Bt))s.moveTo(0,0);else if($>In-Bt)s.moveTo(p*Se(m),p*se(m)),s.arc(0,0,p,m,C,!S),f>Bt&&(s.moveTo(f*Se(C),f*se(C)),s.arc(0,0,f,C,m,S));else{var A=m,P=C,R=m,H=C,k=$,L=$,Y=o.apply(this,arguments)/2,E=Y>Bt&&(r?+r.apply(this,arguments):Fe(f*f+p*p)),D=Tr(bi(p-f)/2,+n.apply(this,arguments)),T=D,M=D,b,h;if(E>Bt){var g=wi(E/f*se(Y)),y=wi(E/p*se(Y));(k-=g*2)>Bt?(g*=S?1:-1,R+=g,H-=g):(k=0,R=H=(m+C)/2),(L-=y*2)>Bt?(y*=S?1:-1,A+=y,P-=y):(L=0,A=P=(m+C)/2)}var _=p*Se(A),x=p*se(A),w=f*Se(H),N=f*se(H);if(D>Bt){var F=p*Se(P),B=p*se(P),q=f*Se(R),U=f*se(R),Q;if($<un)if(Q=If(_,x,q,U,F,B,w,N)){var Z=_-Q[0],at=x-Q[1],gt=F-Q[0],J=B-Q[1],Pt=1/se(Tf((Z*gt+at*J)/(Fe(Z*Z+at*at)*Fe(gt*gt+J*J)))/2),Rt=Fe(Q[0]*Q[0]+Q[1]*Q[1]);T=Tr(D,(f-Rt)/(Pt-1)),M=Tr(D,(p-Rt)/(Pt+1))}else T=M=0}L>Bt?M>Bt?(b=$n(q,U,_,x,p,M,S),h=$n(F,B,w,N,p,M,S),s.moveTo(b.cx+b.x01,b.cy+b.y01),M<D?s.arc(b.cx,b.cy,M,It(b.y01,b.x01),It(h.y01,h.x01),!S):(s.arc(b.cx,b.cy,M,It(b.y01,b.x01),It(b.y11,b.x11),!S),s.arc(0,0,p,It(b.cy+b.y11,b.cx+b.x11),It(h.cy+h.y11,h.cx+h.x11),!S),s.arc(h.cx,h.cy,M,It(h.y11,h.x11),It(h.y01,h.x01),!S))):(s.moveTo(_,x),s.arc(0,0,p,A,P,!S)):s.moveTo(_,x),!(f>Bt)||!(k>Bt)?s.lineTo(w,N):T>Bt?(b=$n(w,N,F,B,f,-T,S),h=$n(_,x,q,U,f,-T,S),s.lineTo(b.cx+b.x01,b.cy+b.y01),T<D?s.arc(b.cx,b.cy,T,It(b.y01,b.x01),It(h.y01,h.x01),!S):(s.arc(b.cx,b.cy,T,It(b.y01,b.x01),It(b.y11,b.x11),!S),s.arc(0,0,f,It(b.cy+b.y11,b.cx+b.x11),It(h.cy+h.y11,h.cx+h.x11),S),s.arc(h.cx,h.cy,T,It(h.y11,h.x11),It(h.y01,h.x01),!S))):s.arc(0,0,f,H,R,S)}if(s.closePath(),c)return s=null,c+""||null}return l.centroid=function(){var c=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,d=(+a.apply(this,arguments)+ +i.apply(this,arguments))/2-un/2;return[Se(d)*c,se(d)*c]},l.innerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Et(+c),l):t},l.outerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:Et(+c),l):e},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:Et(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:Et(+c),l):r},l.startAngle=function(c){return arguments.length?(a=typeof c=="function"?c:Et(+c),l):a},l.endAngle=function(c){return arguments.length?(i=typeof c=="function"?c:Et(+c),l):i},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:Et(+c),l):o},l.context=function(c){return arguments.length?(s=c??null,l):s},l}function Lo(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Fo(t){this._context=t}Fo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Df(t){return new Fo(t)}function Hf(t){return t[0]}function Lf(t){return t[1]}function Ee(t,e){var n=Et(!0),r=null,a=Df,i=null,o=Ho(s);t=typeof t=="function"?t:t===void 0?Hf:Et(t),e=typeof e=="function"?e:e===void 0?Lf:Et(e);function s(u){var l,c=(u=Lo(u)).length,d,f=!1,p;for(r==null&&(i=a(p=o())),l=0;l<=c;++l)!(l<c&&n(d=u[l],l,u))===f&&((f=!f)?i.lineStart():i.lineEnd()),f&&i.point(+t(d,l,u),+e(d,l,u));if(p)return i=null,p+""||null}return s.x=function(u){return arguments.length?(t=typeof u=="function"?u:Et(+u),s):t},s.y=function(u){return arguments.length?(e=typeof u=="function"?u:Et(+u),s):e},s.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Et(!!u),s):n},s.curve=function(u){return arguments.length?(a=u,r!=null&&(i=a(r)),s):a},s.context=function(u){return arguments.length?(u==null?r=i=null:i=a(r=u),s):r},s}function Ff(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function zf(t){return t}function zo(){var t=zf,e=Ff,n=null,r=Et(0),a=Et(In),i=Et(0);function o(s){var u,l=(s=Lo(s)).length,c,d,f=0,p=new Array(l),m=new Array(l),C=+r.apply(this,arguments),$=Math.min(In,Math.max(-In,a.apply(this,arguments)-C)),S,A=Math.min(Math.abs($)/l,i.apply(this,arguments)),P=A*($<0?-1:1),R;for(u=0;u<l;++u)(R=m[p[u]=u]=+t(s[u],u,s))>0&&(f+=R);for(e!=null?p.sort(function(H,k){return e(m[H],m[k])}):n!=null&&p.sort(function(H,k){return n(s[H],s[k])}),u=0,d=f?($-l*P)/f:0;u<l;++u,C=S)c=p[u],R=m[c],S=C+(R>0?R*d:0)+P,m[c]={data:s[c],index:u,value:R,startAngle:C,endAngle:S,padAngle:A};return m}return o.value=function(s){return arguments.length?(t=typeof s=="function"?s:Et(+s),o):t},o.sortValues=function(s){return arguments.length?(e=s,n=null,o):e},o.sort=function(s){return arguments.length?(n=s,e=null,o):n},o.startAngle=function(s){return arguments.length?(r=typeof s=="function"?s:Et(+s),o):r},o.endAngle=function(s){return arguments.length?(a=typeof s=="function"?s:Et(+s),o):a},o.padAngle=function(s){return arguments.length?(i=typeof s=="function"?s:Et(+s),o):i},o}function Ci(t){return t<0?-1:1}function ki(t,e,n){var r=t._x1-t._x0,a=e-t._x1,i=(t._y1-t._y0)/(r||a<0&&-0),o=(n-t._y1)/(a||r<0&&-0),s=(i*a+o*r)/(r+a);return(Ci(i)+Ci(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(s))||0}function $i(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Ar(t,e,n){var r=t._x0,a=t._y0,i=t._x1,o=t._y1,s=(i-r)/3;t._context.bezierCurveTo(r+s,a+s*e,i-s,o-s*n,i,o)}function fr(t){this._context=t}fr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ar(this,this._t0,$i(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Ar(this,$i(this,n=ki(this,t,e)),n);break;default:Ar(this,this._t0,n=ki(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};Object.create(fr.prototype).point=function(t,e){fr.prototype.point.call(this,e,t)};function Ke(t){return new fr(t)}const Sn=t=>()=>t;function Gf(t,{sourceEvent:e,target:n,transform:r,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:a}})}function me(t,e,n){this.k=t,this.x=e,this.y=n}me.prototype={constructor:me,scale:function(t){return t===1?this:new me(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new me(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var dn=new me(1,0,0);me.prototype;function Nr(t){t.stopImmediatePropagation()}function Xe(t){t.preventDefault(),t.stopImmediatePropagation()}function Yf(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Bf(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Si(){return this.__zoom||dn}function Wf(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Uf(){return navigator.maxTouchPoints||"ontouchstart"in this}function Vf(t,e,n){var r=t.invertX(e[0][0])-n[0][0],a=t.invertX(e[1][0])-n[1][0],i=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(a>r?(r+a)/2:Math.min(0,r)||Math.max(0,a),o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o))}function Go(){var t=Yf,e=Bf,n=Vf,r=Wf,a=Uf,i=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],s=250,u=Nc,l=ya("start","zoom","end"),c,d,f,p=500,m=150,C=0,$=10;function S(h){h.property("__zoom",Si).on("wheel.zoom",Y,{passive:!1}).on("mousedown.zoom",E).on("dblclick.zoom",D).filter(a).on("touchstart.zoom",T).on("touchmove.zoom",M).on("touchend.zoom touchcancel.zoom",b).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}S.transform=function(h,g,y,_){var x=h.selection?h.selection():h;x.property("__zoom",Si),h!==x?H(h,g,y,_):x.interrupt().each(function(){k(this,arguments).event(_).start().zoom(null,typeof g=="function"?g.apply(this,arguments):g).end()})},S.scaleBy=function(h,g,y,_){S.scaleTo(h,function(){var x=this.__zoom.k,w=typeof g=="function"?g.apply(this,arguments):g;return x*w},y,_)},S.scaleTo=function(h,g,y,_){S.transform(h,function(){var x=e.apply(this,arguments),w=this.__zoom,N=y==null?R(x):typeof y=="function"?y.apply(this,arguments):y,F=w.invert(N),B=typeof g=="function"?g.apply(this,arguments):g;return n(P(A(w,B),N,F),x,o)},y,_)},S.translateBy=function(h,g,y,_){S.transform(h,function(){return n(this.__zoom.translate(typeof g=="function"?g.apply(this,arguments):g,typeof y=="function"?y.apply(this,arguments):y),e.apply(this,arguments),o)},null,_)},S.translateTo=function(h,g,y,_,x){S.transform(h,function(){var w=e.apply(this,arguments),N=this.__zoom,F=_==null?R(w):typeof _=="function"?_.apply(this,arguments):_;return n(dn.translate(F[0],F[1]).scale(N.k).translate(typeof g=="function"?-g.apply(this,arguments):-g,typeof y=="function"?-y.apply(this,arguments):-y),w,o)},_,x)};function A(h,g){return g=Math.max(i[0],Math.min(i[1],g)),g===h.k?h:new me(g,h.x,h.y)}function P(h,g,y){var _=g[0]-y[0]*h.k,x=g[1]-y[1]*h.k;return _===h.x&&x===h.y?h:new me(h.k,_,x)}function R(h){return[(+h[0][0]+ +h[1][0])/2,(+h[0][1]+ +h[1][1])/2]}function H(h,g,y,_){h.on("start.zoom",function(){k(this,arguments).event(_).start()}).on("interrupt.zoom end.zoom",function(){k(this,arguments).event(_).end()}).tween("zoom",function(){var x=this,w=arguments,N=k(x,w).event(_),F=e.apply(x,w),B=y==null?R(F):typeof y=="function"?y.apply(x,w):y,q=Math.max(F[1][0]-F[0][0],F[1][1]-F[0][1]),U=x.__zoom,Q=typeof g=="function"?g.apply(x,w):g,Z=u(U.invert(B).concat(q/U.k),Q.invert(B).concat(q/Q.k));return function(at){if(at===1)at=Q;else{var gt=Z(at),J=q/gt[2];at=new me(J,B[0]-gt[0]*J,B[1]-gt[1]*J)}N.zoom(null,at)}})}function k(h,g,y){return!y&&h.__zooming||new L(h,g)}function L(h,g){this.that=h,this.args=g,this.active=0,this.sourceEvent=null,this.extent=e.apply(h,g),this.taps=0}L.prototype={event:function(h){return h&&(this.sourceEvent=h),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(h,g){return this.mouse&&h!=="mouse"&&(this.mouse[1]=g.invert(this.mouse[0])),this.touch0&&h!=="touch"&&(this.touch0[1]=g.invert(this.touch0[0])),this.touch1&&h!=="touch"&&(this.touch1[1]=g.invert(this.touch1[0])),this.that.__zoom=g,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(h){var g=ht(this.that).datum();l.call(h,this.that,new Gf(h,{sourceEvent:this.sourceEvent,target:S,transform:this.that.__zoom,dispatch:l}),g)}};function Y(h,...g){if(!t.apply(this,arguments))return;var y=k(this,g).event(h),_=this.__zoom,x=Math.max(i[0],Math.min(i[1],_.k*Math.pow(2,r.apply(this,arguments)))),w=$e(h);if(y.wheel)(y.mouse[0][0]!==w[0]||y.mouse[0][1]!==w[1])&&(y.mouse[1]=_.invert(y.mouse[0]=w)),clearTimeout(y.wheel);else{if(_.k===x)return;y.mouse=[w,_.invert(w)],Pn(this),y.start()}Xe(h),y.wheel=setTimeout(N,m),y.zoom("mouse",n(P(A(_,x),y.mouse[0],y.mouse[1]),y.extent,o));function N(){y.wheel=null,y.end()}}function E(h,...g){if(f||!t.apply(this,arguments))return;var y=h.currentTarget,_=k(this,g,!0).event(h),x=ht(h.view).on("mousemove.zoom",B,!0).on("mouseup.zoom",q,!0),w=$e(h,y),N=h.clientX,F=h.clientY;tc(h.view),Nr(h),_.mouse=[w,this.__zoom.invert(w)],Pn(this),_.start();function B(U){if(Xe(U),!_.moved){var Q=U.clientX-N,Z=U.clientY-F;_.moved=Q*Q+Z*Z>C}_.event(U).zoom("mouse",n(P(_.that.__zoom,_.mouse[0]=$e(U,y),_.mouse[1]),_.extent,o))}function q(U){x.on("mousemove.zoom mouseup.zoom",null),ec(U.view,_.moved),Xe(U),_.event(U).end()}}function D(h,...g){if(t.apply(this,arguments)){var y=this.__zoom,_=$e(h.changedTouches?h.changedTouches[0]:h,this),x=y.invert(_),w=y.k*(h.shiftKey?.5:2),N=n(P(A(y,w),_,x),e.apply(this,g),o);Xe(h),s>0?ht(this).transition().duration(s).call(H,N,_,h):ht(this).call(S.transform,N,_,h)}}function T(h,...g){if(t.apply(this,arguments)){var y=h.touches,_=y.length,x=k(this,g,h.changedTouches.length===_).event(h),w,N,F,B;for(Nr(h),N=0;N<_;++N)F=y[N],B=$e(F,this),B=[B,this.__zoom.invert(B),F.identifier],x.touch0?!x.touch1&&x.touch0[2]!==B[2]&&(x.touch1=B,x.taps=0):(x.touch0=B,w=!0,x.taps=1+!!c);c&&(c=clearTimeout(c)),w&&(x.taps<2&&(d=B[0],c=setTimeout(function(){c=null},p)),Pn(this),x.start())}}function M(h,...g){if(this.__zooming){var y=k(this,g).event(h),_=h.changedTouches,x=_.length,w,N,F,B;for(Xe(h),w=0;w<x;++w)N=_[w],F=$e(N,this),y.touch0&&y.touch0[2]===N.identifier?y.touch0[0]=F:y.touch1&&y.touch1[2]===N.identifier&&(y.touch1[0]=F);if(N=y.that.__zoom,y.touch1){var q=y.touch0[0],U=y.touch0[1],Q=y.touch1[0],Z=y.touch1[1],at=(at=Q[0]-q[0])*at+(at=Q[1]-q[1])*at,gt=(gt=Z[0]-U[0])*gt+(gt=Z[1]-U[1])*gt;N=A(N,Math.sqrt(at/gt)),F=[(q[0]+Q[0])/2,(q[1]+Q[1])/2],B=[(U[0]+Z[0])/2,(U[1]+Z[1])/2]}else if(y.touch0)F=y.touch0[0],B=y.touch0[1];else return;y.zoom("touch",n(P(N,F,B),y.extent,o))}}function b(h,...g){if(this.__zooming){var y=k(this,g).event(h),_=h.changedTouches,x=_.length,w,N;for(Nr(h),f&&clearTimeout(f),f=setTimeout(function(){f=null},p),w=0;w<x;++w)N=_[w],y.touch0&&y.touch0[2]===N.identifier?delete y.touch0:y.touch1&&y.touch1[2]===N.identifier&&delete y.touch1;if(y.touch1&&!y.touch0&&(y.touch0=y.touch1,delete y.touch1),y.touch0)y.touch0[1]=this.__zoom.invert(y.touch0[0]);else if(y.end(),y.taps===2&&(N=$e(N,this),Math.hypot(d[0]-N[0],d[1]-N[1])<$)){var F=ht(this).on("dblclick.zoom");F&&F.apply(this,arguments)}}}return S.wheelDelta=function(h){return arguments.length?(r=typeof h=="function"?h:Sn(+h),S):r},S.filter=function(h){return arguments.length?(t=typeof h=="function"?h:Sn(!!h),S):t},S.touchable=function(h){return arguments.length?(a=typeof h=="function"?h:Sn(!!h),S):a},S.extent=function(h){return arguments.length?(e=typeof h=="function"?h:Sn([[+h[0][0],+h[0][1]],[+h[1][0],+h[1][1]]]),S):e},S.scaleExtent=function(h){return arguments.length?(i[0]=+h[0],i[1]=+h[1],S):[i[0],i[1]]},S.translateExtent=function(h){return arguments.length?(o[0][0]=+h[0][0],o[1][0]=+h[1][0],o[0][1]=+h[0][1],o[1][1]=+h[1][1],S):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},S.constrain=function(h){return arguments.length?(n=h,S):n},S.duration=function(h){return arguments.length?(s=+h,S):s},S.interpolate=function(h){return arguments.length?(u=h,S):u},S.on=function(){var h=l.on.apply(l,arguments);return h===l?S:h},S.clickDistance=function(h){return arguments.length?(C=(h=+h)*h,S):Math.sqrt(C)},S.tapDistance=function(h){return arguments.length?($=+h,S):$},S}const Kf={__name:"SunburstChart",props:{data:{type:Object,default:()=>({})},year:{type:[String,Number],default:null},country:{type:Object,default:null}},setup(t){const e=t,n=ft(null),r=ft(null),a={top:60,right:20,bottom:20,left:60},i=ft(500),o=ft(500);function s(f,p){return Math.min(f,p)/2-Math.max(a.top,a.right,a.bottom,a.left)}const u={residential:"#63b3df",service:"#76d76b",industry:"#898989",transport:"#ffb56b"};function l(){if(!e.data||!e.data.children||e.data.children.length===0)return;const f=i.value,p=o.value,m=s(f,p),C=ht(n.value);C.selectAll("*").remove(),C.attr("width",f).attr("height",p).attr("viewBox",`0 0 ${f} ${p}`);const $=C.append("g").attr("transform",`translate(${f/2},${p/2})`),S=yf().size([2*Math.PI,m*1.2]),A=fn().startAngle(k=>k.x0).endAngle(k=>k.x1).innerRadius(k=>k.y0).outerRadius(k=>k.y1),P=c(e.data),R=Aa(P).sum(k=>k.children?0:k.value).sort((k,L)=>L.value-k.value);S(R),hn(R.descendants(),k=>k.depth),Ln(".tooltip-container").remove();const H=ht("body").append("div").attr("class","tooltip-container");$.selectAll("path").data(R.descendants()).enter().append("path").attr("d",A).style("fill",k=>k.depth===2?u[k.parent.data.name.toLowerCase()]:k.depth===1?u[k.data.name.toLowerCase()]:"none").style("stroke","#fff").style("stroke-width","1px").style("cursor","pointer").on("mouseover",function(k,L){ht(this).style("opacity",.7),H.style("display","block").html(`
        <div style="font-weight:bold">
          ${L.data.name||"Unknown"}
        </div>
        <div>
          ${(L.value||0).toFixed(2)} PJ
        </div>
      `)}).on("mousemove",function(k){H.style("left",k.pageX+12+"px").style("top",k.pageY-28+"px")}).on("mouseout",function(){ht(this).style("opacity",1),H.style("display","none")}),$.selectAll("text").data(R.descendants().filter(k=>k.depth>0&&k.x1-k.x0>.05)).enter().append("text").attr("transform",k=>{const L=(k.x0+k.x1)/2,Y=(k.y0+k.y1)/2,E=L*180/Math.PI;return`
      rotate(${E-90})
      translate(${Y}, 0)
      rotate(${E<180?0:180})
    `}).attr("text-anchor","middle").attr("dy","0.35em").style("font-size",k=>k.depth===2?"10px":"13px").style("fill","#333").style("font-weight","bold").text(k=>k.data.name.length>15?k.data.name.substring(0,12)+"...":k.data.name)}function c(f){if(!f.children)return f;const p=f.children.map(c).filter(m=>m.children?ds(m.children,C=>C.value??0)>0:(m.value??0)>0);return p.length===0?{name:f.name,value:f.value}:{...f,children:p}}ie(()=>{zt(()=>{const f=r.value?r.value.getBoundingClientRect():{width:500},p=Math.max(200,Math.min(f.width,500));i.value=p,o.value=p;const m=new ResizeObserver(C=>{for(const $ of C){const S=$.contentRect,A=Math.max(200,Math.min(S.width,500));i.value=A,o.value=A,zt(()=>l())}});r.value&&m.observe(r.value),d.value=m,l()})}),Kt(()=>[e.data,e.year,e.country],()=>{zt(()=>{l()})},{deep:!0});const d=ft(null);return _e(()=>{if(d.value)try{d.value.disconnect()}catch{}Ln(".tooltip-container").remove()}),(f,p)=>(G(),z("div",{class:"chart",ref_key:"containerRef",ref:r,style:{width:"100%"}},[(G(),z("svg",{ref_key:"svgRef",ref:n,preserveAspectRatio:"xMidYMid meet"},null,512))],512))}},Xf={id:"consumption",class:"page-section"},qf={class:"section-container"},jf={key:0,class:"no-data"},Zf={key:1,class:"loading"},Jf={key:2,class:"error"},Qf={key:3,class:"charts-container"},td={__name:"Consumption",setup(t){const e=Jt(),n=rt(()=>e.sunburstData.name?.length>0&&e.pieChartData[0]);return(r,a)=>(G(),z("section",Xf,[a[2]||(a[2]=v("div",{class:"chart-header"},[v("h2",null,"How Different Sectors Use Energy?")],-1)),v("div",qf,[n.value?X(e).isLoading?(G(),z("div",Zf,"Loading energy data...")):X(e).error?(G(),z("div",Jf,pt(X(e).error),1)):(G(),z("div",Qf,[Ct(Kf,{data:X(e).sunburstData,year:X(e).selectedYear,country:X(e).selectedCountry},null,8,["data","year","country"])])):(G(),z("div",jf,[...a[0]||(a[0]=[v("span",null,"No consumption data available for this configuration.",-1)])])),a[1]||(a[1]=v("div",{class:"text-container"},[v("p",null,[bt(" Have you ever wondered which sectors actually consume the most energy across countries? Energy use varies greatly between "),v("strong",null,"households, services, transport, and industry"),bt(". We often assume industry dominates because energy-intensive production processes requires large amounts of heat and power. But as you can see with this sunburst chart, many countries consume nearly as much or sometimes more energy in the transport and residential sectors as in industry. ")]),v("p",null," But still the largest energy use by sector comes mostly from industry. The biggest industrial slice is often Manufacturing, which combines food production, textiles, machinery, electronics, and more. "),v("p",null," Transport accounts only slightly behind industry. It is dominated by cars and trucks, which is always the largest share of transport demand. "),v("p",null," Within households, space heating is almost always the dominant enduse. Kosovo and Estonia appears with unusual high residential energy use not because households consume an unusually large amount of energy, but because its transport and industrial energy use are very small. "),v("p",null," Most countries have relatively low energy demand in the service sector, but some service-intensive economies such as Malta have a high share of energy demand in the service sector due to their tourism-driven economy. ")],-1))]),a[3]||(a[3]=he('<div class="chart-meta" data-v-7c93b4b5><div class="meta-section" data-v-7c93b4b5><span class="meta-label" data-v-7c93b4b5>Source</span><ul class="meta-list" data-v-7c93b4b5><li data-v-7c93b4b5><strong data-v-7c93b4b5>IEA</strong><a href="https://www.iea.org/data-and-statistics/data-product/energy-efficiency-indicators-highlights" target="_blank" rel="noopener" data-v-7c93b4b5> Energy End-Uses &amp; Efficiency Indicators </a> (sector-level consumption by end-use category). Columns: <code data-v-7c93b4b5>Country</code>, <code data-v-7c93b4b5>End use</code>, <code data-v-7c93b4b5>Product</code>. </li></ul></div></div>',1))]))}},ed=Tt(td,[["__scopeId","data-v-7c93b4b5"]]),nd="data:image/svg+xml,%3csvg%20width='4408'%20height='1516'%20viewBox='0%200%204408%201516'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M4345.75%201289.5C4318.88%201266.74%204285.87%201256.39%204263.37%201226.27C4215.24%201161.87%204240.84%201054.7%204245.2%20963.611C4254.04%20779.158%204143.98%20598.469%204007.7%20573.693C3976.53%20568.026%203944.11%20569.383%203914.77%20554.151C3832.84%20511.617%203814.46%20370.555%203767.31%20270.965C3708.15%20145.992%203590.36%2081.0607%203481.06%20100.083C3371.76%20119.106%203273.88%20215.253%203217.19%20342.28L3215.54%20346.616C3141.46%20442.432%203018.53%20461.059%202930.44%20389.818C2844.63%20320.423%202799.7%20185.661%202720.28%20103.687C2643.06%2024.0011%202538.86%202.11167%202442.71%2022.5201C2346.55%2042.9262%202257.17%20101.884%202174.39%20170.723C2136.22%20202.463%202098.86%20236.616%202057.69%20260.664C1924.73%20338.345%201757.48%20293.507%201656.86%20153.213C1632.87%20119.755%201612.3%2081.416%201584.83%2053.1893C1514.79%20-18.7896%201414.51%20-9.71456%201332.3%2033.1184C1250.09%2075.9514%201177.88%20147.586%201097.41%20196.006C1016.93%20244.425%20919.93%20267.45%20842.534%20210.685C793.435%20174.676%20757.04%20109.945%20704.609%2083.7586C645.759%2054.3683%20575.757%2082.7327%20532.484%20143.867C489.211%20205.003%20471.348%20293.793%20476.988%20377.832C480.953%20436.91%20495.584%20494.349%20496.491%20553.653C498.371%20676.623%20433.823%20796.067%20346.234%20831.692C271.321%20862.164%20186.681%20835.987%20115.242%20878.962C30.6368%20929.857%20-10.2127%201069.12%202.17795%201192.58C14.5686%201316.05%2069.8738%201424.47%20133.479%201515.1H4393.5C4424.46%201434.74%204402.72%201337.73%204345.75%201289.5Z'%20fill='%23D9CEC4'/%3e%3cpath%20d='M2938.07%20743.111C2947.65%20743.111%202956.6%20745.725%202964.32%20750.215C2971.32%20729.89%202990.56%20715.263%203013.26%20715.263C3016.97%20715.263%203020.59%20715.669%203024.07%20716.411C3033.02%20680.562%203065.42%20654%203104.04%20654C3142.34%20654%203174.52%20680.118%203183.78%20715.512C3185.41%20715.396%203187.04%20715.263%203188.7%20715.263C3201.29%20715.263%203213.05%20718.687%203223.22%20724.574C3232.7%20718.707%203243.84%20715.263%203255.81%20715.263C3290.1%20715.263%203317.9%20743.064%203317.9%20777.361H3257.4H3193.71H3175.57H3132.01H3119.98H3108.68H3064.02H3032.51H2987.14H2985.78H2962.49H2889C2896.38%20757.385%202915.54%20743.111%202938.07%20743.111Z'%20fill='%23FCF1E6'/%3e%3cpath%20d='M805.303%20601.706C817.853%20601.706%20829.576%20605.697%20839.695%20612.552C848.864%20581.52%20858.665%20552.678%20888.411%20552.678C893.273%20552.678%20909.905%20506.661%20947.249%20527.273C966.248%20534.144%20953.8%20496.737%20983.376%20466.2C1015.39%20438.717%201061.9%20453.986%201071.73%20513.532C1073.86%20513.356%201136.03%20488.339%201153.75%20520.615C1167.51%20538.937%201165.61%20564.415%201178.93%20573.403C1191.36%20564.446%201205.95%20559.187%201221.63%20559.187C1266.57%20559.187%201303%20601.635%201303%20654H1223.72H1140.26H1116.5H1059.42H1043.66H1028.86H970.335H929.042H869.6H867.811H837.301H741C750.669%20623.5%20775.77%20601.706%20805.303%20601.706Z'%20fill='%23FCF1E6'/%3e%3cpath%20d='M2251.37%20584.529H2187.31H2167.01H2165.82H2126.28H2098.8H2059.87H2050.02H2039.54H2001.56H1985.76H1930.23H1877.49C1877.49%20554.634%201901.73%20530.396%201931.63%20530.396C1938.09%20530.396%201944.26%20531.589%201950.01%20533.665C1960.66%20524.114%201974.69%20518.259%201990.13%20518.259C1997.35%20518.259%202004.24%20519.598%202010.66%20521.929C2017.63%20513.769%202027.97%20508.579%202039.54%20508.579C2047.7%20508.579%202055.24%20511.175%202061.43%20515.554C2072.81%20499.015%202091.85%20488.157%202113.44%20488.157C2143.69%20488.157%202168.93%20509.441%202175.09%20537.84C2183.43%20528.804%202195.33%20523.111%202208.6%20523.111C2233.8%20523.111%202254.24%20543.542%202254.24%20568.748C2254.23%20574.306%202253.19%20579.606%202251.37%20584.529Z'%20fill='%23FCF1E6'/%3e%3c/svg%3e",rd="/MyEnergyProfile/assets/consumption_service-D0ioY7Vx.svg",ad="/MyEnergyProfile/assets/consumption_residential-C9jPUtXp.svg",id="/MyEnergyProfile/assets/consumption_transport-qyh_MufO.svg",od="/MyEnergyProfile/assets/consumption_industry-C8RP9hDo.svg",sd={__name:"PieChart",props:{data:{type:Object,default:()=>({})},year:{type:[String,Number],default:null},selectedSector:{type:String,default:"Residential"},country:{type:Object,default:null}},setup(t){const e=t,n=ft(null),r=ft(null),a=ft(500),i=ft(500),o={top:60,right:20,bottom:20,left:60},s=ft(null);function u(d,f){return Math.min(d,f)/2-Math.max(o.top,o.right,o.bottom,o.left)}const l={motor:"rgb(162, 158, 162)",jet:"rgb(109, 151, 214)",lpg:"rgb(240, 220, 120)",electricity:"rgb(99, 179, 223)",heat:"rgb(255, 130, 130)",biofuel:"rgb(144, 210, 125)",gas:"rgb(128, 128, 128)",coal:"rgb(70, 70, 70)",other:"rgb(150, 180, 220)","Oil and oil products":"rgb(236, 154, 111)","Heavy fuel oil":"rgb(139, 99, 11)",diesel:"rgb(205, 149, 88)"};function c(){const d=e.data.find(E=>E?.name===e.selectedSector)?.energyType,f=a.value,p=i.value,m=u(f,p);if(!e.data||!d||d.length===0)return;const C=ht(n.value);C.selectAll("*").remove(),C.attr("width",f).attr("height",p).attr("viewBox",`0 0 ${f} ${p}`);const $=C.append("g").attr("transform",`translate(${f/2},${p/2})`),S=zo().value(E=>E.value).sort(null),A=fn().innerRadius(0).outerRadius(m),P=S(d),R=ht("body").append("div").attr("class","tooltip-container");$.selectAll("path").data(P).enter().append("path").attr("d",A).style("fill",E=>{const D=Object.entries(l).find(([T])=>E.data.name.toLowerCase().includes(T.toLowerCase()));return D?D[1]:"#fff"}).style("stroke","#fff").style("stroke-width","1px").style("cursor","pointer").on("mouseover",function(E,D){ht(this).style("opacity",.7),R.style("display","block").html(`
          <div style="font-weight: bold;">${D.data.name}</div>
          <div>${D.data.value?D.data.value.toFixed(2)+" PJ":""}</div>
        `)}).on("mousemove",function(E){R.style("left",E.pageX+12+"px").style("top",E.pageY-28+"px")}).on("mouseout",function(){ht(this).style("opacity",1),R.style("display","none")});const H=fn().innerRadius(m*.7).outerRadius(m*.7),k=m,L=20,Y=[];$.selectAll("text").data(P).enter().append("text").attr("class","pie-label").attr("transform",function(E,D){const[T,M]=H.centroid(E),b=Math.atan2(M,T);let h=k+L,g=0,y,_;for(;g<5&&(y=h*Math.cos(b),_=h*Math.sin(b),!!Y.some(w=>Math.hypot(w.x-y,w.y-_)<25));)h+=12,g++;return Y.push({x:y,y:_}),`translate(${y}, ${_})`}).attr("text-anchor",E=>{const[D,T]=H.centroid(E);return D>=0?"start":"end"}).attr("dy","0.35em").style("font-size","15px").text(E=>E.data.name),$.selectAll("polyline").data(P).enter().append("polyline").attr("points",function(E,D){const T=Y[D];if(!T)return"";const[M,b]=H.centroid(E),h=Math.atan2(b,M),g=k*Math.cos(h),y=k*Math.sin(h),_=(k+L/2)*Math.cos(h),x=(k+L/2)*Math.sin(h),w=5,N=T.x-w*Math.cos(h),F=T.y-w*Math.sin(h);return[[g,y],[_,x],[N,F]]}).style("fill","none").style("stroke","black").style("stroke-width","1")}return ie(()=>{zt(()=>{const d=r.value?r.value.getBoundingClientRect():{width:500},f=Math.max(200,Math.min(d.width,400));a.value=f*1.5,i.value=f*.8;const p=new ResizeObserver(m=>{for(const C of m){const $=C.contentRect,S=Math.max(200,Math.min($.width,400));a.value=S*1.5,i.value=S*.8,zt(()=>c())}});r.value&&p.observe(r.value),s.value=p,c()})}),Kt(()=>[e.data,e.year,e.selectedSector,e.country],()=>{zt(()=>{c()})},{deep:!0}),_e(()=>{if(s.value)try{s.value.disconnect()}catch{}Ln(".tooltip-container").remove()}),(d,f)=>(G(),z("div",{class:"chart",ref_key:"containerRef",ref:r,style:{width:"100%"}},[(G(),z("svg",{ref_key:"svgRef",ref:n,preserveAspectRatio:"xMidYMid meet"},null,512))],512))}},ld={id:"sectorfuels",class:"page-section"},cd={class:"section-container"},ud={key:0,class:"no-data"},fd={key:1,class:"loading"},dd={key:2,class:"error"},hd={key:3,class:"charts-container"},pd={class:"interactive-graphic"},gd={class:"interactive-image-container"},yd={__name:"SectorFuels",setup(t){const e=Jt(),n=ft("Residential"),r=rt(()=>e.sunburstData.name?.length>0&&e.pieChartData[0]);return(a,i)=>(G(),z("section",ld,[i[7]||(i[7]=v("div",{class:"chart-header"},[v("h2",null,"What Energy Sources Do Different Sectors Rely On?")],-1)),v("div",cd,[r.value?X(e).isLoading?(G(),z("div",fd,"Loading energy data...")):X(e).error?(G(),z("div",dd,pt(X(e).error),1)):(G(),z("div",hd,[v("div",pd,[v("img",{src:nd,alt:"Energy Consumption Background",style:{width:"100%",cursor:"pointer"},onClick:i[0]||(i[0]=o=>n.value="Residential"),class:"bg-image"}),v("div",gd,[v("img",{src:rd,alt:"Energy Consumption Service",style:{width:"20%",cursor:"pointer"},onClick:i[1]||(i[1]=o=>n.value="Service"),class:Wt([{active:n.value==="Service"},"interactive-image svg-glow"])},null,2),v("img",{src:ad,alt:"Energy Consumption Residential",style:{width:"15%",cursor:"pointer"},onClick:i[2]||(i[2]=o=>n.value="Residential"),class:Wt([{active:n.value==="Residential"},"interactive-image svg-glow"])},null,2),v("img",{src:id,alt:"Energy Consumption Transport",style:{width:"20%",cursor:"pointer"},onClick:i[3]||(i[3]=o=>n.value="Transport"),class:Wt([{active:n.value==="Transport"},"interactive-image svg-glow"])},null,2),v("img",{src:od,alt:"Energy Consumption Industry",style:{width:"30%",cursor:"pointer"},onClick:i[4]||(i[4]=o=>n.value="Industry"),class:Wt([{active:n.value==="Industry"},"interactive-image svg-glow"])},null,2)])]),Ct(sd,{data:X(e).pieChartData,year:X(e).selectedYear,country:X(e).selectedCountry,selectedSector:n.value},null,8,["data","year","country","selectedSector"])])):(G(),z("div",ud,[...i[5]||(i[5]=[v("span",null,"No consumption data available for this configuration.",-1)])])),i[6]||(i[6]=v("div",{class:"text-container"},[v("p",null," This visualization shows how different sectors rely on different types of energy sources. Although the exact shares change from country to country and over time, some broad patterns appear consistently across the dataset. "),v("p",null,[v("strong",null,"Residential"),bt(" energy use is mixed. Households tend to combine several energy carriers, commonly electricity, gas, biofuels, or district heat, depending on climate conditions, building types, and heating technologies. In many countries electricity and gas form the core of household consumption. ")]),v("p",null,[v("strong",null,"Transport"),bt(" relies primarily on oilbased fuels. Across almost all countries and years, road, air, and freight transport are dominated by gasoline, diesel, jet fuel, and other oil products. Alternative fuels such as electricity or gas are present but remain small compared to oil. ")]),v("p",null,[v("strong",null,"Services"),bt(" rely heavily on electricity. Hotels, offices, public buildings, and commercial activities typically use electricity as their main energy source, with gas or heat sometimes contributing depending on the country. Oil and coal appear only as small shares in most cases. ")]),v("p",null,[v("strong",null,"Industry"),bt(" uses a varied mix. Manufacturing and industrial processes draw on electricity, gas, coal, bioenergy, and oil to different extents. This reflects the diverse technical needs of industrial production, from hightemperature heat to mechanical power. ")])],-1))]),i[8]||(i[8]=v("div",{class:"chart-meta"},[v("div",{class:"meta-section"},[v("span",{class:"meta-label"},"Source"),v("ul",{class:"meta-list"},[v("li",null,"Same table as above.")])])],-1))]))}},md=Tt(yd,[["__scopeId","data-v-d7551cc1"]]),vd={class:"kpi"},_d={key:0},xd={key:0},bd={key:1},wd={key:1},Cd={key:0},kd={key:1,class:"kpi-value"},$d={key:2,class:"kpi-sub"},Sd=["aria-label"],Md=300,Ed={__name:"PricesFocusContext",props:{data:{type:Array,default:()=>[]},focusYear:{type:[Number,null],default:null},series:{type:String,default:"energy"},view:{type:String,default:"annual"},width:{type:Number,default:null},height:{type:Number,default:320},activeSeries:{type:String,default:"energy"}},emits:["update:focusYear","rangeChange","update:series"],setup(t,{emit:e}){const n=t,r=e,a=ft(null),i=ft(null),o=ft(null);let s=null,u=null,l=null,c=null,d=null;const f={top:20,right:14,bottom:40,left:56},p=rt(()=>(n.data||[]).slice().sort((E,D)=>E.year-D.year)),m=rt(()=>p.value.map(E=>E.year)),C=rt(()=>p.value.map(E=>E.electricity));function $(E){if(!Array.isArray(E))return E==null?null:Number(E);const D=E.filter(T=>T!=null).map(Number);return D.length?D.reduce((T,M)=>T+M,0)/D.length:null}const S=rt(()=>p.value.map(E=>$(E.CPI0450))),A=rt(()=>p.value.length?p.value[p.value.length-1]:null),P=rt(()=>{if(n.focusYear)return p.value.find(E=>E.year===n.focusYear)||A.value;if(n.activeSeries==="electricity"){for(let E=p.value.length-1;E>=0;E--){const D=p.value[E];if(D&&D.electricity!=null)return D}return A.value}return A.value}),R=rt(()=>A.value?`Electricity price ${A.value} US cents per kilowatt hour in ${A.year}. Use controls to zoom and focus.`:"No price data available"),H=ft(500),k=ft(500);function L(){if(!i.value)return;ht(i.value).selectAll("*").remove();const E=H.value||Math.max(420,(a.value?.clientWidth||720)-0),D=k.value,T=E-f.left-f.right,M=D-f.top-f.bottom-12;s=ht(i.value).append("svg").attr("width",E).attr("height",D).attr("viewBox",`0 0 ${E} ${D}`).attr("preserveAspectRatio","xMidYMid meet");const b=s.append("g").attr("class","main").attr("transform",`translate(${f.left},${f.top})`),h=ae().domain(as(m.value.length?m.value:[new Date().getFullYear()-5,new Date().getFullYear()])).range([0,T]).nice();function g(j,tt=0,lt=1){const ct=(j||[]).filter(I=>I!=null&&Number.isFinite(Number(I))).map(Number);return ct.length?[us(ct),hn(ct)]:[tt,lt]}const[y,_]=n.activeSeries==="energy"?g(S.value,0,1):g(C.value,0,1),x=ae().domain([y,_]).nice().range([M,0]);function w(j){const tt=Math.floor(j),lt=j-tt;if(Math.abs(lt)<1e-6)return gr("d")(tt)}const N=Gi(h).ticks(Math.min(10,Math.max(4,m.value.length))).tickFormat(w),F=Yi(x).ticks(4);b.append("g").attr("class","y axis").call(F);const B=b.append("g").attr("class","x axis").attr("transform",`translate(0,${M})`).call(N),q=n.activeSeries==="energy"?"Energy CPI (index)":"US cents / kWh";b.append("text").attr("class","y-label").attr("transform","rotate(-90)").attr("y",-54).attr("x",-M/2).attr("dy","1em").style("text-anchor","middle").text(q);function U(j){const tt=[];return j.forEach(lt=>{const ct=lt.CPI0450;if(Array.isArray(ct))for(let I=0;I<ct.length;I++)tt.push({year:lt.year+I/4,qIndex:I+1,value:Number(ct[I])})}),tt}function Q(j){return n.activeSeries==="electricity"?Ee().defined(tt=>tt.electricity!=null).x(tt=>j(tt.year)).y(tt=>x(tt.electricity)).curve(Ke):Ee().defined(tt=>$(tt.CPI0450)!=null).x(tt=>j(tt.year)).y(tt=>x($(tt.CPI0450))).curve(Ke)}const Z=b.append("path").attr("class","line main-line").attr("fill","none"),at=b.append("path").attr("class","line annual-line"),gt=b.append("path").attr("class","line quarterly-line"),J=b.append("g").attr("class","points"),Pt=b.append("g").attr("class","cpi-quarter"),Rt=b.append("g").attr("class","focused-annual");function mt(j,tt=!1){const lt=Q(j);if(n.activeSeries==="electricity"){Z.attr("stroke","#2c7be5").attr("stroke-width",2).attr("opacity",1),at.attr("stroke","#ffb86b").attr("stroke-width",2).attr("fill","none").datum(p.value).attr("d",Ee().defined(O=>$(O.CPI0450)!=null).x(O=>j(O.year)).y(O=>x($(O.CPI0450))).curve(Ke)),Z.datum(p.value).attr("d",lt);const ct=Z.node();if((ct&&ct.getTotalLength?ct.getTotalLength():0)<2){const O=p.value.filter(ot=>ot.electricity!=null).slice().sort((ot,K)=>ot.year-K.year);let V=null,et=null;if(n.focusYear!=null){const ot=O.findIndex(K=>K.year===n.focusYear);ot>=0&&(V=O[ot],et=O[ot+1]||O[ot-1]||null)}if(!V){const ot=j.domain?(j.domain()[0]+j.domain()[1])/2:null,K=O.map(st=>({d:st,dist:Math.abs(st.year-(ot||0))})).sort((st,ut)=>st.dist-ut.dist);V=K[0]?K[0].d:null,et=K[1]?K[1].d:K[0]?K[0].d:null}if(V&&et){const ot=Ee().defined(K=>K&&K.electricity!=null).x(K=>j(K.year)).y(K=>x(K.electricity));Z.datum([V,et]).attr("d",ot).attr("stroke-width",3)}}J.selectAll("circle").data(p.value.filter(O=>O.electricity!=null),O=>O.year).join(O=>O.append("circle").attr("cx",V=>j(V.year)).attr("cy",V=>x(V.electricity)).attr("r",V=>n.focusYear===V.year?6:3.5).attr("fill",V=>n.focusYear===V.year?"#ff7b54":"#fff").attr("stroke",V=>n.focusYear===V.year?"#ff7b54":"#2c7be5").attr("stroke-width",1.5).style("cursor","pointer").on("click",(V,et)=>r("update:focusYear",et.year)).on("mouseenter",(V,et)=>Xt(V,et)).on("mouseleave",At),O=>O.call(V=>V.attr("cx",et=>j(et.year)).attr("cy",et=>x(et.electricity)).attr("r",et=>n.focusYear===et.year?6:3.5)),O=>O.remove()),Pt.selectAll("*").remove()}else if(Z.attr("stroke","#ffb86b").attr("stroke-width",2).attr("stroke-dasharray","3 0"),!tt)Z.datum(p.value).attr("d",lt),J.selectAll("circle").data(p.value.filter(I=>$(I.CPI0450)!=null),I=>I.year).join(I=>I.append("circle").attr("cx",W=>j(W.year)).attr("cy",W=>x($(W.CPI0450))).attr("r",W=>n.focusYear===W.year?5:3).attr("fill","#fff").attr("stroke","#ffb86b").attr("stroke-width",1.25).style("cursor","pointer").on("click",(W,O)=>r("update:focusYear",O.year)).on("mouseenter",(W,O)=>Xt(W,O)).on("mouseleave",At),I=>I.call(W=>W.attr("cx",O=>j(O.year)).attr("cy",O=>x($(O.CPI0450))).attr("r",O=>n.focusYear===O.year?5:3)),I=>I.remove()),Pt.selectAll("*").remove();else{const ct=U(p.value);gt.attr("stroke","#ffb86b").attr("stroke-width",1.5).attr("fill","none").datum(ct).attr("d",Ee().defined(O=>O.value!=null).x(O=>j(O.year)).y(O=>x(O.value)).curve(Ke));const I=Ee().defined(O=>O.value!=null).x(O=>j(O.year)).y(O=>x(O.value)).curve(Ke);Z.datum(ct).attr("d",I),J.selectAll("*").remove(),Pt.selectAll("circle").data(ct,O=>`${O.year}-${O.qIndex}`).join(O=>O.append("circle").attr("cx",V=>j(V.year)).attr("cy",V=>x(V.value)).attr("r",2.5).attr("fill","#ffb86b").on("mouseenter",(V,et)=>kt(V,et)).on("mouseleave",At),O=>O.call(V=>V.attr("cx",et=>j(et.year)).attr("cy",et=>x(et.value))),O=>O.remove())}b.select(".y.axis").call(F),B.call(N.scale(j)),typeof d=="function"&&d(j)}d=function(j){const tt=n.focusYear!=null?n.focusYear:A.value&&A.value.year;if(tt==null){b.selectAll(".focus-line,.focus-annotation").remove();return}const lt=p.value.find(W=>W.year===tt)||null,ct=j(tt);if(b.selectAll(".focus-line").data([tt]).join("line").attr("class","focus-line").attr("x1",ct).attr("x2",ct).attr("y1",0).attr("y2",M).attr("stroke","#ff7b54").attr("stroke-dasharray","3 3").attr("stroke-width",1),b.selectAll(".focus-annotation").remove(),lt){if(n.activeSeries==="electricity"&&lt.electricity!=null){const W=Math.max(12,x(lt.electricity)-12);b.append("text").attr("x",ct+8).attr("y",W).attr("class","focus-annotation").text(`${lt.electricity} US/kWh  ${lt.year}`)}else if(n.activeSeries==="energy"){const W=$(lt.CPI0450);if(W!=null){const O=Math.min(M-6,x(W)+14);b.append("text").attr("x",ct+8).attr("y",O).attr("class","focus-annotation").style("fill","#8a5b00").text(`${W.toFixed(1)} CPI  ${lt.year}`)}}}if(o.value&&tt&&(o.value.textContent=`Chart centered on ${tt}`),Rt.selectAll("*").remove(),n.focusYear!=null&&n.activeSeries==="electricity"){const W=p.value.find(O=>O.year===n.focusYear);if(W&&W.electricity!=null){const O=j(W.year),V=x(W.electricity),et=Math.abs(j(W.year+1)-j(W.year)),ot=Math.max(6,Math.min(14,et*.08));Rt.append("circle").attr("cx",O).attr("cy",V).attr("r",ot).attr("fill","#fff").attr("stroke","#2c7be5").attr("stroke-width",1.75).style("cursor","pointer").on("mouseenter",(K,st)=>Xt(K,W)).on("mouseleave",At);try{Rt.raise()}catch{}}}},d&&d(h),mt(h,!1);const Ot=ht(a.value).selectAll(".chart-tooltip").data([null]).join("div").attr("class","chart-tooltip").style("position","absolute").style("pointer-events","none").style("opacity",0);function Xt(j,tt){const lt=a.value.getBoundingClientRect(),ct=$(tt.CPI0450);let I=`<div class="tt-year">${tt.year}</div>`;n.activeSeries==="electricity"?I+=tt.electricity!=null?`<div class="tt-val">${tt.electricity} US/kWh</div>`:'<div class="tt-val">No electricity data</div>':I+=ct!=null?`<div class="tt-val">Energy CPI (annual mean): ${ct.toFixed(1)}</div>`:'<div class="tt-val">No CPI data</div>',I+='<div class="tt-hint">Use header toggle to switch series</div>',Ot.style("opacity",1).html(I).style("left",`${j.clientX-lt.left+12}px`).style("top",`${j.clientY-lt.top-12}px`)}function kt(j,tt){const lt=a.value.getBoundingClientRect(),ct=Math.floor(tt.year),I=tt.qIndex||Math.round((tt.year-ct)*4)+1,W=Number(tt.value),O=`<div class="tt-year">${ct} Q${I}</div><div class="tt-val">Energy CPI: ${Number.isFinite(W)?W.toFixed(2):""}</div><div class="tt-hint">Quarterly detail  use zoom out to return to annual view</div>`;Ot.style("opacity",1).html(O).style("left",`${j.clientX-lt.left+12}px`).style("top",`${j.clientY-lt.top-12}px`)}function At(){Ot.style("opacity",0)}u=Go().scaleExtent([1,16]).translateExtent([[-50,-100],[T+50,M+100]]).on("zoom",j=>{const tt=j.transform.rescaleX(h);l=j.transform;const[lt,ct]=tt.domain(),I=n.activeSeries==="energy"&&(ct-lt<=1.5||j.transform.k>=6);let W=[];n.activeSeries==="electricity"?W=p.value.filter(ot=>ot.electricity!=null&&ot.year>=lt&&ot.year<=ct).map(ot=>ot.electricity):I?W=U(p.value).filter(K=>K.value!=null&&K.year>=lt&&K.year<=ct).map(K=>K.value):W=p.value.filter(ot=>$(ot.CPI0450)!=null&&ot.year>=Math.floor(lt)&&ot.year<=Math.ceil(ct)).map(ot=>$(ot.CPI0450));const[O,V]=g(W,x.domain()[0],x.domain()[1]),et=(V-O)*.08||1;x.domain([Math.max(0,O-et),V+et]).nice(),I?(at.style("display","none"),gt.style("display",null)):(at.style("display",null),gt.style("display","none")),mt(tt,I)}),s.call(u),l?s.call(u.transform,l):l=dn,c=function(j,tt={span:null}){if(j==null)return;const lt=tt&&Number.isFinite(tt.span)&&tt.span>0?(function(){const it=Number(tt.span),dt=Math.max(h.domain()[0],j-it),Mt=Math.min(h.domain()[1],j+it),yt=Math.max(1,h(Mt)-h(dt));return Math.max(1,Math.min(16,T/yt))})():l&&l.k?l.k:1,ct=h(j),I=E/2-ct*lt,W=dn.translate(I,0).scale(lt);s.transition().duration(Md).call(u.transform,W),l=W;const O=W.rescaleX(h),[V,et]=O.domain(),ot=tt&&Number.isFinite(tt.span)&&tt.span<=2||et-V<=1.5||W.k>=6;let K=[];n.activeSeries==="electricity"?K=p.value.filter(it=>it.electricity!=null&&it.year>=V&&it.year<=et).map(it=>it.electricity):ot?K=U(p.value).filter(dt=>dt.value!=null&&dt.year>=V&&dt.year<=et).map(dt=>dt.value):K=p.value.filter(it=>$(it.CPI0450)!=null&&it.year>=Math.floor(V)&&it.year<=Math.ceil(et)).map(it=>$(it.CPI0450));const[st,ut]=g(K,x.domain()[0],x.domain()[1]),nt=(ut-st)*.08||1;x.domain([Math.max(0,st-nt),ut+nt]).nice();try{mt(O,ot)}catch{mt(h,!1)}typeof d=="function"&&d(O),o.value&&(o.value.textContent=`Chart centered on ${j}`)}}ie(()=>{zt(()=>{const E=a.value?a.value.getBoundingClientRect():{width:500},D=Math.max(200,Math.min(E.width,500));H.value=D,k.value=D/2;const T=new ResizeObserver(M=>{for(const b of M){const h=b.contentRect,g=Math.max(200,Math.min(h.width,500));H.value=g,k.value=g/2,zt(()=>L())}});a.value&&T.observe(a.value),Y.value=T,L()}),window.addEventListener("resize",L)}),Kt(()=>n.data,()=>{zt(L)},{deep:!0}),Kt(()=>n.focusYear,E=>{E!=null&&setTimeout(()=>{typeof c=="function"&&c(E,{span:2})},0)},{immediate:!0});const Y=ft(null);return _e(()=>{if(Y.value)try{Y.value.disconnect()}catch{}Ln(".tooltip-container").remove()}),(E,D)=>(G(),z("div",{class:"prices-focus-chart",ref_key:"containerRef",ref:a,style:{width:"100%"}},[v("div",vd,[P.value&&n.activeSeries==="electricity"?(G(),z("div",_d,[P.value.electricity!=null?(G(),z("h3",xd,[bt(pt(P.value.electricity)+" ",1),D[0]||(D[0]=v("span",{class:"unit"},"US/kWh",-1))])):(G(),z("h3",bd,"No electricity data for this year"))])):P.value&&n.activeSeries==="energy"?(G(),z("div",wd,[$(P.value.CPI0450)!=null?(G(),z("h3",Cd,"Energy CPI: "+pt($(P.value.CPI0450).toFixed(1)),1)):(G(),z("h3",kd,"No CPI data"))])):Gt("",!0),P.value?(G(),z("div",$d,pt(n.focusYear||P.value.year),1)):Gt("",!0)]),v("div",{class:"chart-area",ref_key:"chartRef",ref:i,tabindex:"0",role:"img","aria-label":R.value},null,8,Sd),v("div",{class:"sr-only",ref_key:"liveRef",ref:o,"aria-live":"polite"},null,512)],512))}},Mi=Tt(Ed,[["__scopeId","data-v-68932f70"]]),Td={id:"costs",class:"page-section"},Ad={class:"section-container"},Nd={key:0,class:"loading"},Rd={key:1,class:"error"},Pd={key:2,class:"no-data"},Od={key:3,class:"charts-container"},Id={class:"section-container"},Dd={key:0,class:"loading"},Hd={key:1,class:"error"},Ld={key:2,class:"no-data"},Fd={class:"charts-container"},zd={__name:"Costs",setup(t){const e=Jt(),n=ft("annual");function r(a){a&&e.setSelectedYear(Number(a))}return(a,i)=>(G(),z("section",Td,[i[2]||(i[2]=v("div",{class:"chart-header"},[v("h2",null,"Evolution of Energy and Electricity Prices")],-1)),v("div",Ad,[X(e).isLoading?(G(),z("div",Nd,"Loading energy data...")):X(e).error?(G(),z("div",Rd,pt(X(e).error),1)):Gt("",!0),X(e).pricesLoaded?(G(),z("div",Od,[Ct(Mi,{data:X(e).electricitySeries,focusYear:X(e).selectedYear,view:n.value,activeSeries:"energy","onUpdate:focusYear":r},null,8,["data","focusYear","view"])])):(G(),z("div",Pd,"Price data not available for this country.")),i[0]||(i[0]=v("div",{class:"text-container"},[v("p",null," Was energy always this expensive? The line charts show how the Energy Consumer Price Index (CPI) has evolved over time, reflecting broader economic developments and changing market conditions. Sharp increases in household energy prices influence production decisions, consumption behaviour, and public perception. As prices rise, energy becomes more visible in everyday life, as both households and industries directly feel the economic impact. By exploring the data, it becomes clear that Germany, a country highly dependent on major energy suppliers, has experienced some of the strongest increases in energy prices in recent years. ")],-1))]),v("div",Id,[X(e).isLoading?(G(),z("div",Dd,"Loading energy data...")):X(e).error?(G(),z("div",Hd,pt(X(e).error),1)):Gt("",!0),X(e).pricesLoaded?Gt("",!0):(G(),z("div",Ld,"Price data not available for this country.")),v("div",Fd,[Ct(Mi,{data:X(e).electricitySeries,focusYear:X(e).selectedYear,view:n.value,activeSeries:"electricity","onUpdate:focusYear":r},null,8,["data","focusYear","view"])]),i[1]||(i[1]=v("div",{class:"text-container"},[v("p",null," Electricity prices show a different dynamic than overall energy costs, as they are shaped not only by fuel prices but also by grid fees, taxes, and the energy mix of a country. The line chart highlights how electricity prices have changed over time and reveals periods of strong volatility, especially during phases of market uncertainty and energy transitions. ")],-1))]),i[3]||(i[3]=he('<div class="chart-meta" data-v-5c354806><div class="meta-section" data-v-5c354806><span class="meta-label" data-v-5c354806>Source</span><ul class="meta-list" data-v-5c354806><li data-v-5c354806><strong data-v-5c354806>EnergyCPI</strong><a href="https://github.com/MilesIParker/EnergyCPI" target="_blank" rel="noopener" data-v-5c354806> Global Energy Consumer Price Index </a> (IMF/Eurostat). Series: <code data-v-5c354806>CPI0450</code> (Electricity, gas &amp; fuels). </li><li data-v-5c354806><strong data-v-5c354806>World Bank</strong><a href="https://databank.worldbank.org/embed/Electric-Prices-by-Country/id/7b12e700" target="_blank" rel="noopener" data-v-5c354806> Electric Prices by Country </a> . Electricity price (US cents/kWh). </li></ul></div><div class="meta-section" data-v-5c354806><span class="meta-label" data-v-5c354806>Data Hints</span><ul class="meta-list" data-v-5c354806><li data-v-5c354806>World Bank electricity prices are only available for 2014 to 2019.</li></ul></div></div>',1))]))}},Gd=Tt(zd,[["__scopeId","data-v-5c354806"]]),Yo={"008":"AL","020":"AD","040":"AT","056":"BE","070":"BA",100:"BG",112:"BY",191:"HR",196:"CY",203:"CZ",208:"DK",233:"EE",246:"FI",250:"FR",276:"DE",300:"GR",348:"HU",352:"IS",372:"IE",380:"IT",428:"LV",438:"LI",440:"LT",442:"LU",807:"MK",470:"MT",498:"MD",492:"MC",499:"ME",528:"NL",578:"NO",616:"PL",620:"PT",642:"RO",643:"RU",674:"SM",688:"RS",703:"SK",705:"SI",724:"ES",752:"SE",756:"CH",804:"UA",826:"GB",336:"VA","012":"DZ","024":"AO","031":"AZ","032":"AR","036":"AU","048":"BH","076":"BR","096":"BN",124:"CA",156:"CN",170:"CO",178:"CG",180:"CD",218:"EC",818:"EG",226:"GQ",266:"GA",268:"GE",288:"GH",356:"IN",360:"ID",364:"IR",368:"IQ",376:"IL",392:"JP",398:"KZ",400:"JO",414:"KW",422:"LB",434:"LY",458:"MY",484:"MX",504:"MA",508:"MZ",516:"NA",566:"NG",512:"OM",586:"PK",608:"PH",634:"QA",682:"SA",702:"SG",710:"ZA",410:"KR",729:"SD",728:"SS",760:"SY",764:"TH",780:"TT",788:"TN",792:"TR",795:"TM",784:"AE",840:"US",860:"UZ",862:"VE",704:"VN",887:"YE","004":"AF","050":"BD","064":"BT","068":"BO","072":"BW","084":"BZ","090":"SB",104:"MM",108:"BI",116:"KH",120:"CM",132:"CV",140:"CF",144:"LK",148:"TD",152:"CL",158:"TW",174:"KM",188:"CR",192:"CU",204:"BJ",214:"DO",222:"SV",231:"ET",232:"ER",242:"FJ",262:"DJ",270:"GM",275:"PS",292:"GI",296:"KI",308:"GD",320:"GT",324:"GN",328:"GY",332:"HT",340:"HN",344:"HK",384:"CI",388:"JM",404:"KE",408:"KP",417:"KG",418:"LA",426:"LS",430:"LR",446:"MO",450:"MG",454:"MW",462:"MV",466:"ML",478:"MR",480:"MU",496:"MN",524:"NP",540:"NC",548:"VU",554:"NZ",558:"NI",562:"NE",591:"PA",598:"PG",600:"PY",604:"PE",638:"RE",646:"RW",662:"LC",678:"ST",686:"SN",694:"SL",706:"SO",716:"ZW",732:"EH",740:"SR",748:"SZ",762:"TJ",834:"TZ",768:"TG",776:"TO",800:"UG",854:"BF",858:"UY",882:"WS",894:"ZM",926:"XK"},Yd=Object.fromEntries(Object.entries(Yo).map(([t,e])=>[e,t])),Bd={EL:"GR",UK:"GB"},Wd=new Set(["EUR_OTH","AFR_OTH","AME_OTH","ASI_OTH","ASI_NME_OTH","EU27_2020","EA19","EA20","WORLD","TOTAL","OTH","OTHER","UNKNOWN"]);function Ud(t){return t?Wd.has(t.toUpperCase()):!1}function ga(t){if(!t)return null;const e=t.toUpperCase();return Bd[e]||e}function Vd(t){if(!t)return null;const e=ga(t);return Yd[e]||null}function Rr(t){if(!t)return null;const e=String(t).padStart(3,"0");return Yo[e]||null}const Ei={AL:"Albania",AD:"Andorra",AT:"Austria",BE:"Belgium",BA:"Bosnia and Herzegovina",BG:"Bulgaria",BY:"Belarus",HR:"Croatia",CY:"Cyprus",CZ:"Czechia",DK:"Denmark",EE:"Estonia",FI:"Finland",FR:"France",DE:"Germany",GR:"Greece",HU:"Hungary",IS:"Iceland",IE:"Ireland",IT:"Italy",LV:"Latvia",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MK:"North Macedonia",MT:"Malta",MD:"Moldova",MC:"Monaco",ME:"Montenegro",NL:"Netherlands",NO:"Norway",PL:"Poland",PT:"Portugal",RO:"Romania",RU:"Russia",SM:"San Marino",RS:"Serbia",SK:"Slovakia",SI:"Slovenia",ES:"Spain",SE:"Sweden",CH:"Switzerland",UA:"Ukraine",GB:"United Kingdom",VA:"Vatican City",XK:"Kosovo",DZ:"Algeria",AO:"Angola",AZ:"Azerbaijan",AR:"Argentina",AU:"Australia",BH:"Bahrain",BR:"Brazil",BN:"Brunei",CA:"Canada",CN:"China",CO:"Colombia",CG:"Congo",CD:"DR Congo",EC:"Ecuador",EG:"Egypt",GQ:"Equatorial Guinea",GA:"Gabon",GE:"Georgia",GH:"Ghana",IN:"India",ID:"Indonesia",IR:"Iran",IQ:"Iraq",IL:"Israel",JP:"Japan",KZ:"Kazakhstan",JO:"Jordan",KW:"Kuwait",LB:"Lebanon",LY:"Libya",MY:"Malaysia",MX:"Mexico",MA:"Morocco",MZ:"Mozambique",NA:"Namibia",NG:"Nigeria",OM:"Oman",PK:"Pakistan",PH:"Philippines",QA:"Qatar",SA:"Saudi Arabia",SG:"Singapore",ZA:"South Africa",KR:"South Korea",SD:"Sudan",SS:"South Sudan",SY:"Syria",TH:"Thailand",TT:"Trinidad and Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",AE:"UAE",US:"United States",UZ:"Uzbekistan",VE:"Venezuela",VN:"Vietnam",YE:"Yemen",AF:"Afghanistan",BD:"Bangladesh",BT:"Bhutan",BO:"Bolivia",BW:"Botswana",BZ:"Belize",SB:"Solomon Islands",MM:"Myanmar",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CV:"Cape Verde",CF:"Central African Republic",LK:"Sri Lanka",TD:"Chad",CL:"Chile",TW:"Taiwan",KM:"Comoros",CR:"Costa Rica",CU:"Cuba",BJ:"Benin",DO:"Dominican Republic",SV:"El Salvador",ET:"Ethiopia",ER:"Eritrea",FJ:"Fiji",DJ:"Djibouti",GM:"Gambia",PS:"Palestine",GI:"Gibraltar",KI:"Kiribati",GD:"Grenada",GT:"Guatemala",GN:"Guinea",GY:"Guyana",HT:"Haiti",HN:"Honduras",HK:"Hong Kong",CI:"Ivory Coast",JM:"Jamaica",KE:"Kenya",KP:"North Korea",KG:"Kyrgyzstan",LA:"Laos",LS:"Lesotho",LR:"Liberia",MO:"Macao",MG:"Madagascar",MW:"Malawi",MV:"Maldives",ML:"Mali",MR:"Mauritania",MU:"Mauritius",MN:"Mongolia",NP:"Nepal",NC:"New Caledonia",VU:"Vanuatu",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",RE:"Reunion",RW:"Rwanda",LC:"Saint Lucia",ST:"Sao Tome and Principe",SN:"Senegal",SL:"Sierra Leone",SO:"Somalia",ZW:"Zimbabwe",EH:"Western Sahara",SR:"Suriname",SZ:"Eswatini",TJ:"Tajikistan",TZ:"Tanzania",TG:"Togo",TO:"Tonga",UG:"Uganda",BF:"Burkina Faso",UY:"Uruguay",WS:"Samoa",ZM:"Zambia"},Kd={class:"trading-partners-map"},Xd={key:0,class:"no-data"},qd={key:1,class:"map-wrapper"},jd={class:"map-container"},Zd={class:"volume-summary"},Jd={class:"volume-grid"},Qd=["onClick"],th={class:"checkbox-icon"},eh={class:"volume-value"},nh={class:"volume-unit"},rh={class:"checkbox-icon"},ah={class:"volume-value"},ih={class:"volume-unit"},oh={class:"map-controls"},sh={class:"cutoff-slider"},lh={class:"cutoff-value"},ch={__name:"TradingPartnersMap",props:{tradeData:{type:Object,default:null},country:{type:Object,default:null},year:{type:Number,default:null}},setup(t){function e(h,g){return typeof g=="string"&&(g=h.objects[g]),g.type==="GeometryCollection"?{type:"FeatureCollection",features:g.geometries.map(y=>n(h,y))}:n(h,g)}function n(h,g){const y=g.id,_=g.bbox,x=g.properties||{},w=r(h,g);return y==null&&_==null?{type:"Feature",properties:x,geometry:w}:_==null?{type:"Feature",id:y,properties:x,geometry:w}:{type:"Feature",id:y,bbox:_,properties:x,geometry:w}}function r(h,g){const y=g.type;if(y==="GeometryCollection")return{type:y,geometries:g.geometries.map(x=>r(h,x))};if(y==="Point")return{type:y,coordinates:a(h,g.coordinates)};if(y==="MultiPoint")return{type:y,coordinates:g.coordinates.map(x=>a(h,x))};const _=g.arcs;return y==="LineString"?{type:y,coordinates:i(h,_)}:y==="MultiLineString"||y==="Polygon"?{type:y,coordinates:_.map(x=>i(h,x))}:y==="MultiPolygon"?{type:y,coordinates:_.map(x=>x.map(w=>i(h,w)))}:null}function a(h,g){const y=h.transform;if(!y)return g.slice();const _=y.scale,x=y.translate;return[g[0]*_[0]+x[0],g[1]*_[1]+x[1]]}function i(h,g){const y=[],_=h.arcs,x=h.transform;for(let w=0;w<g.length;w++){let N=g[w];const F=N<0;F&&(N=~N);const B=_[N],q=[];let U=0,Q=0;for(let at=0;at<B.length;at++){U+=B[at][0],Q+=B[at][1];const gt=x?[U*x.scale[0]+x.translate[0],Q*x.scale[1]+x.translate[1]]:[U,Q];q.push(gt)}F&&q.reverse();const Z=w===0?0:1;for(let at=Z;at<q.length;at++)y.push(q[at])}return y}const o=t,s=[{code:"SFF",label:"Coal",unit:"thousand tonnes",color:"#8b4513"},{code:"OIL",label:"Oil",unit:"thousand tonnes",color:"#1a1a1a"},{code:"GAS",label:"Gas",unit:"TJ",color:"#2980b9"},{code:"BIO",label:"Biofuels",unit:"thousand tonnes",color:"#27ae60"},{code:"EH",label:"Electricity",unit:"GWh",color:"#f1c40f"}],u=ft(new Set(["OIL","GAS","EH"])),l=ft(new Set(["imports"])),c=ft(3),d=ft(null);let f=null,p=null,m=null,C=null;function $(){!d.value||!C||(m=null,E())}function S(h){u.value.has(h)?(u.value.delete(h),u.value=new Set(u.value)):(u.value.add(h),u.value=new Set(u.value))}function A(h){l.value.has(h)?(l.value.delete(h),l.value=new Set(l.value)):(l.value.add(h),l.value=new Set(l.value))}function P(h,g){return(h==="imports"?o.tradeData?.imports?.total_by_type:o.tradeData?.exports?.total_by_type)?.[g]?.value??null}const R=rt(()=>o.tradeData?.imports||o.tradeData?.exports);function H(h){return h==null?"N/A":String(Math.round(h)).replace(/\B(?=(\d{3})+(?!\d))/g," ")}function k(h){return Ud(h)}function L(h){const g=h==="imports"?o.tradeData?.imports:o.tradeData?.exports;if(!g?.partners_by_type)return[];const y=[];for(const _ of u.value){const x=g.partners_by_type[_];if(!x)continue;const w=s.find(F=>F.code===_),N=w?.color||"#666";for(const F of x){if(!F.share_pct||F.share_pct<c.value||k(F.geo))continue;const B=ga(F.geo);y.push({partnerGeo:B,partnerName:Ei[B]||F.name||B,value:F.value,sharePercent:F.share_pct,color:N,typeCode:_,typeName:w?.label||_,direction:h})}}return y}async function Y(){if(p)return p;try{return p=await(await fetch("/MyEnergyProfile/data/countries-110m.json")).json(),p}catch(h){return console.error("Failed to load world map data:",h),null}}async function E(){if(!d.value||!R.value)return;ht(d.value).selectAll("*").remove();const h=await Y();if(!h){ht(d.value).append("div").attr("class","map-error").text("Failed to load map data");return}const g=d.value,y=g.clientWidth||600,_=Math.min(y,400),x=ht(g).append("svg").attr("width",y).attr("height",_).attr("viewBox",`0 0 ${y} ${_}`).style("cursor","grab"),w=x.append("defs"),N=x.append("g").attr("class","map-group"),F=Math.max(y,_)*.5;C=Go().scaleExtent([1,8]).translateExtent([[-F,-F],[y+F,_+F]]).on("zoom",K=>{N.attr("transform",K.transform),m=K.transform}).on("start",()=>{x.style("cursor","grabbing")}).on("end",()=>{x.style("cursor","grab")}),x.call(C);const B={imports:"#e53935",exports:"#43a047"};for(const K of s)for(const st of Object.keys(B)){const ut=B[st];w.append("marker").attr("id",`arrow-${K.code}-${st}`).attr("viewBox","0 0 10 10").attr("refX",0).attr("refY",5).attr("markerWidth",3).attr("markerHeight",4).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 0 1 L 3 5 L 0 9 z").attr("fill",K.color).attr("fill-opacity",.6).attr("stroke",ut).attr("stroke-opacity",.5).attr("stroke-width",.5)}const q=e(h,h.objects.countries),U=V0().fitSize([y,_],q),Q=O0().projection(U),Z=ga(o.country?.code),at=Z?Vd(Z):null,gt=l.value.has("imports")?L("imports"):[],J=l.value.has("exports")?L("exports"):[],Pt=[...gt,...J],Rt=new Set(Pt.map(K=>K.partnerGeo));function mt(K,st=.82){const ut=Ce(K);if(!ut)return"#e0e8f0";const nt=ro(ut);return nt.l=st,nt.s=Math.min(nt.s,.5),nt.formatHex()}const Ot=new Map;for(const K of Rt){const st=Pt.filter(ut=>ut.partnerGeo===K);if(st.length>0){const ut=new Map;for(const yt of st){const Nt=ut.get(yt.typeCode)||{color:yt.color,share:0};Nt.share+=yt.sharePercent||0,ut.set(yt.typeCode,Nt)}const nt=Array.from(ut.values()).sort((yt,Nt)=>Nt.share-yt.share).slice(0,5),it=nt.reduce((yt,Nt)=>yt+Nt.share,0);let dt=0;const Mt=[];for(const yt of nt){const Nt=yt.share/it*100;Mt.push({color:mt(yt.color),start:dt,end:dt+Nt}),dt+=Nt}Ot.set(K,Mt)}}for(const[K,st]of Ot){const ut=w.append("linearGradient").attr("id",`partner-fill-${K}`).attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","100%");for(const nt of st)ut.append("stop").attr("offset",`${nt.start}%`).attr("stop-color",nt.color),ut.append("stop").attr("offset",`${nt.end}%`).attr("stop-color",nt.color)}N.append("g").attr("class","countries").selectAll("path").data(q.features).join("path").attr("d",Q).attr("fill",K=>{const st=String(K.id).padStart(3,"0"),ut=Rr(st);return at&&st===at?"#2c3e50":ut&&Rt.has(ut)?Ot.has(ut)?`url(#partner-fill-${ut})`:"#e0e8f0":"#f0f0f0"}).attr("stroke","#999").attr("stroke-width",.5).on("mouseenter",function(K,st){const ut=String(st.id).padStart(3,"0"),nt=Rr(ut),it=st.properties?.name||Ei[nt]||nt,dt=nt&&Rt.has(nt),Mt=at&&ut===at;(Mt||dt)&&ht(this).attr("stroke","#333").attr("stroke-width",1.5),T(K,it,nt,Mt,dt,gt,J)}).on("mouseleave",function(){ht(this).attr("stroke","#999").attr("stroke-width",.5),b()});const kt={},At={};q.features.forEach(K=>{const st=String(K.id).padStart(3,"0"),ut=Rr(st);if(ut){const nt=f0(K);if(nt&&!isNaN(nt[0])&&!isNaN(nt[1])){kt[ut]=U(nt);const it=Q.bounds(K),dt=it[1][0]-it[0][0],Mt=it[1][1]-it[0][1];At[ut]=Math.min(dt,Mt)/2}}});const j={FR:[2.5,46.5],NL:[5.3,52.2],DK:[9.5,56],PT:[-8,39.5],ES:[-3.5,40],US:[-98,39.5],RU:[40,56],NO:[9,62]};for(const[K,st]of Object.entries(j)){const ut=U(st);ut&&(kt[K]=ut)}const tt={SG:[103.8,1.35],HK:[114.17,22.32],MO:[113.55,22.2],GI:[-5.35,36.14],MT:[14.5,35.9],LU:[6.13,49.61],AD:[1.52,42.51],MC:[7.42,43.73],SM:[12.46,43.94],VA:[12.45,41.9],LI:[9.55,47.16],BH:[50.55,26.07]};for(const[K,st]of Object.entries(tt))if(!kt[K]){const ut=U(st);ut&&(kt[K]=ut)}const lt=Z?kt[Z]:null,ct=2.5;let I,W;if(lt)I=lt[0],W=lt[1];else{const K=U([10,50]);I=K[0],W=K[1]}const O=y/2-I*ct,V=_/2-W*ct,et=dn.translate(O,V).scale(ct);if(x.on("dblclick.zoom",null),x.on("dblclick",()=>{x.transition().duration(300).call(C.transform,et),m=et}),m?x.call(C.transform,m):(x.call(C.transform,et),m=et),lt&&(gt.length>0||J.length>0)){let K=function(it){const dt=nt.get(it)||0;return nt.set(it,dt+1),dt};const st=N.append("g").attr("class","trade-flows"),ut=ae().domain([0,100]).range([0,6]).clamp(!0),nt=new Map;if(l.value.has("imports")){const it=At[Z]||10;gt.forEach(dt=>{const Mt=kt[dt.partnerGeo];if(!Mt)return;const yt=K(dt.partnerGeo);D(st,Mt,lt,dt,ut,yt,dt.typeCode,dt.color,it)})}l.value.has("exports")&&J.forEach(it=>{const dt=kt[it.partnerGeo];if(!dt)return;const Mt=K(it.partnerGeo),yt=At[it.partnerGeo]||10;D(st,lt,dt,it,ut,Mt,it.typeCode,it.color,yt)})}let ot=ht(g).select(".map-tooltip");ot.empty()&&(ot=ht(g).append("div").attr("class","map-tooltip").style("opacity",0).style("position","absolute").style("pointer-events","none"))}function D(h,g,y,_,x,w,N,F,B){const q=y[0]-g[0],U=y[1]-g[1],Q=Math.sqrt(q*q+U*U),Z=q/Q,at=U/Q,gt=-at,J=Z,Rt=w*1,mt=_.direction==="exports"?.5:0,Ot=g[0]+Z*mt+gt*Rt,Xt=g[1]+at*mt+J*Rt,kt=_.direction==="imports"?2:0,At=w*kt,j=7,tt=Math.min(B*.3,5),lt=_.direction==="imports"&&Q>j?tt:0,ct=y[0]-Z*lt+gt*At,I=y[1]-at*lt+J*At,W=Math.min(Q*.05,10),O=(Ot+ct)/2,V=(Xt+I)/2,et=O+gt*W,ot=V+J*W,K=Math.max(.2,x(_.sharePercent||0)),st=K+.25,ut=`arrow-${N}-${_.direction}`,nt=1.5*K,it=Math.sqrt((ct-Ot)**2+(I-Xt)**2),dt=Math.min(nt,it*.5),Mt=(ct-Ot)/it,yt=(I-Xt)/it,Nt=ct-Mt*dt,yr=I-yt*dt,xe=`M ${Ot} ${Xt} Q ${et} ${ot} ${Nt} ${yr}`,mr=_.direction==="imports"?"#e53935":"#43a047";h.append("path").attr("d",xe).attr("fill","none").attr("stroke",mr).attr("stroke-width",st).attr("stroke-opacity",.5).attr("class",`flow-arrow-outline flow-${N} flow-${_.direction}`).style("pointer-events","none"),h.append("path").attr("d",xe).attr("fill","none").attr("stroke",F).attr("stroke-width",K).attr("stroke-opacity",.6).attr("marker-end",`url(#${ut})`).attr("class",`flow-arrow flow-${N} flow-${_.direction}`).on("mouseenter",function(_r){ht(this).attr("stroke-opacity",.85);const Dt=_.direction==="imports"?"imports":"exports",Qt=`
        <strong>${_.partnerName}</strong><br/>
        <span style="color: ${F}">${_.typeName}</span><br/>
        ${H(_.value)}<br/>
        ${_.sharePercent?.toFixed(1)}% of ${_.typeName} ${Dt}
      `;M(_r,Qt)}).on("mouseleave",function(){ht(this).attr("stroke-opacity",.6),b()})}function T(h,g,y,_,x,w,N){const F=d.value;if(!F)return;let B=`<strong>${g}</strong>`;if(_)B+="<br/><em>Selected country</em>";else if(x){const U=w.filter(Z=>Z.partnerGeo===y),Q=N.filter(Z=>Z.partnerGeo===y);U.length>0&&(B+='<br/><span class="tooltip-section">Imports from:</span>',U.forEach(Z=>{const at=s.find(gt=>gt.code===Z.typeCode);B+=`<br/>  <span style="color: ${Z.color}">${at?.label||Z.typeCode}</span>: ${H(Z.value)} (${Z.sharePercent?.toFixed(1)}%)`})),Q.length>0&&(B+='<br/><span class="tooltip-section">Exports to:</span>',Q.forEach(Z=>{const at=s.find(gt=>gt.code===Z.typeCode);B+=`<br/>  <span style="color: ${Z.color}">${at?.label||Z.typeCode}</span>: ${H(Z.value)} (${Z.sharePercent?.toFixed(1)}%)`}))}const q=ht(F).select(".map-tooltip");if(!q.empty()){const U=F.getBoundingClientRect();q.html(B).style("left",`${h.clientX-U.left+10}px`).style("top",`${h.clientY-U.top-10}px`).style("opacity",1)}}function M(h,g){const y=d.value;if(!y)return;const _=ht(y).select(".map-tooltip");if(!_.empty()){const x=y.getBoundingClientRect();_.html(g).style("left",`${h.clientX-x.left+10}px`).style("top",`${h.clientY-x.top-10}px`).style("opacity",1)}}function b(){const h=d.value;if(!h)return;const g=ht(h).select(".map-tooltip");g.empty()||g.style("opacity",0)}return Kt(()=>o.country,()=>{m=null}),Kt(()=>[o.tradeData,o.country,o.year,u.value,l.value,c.value],()=>{zt(()=>E())},{deep:!0}),ie(()=>{E(),f=new ResizeObserver(()=>{E()}),d.value&&f.observe(d.value)}),_e(()=>{f&&f.disconnect()}),(h,g)=>(G(),z("div",Kd,[R.value?(G(),z("div",qd,[v("div",jd,[v("div",Zd,[v("div",Jd,[g[6]||(g[6]=v("div",{class:"volume-row-label"},null,-1)),(G(),z(ue,null,Ne(s,y=>v("button",{key:y.code,class:Wt(["volume-header-btn",{active:u.value.has(y.code)}]),style:we({"--type-color":y.color,backgroundColor:u.value.has(y.code)?y.color:"transparent",color:u.value.has(y.code)?"#fff":y.color}),onClick:_=>S(y.code)},pt(y.label),15,Qd)),64)),v("button",{class:Wt(["volume-row-label","imports-label","direction-toggle",{active:l.value.has("imports")}]),onClick:g[0]||(g[0]=y=>A("imports"))},[v("span",th,pt(l.value.has("imports")?"":""),1),g[4]||(g[4]=bt(" Imports ",-1))],2),(G(),z(ue,null,Ne(s,y=>v("div",{key:"imp-"+y.code,class:Wt(["volume-cell","imports",{inactive:!u.value.has(y.code)}])},[v("span",eh,pt(H(P("imports",y.code))),1),v("span",nh,pt(y.unit),1)],2)),64)),v("button",{class:Wt(["volume-row-label","exports-label","direction-toggle",{active:l.value.has("exports")}]),onClick:g[1]||(g[1]=y=>A("exports"))},[v("span",rh,pt(l.value.has("exports")?"":""),1),g[5]||(g[5]=bt(" Exports ",-1))],2),(G(),z(ue,null,Ne(s,y=>v("div",{key:"exp-"+y.code,class:Wt(["volume-cell","exports",{inactive:!u.value.has(y.code)}])},[v("span",ah,pt(H(P("exports",y.code))),1),v("span",ih,pt(y.unit),1)],2)),64))])]),v("div",{ref_key:"mapContainerRef",ref:d,class:"map-svg-container"},null,512),v("div",oh,[v("div",{class:"controls-left"},[v("button",{class:"reset-zoom-btn",onClick:$,title:"Reset zoom"},[...g[7]||(g[7]=[v("span",{class:"material-symbols-outlined"},"zoom_out_map",-1)])]),g[8]||(g[8]=v("span",{class:"map-hint"},"Scroll to zoom, drag to pan, double-click to reset",-1))]),v("div",sh,[g[9]||(g[9]=v("label",{class:"cutoff-label"},"Min trade %",-1)),Wo(v("input",{type:"range","onUpdate:modelValue":g[2]||(g[2]=y=>c.value=y),min:"0",max:"10",step:"1",class:"cutoff-range"},null,512),[[Uo,c.value,void 0,{number:!0}]]),v("span",lh,pt(c.value)+"%",1)])])])])):(G(),z("div",Xd,[...g[3]||(g[3]=[v("span",{class:"no-data-icon"},"?",-1),v("span",null,"No trade data available for this year",-1)])]))]))}},uh=Tt(ch,[["__scopeId","data-v-29317453"]]),fh={id:"tradingpartner",class:"page-section"},dh={class:"section-container"},hh={key:0,class:"loading"},ph={key:1,class:"error"},gh={key:2,class:"charts-container"},yh={__name:"TradingPartner",setup(t){const e=Jt();return(n,r)=>(G(),z("section",fh,[r[1]||(r[1]=v("div",{class:"chart-header"},[v("h2",null,"The Trading Partners")],-1)),v("div",dh,[X(e).isLoading?(G(),z("div",hh,"Loading energy data...")):X(e).error?(G(),z("div",ph,pt(X(e).error),1)):(G(),z("div",gh,[Ct(uh,{tradeData:X(e).tradeData,country:X(e).selectedCountry,year:X(e).selectedYear},null,8,["tradeData","country","year"])])),r[0]||(r[0]=v("div",{class:"text-container"},[v("p",null,[bt(" Now that we understand how dependent countries are on energy imports, the next step is to examine where this energy originates. "),v("br"),v("br"),bt(" Despite their economic strength, many Western countries consume far more energy than they can produce themselves. "),v("br"),bt(" These energy dependencies arise from the uneven global distribution of resources. "),v("br"),bt(" Most Western countries rely heavily on imports of fossil energy sources such as oil, gas, and coal from a small number of key suppliers, including Russia, the United States, Saudi Arabia, and Australia. "),v("br"),bt(" Norway stands out as an exception, exporting significantly more oil and natural gas than it imports. "),v("br"),v("br"),bt(" In contrast, Germany and Italy import nearly all of their natural gas from a limited set of suppliers  a pattern that can be observed across many Western countries. "),v("br"),bt(" Electricity trade, however, is mainly regional. "),v("br"),bt(" Strong exchange between neighbouring Central European countries is visible, with France playing a key role as one of the most important electricity exporters due to its large nuclear power capacity. ")])],-1))]),r[2]||(r[2]=he('<div class="chart-meta"><div class="meta-section"><span class="meta-label">Source</span><ul class="meta-list"><li> Eurostat <a href="https://ec.europa.eu/eurostat/web/energy/database" target="_blank" rel="noopener">Energy Database</a> (European Commission) </li><li>Tables <code>nrg_ti_*</code> (imports) and <code>nrg_te_*</code> (exports) for sff, oil, gas, bio, eh</li><li>Derived: <code>share_pct</code> = partner value  total  100</li></ul></div><div class="meta-section"><span class="meta-label">Data Hints</span><ul class="meta-list"><li> EU-reported data only; non-EU partner volumes data may be incomplete or reflect only the EU perspective of the trade relationship. </li><li>Regional aggregates (e.g., &quot;Other Asian countries&quot;) excluded from map arrows but included in totals.</li></ul></div></div>',1))]))}},mh={key:0,class:"no-data"},vh={key:1,class:"chart-wrapper"},_h={class:"chart-container"},xh={class:"chart-heading"},bh={class:"formula-stack"},wh={key:0},Ch={key:1},kh={__name:"DependencyChart",props:{dependencyData:{type:Object,default:null},year:{type:[String,Number],default:null},countryName:{type:String,default:""}},setup(t){const e=Vo({lowerBrace:{width:170,leftOffset:20,yOffset:0},upperBrace:{width:150,leftOffset:120,yOffset:0},lowerCell:{leftOffset:-50,yOffset:0},upperCell:{leftOffset:20,yOffset:0}}),n=t,r=ft(null),a=ft(null),i=ft(!1),o=ft(null),s=ft(0);let u=null;function l(){s.value=o.value?.offsetWidth??0}const c=rt(()=>({width:`${e.lowerBrace.width}px`,marginLeft:`${s.value+e.lowerBrace.leftOffset}px`,transform:`translateY(${e.lowerBrace.yOffset}px)`})),d=rt(()=>({width:`${e.upperBrace.width}px`,marginLeft:`${s.value+e.upperBrace.leftOffset}px`,transform:`translateY(${e.upperBrace.yOffset}px)`})),f=rt(()=>({marginLeft:`${s.value+e.lowerCell.leftOffset}px`,transform:`translateY(${e.lowerCell.yOffset}px)`})),p=rt(()=>({marginLeft:`${s.value+e.upperCell.leftOffset}px`,transform:`translateY(${e.upperCell.yOffset}px)`}));function m(T,M,b){if(i.value=!0,a.value&&r.value){r.value.getBoundingClientRect();const h=a.value;h.style.left=`${M+120}px`,h.style.top=`${b-10}px`}}function C(){i.value=!1}const $={coal:"Coal",anthracite:"Anthracite",coking_coal:"Coking Coal",other_bituminous:"Other Bituminous",other_bituminous_coal:"Other Bituminous",lignite:"Lignite",sub_bituminous_coal:"Sub-bituminous",gas:"Natural Gas",natural_gas:"Natural Gas",oil:"Oil",crude_oil:"Crude Oil",ngl:"NGL",peat:"Peat",nuclear_fuels:"Nuclear",renewable_fuels:"Renewables",electricity:"Electricity",C0110:"Anthracite",C0121:"Coking Coal",C0129:"Other Bituminous",C0210:"Lignite",C0220:"Sub-bituminous",G3000:"Natural Gas",O4000XBIO:"Oil",O4100_TOT:"Crude Oil",O4200:"NGL",P1100:"Oil Shale",S2000:"Nuclear",CF_R:"Renewables",E7000:"Electricity",SFF_OTH:"Other Solid Fuels"},S=["electricity","E7000","oil","O4000XBIO","crude_oil","O4100_TOT","ngl","O4200","gas","natural_gas","G3000","coal","C0000X0350-0370","anthracite","C0110","coking_coal","C0121","other_bituminous","other_bituminous_coal","C0129","sub_bituminous_coal","C0220","lignite","C0210","peat","P1100"],A=["nuclear_fuels","S2000","renewable_fuels","CF_R","SFF_OTH","other_solid_fossil_fuels"],P=["crude_oil","O4100_TOT","ngl","O4200","anthracite","C0110","coking_coal","C0121","other_bituminous_coal","other_bituminous","C0129","sub_bituminous_coal","C0220","lignite","C0210"],R=["electricity","E7000"],H={electricity:["electricity","E7000"],oil:["oil","O4000XBIO","crude_oil","O4100_TOT","ngl","O4200"],gas:["gas","natural_gas","G3000"],coal:["coal","C0000X0350-0370","anthracite","C0110","coking_coal","C0121","other_bituminous","other_bituminous_coal","C0129","sub_bituminous_coal","C0220","lignite","C0210"],peat:["peat","P1100"]},k=["oil","O4000XBIO","gas","natural_gas","G3000","coal","C0000X0350-0370","peat","P1100"],L=rt(()=>n.dependencyData&&(n.dependencyData.overall!=null||n.dependencyData.by_fuel&&Object.keys(n.dependencyData.by_fuel).length>0)),Y=rt(()=>{if(!n.dependencyData)return[];const T=[];if(T.push({key:"overall",name:"Overall",overall:n.dependencyData.overall,thirdCountries:n.dependencyData.third_countries,isOverall:!0}),n.dependencyData.by_fuel){const h=Object.entries(n.dependencyData.by_fuel);h.sort((g,y)=>{const _=S.indexOf(g[0]),x=S.indexOf(y[0]);return _!==-1&&x!==-1?_-x:_!==-1?-1:x!==-1?1:($[g[0]]||g[0]).localeCompare($[y[0]]||y[0])});for(const[g,y]of h)!y||typeof y!="object"||A.includes(g)||T.push({key:g,name:$[g]||E(g),overall:y.overall,thirdCountries:y.third_countries,gaeShare:y.gae_share??null,isOverall:!1,isSubcategory:P.includes(g),isElectricity:R.includes(g),isGroupStarter:k.includes(g)})}const M=["anthracite","coking_coal","other_bituminous_coal","sub_bituminous_coal","lignite"],b=["crude_oil","ngl"];for(const[h,g]of[["coal",M],["oil",b]]){let y=0,_=-1;for(let x=0;x<T.length;x++)g.includes(T[x].key)&&(y+=T[x].gaeShare??0,_=x);_>=0&&y<99.5&&T.splice(_+1,0,{key:`${h}_other`,name:"Other",overall:null,thirdCountries:null,gaeShare:Math.max(0,100-y),isOverall:!1,isSubcategory:!0,isOtherRemainder:!0,isElectricity:!1,isGroupStarter:!1})}return T});function E(T){return T.replace(/_/g," ").replace(/([A-Z])/g," $1").split(" ").map(M=>M.charAt(0).toUpperCase()+M.slice(1).toLowerCase()).join(" ").trim()}function D(){if(!r.value||Y.value.length===0)return;ht(r.value).selectAll("*").remove();const M=r.value.clientWidth||600,b=30,h=10,g=4,y=24,_=Math.min(M,565),x={top:20,right:110,bottom:10,left:100},w=_-x.left-x.right,N=[];let F=0;Y.value.forEach((I,W)=>{W>0&&(F+=I.isGroupStarter||I.isElectricity?y:g),N.push(F),F+=I.isOtherRemainder?h:b});const B=F,q=I=>I.includes("coal")||I.includes("anthracite")||I.includes("coking")||I.includes("bituminous")||I.includes("lignite")?"coal":"oil",U={};Y.value.forEach(I=>{if(!I.isSubcategory)return;const W=q(I.key);U[W]=(U[W]??0)+(I.gaeShare??0)});const Q=[];Y.value.forEach((I,W)=>{if(I.isSubcategory){const O=q(I.key),V=U[O]??0,et=I.gaeShare??0;Q[W]=V>100?et/V*100:et}else Q[W]=0});const Z=[];let at=0,gt=null;Y.value.forEach((I,W)=>{if(I.isSubcategory){const O=q(I.key);O!==gt&&(at=0,gt=O),Z[W]=at,at+=Math.min(Q[W],100)}else Z[W]=0,gt=null,at=0});const J=ht(r.value).append("svg").attr("width",_).attr("height",B+x.top+x.bottom).append("g").attr("transform",`translate(${x.left},${x.top})`),Pt=Math.max(100,...Y.value.map(I=>I.overall??0)),Rt=Math.ceil(Pt/10)*10,mt=ae().domain([0,Rt]).range([0,w]),Ot={third:{normal:"#c44536",soft:"#d4847a"},eu:{normal:"#e8a87c",soft:"#f0c9b0"},noneu:{normal:"#333",soft:"#666"},domestic:{normal:"#d9d9d9",soft:"#e8e8e8"},reserve:{normal:"#8b2500",soft:"#b86347"},reserveEu:{normal:"#b86b3a",soft:"#d4a07a"},exporter:{normal:"#4a90d9",soft:"#7ab3e8"}};J.append("defs").append("pattern").attr("id","crosshatch").attr("width",4).attr("height",4).attr("patternUnits","userSpaceOnUse").attr("patternTransform","rotate(45)").append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",4).attr("stroke",Ot.noneu.normal).attr("stroke-width",2),Rt>100&&(J.append("line").attr("x1",mt(100)).attr("x2",mt(100)).attr("y1",0).attr("y2",B).attr("stroke","#666").attr("stroke-width",1).attr("stroke-dasharray","4,2"),J.append("text").attr("x",mt(100)).attr("y",-4).attr("text-anchor","middle").attr("fill","#666").attr("font-size","11px").text("100%"));const kt={},At=[];Y.value.forEach((I,W)=>{let O=null;if(I.isOverall)O="overall";else{for(const[et,ot]of Object.entries(H))if(ot.includes(I.key)){O=et;break}!O&&I.key.endsWith("_other")&&(O=I.key.replace("_other",""))}if(!O)return;const V=I.isOtherRemainder?h:b;kt[O]?(kt[O].minY=Math.min(kt[O].minY,N[W]),kt[O].maxY=Math.max(kt[O].maxY,N[W]+V)):(kt[O]={minY:N[W],maxY:N[W]+V},At.push(O))});const j={x:8,y:5},tt=["rgba(0, 0, 0, 0.06)","rgba(0, 0, 0, 0)"];At.forEach((I,W)=>{const O=kt[I];J.append("rect").attr("class","group-bg").attr("x",-100+j.x).attr("y",O.minY-j.y).attr("width",_-j.x*2).attr("height",O.maxY-O.minY+j.y*2).attr("fill",tt[W%2]).attr("stroke","none")});const lt=Math.min(...At.map(I=>kt[I].minY)),ct=Math.max(...At.map(I=>kt[I].maxY));J.append("rect").attr("class","chart-outline").attr("x",-100+j.x).attr("y",lt-j.y).attr("width",_-j.x*2).attr("height",ct-lt+j.y*2).attr("fill","none").attr("stroke","rgba(0, 0, 0, 0.2)").attr("stroke-width",1).attr("rx",6),Y.value.forEach((I,W)=>{const O=N[W],V=I.isOtherRemainder?h:b,et=I.isSubcategory;if(I.isOtherRemainder){const st=mt(100),ut=st*(Math.min(Q[W],100)/100),nt=st*(Z[W]/100),it=4,dt=O+(V-it)/2;J.append("rect").attr("x",nt).attr("y",dt).attr("width",ut).attr("height",it).attr("fill","#bbb").attr("rx",2);return}if(et&&I.gaeShare!=null&&I.gaeShare<.5){J.append("text").attr("x",4).attr("y",O+V/2).attr("dy","0.35em").attr("text-anchor","start").attr("fill","#888").attr("font-size","11px").attr("font-style","italic").text("not used");return}const ot=st=>Ot[st].normal,K=I.isElectricity&&I.overall==null&&I.thirdCountries!=null?I.thirdCountries:I.overall;if(K!=null){const st=K,ut=st<0,nt=Math.max(0,st),it=I.thirdCountries!=null?Math.max(0,I.thirdCountries):null,dt=mt(100),Mt=et?Math.min(Q[W],100):100,yt=et?dt*(Mt/100):null,Nt=et?dt*(Z[W]/100):0;if(ut)et&&yt!=null&&yt>0?(J.append("rect").attr("class","bar-domestic").attr("x",Nt).attr("y",O).attr("width",yt).attr("height",V).attr("fill",ot("domestic")),J.append("rect").attr("class","bar-exporter").attr("x",Nt).attr("y",O).attr("width",yt).attr("height",V).attr("fill",ot("exporter")),J.append("text").attr("x",Nt+yt+4).attr("y",O+V/2).attr("dy","0.35em").attr("text-anchor","start").attr("fill","#7ab3e8").attr("font-size","11px").attr("font-weight","700").text(`${st.toFixed(0)}%`)):(J.append("rect").attr("class","bar-exporter").attr("x",0).attr("y",O).attr("width",dt).attr("height",V).attr("fill",ot("exporter")),dt>50&&J.append("text").attr("x",dt/2).attr("y",O+V/2).attr("dy","0.35em").attr("text-anchor","middle").attr("fill","#fff").attr("font-size","11px").attr("font-weight","600").text("Net Exporter"),J.append("text").attr("x",dt+4).attr("y",O+V/2).attr("dy","0.35em").attr("text-anchor","start").attr("fill","#3a7bc8").attr("font-size","11px").attr("font-weight","700").text(`${st.toFixed(0)}%`));else{const yr=nt<100?100-nt:0,xe=nt>100?nt-100:0;if(et&&yt!=null){if(yt>0){if(J.append("rect").attr("class","bar-domestic").attr("x",Nt).attr("y",O).attr("width",yt).attr("height",V).attr("fill",ot("domestic")),nt>0){const Dt=yt*(Math.min(nt,100)/100);J.append("rect").attr("class","bar-import").attr("x",Nt).attr("y",O).attr("width",Dt).attr("height",V).attr("fill",ot("eu"))}if(xe>0){const Dt=yt*(xe/100);J.append("rect").attr("class","bar-reserve").attr("x",Nt+yt).attr("y",O).attr("width",Dt).attr("height",V).attr("fill",ot("reserve")).attr("opacity",.85)}}}else{if(nt>0){const Dt=Math.min(nt,100);J.append("rect").attr("class","bar-import").attr("x",0).attr("y",O).attr("width",mt(Dt)).attr("height",V).attr("fill",ot("eu"))}if(xe>0){const Dt=mt(nt)-mt(100);J.append("rect").attr("class","bar-reserve").attr("x",mt(100)).attr("y",O).attr("width",Dt).attr("height",V).attr("fill",ot("reserve")).attr("opacity",.85)}yr>0&&J.append("rect").attr("class","bar-domestic").attr("x",mt(nt)).attr("y",O).attr("width",mt(100)-mt(nt)).attr("height",V).attr("fill",ot("domestic"))}if(it!=null&&it>0&&!I.isElectricity&&!et){const Dt=Math.min(it,nt),Qt=mt(Dt);Qt>0&&(J.append("rect").attr("x",0).attr("y",O).attr("width",Qt).attr("height",V).attr("fill","url(#crosshatch)").attr("opacity",.4),J.append("line").attr("x1",mt(Dt)).attr("y1",O).attr("x2",mt(Dt)).attr("y2",O+V).attr("stroke",ot("noneu")).attr("stroke-width",2),Qt>=35&&J.append("text").attr("x",Qt/2).attr("y",O+V/2).attr("dy","0.35em").attr("text-anchor","middle").attr("fill",ot("noneu")).attr("font-size","11px").attr("font-weight","700").text("non-EU"))}const mr=et&&xe>0?yt*(xe/100):0,vr=et?Nt+yt+mr+4:mt(nt)+4,_r=J.append("text").attr("x",vr).attr("y",O+V/2).attr("dy","0.35em").attr("text-anchor","start").attr("fill",nt>100?et?"#b86347":"#8b2500":"#444").attr("font-size","11px").attr("font-weight",nt>100?"700":"500").text(`${nt.toFixed(0)}%${nt>100?" (reserve draw)":""}`);if(I.isElectricity){const Dt=_r.node().getBBox().width,Qt=vr+Dt+10,xr=J.append("g").attr("class","electricity-warning-group").style("cursor","help");xr.append("circle").attr("cx",Qt).attr("cy",O+V/2).attr("r",6).attr("fill","#c44536"),xr.append("text").attr("x",Qt).attr("y",O+V/2).attr("dy","0.35em").attr("text-anchor","middle").attr("fill","#fff").attr("font-size","11px").attr("font-weight","700").style("pointer-events","none").text("!"),xr.append("circle").attr("cx",Qt).attr("cy",O+V/2).attr("r",10).attr("fill","transparent").on("mouseenter",function(Bo){m(Bo,Qt,O)}).on("mouseleave",C)}}}else{const st=mt(100),ut=et?Math.min(Q[W],100):100,nt=et?st*(ut/100):st,it=et?st*(Z[W]/100):0;if(J.append("rect").attr("class","bar-nodata").attr("x",it).attr("y",O).attr("width",nt).attr("height",V).attr("fill",et?"#e4e4e4":"#d9d9d9").attr("rx",3),nt>30&&J.append("text").attr("class","no-data-label").attr("x",it+nt/2).attr("y",O+V/2).attr("dy","0.35em").attr("text-anchor","middle").attr("fill","#777").attr("font-size","11px").text("No data"),I.isElectricity){const dt=mt(100)+14,Mt=J.append("g").attr("class","electricity-warning-group").style("cursor","help");Mt.append("circle").attr("cx",dt).attr("cy",O+V/2).attr("r",6).attr("fill","#c44536"),Mt.append("text").attr("x",dt).attr("y",O+V/2).attr("dy","0.35em").attr("text-anchor","middle").attr("fill","#fff").attr("font-size","11px").attr("font-weight","700").style("pointer-events","none").text("!"),Mt.append("circle").attr("cx",dt).attr("cy",O+V/2).attr("r",10).attr("fill","transparent").on("mouseenter",function(yt){m(yt,dt,O)}).on("mouseleave",C)}}}),Y.value.forEach((I,W)=>{const O=I.isSubcategory,V=I.isOtherRemainder?h:b;J.append("text").attr("x",-8).attr("y",N[W]+V/2).attr("dy","0.35em").attr("text-anchor","end").attr("fill",I.isOtherRemainder?"#777":O?"#555":"#222").attr("font-size",(I.isOtherRemainder,"11px")).attr("font-style",O||I.isOtherRemainder?"italic":"normal").text(I.name)})}return Kt(()=>[n.dependencyData,n.year],()=>{D()},{deep:!0}),Kt(()=>n.countryName,()=>{zt(l)}),ie(()=>{D(),zt(l),u=new ResizeObserver(()=>{D(),l()}),r.value&&u.observe(r.value)}),_e(()=>{u&&u.disconnect()}),(T,M)=>L.value?(G(),z("div",vh,[v("div",_h,[v("div",xh,[v("div",bh,[v("code",{class:"formula",style:we(p.value)},"Production + Imports  Exports  Stock Changes",4),(G(),z("svg",{class:"curly-brace",style:we(d.value),viewBox:"0 0 100 12",preserveAspectRatio:"none"},[...M[1]||(M[1]=[v("path",{d:"M 0,12 Q 0,5 10,5 L 44,5 Q 50,5 50,0 Q 50,5 56,5 L 90,5 Q 100,5 100,12",fill:"none",stroke:"var(--text-color-gray, #666)","stroke-width":"1.5"},null,-1)])],4)),v("code",{class:"formula",style:we(f.value)},"(Imports  Exports) / Gross Available Energy",4),(G(),z("svg",{class:"curly-brace",style:we(c.value),viewBox:"0 0 100 12",preserveAspectRatio:"none"},[...M[2]||(M[2]=[v("path",{d:"M 0,12 Q 0,5 10,5 L 44,5 Q 50,5 50,0 Q 50,5 56,5 L 90,5 Q 100,5 100,12",fill:"none",stroke:"var(--text-color-gray, #666)","stroke-width":"1.5"},null,-1)])],4))]),t.countryName?(G(),z("h3",wh,[v("span",{ref_key:"countryNameRef",ref:o},pt(t.countryName),513),M[3]||(M[3]=bt("'s ",-1)),M[4]||(M[4]=v("span",{class:"highlight-import"},"Import Dependency",-1)),M[5]||(M[5]=bt(" as Percentage by Fuel Type (",-1)),M[6]||(M[6]=v("a",{class:"heading-link",href:"https://ec.europa.eu/eurostat/statistics-explained/index.php?title=Glossary:Energy_dependency_rate",target:"_blank",rel:"noopener"},"Eurostat methodology",-1)),M[7]||(M[7]=bt(") ",-1))])):(G(),z("h3",Ch,[...M[8]||(M[8]=[v("span",{class:"highlight-import"},"Import Dependency",-1),bt(" by Fuel Type (",-1),v("a",{class:"heading-link",href:"https://ec.europa.eu/eurostat/statistics-explained/index.php?title=Glossary:Energy_dependency_rate",target:"_blank",rel:"noopener"},"Eurostat methodology",-1),bt(") ",-1)])]))]),v("div",{ref_key:"chartRef",ref:r,class:"chart-svg"},null,512),v("div",{ref_key:"tooltipRef",ref:a,class:Wt(["electricity-tooltip",{visible:i.value}])},[...M[9]||(M[9]=[he("<strong data-v-fc101c73>Non-EU imports only.</strong> Eurostat doesn&#39;t calculate overall electricity dependency: <ul data-v-fc101c73><li data-v-fc101c73><em data-v-fc101c73>Origin:</em> Fuel dependency is counted at source (gas plant imports = gas dependency)</li><li data-v-fc101c73><em data-v-fc101c73>Losses:</em> ~33% of energy lost converting to electricity makes tracking difficult</li><li data-v-fc101c73><em data-v-fc101c73>Trade:</em> EU is near net-zero; grid constantly rebalances across borders</li><li data-v-fc101c73><em data-v-fc101c73>Focus:</em> Eurostat measures primary fuels (oil, gas) not transformed energy</li><li data-v-fc101c73><em data-v-fc101c73>Method:</em> Methodological complexities in how electricity trade interacts with primary fuels used to produce it </li></ul>",3)])],2)])])):(G(),z("div",mh,[...M[0]||(M[0]=[v("span",{class:"no-data-icon"},"?",-1),v("span",null,"No dependency data available for this year",-1)])]))}},$h=Tt(kh,[["__scopeId","data-v-fc101c73"]]),Sh={id:"dependency",class:"page-section"},Mh={class:"section-container"},Eh={key:0,class:"loading"},Th={key:1,class:"error"},Ah={key:2,class:"charts-container"},Nh={__name:"Dependency",setup(t){const e=Jt();return(n,r)=>(G(),z("section",Sh,[r[1]||(r[1]=v("div",{class:"chart-header"},[v("h2",null,"Fuel by Fuel: Measuring The Energy Import Dependence")],-1)),v("div",Mh,[X(e).isLoading?(G(),z("div",Eh,"Loading energy data...")):X(e).error?(G(),z("div",Th,pt(X(e).error),1)):Gt("",!0),X(e).dependencyData?(G(),z("div",Ah,[Ct($h,{dependencyData:X(e).dependencyData,year:X(e).selectedYear,countryName:X(e).selectedCountry?.name||""},null,8,["dependencyData","year","countryName"])])):Gt("",!0),r[0]||(r[0]=he('<div class="text-container" data-v-d2573c30><p data-v-d2573c30> The stacked bar chart shows how much of a countrys energy supply is produced <span style="color:#81b29a;font-weight:600;" data-v-d2573c30>domestically</span> and how much is <span style="color:#e8a87c;font-weight:600;" data-v-d2573c30>imported</span> from abroad. Import dependency highlights the degree to which national energy systems rely on foreign suppliers and therefore reflects vulnerability to geopolitical risks. </p><p data-v-d2573c30> NonEU neighbours such as Moldova (~68%) and Georgia (~30%) rely heavily on external <strong data-v-d2573c30>electricity</strong> providers, while Western Europe trades mostly within the EU. France is typically a <span style="color:#7b68ee;font-weight:600;" data-v-d2573c30>net exporter</span> thanks to its nuclear fleet. <strong data-v-d2573c30>0il &amp; petroleum</strong> are imported 90%+ (2022) by nearly all European countries. Dependence on <strong data-v-d2573c30>natural gas</strong> increased rapidly during the 2022 crisis, with some countries even <span style="color:#8b2500;font-weight:600;" data-v-d2573c30>drawing their reserves</span> from previous years, such as Germany (106%) and France (109%). </p><p data-v-d2573c30> Countries like Germany imported around half their needs of <strong data-v-d2573c30>Coal</strong>, while Poland and Czechia still rely heavily on domestic hard coal. Nearly all EU countries depend almost entirely on imports for <strong data-v-d2573c30>anthracite</strong> and <strong data-v-d2573c30>coking coal</strong>. <strong data-v-d2573c30>Lignite</strong> remains almost exclusively local due to poor transportability. </p><p data-v-d2573c30> Now that we know how reliant many countries are on imported energy, we can look at who they depend on. Europes fuel mix is shaped by a small set of major trading partners, from Norway for gas to Saudi Arabia and the U.S. for oil with Russias role sharply reduced after 2022. </p></div>',1))]),r[2]||(r[2]=he('<div class="chart-meta" data-v-d2573c30><div class="meta-section" data-v-d2573c30><span class="meta-label" data-v-d2573c30>Source</span><ul class="meta-list" data-v-d2573c30><li data-v-d2573c30> Eurostat <a href="https://ec.europa.eu/eurostat/web/energy/database" target="_blank" rel="noopener" data-v-d2573c30>Energy Database</a> (European Commission) </li><li data-v-d2573c30> Tables <code data-v-d2573c30>nrg_ind_id</code> (ID, overall dependency) and <code data-v-d2573c30>nrg_ind_id3cf</code> (ID3CF, third country dependency) </li><li data-v-d2573c30> Table <code data-v-d2573c30>nrg_bal_c</code> (complete energy balances): Gross Available Energy by SIEC subcategory, used for subcategory bar width proportions </li><li data-v-d2573c30>Fuel breakdown via SIEC codes mapped to display names</li></ul></div><div class="meta-section" data-v-d2573c30><span class="meta-label" data-v-d2573c30>Data Hints</span><ul class="meta-list" data-v-d2573c30><li data-v-d2573c30> Non-EU breakdown (hatched line) only available for main aggregates (Coal, Gas, Oil, Electricity). Subcategory bar widths are proportional to their share of the parent category&#39;s Gross Available Energy (GAE). </li><li data-v-d2573c30>Non-EU (third country) import dependency data is only available from 2010 to 2023.</li><li data-v-d2573c30>Electricity: Eurostat does not calculate overall import dependency; showing non-EU imports only.</li></ul></div></div>',1))]))}},Rh=Tt(Nh,[["__scopeId","data-v-d2573c30"]]),Ph={name:"ItemsSlider",data(){return{scrollX:0,scrollEnd:!1,slidewith:100}},mounted(){this.$nextTick(()=>{const t=document.getElementById("slider-container");if(t){const e=t.clientWidth,n=document.documentElement.clientWidth<600?1:2;this.slidewith=e/n+(document.documentElement.clientWidth<600?10:0)}})},methods:{slide(t){this.$refs.scrl.scrollBy({left:t,behavior:"smooth"}),this.$refs.scrl.scrollLeft+=t,this.scrollX+=t,Math.floor(this.$refs.scrl.scrollWidth-this.$refs.scrl.scrollLeft)<=this.$refs.scrl.offsetWidth?this.scrollEnd=!0:this.scrollEnd=!1},scrollCheck(){this.scrollX=this.$refs.scrl.scrollLeft,Math.floor(this.$refs.scrl.scrollWidth-this.$refs.scrl.scrollLeft)<=this.$refs.scrl.offsetWidth?this.scrollEnd=!0:this.scrollEnd=!1}},props:{title:String}},Oh={class:"item-slider-container"},Ih={class:"item-slider"};function Dh(t,e,n,r,a,i){return G(),z("div",Oh,[v("div",Ih,[v("div",{onClick:e[0]||(e[0]=o=>i.slide(-a.slidewith)),class:Wt([{"is-disabled-hide":a.scrollX<1},"left-arrow-left"])},[...e[3]||(e[3]=[v("span",{class:"timeline-icon material-symbols-outlined"},"chevron_left",-1)])],2),v("div",{id:"slider-container",ref:"scrl",onScroll:e[1]||(e[1]=(...o)=>i.scrollCheck&&i.scrollCheck(...o)),class:"item-container"},[Ko(t.$slots,"default",{},void 0)],544),v("div",{onClick:e[2]||(e[2]=o=>i.slide(a.slidewith)),class:Wt([{"is-disabled-hide":a.scrollEnd},"right-arrow-right"])},[...e[4]||(e[4]=[v("span",{class:"timeline-icon material-symbols-outlined"},"chevron_right",-1)])],2)])])}const Hh=Tt(Ph,[["render",Dh],["__scopeId","data-v-30c13bbe"]]),Lh="data:image/svg+xml,%3csvg%20width='4408'%20height='1516'%20viewBox='0%200%204408%201516'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M4345.75%201289.5C4318.88%201266.74%204285.87%201256.39%204263.37%201226.27C4215.24%201161.87%204240.84%201054.7%204245.2%20963.611C4254.04%20779.158%204143.98%20598.469%204007.7%20573.693C3976.53%20568.026%203944.11%20569.383%203914.77%20554.151C3832.84%20511.617%203814.46%20370.555%203767.31%20270.965C3708.15%20145.992%203590.36%2081.0607%203481.06%20100.083C3371.76%20119.106%203273.88%20215.253%203217.19%20342.28L3215.54%20346.616C3141.46%20442.432%203018.53%20461.059%202930.44%20389.818C2844.63%20320.423%202799.7%20185.661%202720.28%20103.687C2643.06%2024.0011%202538.86%202.11167%202442.71%2022.5201C2346.55%2042.9262%202257.17%20101.884%202174.39%20170.723C2136.22%20202.463%202098.86%20236.616%202057.69%20260.664C1924.73%20338.345%201757.48%20293.507%201656.86%20153.213C1632.87%20119.755%201612.3%2081.416%201584.83%2053.1893C1514.79%20-18.7896%201414.51%20-9.71456%201332.3%2033.1184C1250.09%2075.9514%201177.88%20147.586%201097.41%20196.006C1016.93%20244.425%20919.93%20267.45%20842.534%20210.685C793.435%20174.676%20757.04%20109.945%20704.609%2083.7586C645.759%2054.3683%20575.757%2082.7327%20532.484%20143.867C489.211%20205.003%20471.348%20293.793%20476.988%20377.832C480.953%20436.91%20495.584%20494.349%20496.491%20553.653C498.371%20676.623%20433.823%20796.067%20346.234%20831.692C271.321%20862.164%20186.681%20835.987%20115.242%20878.962C30.6368%20929.857%20-10.2127%201069.12%202.17795%201192.58C14.5686%201316.05%2069.8738%201424.47%20133.479%201515.1H4393.5C4424.46%201434.74%204402.72%201337.73%204345.75%201289.5Z'%20fill='%23D9CEC4'/%3e%3cpath%20d='M2938.07%20743.111C2947.65%20743.111%202956.6%20745.725%202964.32%20750.215C2971.32%20729.89%202990.56%20715.263%203013.26%20715.263C3016.97%20715.263%203020.59%20715.669%203024.07%20716.411C3033.02%20680.562%203065.42%20654%203104.04%20654C3142.34%20654%203174.52%20680.118%203183.78%20715.512C3185.41%20715.396%203187.04%20715.263%203188.7%20715.263C3201.29%20715.263%203213.05%20718.687%203223.22%20724.574C3232.7%20718.707%203243.84%20715.263%203255.81%20715.263C3290.1%20715.263%203317.9%20743.064%203317.9%20777.361H3257.4H3193.71H3175.57H3132.01H3119.98H3108.68H3064.02H3032.51H2987.14H2985.78H2962.49H2889C2896.38%20757.385%202915.54%20743.111%202938.07%20743.111Z'%20fill='%23FCF1E6'/%3e%3cpath%20d='M805.303%20601.706C817.853%20601.706%20829.576%20605.697%20839.695%20612.552C848.864%20581.52%20858.665%20552.678%20888.411%20552.678C893.273%20552.678%20909.905%20506.661%20947.249%20527.273C966.248%20534.144%20953.8%20496.737%20983.376%20466.2C1015.39%20438.717%201061.9%20453.986%201071.73%20513.532C1073.86%20513.356%201136.03%20488.339%201153.75%20520.615C1167.51%20538.937%201165.61%20564.415%201178.93%20573.403C1191.36%20564.446%201205.95%20559.187%201221.63%20559.187C1266.57%20559.187%201303%20601.635%201303%20654H1223.72H1140.26H1116.5H1059.42H1043.66H1028.86H970.335H929.042H869.6H867.811H837.301H741C750.669%20623.5%20775.77%20601.706%20805.303%20601.706Z'%20fill='%23FCF1E6'/%3e%3cpath%20d='M2251.37%20584.529H2187.31H2167.01H2165.82H2126.28H2098.8H2059.87H2050.02H2039.54H2001.56H1985.76H1930.23H1877.49C1877.49%20554.634%201901.73%20530.396%201931.63%20530.396C1938.09%20530.396%201944.26%20531.589%201950.01%20533.665C1960.66%20524.114%201974.69%20518.259%201990.13%20518.259C1997.35%20518.259%202004.24%20519.598%202010.66%20521.929C2017.63%20513.769%202027.97%20508.579%202039.54%20508.579C2047.7%20508.579%202055.24%20511.175%202061.43%20515.554C2072.81%20499.015%202091.85%20488.157%202113.44%20488.157C2143.69%20488.157%202168.93%20509.441%202175.09%20537.84C2183.43%20528.804%202195.33%20523.111%202208.6%20523.111C2233.8%20523.111%202254.24%20543.542%202254.24%20568.748C2254.23%20574.306%202253.19%20579.606%202251.37%20584.529Z'%20fill='%23FCF1E6'/%3e%3c/svg%3e",Fh="/MyEnergyProfile/assets/consumption_industry-C8RP9hDo.svg",zh="/MyEnergyProfile/assets/consumption_residential-C9jPUtXp.svg",Gh="/MyEnergyProfile/assets/consumption_service-D0ioY7Vx.svg",Yh="/MyEnergyProfile/assets/consumption_transport-qyh_MufO.svg",Bh="/MyEnergyProfile/assets/fuel-anthracite-CEzPBKao.jpg",Wh="/MyEnergyProfile/assets/fuel-bituminous-BUdOayH8.jpg",Uh="/MyEnergyProfile/assets/fuel-coal-hdVqVBl5.jpg",Vh="/MyEnergyProfile/assets/fuel-coking-coal-D-ug1G7g.jpg",Kh="/MyEnergyProfile/assets/fuel-crude-oil-CpW_4MG2.webp",Xh="/MyEnergyProfile/assets/fuel-electricity-CpJpkjVy.jpg",qh="/MyEnergyProfile/assets/fuel-gas-DV2Ks9vZ.jpg",jh="/MyEnergyProfile/assets/fuel-lignite-snSupppp.jpg",Zh="/MyEnergyProfile/assets/fuel-ngl-BDCsLaWK.webp",Jh="/MyEnergyProfile/assets/fuel-oil-Dzatq_PN.jpg",Qh="/MyEnergyProfile/assets/fuel-peat-98ECtOul.jpg",tp="/MyEnergyProfile/assets/fuel-sub-bituminous-C-JRgDMV.jpg",ep="/MyEnergyProfile/assets/logo-ksmtjNEn.png",np={class:"card"},rp=["src"],ap={class:"content"},ip={__name:"Card",props:{title:String,imgSrc:String,content:String},setup(t){const e=r=>new URL(Object.assign({"../assets/img/consumption_background.svg":Lh,"../assets/img/consumption_industry.svg":Fh,"../assets/img/consumption_residential.svg":zh,"../assets/img/consumption_service.svg":Gh,"../assets/img/consumption_transport.svg":Yh,"../assets/img/fuel-anthracite.jpg":Bh,"../assets/img/fuel-bituminous.jpg":Wh,"../assets/img/fuel-coal.jpg":Uh,"../assets/img/fuel-coking-coal.jpg":Vh,"../assets/img/fuel-crude-oil.webp":Kh,"../assets/img/fuel-electricity.jpg":Xh,"../assets/img/fuel-gas.jpg":qh,"../assets/img/fuel-lignite.jpg":jh,"../assets/img/fuel-ngl.webp":Zh,"../assets/img/fuel-oil.jpg":Jh,"../assets/img/fuel-peat.jpg":Qh,"../assets/img/fuel-sub-bituminous.jpg":tp,"../assets/img/logo.png":ep})[`../assets/img/${r}`],import.meta.url).href,n=t;return ie(()=>{const r=document.getElementById("slider-container");r&&new ResizeObserver(i=>{const o=i[0].contentRect.width,s=10,u=document.documentElement.clientWidth<600?1:2,l=o/u-(document.documentElement.clientWidth<600?0:s);document.documentElement.style.setProperty("--item-width",`${l}px`)}).observe(r)}),(r,a)=>(G(),z("div",np,[n.imgSrc?(G(),z("img",{key:0,src:e(n.imgSrc),alt:"Card image"},null,8,rp)):Gt("",!0),v("div",ap,[v("h4",null,pt(n.title),1),v("p",null,pt(n.content),1)])]))}},op=Tt(ip,[["__scopeId","data-v-9cb0c764"]]),sp={id:"fueltypes",class:"page-section"},lp={__name:"FuelTypes",setup(t){Jt();const e=[{title:"Electricity",imgSrc:"fuel-electricity.jpg",content:"A comon miss conception is to think of energy as just electricity. While it is the most versatile energy carrier for lighting, appliances, industry, and increasingly transport it's just a part of what is consumed at scale and often product from other fossil sources."},{title:"Oil & Petroleum",imgSrc:"fuel-gas.jpg",content:"The worlds largest primary energy source, essential for transport and petrochemicals. Thanks to its high energy density (~45MJ/kg), it remains the backbone of global mobility and industrial feedstocks."},{title:"Oil & Petroleum - Crude Oil",imgSrc:"fuel-crude-oil.webp",content:"Crude oil is sent to refineries where its separated into gasoline, diesel, jet fuel, and other products. Its properties vary widely, classified by sulfur content (sweet vs. sour) and density (light vs. heavy), which determine how easily it can be processed."},{title:"Oil & Petroleum - NGL",imgSrc:"fuel-ngl.webp",content:"Propane, butane, and ethane are natural gas liquids that are separated during natural gas processing before the gas is sent to pipelines. They serve as fuels, petrochemical feedstocks, and heating sources."},{title:"Natural Gas",imgSrc:"fuel-gas.jpg",content:"Primarily methane (CH), it burns about 50% cleaner than coal, making it a lowercarbon fossil fuel option. Its essential for heating, electricity generation, and fertilizer production, and is transported longdistance through pipelines or as liquefied natural gas (LNG) via tankers."},{title:"Coal",imgSrc:"fuel-coal.jpg",content:"The most carbonintensive fossil fuel, ranked by geological maturity from lignite  subbituminous  bituminous  anthracite. Despite declining use, it still plays a key role in power generation and steelmaking, but is being phased out across much of Europe under climate commitments."},{title:"Coal - Anthracite",imgSrc:"fuel-anthracite.jpg",content:"The highestgrade coal, about 8697% carbon with an energy content of 3035MJ/kg. It burns hot, clean, and smokeless, but is geologically rare compared to other coal types."},{title:"Coal - Coking Coal",imgSrc:"fuel-coking-coal.jpg",content:"A specialized grade of coal essential for blastfurnace steel production, where it is converted into metallurgical coke (the highcarbon, highstrength fuel needed to melt iron ore and support the furnace structure)."},{title:"Coal - Other Bituminous",imgSrc:"fuel-bituminous.jpg",content:"A midgrade coal used mainly in power generation, typically containing 4586% carbon with an energy content of 2435MJ/kg."},{title:"Coal - Sub-bituminous",imgSrc:"fuel-sub-bituminous.jpg",content:"A midrank coal between lignite and bituminous, typically containing 3545% carbon and delivering 1723MJ/kg. It is used mainly for power generation due to its moderate energy content and wide availability."},{title:"Coal - Lignite",imgSrc:"fuel-lignite.jpg",content:"Also known as brown coal, it contains 2535% carbon and can hold up to ~75% moisture, giving it very low energy density. Because it tends to crumble when dried and is hard to transport efficiently, lignite is rarely traded internationally and is mostly used near the mine mouth for power generation."},{title:"Peat",imgSrc:"fuel-peat.jpg",content:"Partially decomposed plant matter from bogs; a precoal fuel with very low energy density (812MJ/kg). Historically used for heating in northern Europe, but almost always sourced locally due to poor transportability."}];return(n,r)=>(G(),z("section",sp,[r[0]||(r[0]=v("div",{class:"chart-header"},[v("h2",null,"Energy as a Resource: Understanding the Sources")],-1)),Ct(Hh,{title:"Types of Fuel"},{default:Hi(()=>[(G(),z(ue,null,Ne(e,(a,i)=>v("div",{key:i},[Ct(op,{title:a.title,content:a.content,imgSrc:a.imgSrc},null,8,["title","content","imgSrc"])])),64))]),_:1})]))}},cp=Tt(lp,[["__scopeId","data-v-23b11aac"]]),up={class:"small-multiples-chart"},fp={key:0,class:"no-data"},dp={key:1,class:"chart-content"},hp={__name:"SmallMultiplesChart",props:{productionConsumptionData:{type:Object,default:null},countryYears:{type:Object,default:null},selectedYear:{type:Number,default:null},countryName:{type:String,default:""}},setup(t){const e=t,n=ft(null);let r=null;const a=[{code:"SFF",label:"Coal",color:"#8b4513"},{code:"OIL",label:"Oil",color:"#1a1a1a"},{code:"GAS",label:"Gas",color:"#2980b9"},{code:"BIO",label:"Biofuels",color:"#27ae60"},{code:"EH",label:"Electricity",color:"#f1c40f"}],i=rt(()=>e.countryYears&&Object.keys(e.countryYears).length>0),o=rt(()=>{if(!e.countryYears)return{years:[],series:{}};const l=Object.keys(e.countryYears).map(Number).filter(d=>!isNaN(d)).sort((d,f)=>d-f),c={};for(const d of a){const f=[],p=[];for(const m of l){const C=e.countryYears[m];f.push({year:m,value:C?.production?.[d.code]??null}),p.push({year:m,value:C?.consumption?.[d.code]??null})}c[d.code]={production:f,consumption:p}}return{years:l,series:c}});function s(l){return l>=1e3?`${(l/1e3).toFixed(1)}k`:l>=10?l.toFixed(0):l>=1?l.toFixed(1):l.toFixed(2)}function u(){if(!n.value||!i.value)return;ht(n.value).selectAll("*").remove();const{years:l,series:c}=o.value;if(l.length===0)return;const d=n.value,f=d.clientWidth||700,p=f<600?2:a.length,m=Math.ceil(a.length/p),C=2,$=["Production","Consumption"],S=["production","consumption"];let A=1/0,P=-1/0;for(const _ of a)for(const x of S){const w=c[_.code][x].filter(N=>N.value!=null);w.length>0&&(A=Math.min(A,w[0].year),P=Math.max(P,w[w.length-1].year))}isFinite(A)||(A=l[0],P=l[l.length-1]);const R=[A,P],H={top:18,right:10,bottom:30,left:46},k=20,L=4,Y=8,E=Math.max(100,(f-k-L*(p-1))/p),D=E*.85,T=E-H.left-H.right,M=D-H.top-H.bottom,b=16,h=k+p*E+(p-1)*L,g=m*(C*D+(C-1)*Y)+(m-1)*b,y=ht(d).append("svg").attr("width",h).attr("height",g);for(let _=0;_<m;_++){const x=_*(C*D+(C-1)*Y+b);for(let w=0;w<C;w++){const N=S[w],F=x+w*(D+Y);_===0&&y.append("text").attr("transform",`translate(12, ${F+D/2}) rotate(-90)`).attr("text-anchor","middle").attr("fill","#222").attr("font-size","12px").attr("font-weight","700").text($[w]);for(let B=0;B<p&&_*p+B<a.length;B++){const q=_*p+B,U=a[q],Q=k+B*(E+L),Z=c[U.code][N],at=Z.filter(I=>I.value!=null),gt=U.code==="BIO"&&N==="production",J=y.append("g").attr("transform",`translate(${Q+H.left}, ${F+H.top})`);J.append("line").attr("x1",0).attr("x2",T).attr("y1",0).attr("y2",0).attr("stroke","#222").attr("stroke-width",1),J.append("line").attr("x1",T).attr("x2",T).attr("y1",0).attr("y2",M).attr("stroke","#222").attr("stroke-width",1),w===0&&y.append("text").attr("x",Q+E/2).attr("y",F+14).attr("text-anchor","middle").attr("fill",U.color).attr("font-size","12px").attr("font-weight","700").text(U.label);const Pt=ae().domain(R).range([0,T]),Rt=hn(at,I=>I.value)||1,mt=ae().domain([0,Rt*1.1]).range([M,0]),Ot=M<100?2:3,Xt=Yi(mt).ticks(Ot).tickSize(-T).tickFormat(I=>s(I)),kt=J.append("g").call(Xt);kt.selectAll(".domain").remove(),J.append("line").attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",M).attr("stroke","#222").attr("stroke-width",1),kt.selectAll(".tick line").remove(),kt.selectAll(".tick text").attr("fill","#222").attr("font-size","9px");const At=kt.selectAll(".tick text");if(!At.empty()){const I=At.nodes()[At.size()-1],W=ht(I).text();ht(I).text(W+" TWh")}const j=T<75?3:4,tt=Gi(Pt).ticks(j).tickFormat(gr("d")),lt=J.append("g").attr("transform",`translate(0, ${M})`).call(tt);if(lt.selectAll(".domain").attr("stroke","#222"),lt.selectAll(".tick line").remove(),lt.selectAll(".tick text").attr("fill","#222").attr("font-size","9px"),gt||at.length===0){J.append("text").attr("x",T/2).attr("y",M/2).attr("text-anchor","middle").attr("fill","#bbb").attr("font-size","10px").attr("font-style","italic").text(gt?"No production data":"No data");continue}const ct=Ee().defined(I=>I.value!=null).x(I=>Pt(I.year)).y(I=>mt(I.value));if(J.append("path").datum(Z).attr("d",ct).attr("fill","none").attr("stroke",U.color).attr("stroke-width",1.5),J.selectAll(".dot").data(at).join("circle").attr("cx",I=>Pt(I.year)).attr("cy",I=>mt(I.value)).attr("r",at.length>40?1:at.length>20?1.5:2.5).attr("fill",U.color),e.selectedYear!=null){const I=Z.find(W=>W.year===e.selectedYear&&W.value!=null);I&&J.append("circle").attr("cx",Pt(I.year)).attr("cy",mt(I.value)).attr("r",4).attr("fill","none").attr("stroke","#e74c3c").attr("stroke-width",1.5)}}}}}return Kt(()=>[e.countryYears,e.selectedYear,e.countryName],()=>zt(()=>u()),{deep:!0}),ie(()=>{u(),r=new ResizeObserver(()=>u()),n.value&&r.observe(n.value)}),_e(()=>{r&&r.disconnect()}),(l,c)=>(G(),z("div",up,[i.value?(G(),z("div",dp,[v("div",{ref_key:"chartRef",ref:n,class:"chart-grid"},null,512),c[0]||(c[0]=he('<div class="chart-meta" data-v-5b940d18><div class="meta-section" data-v-5b940d18><span class="meta-label" data-v-5b940d18>Source</span><ul class="meta-list" data-v-5b940d18><li data-v-5b940d18><a href="https://github.com/owid/energy-data" target="_blank" rel="noopener" data-v-5b940d18>Our World in Data Energy Dataset</a>  <code data-v-5b940d18>*_production</code>, <code data-v-5b940d18>*_consumption</code> fields (TWh) </li><li data-v-5b940d18> Underlying data compiled by the <a href="https://www.energyinst.org/statistical-review" target="_blank" rel="noopener" data-v-5b940d18>Energy Institute</a> Statistical Review of World Energy </li></ul></div><div class="meta-section" data-v-5b940d18><span class="meta-label" data-v-5b940d18>Data Hints</span><ul class="meta-list" data-v-5b940d18><li data-v-5b940d18> Y-axis scales differ between production and consumption rows. This is necessary because production and consumption volumes can differ by orders of magnitude for most countries. </li></ul></div></div>',1))])):(G(),z("div",fp,"No production/consumption data available"))]))}},pp=Tt(hp,[["__scopeId","data-v-5b940d18"]]),gp={id:"productionconsumption",class:"page-section"},yp={key:0,class:"loading"},mp={key:1,class:"error"},vp={key:2},_p={__name:"ProductionConsumption",setup(t){const e=Jt();return(n,r)=>(G(),z("section",gp,[r[0]||(r[0]=v("div",{class:"chart-header"},[v("h2",null,"Production & Consumption of the Main Energy Sources Over Time")],-1)),v("div",null,[X(e).isLoading?(G(),z("div",yp,"Loading energy data...")):X(e).error?(G(),z("div",mp,pt(X(e).error),1)):(G(),z("div",vp,[Ct(pp,{productionConsumptionData:X(e).productionConsumptionData,countryYears:X(e).selectedCountry?.years,selectedYear:X(e).selectedYear,countryName:X(e).selectedCountry?.name||""},null,8,["productionConsumptionData","countryYears","selectedYear","countryName"])]))])]))}},xp=Tt(_p,[["__scopeId","data-v-1dda3e67"]]),bp={key:0,class:"no-data"},wp={key:1,class:"chart-wrapper"},Cp={class:"chart-container scroll-container"},kp={class:"chart-scroll-outer"},$p={__name:"EmissionsPerCapitaRanking",props:{rankingData:{type:Array,default:()=>[]},selectedCountryCode:{type:String,default:""}},setup(t){const e=Jt(),n=t,r=ft(null),a=ft(null);let i=null;const o=rt(()=>n.rankingData&&n.rankingData.length>0);function s(){if(!r.value||!o.value)return;ht(r.value).selectAll("*").remove();const l=n.rankingData,c=r.value.clientWidth||500,d={top:10,right:120,bottom:5,left:175},f=26,p=42,m=3;let C=0;l.forEach(E=>{C+=(E.code===n.selectedCountryCode?p:f)+m});const $=d.top+d.bottom+C,S=c,A=S-d.left-d.right,R=ht(r.value).append("svg").attr("width",S).attr("height",$).append("g").attr("transform",`translate(${d.left}, ${d.top})`),H=hn(l,E=>E.value)||1,k=ae().domain([0,H*1.05]).range([0,A]),L=ae().domain([0,3,6,H]).range(["#27ae60","#8fce00","#f39c12","#e74c3c"]).clamp(!0);let Y=0;l.forEach(E=>{const D=E.code===n.selectedCountryCode,T=D?p:f,M=Y,b=R.append("g").attr("class","bar-row").style("cursor",D?"default":"pointer").on("click",()=>{D||e.setSelectedCountry(E.code)});b.append("rect").attr("x",-175).attr("y",M).attr("width",S).attr("height",T).attr("fill","transparent");const h=b.append("rect").attr("x",0).attr("y",M).attr("width",k(E.value)).attr("height",T).attr("fill",L(E.value)).attr("fill-opacity",D?1:.65).attr("stroke",D?"#222":"none").attr("stroke-width",D?2.5:0).attr("rx",3);D||b.on("mouseenter",()=>{h.attr("fill-opacity",.9)}).on("mouseleave",()=>{h.attr("fill-opacity",.65)}),D&&R.append("rect").attr("x",-4).attr("y",M-4).attr("width",k(E.value)+8).attr("height",T+8).attr("fill","none").attr("stroke",L(E.value)).attr("stroke-width",2.5).attr("stroke-opacity",.35).attr("rx",6),b.append("text").attr("x",-8).attr("y",M+T/2).attr("text-anchor","end").attr("dominant-baseline","central").attr("font-size",D?"15px":"10px").attr("font-weight",D?"900":"400").attr("fill",D?"#000":"#666").text(E.name),b.append("text").attr("x",k(E.value)+8).attr("y",M+T/2).attr("dominant-baseline","central").attr("font-size",D?"17px":"10px").attr("font-weight",D?"900":"400").attr("fill",D?"#000":"#666").text(D?`${E.value.toFixed(1)} tCO/cap`:`${E.value.toFixed(1)}`),Y+=T+m}),u(l,d.top,f,p,m)}function u(l,c,d,f,p){if(!a.value)return;const m=l.findIndex(A=>A.code===n.selectedCountryCode);if(m===-1)return;let C=c;for(let A=0;A<m;A++)C+=(l[A].code===n.selectedCountryCode?f:d)+p;const $=a.value.clientHeight,S=C-$*.35;a.value.scrollTop=Math.max(0,S)}return Kt(()=>[n.rankingData,n.selectedCountryCode],()=>{s()},{deep:!0}),ie(()=>{s(),i=new ResizeObserver(()=>{s()}),r.value&&i.observe(r.value)}),_e(()=>{i&&i.disconnect()}),(l,c)=>o.value?(G(),z("div",wp,[c[1]||(c[1]=v("h3",null,"CO2 Emissions - Europe Comparison",-1)),c[2]||(c[2]=v("p",null," No project about energy can be considered complete without a section dedicated to the ecological aspects of energy use. We will focus on the most fundamental one: carbon emissions. First wee look at the total CO2 emissions per person from energy use across all sectors (measured in tonnes per year). ",-1)),v("div",Cp,[v("div",kp,[v("div",{ref_key:"scrollContainer",ref:a,class:"chart-scroll"},[v("div",{ref_key:"chartRef",ref:r,class:"chart-svg"},null,512)],512)])])])):(G(),z("div",bp,[...c[0]||(c[0]=[v("span",{class:"material-symbols-outlined"},"bar_chart_off",-1),v("p",null,"No emissions per capita ranking data available.",-1)])]))}},Sp=Tt($p,[["__scopeId","data-v-568b2464"]]),Mp={key:0,class:"no-data"},Ep={key:1,class:"chart-wrapper"},Tp={class:"chart-container"},Ap={__name:"EmissionsCloudPie",props:{emissionsData:{type:Object,default:null},countryName:{type:String,default:""}},setup(t){const e=t,n=ft(null);let r=null;const a=rt(()=>{if(!e.emissionsData)return!1;const s=e.emissionsData;return s.residential!=null||s.services!=null||s.transport!=null||s.industry!=null}),i=[{key:"residential",label:"Residential",color:"#63b3df"},{key:"transport",label:"Transport",color:"#ffb56b"},{key:"industry",label:"Industry",color:"#898989"},{key:"services",label:"Services",color:"#76d76b"}];function o(){if(!n.value||!a.value)return;ht(n.value).selectAll("*").remove();const s=n.value.clientWidth||460,u=Math.min(s,460),l=450,c=u/2,d=180,f=ht(n.value).append("svg").attr("width",u).attr("height",l).attr("viewBox",`0 0 ${u} ${l}`),p=e.emissionsData,m=i.filter(w=>p[w.key]!=null&&p[w.key]>0);if(m.length===0)return;const C=m.reduce((w,N)=>w+p[N.key],0),$=95,S=$*.38,A=f.append("defs");A.append("filter").attr("id","cloud-soft").attr("x","-30%").attr("y","-30%").attr("width","160%").attr("height","160%").append("feGaussianBlur").attr("in","SourceGraphic").attr("stdDeviation","6"),A.append("filter").attr("id","smoke-soft").attr("x","-50%").attr("y","-50%").attr("width","200%").attr("height","200%").append("feGaussianBlur").attr("in","SourceGraphic").attr("stdDeviation","4");const H=f.append("g").attr("filter","url(#cloud-soft)");[{x:0,y:0,r:$+40},{x:-70,y:12,r:58},{x:70,y:12,r:58},{x:-45,y:-42,r:52},{x:45,y:-42,r:52},{x:0,y:-58,r:46},{x:-90,y:-2,r:40},{x:90,y:-2,r:40},{x:-30,y:52,r:44},{x:30,y:52,r:44},{x:0,y:60,r:38},{x:-60,y:45,r:32},{x:60,y:45,r:32}].forEach(w=>{H.append("circle").attr("cx",c+w.x).attr("cy",d+w.y).attr("r",w.r).attr("fill","#90a4ae").attr("fill-opacity",.1)}),f.append("text").attr("x",c).attr("y",d-$-28).attr("text-anchor","middle").attr("font-size","15px").attr("font-weight","700").attr("letter-spacing","2px").attr("fill","#78909c").attr("fill-opacity",.45).text("CO");const L=395,Y=f.append("g").attr("filter","url(#smoke-soft)"),E=c-80;for(let w=0;w<8;w++){const N=w/7,F=L-50-N*(L-50-(d+$+15)),B=Math.sin(N*Math.PI*1.5)*18,q=E+N*50+B,U=6+N*22;Y.append("circle").attr("cx",q).attr("cy",F).attr("r",U).attr("fill","#90a4ae").attr("fill-opacity",.04+N*.05)}const D=c+80;for(let w=0;w<8;w++){const N=w/7,F=L-65-N*(L-65-(d+$+15)),B=Math.sin(N*Math.PI*1.5+1)*15,q=D-N*50+B,U=5+N*20;Y.append("circle").attr("cx",q).attr("cy",F).attr("r",U).attr("fill","#90a4ae").attr("fill-opacity",.04+N*.05)}const T=m.map(w=>({...w,value:p[w.key]})),b=zo().value(w=>w.value).padAngle(.03).sort(null)(T),h=fn().innerRadius(S).outerRadius($),g=fn().innerRadius($+32).outerRadius($+32);b.forEach(w=>{const N=w.data;f.append("path").attr("d",h(w)).attr("transform",`translate(${c}, ${d})`).attr("fill",N.color).attr("stroke",N.color).attr("stroke-width",1.5);const F=g.centroid(w),B=c+F[0],q=d+F[1],Q=(w.startAngle+w.endAngle)/2<Math.PI?"start":"end";f.append("text").attr("x",B).attr("y",q-7).attr("text-anchor",Q).attr("font-size","12px").attr("font-weight","600").attr("fill",N.color).text(N.label),f.append("text").attr("x",B).attr("y",q+8).attr("text-anchor",Q).attr("font-size","11px").attr("fill","#666").text(`${N.value.toFixed(2)} tCO/cap`)}),f.append("text").attr("x",c).attr("y",d-6).attr("text-anchor","middle").attr("font-size","20px").attr("font-weight","700").attr("fill","#333").text(`${C.toFixed(1)}`),f.append("text").attr("x",c).attr("y",d+14).attr("text-anchor","middle").attr("font-size","11px").attr("font-weight","500").attr("fill","#666").text("tCO/cap"),f.append("line").attr("x1",30).attr("y1",L).attr("x2",u-30).attr("y2",L).attr("stroke","#b0bec5").attr("stroke-width",1).attr("stroke-opacity",.4).attr("stroke-dasharray","6,4");const y=f.append("g").attr("transform",`translate(${c-115}, ${L})`);y.append("path").attr("d","M3,-3 L3,-11 L14,-11 L20,-21 L38,-21 L44,-11 L52,-11 L52,-3 Z").attr("fill","#546e7a").attr("fill-opacity",.55).attr("stroke","#37474f").attr("stroke-width",.8).attr("stroke-opacity",.3),y.append("path").attr("d","M16,-11 L21,-19 L27,-19 L27,-11 Z").attr("fill","#b0bec5").attr("fill-opacity",.35),y.append("path").attr("d","M29,-19 L36,-19 L41,-11 L29,-11 Z").attr("fill","#b0bec5").attr("fill-opacity",.3),y.append("circle").attr("cx",16).attr("cy",-1).attr("r",5).attr("fill","#263238").attr("fill-opacity",.6),y.append("circle").attr("cx",16).attr("cy",-1).attr("r",2.5).attr("fill","#546e7a").attr("fill-opacity",.4),y.append("circle").attr("cx",40).attr("cy",-1).attr("r",5).attr("fill","#263238").attr("fill-opacity",.6),y.append("circle").attr("cx",40).attr("cy",-1).attr("r",2.5).attr("fill","#546e7a").attr("fill-opacity",.4),y.append("rect").attr("x",50).attr("y",-5).attr("width",6).attr("height",3).attr("rx",1).attr("fill","#455a64").attr("fill-opacity",.5),[{x:59,y:-6,r:3.5},{x:64,y:-9,r:5},{x:67,y:-14,r:4.5},{x:70,y:-20,r:4}].forEach((w,N)=>{y.append("circle").attr("cx",w.x).attr("cy",w.y).attr("r",w.r).attr("fill","#78909c").attr("fill-opacity",.15-N*.02)}),y.append("circle").attr("cx",4).attr("cy",-7).attr("r",2).attr("fill","#ffcc02").attr("fill-opacity",.4);const _=f.append("g").attr("transform",`translate(${c+55}, ${L})`);_.append("rect").attr("x",0).attr("y",-32).attr("width",45).attr("height",32).attr("rx",2).attr("fill","#455a64").attr("fill-opacity",.45).attr("stroke","#37474f").attr("stroke-width",.8).attr("stroke-opacity",.25),_.append("rect").attr("x",7).attr("y",-60).attr("width",10).attr("height",28).attr("rx",1).attr("fill","#37474f").attr("fill-opacity",.5),_.append("rect").attr("x",5).attr("y",-62).attr("width",14).attr("height",3).attr("rx",1).attr("fill","#37474f").attr("fill-opacity",.55),_.append("rect").attr("x",30).attr("y",-48).attr("width",7).attr("height",16).attr("rx",1).attr("fill","#37474f").attr("fill-opacity",.45),[{x:4,y:-26,w:8,h:6},{x:15,y:-26,w:8,h:6},{x:26,y:-26,w:8,h:6},{x:4,y:-16,w:8,h:6},{x:15,y:-16,w:8,h:6},{x:26,y:-16,w:8,h:6}].forEach(w=>{_.append("rect").attr("x",w.x).attr("y",w.y).attr("width",w.w).attr("height",w.h).attr("rx",1).attr("fill","#ffc107").attr("fill-opacity",.3)}),_.append("rect").attr("x",18).attr("y",-9).attr("width",9).attr("height",9).attr("rx",1).attr("fill","#37474f").attr("fill-opacity",.3),[{x:12,y:-67,r:5},{x:14,y:-75,r:6},{x:11,y:-83,r:5.5},{x:34,y:-53,r:4},{x:36,y:-60,r:5}].forEach((w,N)=>{_.append("circle").attr("cx",w.x).attr("cy",w.y).attr("r",w.r).attr("fill","#78909c").attr("fill-opacity",.14-N*.015)});const x=f.append("g").attr("transform",`translate(${c+42}, ${L})`);[{x:-4,s:.9,fill:"#e74c3c",op:.3},{x:3,s:1.2,fill:"#e67e22",op:.35},{x:9,s:.7,fill:"#f39c12",op:.28},{x:-9,s:.6,fill:"#f39c12",op:.22}].forEach(w=>{x.append("path").attr("d","M0,0 C-3,-6 -5,-13 -2,-19 C-1,-21 1,-21 2,-19 C5,-13 3,-6 0,0 Z").attr("transform",`translate(${w.x}, 0) scale(${w.s})`).attr("fill",w.fill).attr("fill-opacity",w.op)}),x.append("path").attr("d","M0,0 C-1.5,-4 -2,-8 -0.5,-12 C0,-13 0.5,-13 1,-12 C2,-8 1.5,-4 0,0 Z").attr("transform","translate(3, 0) scale(1.1)").attr("fill","#fff176").attr("fill-opacity",.3),p.year&&f.append("text").attr("x",c).attr("y",l-8).attr("text-anchor","middle").attr("font-size","11px").attr("fill","#999").text(`Data year: ${p.year}`)}return Kt(()=>[e.emissionsData,e.countryName],async()=>{await zt(),o(),n.value&&!r&&(r=new ResizeObserver(()=>{o()}),r.observe(n.value))},{deep:!0}),ie(()=>{o(),n.value&&(r=new ResizeObserver(()=>{o()}),r.observe(n.value))}),_e(()=>{r&&r.disconnect()}),(s,u)=>a.value?(G(),z("div",Ep,[v("div",Tp,[v("div",{ref_key:"chartRef",ref:n,class:"chart-svg"},null,512)])])):(G(),z("div",Mp,[...u[0]||(u[0]=[v("span",{class:"material-symbols-outlined"},"cloud_off",-1),v("p",null,"No per-capita emissions data available for this country.",-1)])]))}},Np=Tt(Ap,[["__scopeId","data-v-63407626"]]),Rp={key:0,class:"no-data"},Pp={key:1,class:"chart-wrapper"},Op={class:"chart-container scroll-container"},Ip={class:"chart-scroll-outer"},Dp={__name:"CarbonIntensityRanking",props:{rankingData:{type:Array,default:()=>[]},selectedCountryCode:{type:String,default:""}},setup(t){const e=Jt(),n=t,r=ft(null),a=ft(null),i=ft(null);let o=null;const s=rt(()=>n.rankingData&&n.rankingData.length>0);function u(){if(!r.value||!s.value)return;ht(r.value).selectAll("*").remove();const c=n.rankingData,d=r.value.clientWidth||500,f={top:10,right:120,bottom:5,left:175},p=26,m=42,C=3;let $=0;c.forEach(T=>{$+=(T.code===n.selectedCountryCode?m:p)+C});const S=f.top+f.bottom+$,A=d,P=A-f.left-f.right,H=ht(r.value).append("svg").attr("width",A).attr("height",S).append("g").attr("transform",`translate(${f.left}, ${f.top})`),k=hn(c,T=>T.value)||1,L=ae().domain([0,k*1.05]).range([0,P]),Y=ae().domain([0,100,300,k]).range(["#27ae60","#8fce00","#f39c12","#e74c3c"]).clamp(!0);let E=0;c.forEach(T=>{const M=T.code===n.selectedCountryCode,b=M?m:p,h=E,g=H.append("g").attr("class","bar-row").style("cursor",M?"default":"pointer").on("click",()=>{M||e.setSelectedCountry(T.code)});g.append("rect").attr("x",-175).attr("y",h).attr("width",A).attr("height",b).attr("fill","transparent");const y=g.append("rect").attr("x",0).attr("y",h).attr("width",L(T.value)).attr("height",b).attr("fill",Y(T.value)).attr("fill-opacity",M?1:.65).attr("stroke",M?"#222":"none").attr("stroke-width",M?2.5:0).attr("rx",3);M||g.on("mouseenter",()=>{y.attr("fill-opacity",.9)}).on("mouseleave",()=>{y.attr("fill-opacity",.65)}),M&&H.append("rect").attr("x",-4).attr("y",h-4).attr("width",L(T.value)+8).attr("height",b+8).attr("fill","none").attr("stroke",Y(T.value)).attr("stroke-width",2.5).attr("stroke-opacity",.35).attr("rx",6),g.append("text").attr("x",-8).attr("y",h+b/2).attr("text-anchor","end").attr("dominant-baseline","central").attr("font-size",M?"15px":"10px").attr("font-weight",M?"900":"400").attr("fill",M?"#000":"#666").text(T.name),g.append("text").attr("x",L(T.value)+8).attr("y",h+b/2).attr("dominant-baseline","central").attr("font-size",M?"17px":"10px").attr("font-weight",M?"900":"400").attr("fill",M?"#000":"#666").text(M?`${Math.round(T.value)} gCO/kWh`:`${Math.round(T.value)}`),E+=b+C});const D=L(100);D>0&&D<P?i.value=f.left+D:i.value=null,l(c,f.top,p,m,C)}function l(c,d,f,p,m){if(!a.value)return;const C=c.findIndex(P=>P.code===n.selectedCountryCode);if(C===-1)return;let $=d;for(let P=0;P<C;P++)$+=(c[P].code===n.selectedCountryCode?p:f)+m;const S=a.value.clientHeight,A=$-S*.35;a.value.scrollTop=Math.max(0,A)}return Kt(()=>[n.rankingData,n.selectedCountryCode],()=>{u()},{deep:!0}),ie(()=>{u(),o=new ResizeObserver(()=>{u()}),r.value&&o.observe(r.value)}),_e(()=>{o&&o.disconnect()}),(c,d)=>s.value?(G(),z("div",Pp,[d[2]||(d[2]=v("h3",null,"Carbon Intensity of the Energy Grid - Europe Comparison",-1)),d[3]||(d[3]=v("p",null,' Now lets look through the lens of carbon intensity, which relates electricity to carbon emissions. The chart below shows the average CO2 emitted per kilowatt-hour of electricity generated from all sources, indicating how clean the power grid is in terms of emissions. Heavy reliance on nuclear power contributes to low carbon intensity levels for electricity, as in the case of France for example, but referring to it as "clean energy" remains a topic of discussion. ',-1)),v("div",Op,[i.value!=null?(G(),z("div",{key:0,class:"threshold-label",style:we({left:i.value+"px"})}," IEA / EU sustainable energy threshold (100 gCO/kWh) ",4)):Gt("",!0),v("div",Ip,[i.value!=null?(G(),z("div",{key:0,class:"threshold-line-overlay",style:we({left:i.value+"px"})},null,4)):Gt("",!0),v("div",{ref_key:"scrollContainer",ref:a,class:"chart-scroll"},[v("div",{ref_key:"chartRef",ref:r,class:"chart-svg"},null,512)],512)]),d[1]||(d[1]=he('<div class="chart-meta" data-v-17aac383><div class="meta-section" data-v-17aac383><span class="meta-label" data-v-17aac383>Source</span><ul data-v-17aac383><li data-v-17aac383><strong data-v-17aac383>OWID</strong><a href="https://github.com/owid/energy-data" target="_blank" rel="noopener" data-v-17aac383> Energy Data </a> . Column: <code data-v-17aac383>carbon_intensity_elec</code> (gCO2/kWh) </li></ul></div><div class="meta-section" data-v-17aac383></div></div>',1))])])):(G(),z("div",Rp,[...d[0]||(d[0]=[v("span",{class:"material-symbols-outlined"},"bar_chart_off",-1),v("p",null,"No carbon intensity ranking data available.",-1)])]))}},Hp=Tt(Dp,[["__scopeId","data-v-17aac383"]]),Lp={key:0,class:"no-data"},Fp={key:1,class:"stat-cards-wrapper"},zp={class:"group-label"},Gp={class:"stat-cards-grid"},Yp={class:"card-icon"},Bp={class:"material-symbols-outlined"},Wp={class:"card-content"},Up={class:"card-title"},Vp={class:"card-result"},Kp={class:"card-detail"},Ti=3.7,be=166,Ai=.2,Ni=.06,Xp=.08,Ri=3,Mn=215,Pr=3600,Pi=77400,Or=885,qp=1.3,Oi=55,En=9,jp=2.2,Ii=400,Zp=50,Jp={__name:"StatCards",props:{gridIntensity:{type:Number,default:null}},setup(t){const e=t;function n(i,o){const s=i/o;return s<.5?"card-green":s<=1?"card-yellow":"card-red"}const r=rt(()=>{const i=e.gridIntensity;if(i==null)return[];const o=[],s=Ai*i,u=be/s;o.push({id:"ev",group:"transport",icon:"electric_car",title:"Electric Car vs Petrol Car",result:u>=1?`${u.toFixed(1)}x less CO per km`:`${(1/u).toFixed(1)}x more CO per km`,detail:`EV: ${Math.round(s)} gCO/km (${Ai} kWh/km). Petrol: ${be} gCO/km (EU fleet avg).`,colorClass:n(s,be)});const l=Ni*i,c=Xp*i,d=be/l,f=be/c;o.push({id:"train",group:"transport",icon:"train",title:"Train & Tram vs Car",result:`Train ~${Math.round(d)}x, Tram ~${Math.round(f)}x less CO`,detail:`Train: ${l.toFixed(1)} gCO/pkm (${Ni} kWh/pkm). Tram: ${c.toFixed(1)} gCO/pkm. Car: ${be} gCO/km.`,colorClass:n(l,be)});const p=i/Ri,m=(Mn-p)/Mn*100;o.push({id:"hp",group:"household",icon:"heat_pump",title:"Heat Pump vs Gas Heating",result:m>0?`${Math.round(m)}% less CO`:`${Math.round(-m)}% more CO`,detail:`HP: ${Math.round(p)} gCO/kWh_th (SCOP ${Ri}). Gas boiler: ${Mn} gCO/kWh_th.`,colorClass:n(p,Mn)});const C=Pr*i/1e6,$=Pr*3.6,S=Math.round($/Ti);o.push({id:"footprint",group:"household",icon:"home",title:"Household Electricity Footprint",result:`${C.toFixed(2)} tCO/yr  ${S.toLocaleString()} passenger-km by car`,detail:`From ${Pr.toLocaleString()} kWh/yr (EU avg). Energy equivalent at ${Ti} MJ/pkm (PTUA, incl. manufacturing).`,colorClass:C<.5?"card-green":C<1.5?"card-yellow":"card-red"});const A=Pi*i,P=Math.round(A/be);o.push({id:"datacenter",group:"services",icon:"dns",title:"Data Center (NTT Frankfurt 1)",result:`1 hr  ${P.toLocaleString()} km by petrol car in CO`,detail:`${Pi.toLocaleString()} kWh/hr (77.4 MW IT load)  ${i} gCO/kWh = ${(A/1e6).toFixed(1)} tCO/hr.`,colorClass:P<3e4?"card-green":P<12e4?"card-yellow":"card-red"});const R=qp*i,H=Or/R;o.push({id:"truck",group:"services",icon:"local_shipping",title:"Electric Truck vs Diesel Truck (Logistics)",result:H>=1?`${H.toFixed(1)}x less CO per km`:`${(1/H).toFixed(1)}x more CO per km`,detail:`Electric: ${Math.round(R)} gCO/km (1.30 kWh/km). Diesel: ${Or} gCO/km (33 L/100km, 40t).`,colorClass:n(R,Or)});const k=Oi*i/1e3,L=(En-k)/En*100;o.push({id:"green-h2",group:"industry",icon:"science",title:"Green Hydrogen vs Grey Hydrogen",result:L>0?`${Math.round(L)}% less CO per kg H`:`${Math.round(-L)}% more CO per kg H`,detail:`Electrolysis: ${k.toFixed(1)} kgCO/kgH (${Oi} kWh/kg). SMR: ${En} kgCO/kgH.`,colorClass:n(k,En)});const E=Ii*i/1e3+Zp,D=jp*1e3,T=(D-E)/D*100;return o.push({id:"steel",group:"industry",icon:"construction",title:"Electric Arc Furnace vs Blast Furnace",result:T>0?`${Math.round(T)}% less CO per tonne steel`:`${Math.round(-T)}% more CO per tonne steel`,detail:`EAF: ${Math.round(E)} kgCO/t (${Ii} kWh). BF-BOF: ${D.toLocaleString()} kgCO/t.`,colorClass:n(E,D)}),o}),a=rt(()=>[{key:"transport",label:"Transport",icon:"directions_car",color:"#ffb56b"},{key:"household",label:"Household",icon:"home",color:"#63b3df"},{key:"services",label:"Services",icon:"business",color:"#76d76b"},{key:"industry",label:"Industry",icon:"factory",color:"#898989"}].map(o=>({...o,cards:r.value.filter(s=>s.group===o.key)})).filter(o=>o.cards.length>0));return(i,o)=>t.gridIntensity==null?(G(),z("div",Lp,[...o[0]||(o[0]=[v("span",{class:"material-symbols-outlined"},"info",-1),v("p",null,"No grid intensity data available to compute comparisons.",-1)])])):(G(),z("div",Fp,[(G(!0),z(ue,null,Ne(a.value,s=>(G(),z("div",{key:s.label,class:"stat-group"},[v("h4",zp,[v("span",{class:"material-symbols-outlined group-icon",style:we({color:s.color})},pt(s.icon),5),bt(" "+pt(s.label),1)]),v("div",Gp,[(G(!0),z(ue,null,Ne(s.cards,u=>(G(),z("div",{key:u.id,class:Wt(["stat-card",u.colorClass])},[v("div",Yp,[v("span",Bp,pt(u.icon),1)]),v("div",Wp,[v("h5",Up,pt(u.title),1),v("p",Vp,pt(u.result),1),v("p",Kp,pt(u.detail),1)])],2))),128))])]))),128))]))}},Qp=Tt(Jp,[["__scopeId","data-v-70329fd4"]]),t1={id:"eco",class:"page-section"},e1={class:"eco-subsection"},n1={class:"section-container"},r1={key:0,class:"loading"},a1={key:1,class:"error"},i1={key:0,class:"no-data"},o1={key:1,class:"charts-container"},s1={class:"charts-fill"},l1={class:"text-container"},c1={key:0},u1={class:"highlight-value"},f1={class:"highlight-value"},d1={key:1},h1={class:"eco-subsection"},p1={class:"section-container"},g1={key:0,class:"loading"},y1={key:1,class:"error"},m1={key:0,class:"no-data"},v1={key:1,class:"charts-container"},_1={class:"charts-fill"},x1={class:"text-container"},b1={key:0},w1={class:"highlight-value"},C1={class:"highlight-value"},k1={key:1},$1={__name:"Eco",setup(t){const e=Jt(),n=rt(()=>{const r=e.emissionsPerCapita;if(!r)return null;const a=(r.residential||0)+(r.services||0)+(r.transport||0)+(r.industry||0);return a>0?a.toFixed(1):null});return(r,a)=>(G(),z("section",t1,[a[11]||(a[11]=v("div",{class:"chart-header"},[v("h2",null,"Carbon Footprint of Energy Use")],-1)),v("div",e1,[v("div",n1,[X(e).isLoading?(G(),z("div",r1,"Loading energy data...")):X(e).error?(G(),z("div",a1,pt(X(e).error),1)):(G(),z(ue,{key:2},[X(e).ecoLoaded?(G(),z("div",o1,[v("div",s1,[Ct(Sp,{rankingData:X(e).emissionsPerCapitaRanking,selectedCountryCode:X(e).selectedCountryCode},null,8,["rankingData","selectedCountryCode"])])])):(G(),z("div",i1,"Eco data not available."))],64)),v("div",l1,[n.value!=null?(G(),z("h3",c1,[a[0]||(a[0]=bt(" Where are the ",-1)),v("span",u1,pt(n.value)+" tCO",1),a[1]||(a[1]=bt(" emissions in ",-1)),v("span",f1,pt(X(e).selectedCountry?.name),1),a[2]||(a[2]=bt(" emitted? ",-1))])):(G(),z("h3",d1,"Where are the emissions in your country emitted?")),a[3]||(a[3]=v("p",null," The chart below breaks down how much CO2 each person causes through four major sectors: residential energy use (heating, appliances), services (commercial buildings, offices), transport (cars, trucks), and industry (manufacturing). ",-1)),Ct(Np,{emissionsData:X(e).emissionsPerCapita,countryName:X(e).selectedCountry?.name||""},null,8,["emissionsData","countryName"]),a[4]||(a[4]=v("p",null," Transport tends to be the single largest contributor in most European countries, reflecting heavy reliance on fossil fuels for road mobility. In Lithuania, transport accounts for roughly two-thirds of per-capita emissions. In Denmark, Spain, and Portugal it exceeds half. At the other extreme, industry dominates in Slovakia and Czechia, where steel production, automotive manufacturing, and a heavy reliance on coal for heating, industry, and electricity generation push totals above 4 tCO per person. Residential emissions vary depending on climate, insulation standards, and the fuel mix for heating. Norway stands out with residential emissions near zero (0.08 tCO/cap), thanks to a grid that is 98% renewable (almost entirely hydropower), widespread use of heat pumps for heating, and the world's highest EV adoption rate, keeping its overall footprint remarkably low for a country with such a high standard of living. ",-1))])]),a[5]||(a[5]=he('<div class="chart-meta" data-v-a0270b87><div class="meta-section" data-v-a0270b87><span class="meta-label" data-v-a0270b87>Source</span><ul data-v-a0270b87><li data-v-a0270b87><strong data-v-a0270b87>IEA</strong><a href="https://www.iea.org/data-and-statistics/data-product/energy-efficiency-indicators-highlights" target="_blank" rel="noopener" data-v-a0270b87> Energy End-Uses &amp; Efficiency </a> (per-capita CO by sector). Indicator: <code data-v-a0270b87>Carbon intensity per capita (t CO2/capita)</code>. End uses: <code data-v-a0270b87>Total residential</code>, <code data-v-a0270b87>Total services</code>, <code data-v-a0270b87>Cars/light trucks</code> + <code data-v-a0270b87>Freight trucks</code> (transport) </li><li data-v-a0270b87> Industry per-capita derived from IEA total emissions (indicator: <code data-v-a0270b87>Total final use (kt CO2)</code>, end use containing <code data-v-a0270b87>Manufacturing</code>) divided by <strong data-v-a0270b87>OWID</strong><a href="https://github.com/owid/energy-data" target="_blank" rel="noopener" data-v-a0270b87> Energy Data </a><code data-v-a0270b87>population</code> column. IEA provides per-capita indicators for residential, services, and transport, but only per-value-added (gCO/USD) for industry. </li></ul></div><div class="meta-section" data-v-a0270b87><span class="meta-label" data-v-a0270b87>Data Hints</span><ul data-v-a0270b87><li data-v-a0270b87>Some countries may lack transport data. The total shown is the sum of available sectors.</li></ul></div></div>',1))]),v("div",h1,[v("div",p1,[X(e).isLoading?(G(),z("div",g1,"Loading energy data...")):X(e).error?(G(),z("div",y1,pt(X(e).error),1)):(G(),z(ue,{key:2},[X(e).ecoLoaded?(G(),z("div",v1,[v("div",_1,[Ct(Hp,{rankingData:X(e).carbonIntensityRanking,selectedCountryCode:X(e).selectedCountryCode},null,8,["rankingData","selectedCountryCode"])])])):(G(),z("div",m1,"Eco data not available."))],64)),v("div",x1,[X(e).carbonIntensity?.latest_value!=null?(G(),z("h3",b1,[a[6]||(a[6]=bt(" What does a carbon intensity of ",-1)),v("span",w1,pt(Math.round(X(e).carbonIntensity.latest_value))+" gCO/kWh",1),a[7]||(a[7]=bt(" for ",-1)),v("span",C1,pt(X(e).selectedCountry?.name),1),a[8]||(a[8]=bt(" mean in practice? ",-1))])):(G(),z("h3",k1,"What does your grid intensity mean in practice?")),a[9]||(a[9]=v("p",null," Most people are familiar with electrification as a fundamental part of decarbonization, where processes directly reliant on fossil fuels, if they cannot be done without, are replaced by electric alternatives. The electric car being a prime example of this. A fact that can be lost in this though, is that any benefits in terms of emissions through often costly and disruptive switches, are only as beneficial as the electricity is clean. The cards below (based on broad averages and approximations) demonstrate how impactful the effect can be, essentially highlighting the importance of electricity obtained from clean sources. ",-1)),Ct(Qp,{gridIntensity:X(e).carbonIntensity?.latest_value},null,8,["gridIntensity"]),a[10]||(a[10]=he('<details class="sources-details" data-v-a0270b87><summary data-v-a0270b87>Data sources and assumptions</summary><ul class="sources-list" data-v-a0270b87><li data-v-a0270b87><strong data-v-a0270b87>Car, EV, Train &amp; Tram energy (MJ/pkm)</strong>: <a href="https://ptua.org.au/myths/energy/" target="_blank" data-v-a0270b87>PTUA  Myth: Public transport doesn&#39;t really save energy</a>. Total energy per passenger-km including vehicle manufacturing. Car (ICE): 3.04.4, EV: 1.22.0, Train: 0.050.2, Tram: 0.170.8 MJ/pkm. Ranges reflect occupancy assumptions (cars: 1.11.5 passengers; trains/trams: peak vs off-peak patronage). </li><li data-v-a0270b87><strong data-v-a0270b87>Heat pump SCOP (3.0)</strong>: <a href="https://www.iea.org/reports/the-future-of-heat-pumps" target="_blank" data-v-a0270b87>IEA The Future of Heat Pumps</a>, &quot;How a heat pump works&quot; section, opening paragraph states COP ~4. SCOP 3.0 is a conservative seasonal figure accounting for cold-climate performance drops. </li><li data-v-a0270b87><strong data-v-a0270b87>Gas heating (215 gCO/kWh_th)</strong>: Natural gas space heating. Based on emission factor ~205 gCO/kWh with typical boiler efficiency ~90%. </li><li data-v-a0270b87><strong data-v-a0270b87>Household electricity (3,600 kWh/yr)</strong>: <a href="https://www.odyssee-mure.eu/publications/efficiency-by-sector/households/electricity-consumption-dwelling.html" target="_blank" data-v-a0270b87>Odyssee-MURE  Electricity consumption per dwelling</a>. EU average of 3.6 MWh per dwelling, widely used as a median for medium-sized households. Varies greatly by country (from ~1.8 MWh in Romania to ~8.5 MWh in Sweden). </li><li data-v-a0270b87><strong data-v-a0270b87>Data center: NTT Frankfurt 1 (77.4 MW IT)</strong>: <a href="https://services.global.ntt/en-us/services-and-products/global-data-centers/global-locations/emea/frankfurt-1-data-center" target="_blank" data-v-a0270b87>NTT Frankfurt 1</a>, Overview section (&quot;Secure and flexible space built to your specifications&quot; paragraph) and Specifications &gt; Power (70.1 MW operational + 7.3 MW under construction). </li><li data-v-a0270b87><strong data-v-a0270b87>Diesel truck (885 gCO/km)</strong>: Derived from 32.6 L/100 km (40t tractor-trailer, Long Haul cycle) x 2.68 kgCO/L. <a href="https://theicct.org/publication/lca-ghg-emissions-hdv-fuels-europe-feb23/" target="_blank" data-v-a0270b87>ICCT Feb 2023 LCA</a>, referencing the <a href="https://theicct.org/wp-content/uploads/2021/06/HDV_fuel-consumption_comparison_fs_20180418.pdf" target="_blank" data-v-a0270b87>ICCT April 2018 Fact Sheet</a>, average tractor-trailer fuel consumption figure. </li><li data-v-a0270b87><strong data-v-a0270b87>Electric truck (1.30 kWh/km)</strong>: <a href="https://theicct.org/publication/rw-use-cases-for-zet-heavy-tractor-trailers-for-goods-transport-in-the-eu-aug25/" target="_blank" data-v-a0270b87>ICCT Aug 2025</a>, Key Findings section: real-world range of 92 to 150 kWh/100 km for 40t tractor-trailers. 1.30 kWh/km (130 kWh/100 km) is within this range. </li><li data-v-a0270b87><strong data-v-a0270b87>PEM electrolysis (55 kWh/kgH)</strong>: <a href="https://www.hydrogen.energy.gov/docs/hydrogenprogramlibraries/pdfs/24005-clean-hydrogen-production-cost-pem-electrolyzer.pdf" target="_blank" data-v-a0270b87>DOE H2 Program Record #24005</a> (May 2024), main analysis section: beginning-of-life system electricity 55.2 kWh/kg (stack 51 + balance-of-plant 4.2). Lifetime average: 57.5 kWh/kg. </li><li data-v-a0270b87><strong data-v-a0270b87>Grey hydrogen SMR (9 kgCO/kgH)</strong>: <a href="https://www.iea.org/reports/global-hydrogen-review-2024" target="_blank" data-v-a0270b87>IEA Global Hydrogen Review 2024</a>, Ch. 8 &quot;GHG emissions of hydrogen&quot;, Highlights, 1st bullet: unabated natural gas emits 10 to 12 kgCO-eq/kgH (lifecycle). The value 9 represents direct combustion emissions only, excluding upstream methane. </li><li data-v-a0270b87><strong data-v-a0270b87>Blast furnace steel (2.2 tCO/t)</strong>: <a href="https://www.iea.org/energy-system/industry/steel" target="_blank" data-v-a0270b87>IEA Steel tracking page</a>, &quot;Direct CO intensity of crude steel production&quot; interactive chart. IEA reports ~2.0 to 2.3 tCO/t for BF-BOF globally; 2.2 is within this range. </li><li data-v-a0270b87><strong data-v-a0270b87>EAF steel (400 kWh/t + 50 kgCO/t process)</strong>: <a href="https://www.iea.org/reports/iron-and-steel-technology-roadmap" target="_blank" data-v-a0270b87>IEA Iron &amp; Steel Roadmap</a>. Industry literature (AIST) commonly cites 300 to 400 kWh/t for scrap-based EAF electricity. The 50 kgCO/t accounts for electrode and lime process emissions. </li></ul></details>',1))])])])]))}},S1=Tt($1,[["__scopeId","data-v-a0270b87"]]),M1={class:"app-select-wrapper"},E1=["for"],T1={class:"app-select-container"},A1=["id","value","disabled"],N1={key:0,value:"",disabled:""},R1=["value"],P1={__name:"AppSelect",props:{modelValue:{type:[String,Number],default:""},options:{type:Array,required:!0,validator:t=>t.every(e=>e.value!==void 0&&e.label!==void 0)},label:{type:String,default:""},placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`select-${Math.random().toString(36).substr(2,9)}`}},emits:["update:modelValue"],setup(t){return(e,n)=>(G(),z("div",M1,[t.label?(G(),z("label",{key:0,for:t.id,class:"app-select-label"},pt(t.label),9,E1)):Gt("",!0),v("div",T1,[v("select",{id:t.id,value:t.modelValue,class:"app-select",disabled:t.disabled,onChange:n[0]||(n[0]=r=>e.$emit("update:modelValue",r.target.value))},[t.placeholder?(G(),z("option",N1,pt(t.placeholder),1)):Gt("",!0),(G(!0),z(ue,null,Ne(t.options,r=>(G(),z("option",{key:r.key,value:r.value},pt(r.label),9,R1))),128))],40,A1),n[1]||(n[1]=v("span",{class:"app-select-icon"},[v("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[v("path",{d:"M4 6L8 10L12 6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})])],-1))])]))}},O1=Tt(P1,[["__scopeId","data-v-e0a5461e"]]),I1={class:"year-slot"},D1={key:0,class:"year-slot-label"},H1={class:"year-slot-row"},L1=["disabled"],F1={class:"year-slot-display"},z1={class:"year-adj"},G1={class:"year-drum"},Y1={class:"year-adj"},B1=["disabled"],W1={__name:"YearSlot",props:{modelValue:{type:Number,required:!0},years:{type:Array,required:!0},label:{type:String,default:""}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=e,a=ft(!1),i=ft(n.modelValue),o=rt(()=>n.years.indexOf(n.modelValue)),s=rt(()=>o.value>0),u=rt(()=>o.value<n.years.length-1),l=rt(()=>s.value?n.years[o.value-1]:null),c=rt(()=>u.value?n.years[o.value+1]:null);Kt(()=>n.modelValue,p=>{i.value=p});function d(p){const m=o.value+p;m>=0&&m<n.years.length&&f(n.years[m])}function f(p){p!==n.modelValue&&(a.value=!0,i.value=p,r("update:modelValue",p),setTimeout(()=>{a.value=!1},200))}return(p,m)=>(G(),z("div",I1,[t.label?(G(),z("label",D1,pt(t.label),1)):Gt("",!0),v("div",H1,[v("button",{class:"year-slot-btn",disabled:!s.value,onClick:m[0]||(m[0]=C=>d(-1)),type:"button"},[...m[2]||(m[2]=[v("svg",{width:"10",height:"10",viewBox:"0 0 10 10"},[v("path",{d:"M7 1L3 5L7 9",stroke:"currentColor","stroke-width":"1.5",fill:"none"})],-1)])],8,L1),v("div",F1,[v("span",z1,pt(l.value||""),1),v("div",G1,[v("span",{class:Wt(["year-current",{"year-pop":a.value}])},pt(i.value),3)]),v("span",Y1,pt(c.value||""),1)]),v("button",{class:"year-slot-btn",disabled:!u.value,onClick:m[1]||(m[1]=C=>d(1)),type:"button"},[...m[3]||(m[3]=[v("svg",{width:"10",height:"10",viewBox:"0 0 10 10"},[v("path",{d:"M3 1L7 5L3 9",stroke:"currentColor","stroke-width":"1.5",fill:"none"})],-1)])],8,B1)])]))}},U1=Tt(W1,[["__scopeId","data-v-63b2739e"]]),V1=Di("globalConfig",()=>{const t=ft({min:1990,max:2024}),e=rt(()=>t.value.min),n=rt(()=>t.value.max),r=rt(()=>{const o=[];for(let s=t.value.max;s>=t.value.min;s--)o.push(s);return o}),a=rt(()=>{const o=[];for(let s=t.value.min;s<=t.value.max;s++)o.push(s);return o});function i(o,s){t.value={min:o,max:s}}return{yearRange:t,minYear:e,maxYear:n,yearsDescending:r,yearsAscending:a,setYearRange:i}}),K1={class:"config-header"},X1={__name:"ConfigHeader",setup(t){const e=Jt(),n=V1(),r=rt(()=>e.countries.map(c=>({value:c.code,label:c.name}))),a=rt({get:()=>e.selectedCountryCode,set:c=>e.setSelectedCountry(c)}),i=rt({get:()=>e.selectedYear,set:c=>e.setSelectedYear(Number(c))});ie(()=>{e.loadData()});const o=Xo(),s=qo(),u=rt(()=>s.path.startsWith("/info"));function l(){o.push("/info")}return(c,d)=>(G(),z("div",K1,[u.value?Gt("",!0):(G(),z(ue,{key:0},[Ct(O1,{class:"config-item",options:r.value,label:"Country",modelValue:a.value,"onUpdate:modelValue":d[0]||(d[0]=f=>a.value=f),placeholder:"Select country"},null,8,["options","modelValue"]),Ct(U1,{class:"config-item",years:X(n).yearsDescending,label:"Year",modelValue:i.value,"onUpdate:modelValue":d[1]||(d[1]=f=>i.value=f)},null,8,["years","modelValue"])],64)),v("button",{class:"methodology-button",onClick:l,type:"button","aria-label":"Info / Methodology",title:"Info / Methodology"},[...d[2]||(d[2]=[v("span",{class:"material-symbols-outlined"},"info",-1)])])]))}},q1=Tt(X1,[["__scopeId","data-v-93895074"]]),j1={id:"app-container"},Z1={class:"main-content main-with-config"},J1={key:0,class:"year-loading-overlay"},Q1={__name:"Home",setup(t){const e=Jt(),n=ft([{id:"fueltypes",name:"Types of Fuel",icon:"oil_barrel"},{id:"dependency",name:"Dependency on Imports",icon:"trending_up"},{id:"tradingpartner",name:"Trading Partners",icon:"cycle"},{id:"consumption",name:"Sectoral Energy Use",icon:"battery_android_frame_5"},{id:"sectorfuels",name:"Energy Sources",icon:"delivery_truck_bolt"},{id:"productionconsumption",name:"Production & Consumption",icon:"instant_mix"},{id:"costs",name:"Energy Prices",icon:"euro"},{id:"eco",name:"Carbon Footprint",icon:"energy_savings_leaf"}]);return(r,a)=>(G(),z("div",j1,[Ct(Zo,{sections:n.value},null,8,["sections"]),v("main",null,[Ct(q1),v("div",Z1,[Ct(jo,{name:"fade"},{default:Hi(()=>[X(e).isYearChanging?(G(),z("div",J1,[...a[0]||(a[0]=[v("div",{class:"year-loading-spinner"},null,-1)])])):Gt("",!0)]),_:1}),Ct(cp),Ct(Rh),Ct(yh),Ct(ed),Ct(md),Ct(xp),Ct(Gd),Ct(S1)]),Ct(Jo)])]))}},ng=Tt(Q1,[["__scopeId","data-v-f486dc99"]]);export{ng as default};
