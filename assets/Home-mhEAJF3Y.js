import{S as Yo,F as Wo}from"./Footer-DVy9ubPI.js";import{d as Ni,c as tt,r as it,o as re,n as Vt,w as qt,a as me,b as F,e as z,_ as St,f as w,u as j,t as ct,g as bt,h as Bt,i as Ht,j as ee,F as te,k as ge,l as Se,m as Pn,p as Uo,v as Vo,q as qo,s as Xo,x as Ko,y as jo}from"./index-D5lVaWso.js";const ae=Ni("energyData",()=>{const t=it(null),e=it(null),n=it(null),r=it(null),a=it("IT"),i=it(2023),o=it(!1),s=it(null),u=tt(()=>!!n.value),c=tt(()=>!!r.value),l=tt(()=>t.value?.countries?Object.entries(t.value.countries).map(([v,T])=>({code:v,name:T.name})).sort((v,T)=>v.name.localeCompare(T.name)):[]),d=tt(()=>{if(!t.value?.countries||!a.value)return null;const v=t.value.countries[a.value];return v?{code:a.value,name:v.name,years:v.years}:null}),f=tt(()=>t.value?.metadata||null),p=tt(()=>d.value?.years?Object.keys(d.value.years).map(Number).sort((v,T)=>T-v):[]),m=tt(()=>!d.value?.years||!i.value?null:d.value.years[i.value]?.dependency||null),k=tt(()=>{if(!d.value?.years||!i.value)return null;const v=d.value.years[i.value];return v?{imports:v.imports||null,exports:v.exports||null}:null}),$=tt(()=>{if(!d.value?.years||!i.value)return null;const v=d.value.years[i.value];return v?{production:v.production||null,consumption:v.consumption||null}:null}),M=tt(()=>{if(!e.value||!d.value?.name||!i.value)return[];const v=e.value.countries[d.value.name];return v?["Industry","Residential","Transport","Service"].map(h=>{const g=v[h];if(!g)return null;const y=g[i.value];if(!y)return null;const _={};return Object.entries(y).forEach(([C,b])=>{(C.includes("Manufacturing")||C.includes("Total residential")||C.includes("Total passenger and freight transport")||C.includes("Total services"))&&Object.entries(b.products).forEach(([P,D])=>{P.includes("Total")||(_[P.replace("(PJ)","").trim()]=D||0)})}),{name:h,energyType:Object.entries(_).map(([C,b])=>({name:C,value:b}))}}):[]}),S=tt(()=>{if(!e.value||!d.value?.name||!i.value)return[];const v=e.value.countries[d.value.name];if(!v)return[];const h=["Industry","Residential","Transport","Service"].map(g=>{const y=v[g];if(!y)return null;const _=y[i.value];if(!_)return null;const C=[];let b=0;switch(g){case"Industry":Object.entries(_).forEach(([P,D])=>{if(!P.includes("Manufacturing")){const B=(D.products||{})["Total final use (PJ)"]||0;C.push({name:P,value:B}),b+=B}});break;case"Transport":Object.entries(_).forEach(([P,D])=>{if(!P.includes("Total")||P==="Total trains"||P==="Total airplanes"||P==="Total ships"){const B=(D.products||{})["Total final use (PJ)"]||0;C.push({name:P,value:B}),b+=B}});break;default:Object.entries(_).forEach(([P,D])=>{if(!P.includes("Total residential")&&!P.includes("Total services")){const B=(D.products||{})["Total final use (PJ)"]||0;C.push({name:P,value:B}),b+=B}});break}return{name:g,value:b,children:C}}).filter(g=>g&&g.children.length>0);return{name:d.value.name+" "+i.value,children:h}}),E=tt(()=>!r.value?.countries||!a.value?null:r.value.countries[a.value]?.carbon_intensity||null),x=tt(()=>r.value?.carbon_intensity_ranking?r.value.carbon_intensity_ranking:[]),N=tt(()=>!r.value?.countries||!a.value?null:r.value.countries[a.value]?.emissions_per_capita||null),I=tt(()=>!r.value?.countries||!a.value?null:r.value.countries[a.value]?.emissions_total_kt||null),H=tt(()=>{if(!r.value?.countries)return[];const v=[];for(const[T,h]of Object.entries(r.value.countries)){const g=h.emissions_per_capita;if(!g)continue;const y=(g.residential||0)+(g.services||0)+(g.transport||0)+(g.industry||0);y>0&&v.push({code:T,name:h.name,value:Math.round(y*100)/100,year:g.year})}return v.sort((T,h)=>T.value-h.value),v}),G=tt(()=>{if(!n.value||!a.value)return[];const v=n.value.countries[a.value];if(!v)return[];const T="Price of electricity (US cents per kWh)",h=["1","2","3","4"];return Object.keys(v).filter(y=>/^\d{4}$/.test(y)).map(Number).sort((y,_)=>y-_).map(y=>{const _=v[y],C=h.map(b=>_?.[b]?.CPI0450!=null?Number(_[b].CPI0450):null);return{year:y,electricity:_?.[T]!=null?Number(_[T]):null,CPI0450:C}})});async function A(){if(!(t.value&&e.value&&n.value)){o.value=!0,s.value=null;try{const h=(await(await fetch("/MyEnergyProfile/data/energy_mix.json")).text()).replace(/:\s*NaN/g,": null");t.value=JSON.parse(h);const _=(await(await fetch("/MyEnergyProfile/data/energy_consumptions_by_sector.json")).text()).replace(/:\s*NaN/g,": null");e.value=JSON.parse(_);try{const P=(await(await fetch("/MyEnergyProfile/data/energy_prices.json")).text()).replace(/:\s*NaN/g,": null");n.value=JSON.parse(P)}catch(C){console.warn("Failed to load energy_prices.json",C),n.value=null}try{const b=await(await fetch("/MyEnergyProfile/data/eco_data.json")).text();r.value=JSON.parse(b.replace(/:\s*NaN/g,": null"))}catch(C){console.warn("eco_data.json not loaded",C),r.value=null}}catch(v){s.value=v.message,console.error("Failed to load energy data:",v)}finally{o.value=!1}}}function O(v){a.value=v}function R(v){i.value=v}return{rawData:t,selectedCountryCode:a,selectedYear:i,isLoading:o,error:s,countries:l,selectedCountry:d,metadata:f,availableYears:p,dependencyData:m,tradeData:k,productionConsumptionData:$,pieChartData:M,sunburstData:S,loadData:A,setSelectedCountry:O,setSelectedYear:R,pricesData:n,pricesLoaded:u,electricitySeries:G,ecoData:r,ecoLoaded:c,carbonIntensity:E,carbonIntensityRanking:x,emissionsPerCapita:N,emissionsPerCapitaRanking:H,emissionsTotal:I}});function Mn(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Zo(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Pi(t){let e,n,r;t.length!==2?(e=Mn,n=(s,u)=>Mn(t(s),u),r=(s,u)=>t(s)-u):(e=t===Mn||t===Zo?t:Jo,n=t,r=t);function a(s,u,c=0,l=s.length){if(c<l){if(e(u,u)!==0)return l;do{const d=c+l>>>1;n(s[d],u)<0?c=d+1:l=d}while(c<l)}return c}function i(s,u,c=0,l=s.length){if(c<l){if(e(u,u)!==0)return l;do{const d=c+l>>>1;n(s[d],u)<=0?c=d+1:l=d}while(c<l)}return c}function o(s,u,c=0,l=s.length){const d=a(s,u,c,l-1);return d>c&&r(s[d-1],u)>-r(s[d],u)?d-1:d}return{left:a,center:o,right:i}}function Jo(){return 0}function Qo(t){return t===null?NaN:+t}const ts=Pi(Mn),es=ts.right;Pi(Qo).center;function ns(t,e){let n,r;for(const a of t)a!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)));return[n,r]}class ce{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let r=0;for(let a=0;a<this._n&&a<32;a++){const i=n[a],o=e+i,s=Math.abs(e)<Math.abs(i)?e-(o-i):i-(o-e);s&&(n[r++]=s),e=o}return n[r]=e,this._n=r+1,this}valueOf(){const e=this._partials;let n=this._n,r,a,i,o=0;if(n>0){for(o=e[--n];n>0&&(r=o,a=e[--n],o=r+a,i=a-(o-r),!i););n>0&&(i<0&&e[n-1]<0||i>0&&e[n-1]>0)&&(a=i*2,r=o+a,a==r-o&&(o=r))}return o}}class $a extends Map{constructor(e,n=is){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,a]of e)this.set(r,a)}get(e){return super.get(Sa(this,e))}has(e){return super.has(Sa(this,e))}set(e,n){return super.set(rs(this,e),n)}delete(e){return super.delete(as(this,e))}}function Sa({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function rs({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function as({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function is(t){return t!==null&&typeof t=="object"?t.valueOf():t}const os=Math.sqrt(50),ss=Math.sqrt(10),ls=Math.sqrt(2);function Rn(t,e,n){const r=(e-t)/Math.max(0,n),a=Math.floor(Math.log10(r)),i=r/Math.pow(10,a),o=i>=os?10:i>=ss?5:i>=ls?2:1;let s,u,c;return a<0?(c=Math.pow(10,-a)/o,s=Math.round(t*c),u=Math.round(e*c),s/c<t&&++s,u/c>e&&--u,c=-c):(c=Math.pow(10,a)*o,s=Math.round(t/c),u=Math.round(e/c),s*c<t&&++s,u*c>e&&--u),u<s&&.5<=n&&n<2?Rn(t,e,n*2):[s,u,c]}function cs(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[a,i,o]=r?Rn(e,t,n):Rn(t,e,n);if(!(i>=a))return[];const s=i-a+1,u=new Array(s);if(r)if(o<0)for(let c=0;c<s;++c)u[c]=(i-c)/-o;else for(let c=0;c<s;++c)u[c]=(i-c)*o;else if(o<0)for(let c=0;c<s;++c)u[c]=(a+c)/-o;else for(let c=0;c<s;++c)u[c]=(a+c)*o;return u}function Sr(t,e,n){return e=+e,t=+t,n=+n,Rn(t,e,n)[2]}function us(t,e,n){e=+e,t=+t,n=+n;const r=e<t,a=r?Sr(e,t,n):Sr(t,e,n);return(r?-1:1)*(a<0?1/-a:a)}function cn(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let a of t)(a=e(a,++r,t))!=null&&(n<a||n===void 0&&a>=a)&&(n=a)}return n}function fs(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function*ds(t){for(const e of t)yield*e}function Ri(t){return Array.from(ds(t))}function hs(t,e,n){t=+t,e=+e,n=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+n;for(var r=-1,a=Math.max(0,Math.ceil((e-t)/n))|0,i=new Array(a);++r<a;)i[r]=t+r*n;return i}function ps(t){return t}var hr=1,pr=2,Er=3,Ue=4,Ea=1e-6;function gs(t){return"translate("+t+",0)"}function ys(t){return"translate(0,"+t+")"}function ms(t){return e=>+t(e)}function vs(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function _s(){return!this.__axis}function Ii(t,e){var n=[],r=null,a=null,i=6,o=6,s=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=t===hr||t===Ue?-1:1,l=t===Ue||t===pr?"x":"y",d=t===hr||t===Er?gs:ys;function f(p){var m=r??(e.ticks?e.ticks.apply(e,n):e.domain()),k=a??(e.tickFormat?e.tickFormat.apply(e,n):ps),$=Math.max(i,0)+s,M=e.range(),S=+M[0]+u,E=+M[M.length-1]+u,x=(e.bandwidth?vs:ms)(e.copy(),u),N=p.selection?p.selection():p,I=N.selectAll(".domain").data([null]),H=N.selectAll(".tick").data(m,e).order(),G=H.exit(),A=H.enter().append("g").attr("class","tick"),O=H.select("line"),R=H.select("text");I=I.merge(I.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),H=H.merge(A),O=O.merge(A.append("line").attr("stroke","currentColor").attr(l+"2",c*i)),R=R.merge(A.append("text").attr("fill","currentColor").attr(l,c*$).attr("dy",t===hr?"0em":t===Er?"0.71em":"0.32em")),p!==N&&(I=I.transition(p),H=H.transition(p),O=O.transition(p),R=R.transition(p),G=G.transition(p).attr("opacity",Ea).attr("transform",function(v){return isFinite(v=x(v))?d(v+u):this.getAttribute("transform")}),A.attr("opacity",Ea).attr("transform",function(v){var T=this.parentNode.__axis;return d((T&&isFinite(T=T(v))?T:x(v))+u)})),G.remove(),I.attr("d",t===Ue||t===pr?o?"M"+c*o+","+S+"H"+u+"V"+E+"H"+c*o:"M"+u+","+S+"V"+E:o?"M"+S+","+c*o+"V"+u+"H"+E+"V"+c*o:"M"+S+","+u+"H"+E),H.attr("opacity",1).attr("transform",function(v){return d(x(v)+u)}),O.attr(l+"2",c*i),R.attr(l,c*$).text(k),N.filter(_s).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===pr?"start":t===Ue?"end":"middle"),N.each(function(){this.__axis=x})}return f.scale=function(p){return arguments.length?(e=p,f):e},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(p){return arguments.length?(n=p==null?[]:Array.from(p),f):n.slice()},f.tickValues=function(p){return arguments.length?(r=p==null?null:Array.from(p),f):r&&r.slice()},f.tickFormat=function(p){return arguments.length?(a=p,f):a},f.tickSize=function(p){return arguments.length?(i=o=+p,f):i},f.tickSizeInner=function(p){return arguments.length?(i=+p,f):i},f.tickSizeOuter=function(p){return arguments.length?(o=+p,f):o},f.tickPadding=function(p){return arguments.length?(s=+p,f):s},f.offset=function(p){return arguments.length?(u=+p,f):u},f}function Oi(t){return Ii(Er,t)}function la(t){return Ii(Ue,t)}var xs={value:()=>{}};function ca(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new $n(n)}function $n(t){this._=t}function ws(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",a=n.indexOf(".");if(a>=0&&(r=n.slice(a+1),n=n.slice(0,a)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}$n.prototype=ca.prototype={constructor:$n,on:function(t,e){var n=this._,r=ws(t+"",n),a,i=-1,o=r.length;if(arguments.length<2){for(;++i<o;)if((a=(t=r[i]).type)&&(a=bs(n[a],t.name)))return a;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++i<o;)if(a=(t=r[i]).type)n[a]=Ta(n[a],t.name,e);else if(e==null)for(a in n)n[a]=Ta(n[a],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new $n(t)},call:function(t,e){if((a=arguments.length-2)>0)for(var n=new Array(a),r=0,a,i;r<a;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=this._[t],r=0,a=i.length;r<a;++r)i[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],a=0,i=r.length;a<i;++a)r[a].value.apply(e,n)}};function bs(t,e){for(var n=0,r=t.length,a;n<r;++n)if((a=t[n]).name===e)return a.value}function Ta(t,e,n){for(var r=0,a=t.length;r<a;++r)if(t[r].name===e){t[r]=xs,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Tr="http://www.w3.org/1999/xhtml";const Aa={svg:"http://www.w3.org/2000/svg",xhtml:Tr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function cr(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Aa.hasOwnProperty(e)?{space:Aa[e],local:t}:t}function Cs(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Tr&&e.documentElement.namespaceURI===Tr?e.createElement(t):e.createElementNS(n,t)}}function ks(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Di(t){var e=cr(t);return(e.local?ks:Cs)(e)}function Ms(){}function ua(t){return t==null?Ms:function(){return this.querySelector(t)}}function $s(t){typeof t!="function"&&(t=ua(t));for(var e=this._groups,n=e.length,r=new Array(n),a=0;a<n;++a)for(var i=e[a],o=i.length,s=r[a]=new Array(o),u,c,l=0;l<o;++l)(u=i[l])&&(c=t.call(u,u.__data__,l,i))&&("__data__"in u&&(c.__data__=u.__data__),s[l]=c);return new Lt(r,this._parents)}function Hi(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Ss(){return[]}function Li(t){return t==null?Ss:function(){return this.querySelectorAll(t)}}function Es(t){return function(){return Hi(t.apply(this,arguments))}}function Ts(t){typeof t=="function"?t=Es(t):t=Li(t);for(var e=this._groups,n=e.length,r=[],a=[],i=0;i<n;++i)for(var o=e[i],s=o.length,u,c=0;c<s;++c)(u=o[c])&&(r.push(t.call(u,u.__data__,c,o)),a.push(u));return new Lt(r,a)}function Fi(t){return function(){return this.matches(t)}}function zi(t){return function(e){return e.matches(t)}}var As=Array.prototype.find;function Ns(t){return function(){return As.call(this.children,t)}}function Ps(){return this.firstElementChild}function Rs(t){return this.select(t==null?Ps:Ns(typeof t=="function"?t:zi(t)))}var Is=Array.prototype.filter;function Os(){return Array.from(this.children)}function Ds(t){return function(){return Is.call(this.children,t)}}function Hs(t){return this.selectAll(t==null?Os:Ds(typeof t=="function"?t:zi(t)))}function Ls(t){typeof t!="function"&&(t=Fi(t));for(var e=this._groups,n=e.length,r=new Array(n),a=0;a<n;++a)for(var i=e[a],o=i.length,s=r[a]=[],u,c=0;c<o;++c)(u=i[c])&&t.call(u,u.__data__,c,i)&&s.push(u);return new Lt(r,this._parents)}function Gi(t){return new Array(t.length)}function Fs(){return new Lt(this._enter||this._groups.map(Gi),this._parents)}function In(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}In.prototype={constructor:In,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function zs(t){return function(){return t}}function Gs(t,e,n,r,a,i){for(var o=0,s,u=e.length,c=i.length;o<c;++o)(s=e[o])?(s.__data__=i[o],r[o]=s):n[o]=new In(t,i[o]);for(;o<u;++o)(s=e[o])&&(a[o]=s)}function Bs(t,e,n,r,a,i,o){var s,u,c=new Map,l=e.length,d=i.length,f=new Array(l),p;for(s=0;s<l;++s)(u=e[s])&&(f[s]=p=o.call(u,u.__data__,s,e)+"",c.has(p)?a[s]=u:c.set(p,u));for(s=0;s<d;++s)p=o.call(t,i[s],s,i)+"",(u=c.get(p))?(r[s]=u,u.__data__=i[s],c.delete(p)):n[s]=new In(t,i[s]);for(s=0;s<l;++s)(u=e[s])&&c.get(f[s])===u&&(a[s]=u)}function Ys(t){return t.__data__}function Ws(t,e){if(!arguments.length)return Array.from(this,Ys);var n=e?Bs:Gs,r=this._parents,a=this._groups;typeof t!="function"&&(t=zs(t));for(var i=a.length,o=new Array(i),s=new Array(i),u=new Array(i),c=0;c<i;++c){var l=r[c],d=a[c],f=d.length,p=Us(t.call(l,l&&l.__data__,c,r)),m=p.length,k=s[c]=new Array(m),$=o[c]=new Array(m),M=u[c]=new Array(f);n(l,d,k,$,M,p,e);for(var S=0,E=0,x,N;S<m;++S)if(x=k[S]){for(S>=E&&(E=S+1);!(N=$[E])&&++E<m;);x._next=N||null}}return o=new Lt(o,r),o._enter=s,o._exit=u,o}function Us(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Vs(){return new Lt(this._exit||this._groups.map(Gi),this._parents)}function qs(t,e,n){var r=this.enter(),a=this,i=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(a=e(a),a&&(a=a.selection())),n==null?i.remove():n(i),r&&a?r.merge(a).order():a}function Xs(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,a=n.length,i=r.length,o=Math.min(a,i),s=new Array(a),u=0;u<o;++u)for(var c=n[u],l=r[u],d=c.length,f=s[u]=new Array(d),p,m=0;m<d;++m)(p=c[m]||l[m])&&(f[m]=p);for(;u<a;++u)s[u]=n[u];return new Lt(s,this._parents)}function Ks(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],a=r.length-1,i=r[a],o;--a>=0;)(o=r[a])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function js(t){t||(t=Zs);function e(d,f){return d&&f?t(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,a=new Array(r),i=0;i<r;++i){for(var o=n[i],s=o.length,u=a[i]=new Array(s),c,l=0;l<s;++l)(c=o[l])&&(u[l]=c);u.sort(e)}return new Lt(a,this._parents).order()}function Zs(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Js(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Qs(){return Array.from(this)}function tl(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],a=0,i=r.length;a<i;++a){var o=r[a];if(o)return o}return null}function el(){let t=0;for(const e of this)++t;return t}function nl(){return!this.node()}function rl(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var a=e[n],i=0,o=a.length,s;i<o;++i)(s=a[i])&&t.call(s,s.__data__,i,a);return this}function al(t){return function(){this.removeAttribute(t)}}function il(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ol(t,e){return function(){this.setAttribute(t,e)}}function sl(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function ll(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function cl(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function ul(t,e){var n=cr(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?il:al:typeof e=="function"?n.local?cl:ll:n.local?sl:ol)(n,e))}function Bi(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function fl(t){return function(){this.style.removeProperty(t)}}function dl(t,e,n){return function(){this.style.setProperty(t,e,n)}}function hl(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function pl(t,e,n){return arguments.length>1?this.each((e==null?fl:typeof e=="function"?hl:dl)(t,e,n??"")):He(this.node(),t)}function He(t,e){return t.style.getPropertyValue(e)||Bi(t).getComputedStyle(t,null).getPropertyValue(e)}function gl(t){return function(){delete this[t]}}function yl(t,e){return function(){this[t]=e}}function ml(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function vl(t,e){return arguments.length>1?this.each((e==null?gl:typeof e=="function"?ml:yl)(t,e)):this.node()[t]}function Yi(t){return t.trim().split(/^|\s+/)}function fa(t){return t.classList||new Wi(t)}function Wi(t){this._node=t,this._names=Yi(t.getAttribute("class")||"")}Wi.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Ui(t,e){for(var n=fa(t),r=-1,a=e.length;++r<a;)n.add(e[r])}function Vi(t,e){for(var n=fa(t),r=-1,a=e.length;++r<a;)n.remove(e[r])}function _l(t){return function(){Ui(this,t)}}function xl(t){return function(){Vi(this,t)}}function wl(t,e){return function(){(e.apply(this,arguments)?Ui:Vi)(this,t)}}function bl(t,e){var n=Yi(t+"");if(arguments.length<2){for(var r=fa(this.node()),a=-1,i=n.length;++a<i;)if(!r.contains(n[a]))return!1;return!0}return this.each((typeof e=="function"?wl:e?_l:xl)(n,e))}function Cl(){this.textContent=""}function kl(t){return function(){this.textContent=t}}function Ml(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function $l(t){return arguments.length?this.each(t==null?Cl:(typeof t=="function"?Ml:kl)(t)):this.node().textContent}function Sl(){this.innerHTML=""}function El(t){return function(){this.innerHTML=t}}function Tl(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Al(t){return arguments.length?this.each(t==null?Sl:(typeof t=="function"?Tl:El)(t)):this.node().innerHTML}function Nl(){this.nextSibling&&this.parentNode.appendChild(this)}function Pl(){return this.each(Nl)}function Rl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Il(){return this.each(Rl)}function Ol(t){var e=typeof t=="function"?t:Di(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Dl(){return null}function Hl(t,e){var n=typeof t=="function"?t:Di(t),r=e==null?Dl:typeof e=="function"?e:ua(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Ll(){var t=this.parentNode;t&&t.removeChild(this)}function Fl(){return this.each(Ll)}function zl(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Gl(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Bl(t){return this.select(t?Gl:zl)}function Yl(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Wl(t){return function(e){t.call(this,e,this.__data__)}}function Ul(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Vl(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,a=e.length,i;n<a;++n)i=e[n],(!t.type||i.type===t.type)&&i.name===t.name?this.removeEventListener(i.type,i.listener,i.options):e[++r]=i;++r?e.length=r:delete this.__on}}}function ql(t,e,n){return function(){var r=this.__on,a,i=Wl(e);if(r){for(var o=0,s=r.length;o<s;++o)if((a=r[o]).type===t.type&&a.name===t.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=i,a.options=n),a.value=e;return}}this.addEventListener(t.type,i,n),a={type:t.type,name:t.name,value:e,listener:i,options:n},r?r.push(a):this.__on=[a]}}function Xl(t,e,n){var r=Ul(t+""),a,i=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,c=s.length,l;u<c;++u)for(a=0,l=s[u];a<i;++a)if((o=r[a]).type===l.type&&o.name===l.name)return l.value}return}for(s=e?ql:Vl,a=0;a<i;++a)this.each(s(r[a],e,n));return this}function qi(t,e,n){var r=Bi(t),a=r.CustomEvent;typeof a=="function"?a=new a(e,n):(a=r.document.createEvent("Event"),n?(a.initEvent(e,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(e,!1,!1)),t.dispatchEvent(a)}function Kl(t,e){return function(){return qi(this,t,e)}}function jl(t,e){return function(){return qi(this,t,e.apply(this,arguments))}}function Zl(t,e){return this.each((typeof e=="function"?jl:Kl)(t,e))}function*Jl(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],a=0,i=r.length,o;a<i;++a)(o=r[a])&&(yield o)}var da=[null];function Lt(t,e){this._groups=t,this._parents=e}function un(){return new Lt([[document.documentElement]],da)}function Ql(){return this}Lt.prototype=un.prototype={constructor:Lt,select:$s,selectAll:Ts,selectChild:Rs,selectChildren:Hs,filter:Ls,data:Ws,enter:Fs,exit:Vs,join:qs,merge:Xs,selection:Ql,order:Ks,sort:js,call:Js,nodes:Qs,node:tl,size:el,empty:nl,each:rl,attr:ul,style:pl,property:vl,classed:bl,text:$l,html:Al,raise:Pl,lower:Il,append:Ol,insert:Hl,remove:Fl,clone:Bl,datum:Yl,on:Xl,dispatch:Zl,[Symbol.iterator]:Jl};function at(t){return typeof t=="string"?new Lt([[document.querySelector(t)]],[document.documentElement]):new Lt([[t]],da)}function tc(t){let e;for(;e=t.sourceEvent;)t=e;return t}function xe(t,e){if(t=tc(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}}return[t.pageX,t.pageY]}function On(t){return typeof t=="string"?new Lt([document.querySelectorAll(t)],[document.documentElement]):new Lt([Hi(t)],da)}const Ar={capture:!0,passive:!1};function Nr(t){t.preventDefault(),t.stopImmediatePropagation()}function ec(t){var e=t.document.documentElement,n=at(t).on("dragstart.drag",Nr,Ar);"onselectstart"in e?n.on("selectstart.drag",Nr,Ar):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function nc(t,e){var n=t.document.documentElement,r=at(t).on("dragstart.drag",null);e&&(r.on("click.drag",Nr,Ar),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function ha(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Xi(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function fn(){}var tn=.7,Dn=1/tn,De="\\s*([+-]?\\d+)\\s*",en="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ue="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rc=/^#([0-9a-f]{3,8})$/,ac=new RegExp(`^rgb\\(${De},${De},${De}\\)$`),ic=new RegExp(`^rgb\\(${ue},${ue},${ue}\\)$`),oc=new RegExp(`^rgba\\(${De},${De},${De},${en}\\)$`),sc=new RegExp(`^rgba\\(${ue},${ue},${ue},${en}\\)$`),lc=new RegExp(`^hsl\\(${en},${ue},${ue}\\)$`),cc=new RegExp(`^hsla\\(${en},${ue},${ue},${en}\\)$`),Na={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ha(fn,ve,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Pa,formatHex:Pa,formatHex8:uc,formatHsl:fc,formatRgb:Ra,toString:Ra});function Pa(){return this.rgb().formatHex()}function uc(){return this.rgb().formatHex8()}function fc(){return Ki(this).formatHsl()}function Ra(){return this.rgb().formatRgb()}function ve(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=rc.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Ia(e):n===3?new Gt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?hn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?hn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=ac.exec(t))?new Gt(e[1],e[2],e[3],1):(e=ic.exec(t))?new Gt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=oc.exec(t))?hn(e[1],e[2],e[3],e[4]):(e=sc.exec(t))?hn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=lc.exec(t))?Ha(e[1],e[2]/100,e[3]/100,1):(e=cc.exec(t))?Ha(e[1],e[2]/100,e[3]/100,e[4]):Na.hasOwnProperty(t)?Ia(Na[t]):t==="transparent"?new Gt(NaN,NaN,NaN,0):null}function Ia(t){return new Gt(t>>16&255,t>>8&255,t&255,1)}function hn(t,e,n,r){return r<=0&&(t=e=n=NaN),new Gt(t,e,n,r)}function dc(t){return t instanceof fn||(t=ve(t)),t?(t=t.rgb(),new Gt(t.r,t.g,t.b,t.opacity)):new Gt}function Pr(t,e,n,r){return arguments.length===1?dc(t):new Gt(t,e,n,r??1)}function Gt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}ha(Gt,Pr,Xi(fn,{brighter(t){return t=t==null?Dn:Math.pow(Dn,t),new Gt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?tn:Math.pow(tn,t),new Gt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Gt(Ee(this.r),Ee(this.g),Ee(this.b),Hn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Oa,formatHex:Oa,formatHex8:hc,formatRgb:Da,toString:Da}));function Oa(){return`#${$e(this.r)}${$e(this.g)}${$e(this.b)}`}function hc(){return`#${$e(this.r)}${$e(this.g)}${$e(this.b)}${$e((isNaN(this.opacity)?1:this.opacity)*255)}`}function Da(){const t=Hn(this.opacity);return`${t===1?"rgb(":"rgba("}${Ee(this.r)}, ${Ee(this.g)}, ${Ee(this.b)}${t===1?")":`, ${t})`}`}function Hn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ee(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function $e(t){return t=Ee(t),(t<16?"0":"")+t.toString(16)}function Ha(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Jt(t,e,n,r)}function Ki(t){if(t instanceof Jt)return new Jt(t.h,t.s,t.l,t.opacity);if(t instanceof fn||(t=ve(t)),!t)return new Jt;if(t instanceof Jt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,a=Math.min(e,n,r),i=Math.max(e,n,r),o=NaN,s=i-a,u=(i+a)/2;return s?(e===i?o=(n-r)/s+(n<r)*6:n===i?o=(r-e)/s+2:o=(e-n)/s+4,s/=u<.5?i+a:2-i-a,o*=60):s=u>0&&u<1?0:o,new Jt(o,s,u,t.opacity)}function ji(t,e,n,r){return arguments.length===1?Ki(t):new Jt(t,e,n,r??1)}function Jt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}ha(Jt,ji,Xi(fn,{brighter(t){return t=t==null?Dn:Math.pow(Dn,t),new Jt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?tn:Math.pow(tn,t),new Jt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,a=2*n-r;return new Gt(gr(t>=240?t-240:t+120,a,r),gr(t,a,r),gr(t<120?t+240:t-120,a,r),this.opacity)},clamp(){return new Jt(La(this.h),pn(this.s),pn(this.l),Hn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Hn(this.opacity);return`${t===1?"hsl(":"hsla("}${La(this.h)}, ${pn(this.s)*100}%, ${pn(this.l)*100}%${t===1?")":`, ${t})`}`}}));function La(t){return t=(t||0)%360,t<0?t+360:t}function pn(t){return Math.max(0,Math.min(1,t||0))}function gr(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const pa=t=>()=>t;function pc(t,e){return function(n){return t+n*e}}function gc(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function yc(t){return(t=+t)==1?Zi:function(e,n){return n-e?gc(e,n,t):pa(isNaN(e)?n:e)}}function Zi(t,e){var n=e-t;return n?pc(t,n):pa(isNaN(t)?e:t)}const Ln=(function t(e){var n=yc(e);function r(a,i){var o=n((a=Pr(a)).r,(i=Pr(i)).r),s=n(a.g,i.g),u=n(a.b,i.b),c=Zi(a.opacity,i.opacity);return function(l){return a.r=o(l),a.g=s(l),a.b=u(l),a.opacity=c(l),a+""}}return r.gamma=t,r})(1);function mc(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),a;return function(i){for(a=0;a<n;++a)r[a]=t[a]*(1-i)+e[a]*i;return r}}function vc(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function _c(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,a=new Array(r),i=new Array(n),o;for(o=0;o<r;++o)a[o]=ga(t[o],e[o]);for(;o<n;++o)i[o]=e[o];return function(s){for(o=0;o<r;++o)i[o]=a[o](s);return i}}function xc(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Zt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function wc(t,e){var n={},r={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?n[a]=ga(t[a],e[a]):r[a]=e[a];return function(i){for(a in n)r[a]=n[a](i);return r}}var Rr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,yr=new RegExp(Rr.source,"g");function bc(t){return function(){return t}}function Cc(t){return function(e){return t(e)+""}}function Ji(t,e){var n=Rr.lastIndex=yr.lastIndex=0,r,a,i,o=-1,s=[],u=[];for(t=t+"",e=e+"";(r=Rr.exec(t))&&(a=yr.exec(e));)(i=a.index)>n&&(i=e.slice(n,i),s[o]?s[o]+=i:s[++o]=i),(r=r[0])===(a=a[0])?s[o]?s[o]+=a:s[++o]=a:(s[++o]=null,u.push({i:o,x:Zt(r,a)})),n=yr.lastIndex;return n<e.length&&(i=e.slice(n),s[o]?s[o]+=i:s[++o]=i),s.length<2?u[0]?Cc(u[0].x):bc(e):(e=u.length,function(c){for(var l=0,d;l<e;++l)s[(d=u[l]).i]=d.x(c);return s.join("")})}function ga(t,e){var n=typeof e,r;return e==null||n==="boolean"?pa(e):(n==="number"?Zt:n==="string"?(r=ve(e))?(e=r,Ln):Ji:e instanceof ve?Ln:e instanceof Date?xc:vc(e)?mc:Array.isArray(e)?_c:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?wc:Zt)(t,e)}function kc(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Fa=180/Math.PI,Ir={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Qi(t,e,n,r,a,i){var o,s,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,o=-o),{translateX:a,translateY:i,rotate:Math.atan2(e,t)*Fa,skewX:Math.atan(u)*Fa,scaleX:o,scaleY:s}}var gn;function Mc(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Ir:Qi(e.a,e.b,e.c,e.d,e.e,e.f)}function $c(t){return t==null||(gn||(gn=document.createElementNS("http://www.w3.org/2000/svg","g")),gn.setAttribute("transform",t),!(t=gn.transform.baseVal.consolidate()))?Ir:(t=t.matrix,Qi(t.a,t.b,t.c,t.d,t.e,t.f))}function to(t,e,n,r){function a(c){return c.length?c.pop()+" ":""}function i(c,l,d,f,p,m){if(c!==d||l!==f){var k=p.push("translate(",null,e,null,n);m.push({i:k-4,x:Zt(c,d)},{i:k-2,x:Zt(l,f)})}else(d||f)&&p.push("translate("+d+e+f+n)}function o(c,l,d,f){c!==l?(c-l>180?l+=360:l-c>180&&(c+=360),f.push({i:d.push(a(d)+"rotate(",null,r)-2,x:Zt(c,l)})):l&&d.push(a(d)+"rotate("+l+r)}function s(c,l,d,f){c!==l?f.push({i:d.push(a(d)+"skewX(",null,r)-2,x:Zt(c,l)}):l&&d.push(a(d)+"skewX("+l+r)}function u(c,l,d,f,p,m){if(c!==d||l!==f){var k=p.push(a(p)+"scale(",null,",",null,")");m.push({i:k-4,x:Zt(c,d)},{i:k-2,x:Zt(l,f)})}else(d!==1||f!==1)&&p.push(a(p)+"scale("+d+","+f+")")}return function(c,l){var d=[],f=[];return c=t(c),l=t(l),i(c.translateX,c.translateY,l.translateX,l.translateY,d,f),o(c.rotate,l.rotate,d,f),s(c.skewX,l.skewX,d,f),u(c.scaleX,c.scaleY,l.scaleX,l.scaleY,d,f),c=l=null,function(p){for(var m=-1,k=f.length,$;++m<k;)d[($=f[m]).i]=$.x(p);return d.join("")}}}var Sc=to(Mc,"px, ","px)","deg)"),Ec=to($c,", ",")",")"),Tc=1e-12;function za(t){return((t=Math.exp(t))+1/t)/2}function Ac(t){return((t=Math.exp(t))-1/t)/2}function Nc(t){return((t=Math.exp(2*t))-1)/(t+1)}const Pc=(function t(e,n,r){function a(i,o){var s=i[0],u=i[1],c=i[2],l=o[0],d=o[1],f=o[2],p=l-s,m=d-u,k=p*p+m*m,$,M;if(k<Tc)M=Math.log(f/c)/e,$=function(H){return[s+H*p,u+H*m,c*Math.exp(e*H*M)]};else{var S=Math.sqrt(k),E=(f*f-c*c+r*k)/(2*c*n*S),x=(f*f-c*c-r*k)/(2*f*n*S),N=Math.log(Math.sqrt(E*E+1)-E),I=Math.log(Math.sqrt(x*x+1)-x);M=(I-N)/e,$=function(H){var G=H*M,A=za(N),O=c/(n*S)*(A*Nc(e*G+N)-Ac(N));return[s+O*p,u+O*m,c*A/za(e*G+N)]}}return $.duration=M*1e3*e/Math.SQRT2,$}return a.rho=function(i){var o=Math.max(.001,+i),s=o*o,u=s*s;return t(o,s,u)},a})(Math.SQRT2,2,4);var Le=0,Ve=0,Be=0,eo=1e3,Fn,qe,zn=0,Te=0,ur=0,nn=typeof performance=="object"&&performance.now?performance:Date,no=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ya(){return Te||(no(Rc),Te=nn.now()+ur)}function Rc(){Te=0}function Gn(){this._call=this._time=this._next=null}Gn.prototype=ro.prototype={constructor:Gn,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?ya():+n)+(e==null?0:+e),!this._next&&qe!==this&&(qe?qe._next=this:Fn=this,qe=this),this._call=t,this._time=n,Or()},stop:function(){this._call&&(this._call=null,this._time=1/0,Or())}};function ro(t,e,n){var r=new Gn;return r.restart(t,e,n),r}function Ic(){ya(),++Le;for(var t=Fn,e;t;)(e=Te-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Le}function Ga(){Te=(zn=nn.now())+ur,Le=Ve=0;try{Ic()}finally{Le=0,Dc(),Te=0}}function Oc(){var t=nn.now(),e=t-zn;e>eo&&(ur-=e,zn=t)}function Dc(){for(var t,e=Fn,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Fn=n);qe=t,Or(r)}function Or(t){if(!Le){Ve&&(Ve=clearTimeout(Ve));var e=t-Te;e>24?(t<1/0&&(Ve=setTimeout(Ga,t-nn.now()-ur)),Be&&(Be=clearInterval(Be))):(Be||(zn=nn.now(),Be=setInterval(Oc,eo)),Le=1,no(Ga))}}function Ba(t,e,n){var r=new Gn;return e=e==null?0:+e,r.restart(a=>{r.stop(),t(a+e)},e,n),r}var Hc=ca("start","end","cancel","interrupt"),Lc=[],ao=0,Ya=1,Dr=2,Sn=3,Wa=4,Hr=5,En=6;function fr(t,e,n,r,a,i){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;Fc(t,n,{name:e,index:r,group:a,on:Hc,tween:Lc,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:ao})}function ma(t,e){var n=ie(t,e);if(n.state>ao)throw new Error("too late; already scheduled");return n}function fe(t,e){var n=ie(t,e);if(n.state>Sn)throw new Error("too late; already running");return n}function ie(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Fc(t,e,n){var r=t.__transition,a;r[e]=n,n.timer=ro(i,0,n.time);function i(c){n.state=Ya,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var l,d,f,p;if(n.state!==Ya)return u();for(l in r)if(p=r[l],p.name===n.name){if(p.state===Sn)return Ba(o);p.state===Wa?(p.state=En,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete r[l]):+l<e&&(p.state=En,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete r[l])}if(Ba(function(){n.state===Sn&&(n.state=Wa,n.timer.restart(s,n.delay,n.time),s(c))}),n.state=Dr,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Dr){for(n.state=Sn,a=new Array(f=n.tween.length),l=0,d=-1;l<f;++l)(p=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(a[++d]=p);a.length=d+1}}function s(c){for(var l=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(u),n.state=Hr,1),d=-1,f=a.length;++d<f;)a[d].call(t,l);n.state===Hr&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=En,n.timer.stop(),delete r[e];for(var c in r)return;delete t.__transition}}function Tn(t,e){var n=t.__transition,r,a,i=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){i=!1;continue}a=r.state>Dr&&r.state<Hr,r.state=En,r.timer.stop(),r.on.call(a?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}i&&delete t.__transition}}function zc(t){return this.each(function(){Tn(this,t)})}function Gc(t,e){var n,r;return function(){var a=fe(this,t),i=a.tween;if(i!==n){r=n=i;for(var o=0,s=r.length;o<s;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}a.tween=r}}function Bc(t,e,n){var r,a;if(typeof n!="function")throw new Error;return function(){var i=fe(this,t),o=i.tween;if(o!==r){a=(r=o).slice();for(var s={name:e,value:n},u=0,c=a.length;u<c;++u)if(a[u].name===e){a[u]=s;break}u===c&&a.push(s)}i.tween=a}}function Yc(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=ie(this.node(),n).tween,a=0,i=r.length,o;a<i;++a)if((o=r[a]).name===t)return o.value;return null}return this.each((e==null?Gc:Bc)(n,t,e))}function va(t,e,n){var r=t._id;return t.each(function(){var a=fe(this,r);(a.value||(a.value={}))[e]=n.apply(this,arguments)}),function(a){return ie(a,r).value[e]}}function io(t,e){var n;return(typeof e=="number"?Zt:e instanceof ve?Ln:(n=ve(e))?(e=n,Ln):Ji)(t,e)}function Wc(t){return function(){this.removeAttribute(t)}}function Uc(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Vc(t,e,n){var r,a=n+"",i;return function(){var o=this.getAttribute(t);return o===a?null:o===r?i:i=e(r=o,n)}}function qc(t,e,n){var r,a=n+"",i;return function(){var o=this.getAttributeNS(t.space,t.local);return o===a?null:o===r?i:i=e(r=o,n)}}function Xc(t,e,n){var r,a,i;return function(){var o,s=n(this),u;return s==null?void this.removeAttribute(t):(o=this.getAttribute(t),u=s+"",o===u?null:o===r&&u===a?i:(a=u,i=e(r=o,s)))}}function Kc(t,e,n){var r,a,i;return function(){var o,s=n(this),u;return s==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),u=s+"",o===u?null:o===r&&u===a?i:(a=u,i=e(r=o,s)))}}function jc(t,e){var n=cr(t),r=n==="transform"?Ec:io;return this.attrTween(t,typeof e=="function"?(n.local?Kc:Xc)(n,r,va(this,"attr."+t,e)):e==null?(n.local?Uc:Wc)(n):(n.local?qc:Vc)(n,r,e))}function Zc(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Jc(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Qc(t,e){var n,r;function a(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&Jc(t,i)),n}return a._value=e,a}function tu(t,e){var n,r;function a(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&Zc(t,i)),n}return a._value=e,a}function eu(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=cr(t);return this.tween(n,(r.local?Qc:tu)(r,e))}function nu(t,e){return function(){ma(this,t).delay=+e.apply(this,arguments)}}function ru(t,e){return e=+e,function(){ma(this,t).delay=e}}function au(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?nu:ru)(e,t)):ie(this.node(),e).delay}function iu(t,e){return function(){fe(this,t).duration=+e.apply(this,arguments)}}function ou(t,e){return e=+e,function(){fe(this,t).duration=e}}function su(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?iu:ou)(e,t)):ie(this.node(),e).duration}function lu(t,e){if(typeof e!="function")throw new Error;return function(){fe(this,t).ease=e}}function cu(t){var e=this._id;return arguments.length?this.each(lu(e,t)):ie(this.node(),e).ease}function uu(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;fe(this,t).ease=n}}function fu(t){if(typeof t!="function")throw new Error;return this.each(uu(this._id,t))}function du(t){typeof t!="function"&&(t=Fi(t));for(var e=this._groups,n=e.length,r=new Array(n),a=0;a<n;++a)for(var i=e[a],o=i.length,s=r[a]=[],u,c=0;c<o;++c)(u=i[c])&&t.call(u,u.__data__,c,i)&&s.push(u);return new ye(r,this._parents,this._name,this._id)}function hu(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,a=n.length,i=Math.min(r,a),o=new Array(r),s=0;s<i;++s)for(var u=e[s],c=n[s],l=u.length,d=o[s]=new Array(l),f,p=0;p<l;++p)(f=u[p]||c[p])&&(d[p]=f);for(;s<r;++s)o[s]=e[s];return new ye(o,this._parents,this._name,this._id)}function pu(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function gu(t,e,n){var r,a,i=pu(e)?ma:fe;return function(){var o=i(this,t),s=o.on;s!==r&&(a=(r=s).copy()).on(e,n),o.on=a}}function yu(t,e){var n=this._id;return arguments.length<2?ie(this.node(),n).on.on(t):this.each(gu(n,t,e))}function mu(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function vu(){return this.on("end.remove",mu(this._id))}function _u(t){var e=this._name,n=this._id;typeof t!="function"&&(t=ua(t));for(var r=this._groups,a=r.length,i=new Array(a),o=0;o<a;++o)for(var s=r[o],u=s.length,c=i[o]=new Array(u),l,d,f=0;f<u;++f)(l=s[f])&&(d=t.call(l,l.__data__,f,s))&&("__data__"in l&&(d.__data__=l.__data__),c[f]=d,fr(c[f],e,n,f,c,ie(l,n)));return new ye(i,this._parents,e,n)}function xu(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Li(t));for(var r=this._groups,a=r.length,i=[],o=[],s=0;s<a;++s)for(var u=r[s],c=u.length,l,d=0;d<c;++d)if(l=u[d]){for(var f=t.call(l,l.__data__,d,u),p,m=ie(l,n),k=0,$=f.length;k<$;++k)(p=f[k])&&fr(p,e,n,k,f,m);i.push(f),o.push(l)}return new ye(i,o,e,n)}var wu=un.prototype.constructor;function bu(){return new wu(this._groups,this._parents)}function Cu(t,e){var n,r,a;return function(){var i=He(this,t),o=(this.style.removeProperty(t),He(this,t));return i===o?null:i===n&&o===r?a:a=e(n=i,r=o)}}function oo(t){return function(){this.style.removeProperty(t)}}function ku(t,e,n){var r,a=n+"",i;return function(){var o=He(this,t);return o===a?null:o===r?i:i=e(r=o,n)}}function Mu(t,e,n){var r,a,i;return function(){var o=He(this,t),s=n(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(t),He(this,t))),o===u?null:o===r&&u===a?i:(a=u,i=e(r=o,s))}}function $u(t,e){var n,r,a,i="style."+e,o="end."+i,s;return function(){var u=fe(this,t),c=u.on,l=u.value[i]==null?s||(s=oo(e)):void 0;(c!==n||a!==l)&&(r=(n=c).copy()).on(o,a=l),u.on=r}}function Su(t,e,n){var r=(t+="")=="transform"?Sc:io;return e==null?this.styleTween(t,Cu(t,r)).on("end.style."+t,oo(t)):typeof e=="function"?this.styleTween(t,Mu(t,r,va(this,"style."+t,e))).each($u(this._id,t)):this.styleTween(t,ku(t,r,e),n).on("end.style."+t,null)}function Eu(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Tu(t,e,n){var r,a;function i(){var o=e.apply(this,arguments);return o!==a&&(r=(a=o)&&Eu(t,o,n)),r}return i._value=e,i}function Au(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Tu(t,e,n??""))}function Nu(t){return function(){this.textContent=t}}function Pu(t){return function(){var e=t(this);this.textContent=e??""}}function Ru(t){return this.tween("text",typeof t=="function"?Pu(va(this,"text",t)):Nu(t==null?"":t+""))}function Iu(t){return function(e){this.textContent=t.call(this,e)}}function Ou(t){var e,n;function r(){var a=t.apply(this,arguments);return a!==n&&(e=(n=a)&&Iu(a)),e}return r._value=t,r}function Du(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Ou(t))}function Hu(){for(var t=this._name,e=this._id,n=so(),r=this._groups,a=r.length,i=0;i<a;++i)for(var o=r[i],s=o.length,u,c=0;c<s;++c)if(u=o[c]){var l=ie(u,e);fr(u,t,n,c,o,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new ye(r,this._parents,t,n)}function Lu(){var t,e,n=this,r=n._id,a=n.size();return new Promise(function(i,o){var s={value:o},u={value:function(){--a===0&&i()}};n.each(function(){var c=fe(this,r),l=c.on;l!==t&&(e=(t=l).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(u)),c.on=e}),a===0&&i()})}var Fu=0;function ye(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function so(){return++Fu}var de=un.prototype;ye.prototype={constructor:ye,select:_u,selectAll:xu,selectChild:de.selectChild,selectChildren:de.selectChildren,filter:du,merge:hu,selection:bu,transition:Hu,call:de.call,nodes:de.nodes,node:de.node,size:de.size,empty:de.empty,each:de.each,on:yu,attr:jc,attrTween:eu,style:Su,styleTween:Au,text:Ru,textTween:Du,remove:vu,tween:Yc,delay:au,duration:su,ease:cu,easeVarying:fu,end:Lu,[Symbol.iterator]:de[Symbol.iterator]};function zu(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Gu={time:null,delay:0,duration:250,ease:zu};function Bu(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Yu(t){var e,n;t instanceof ye?(e=t._id,t=t._name):(e=so(),(n=Gu).time=ya(),t=t==null?null:t+"");for(var r=this._groups,a=r.length,i=0;i<a;++i)for(var o=r[i],s=o.length,u,c=0;c<s;++c)(u=o[c])&&fr(u,t,e,c,o,n||Bu(u,e));return new ye(r,this._parents,t,e)}un.prototype.interrupt=zc;un.prototype.transition=Yu;const Lr=Math.PI,Fr=2*Lr,Ce=1e-6,Wu=Fr-Ce;function lo(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Uu(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return lo;const n=10**e;return function(r){this._+=r[0];for(let a=1,i=r.length;a<i;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}class Vu{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?lo:Uu(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,a){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+a}`}bezierCurveTo(e,n,r,a,i,o){this._append`C${+e},${+n},${+r},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(e,n,r,a,i){if(e=+e,n=+n,r=+r,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,s=this._y1,u=r-e,c=a-n,l=o-e,d=s-n,f=l*l+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>Ce)if(!(Math.abs(d*u-c*l)>Ce)||!i)this._append`L${this._x1=e},${this._y1=n}`;else{let p=r-o,m=a-s,k=u*u+c*c,$=p*p+m*m,M=Math.sqrt(k),S=Math.sqrt(f),E=i*Math.tan((Lr-Math.acos((k+f-$)/(2*M*S)))/2),x=E/S,N=E/M;Math.abs(x-1)>Ce&&this._append`L${e+x*l},${n+x*d}`,this._append`A${i},${i},0,0,${+(d*p>l*m)},${this._x1=e+N*u},${this._y1=n+N*c}`}}arc(e,n,r,a,i,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(a),u=r*Math.sin(a),c=e+s,l=n+u,d=1^o,f=o?a-i:i-a;this._x1===null?this._append`M${c},${l}`:(Math.abs(this._x1-c)>Ce||Math.abs(this._y1-l)>Ce)&&this._append`L${c},${l}`,r&&(f<0&&(f=f%Fr+Fr),f>Wu?this._append`A${r},${r},0,1,${d},${e-s},${n-u}A${r},${r},0,1,${d},${this._x1=c},${this._y1=l}`:f>Ce&&this._append`A${r},${r},0,${+(f>=Lr)},${d},${this._x1=e+r*Math.cos(i)},${this._y1=n+r*Math.sin(i)}`)}rect(e,n,r,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+a}h${-r}Z`}toString(){return this._}}function qu(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Bn(t,e){if(!isFinite(t)||t===0)return null;var n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Fe(t){return t=Bn(Math.abs(t)),t?t[1]:NaN}function Xu(t,e){return function(n,r){for(var a=n.length,i=[],o=0,s=t[0],u=0;a>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),i.push(n.substring(a-=s,a+s)),!((u+=s+1)>r));)s=t[o=(o+1)%t.length];return i.reverse().join(e)}}function Ku(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var ju=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Yn(t){if(!(e=ju.exec(t)))throw new Error("invalid format: "+t);var e;return new _a({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Yn.prototype=_a.prototype;function _a(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}_a.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Zu(t){t:for(var e=t.length,n=1,r=-1,a;n<e;++n)switch(t[n]){case".":r=a=n;break;case"0":r===0&&(r=n),a=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(a+1):t}var Wn;function Ju(t,e){var n=Bn(t,e);if(!n)return Wn=void 0,t.toPrecision(e);var r=n[0],a=n[1],i=a-(Wn=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+Bn(t,Math.max(0,e+i-1))[0]}function Ua(t,e){var n=Bn(t,e);if(!n)return t+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}const Va={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:qu,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Ua(t*100,e),r:Ua,s:Ju,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function qa(t){return t}var Xa=Array.prototype.map,Ka=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Qu(t){var e=t.grouping===void 0||t.thousands===void 0?qa:Xu(Xa.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?qa:Ku(Xa.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function c(d,f){d=Yn(d);var p=d.fill,m=d.align,k=d.sign,$=d.symbol,M=d.zero,S=d.width,E=d.comma,x=d.precision,N=d.trim,I=d.type;I==="n"?(E=!0,I="g"):Va[I]||(x===void 0&&(x=12),N=!0,I="g"),(M||p==="0"&&m==="=")&&(M=!0,p="0",m="=");var H=(f&&f.prefix!==void 0?f.prefix:"")+($==="$"?n:$==="#"&&/[boxX]/.test(I)?"0"+I.toLowerCase():""),G=($==="$"?r:/[%p]/.test(I)?o:"")+(f&&f.suffix!==void 0?f.suffix:""),A=Va[I],O=/[defgprs%]/.test(I);x=x===void 0?6:/[gprs]/.test(I)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function R(v){var T=H,h=G,g,y,_;if(I==="c")h=A(v)+h,v="";else{v=+v;var C=v<0||1/v<0;if(v=isNaN(v)?u:A(Math.abs(v),x),N&&(v=Zu(v)),C&&+v==0&&k!=="+"&&(C=!1),T=(C?k==="("?k:s:k==="-"||k==="("?"":k)+T,h=(I==="s"&&!isNaN(v)&&Wn!==void 0?Ka[8+Wn/3]:"")+h+(C&&k==="("?")":""),O){for(g=-1,y=v.length;++g<y;)if(_=v.charCodeAt(g),48>_||_>57){h=(_===46?a+v.slice(g+1):v.slice(g))+h,v=v.slice(0,g);break}}}E&&!M&&(v=e(v,1/0));var b=T.length+v.length+h.length,P=b<S?new Array(S-b+1).join(p):"";switch(E&&M&&(v=e(P+v,P.length?S-h.length:1/0),P=""),m){case"<":v=T+v+h+P;break;case"=":v=T+P+v+h;break;case"^":v=P.slice(0,b=P.length>>1)+T+v+h+P.slice(b);break;default:v=P+T+v+h;break}return i(v)}return R.toString=function(){return d+""},R}function l(d,f){var p=Math.max(-8,Math.min(8,Math.floor(Fe(f)/3)))*3,m=Math.pow(10,-p),k=c((d=Yn(d),d.type="f",d),{suffix:Ka[8+p/3]});return function($){return k(m*$)}}return{format:c,formatPrefix:l}}var yn,dr,co;tf({thousands:",",grouping:[3],currency:["$",""]});function tf(t){return yn=Qu(t),dr=yn.format,co=yn.formatPrefix,yn}function ef(t){return Math.max(0,-Fe(Math.abs(t)))}function nf(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Fe(e)/3)))*3-Fe(Math.abs(t)))}function rf(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Fe(e)-Fe(t))+1}var wt=1e-6,zr=1e-12,pt=Math.PI,Ut=pt/2,ja=pt/4,Xt=pt*2,jt=180/pt,kt=pt/180,Ct=Math.abs,af=Math.atan,Ae=Math.atan2,vt=Math.cos,Gr=Math.hypot,_t=Math.sin,of=Math.sign||function(t){return t>0?1:t<0?-1:0},_e=Math.sqrt;function sf(t){return t>1?0:t<-1?pt:Math.acos(t)}function Ne(t){return t>1?Ut:t<-1?-Ut:Math.asin(t)}function Yt(){}function Un(t,e){t&&Ja.hasOwnProperty(t.type)&&Ja[t.type](t,e)}var Za={Feature:function(t,e){Un(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,a=n.length;++r<a;)Un(n[r].geometry,e)}},Ja={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,a=n.length;++r<a;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Br(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,a=n.length;++r<a;)Br(n[r],e,0)},Polygon:function(t,e){Qa(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,a=n.length;++r<a;)Qa(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,a=n.length;++r<a;)Un(n[r],e)}};function Br(t,e,n){var r=-1,a=t.length-n,i;for(e.lineStart();++r<a;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function Qa(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Br(t[n],e,1);e.polygonEnd()}function Me(t,e){t&&Za.hasOwnProperty(t.type)?Za[t.type](t,e):Un(t,e)}function Yr(t){return[Ae(t[1],t[0]),Ne(t[2])]}function ze(t){var e=t[0],n=t[1],r=vt(n);return[r*vt(e),r*_t(e),_t(n)]}function mn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Vn(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function mr(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function vn(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Wr(t){var e=_e(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var Xe,qn,Xn,Kn,jn,Zn,Jn,Qn,Ur,Vr,qr,uo,fo,It,Ot,Dt,Qt={sphere:Yt,point:xa,lineStart:ti,lineEnd:ei,polygonStart:function(){Qt.lineStart=uf,Qt.lineEnd=ff},polygonEnd:function(){Qt.lineStart=ti,Qt.lineEnd=ei}};function xa(t,e){t*=kt,e*=kt;var n=vt(e);dn(n*vt(t),n*_t(t),_t(e))}function dn(t,e,n){++Xe,Xn+=(t-Xn)/Xe,Kn+=(e-Kn)/Xe,jn+=(n-jn)/Xe}function ti(){Qt.point=lf}function lf(t,e){t*=kt,e*=kt;var n=vt(e);It=n*vt(t),Ot=n*_t(t),Dt=_t(e),Qt.point=cf,dn(It,Ot,Dt)}function cf(t,e){t*=kt,e*=kt;var n=vt(e),r=n*vt(t),a=n*_t(t),i=_t(e),o=Ae(_e((o=Ot*i-Dt*a)*o+(o=Dt*r-It*i)*o+(o=It*a-Ot*r)*o),It*r+Ot*a+Dt*i);qn+=o,Zn+=o*(It+(It=r)),Jn+=o*(Ot+(Ot=a)),Qn+=o*(Dt+(Dt=i)),dn(It,Ot,Dt)}function ei(){Qt.point=xa}function uf(){Qt.point=df}function ff(){ho(uo,fo),Qt.point=xa}function df(t,e){uo=t,fo=e,t*=kt,e*=kt,Qt.point=ho;var n=vt(e);It=n*vt(t),Ot=n*_t(t),Dt=_t(e),dn(It,Ot,Dt)}function ho(t,e){t*=kt,e*=kt;var n=vt(e),r=n*vt(t),a=n*_t(t),i=_t(e),o=Ot*i-Dt*a,s=Dt*r-It*i,u=It*a-Ot*r,c=Gr(o,s,u),l=Ne(c),d=c&&-l/c;Ur.add(d*o),Vr.add(d*s),qr.add(d*u),qn+=l,Zn+=l*(It+(It=r)),Jn+=l*(Ot+(Ot=a)),Qn+=l*(Dt+(Dt=i)),dn(It,Ot,Dt)}function hf(t){Xe=qn=Xn=Kn=jn=Zn=Jn=Qn=0,Ur=new ce,Vr=new ce,qr=new ce,Me(t,Qt);var e=+Ur,n=+Vr,r=+qr,a=Gr(e,n,r);return a<zr&&(e=Zn,n=Jn,r=Qn,qn<wt&&(e=Xn,n=Kn,r=jn),a=Gr(e,n,r),a<zr)?[NaN,NaN]:[Ae(n,e)*jt,Ne(r/a)*jt]}function Xr(t,e){function n(r,a){return r=t(r,a),e(r[0],r[1])}return t.invert&&e.invert&&(n.invert=function(r,a){return r=e.invert(r,a),r&&t.invert(r[0],r[1])}),n}function Kr(t,e){return Ct(t)>pt&&(t-=Math.round(t/Xt)*Xt),[t,e]}Kr.invert=Kr;function pf(t,e,n){return(t%=Xt)?e||n?Xr(ri(t),ai(e,n)):ri(t):e||n?ai(e,n):Kr}function ni(t){return function(e,n){return e+=t,Ct(e)>pt&&(e-=Math.round(e/Xt)*Xt),[e,n]}}function ri(t){var e=ni(t);return e.invert=ni(-t),e}function ai(t,e){var n=vt(t),r=_t(t),a=vt(e),i=_t(e);function o(s,u){var c=vt(u),l=vt(s)*c,d=_t(s)*c,f=_t(u),p=f*n+l*r;return[Ae(d*a-p*i,l*n-f*r),Ne(p*a+d*i)]}return o.invert=function(s,u){var c=vt(u),l=vt(s)*c,d=_t(s)*c,f=_t(u),p=f*a-d*i;return[Ae(d*a+f*i,l*n+p*r),Ne(p*n-l*r)]},o}function gf(t,e,n,r,a,i){if(n){var o=vt(e),s=_t(e),u=r*n;a==null?(a=e+r*Xt,i=e-u/2):(a=ii(o,a),i=ii(o,i),(r>0?a<i:a>i)&&(a+=r*Xt));for(var c,l=a;r>0?l>i:l<i;l-=u)c=Yr([o,-s*vt(l),-s*_t(l)]),t.point(c[0],c[1])}}function ii(t,e){e=ze(e),e[0]-=t,Wr(e);var n=sf(-e[1]);return((-e[2]<0?-n:n)+Xt-wt)%Xt}function po(){var t=[],e;return{point:function(n,r,a){e.push([n,r,a])},lineStart:function(){t.push(e=[])},lineEnd:Yt,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function An(t,e){return Ct(t[0]-e[0])<wt&&Ct(t[1]-e[1])<wt}function _n(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function go(t,e,n,r,a){var i=[],o=[],s,u;if(t.forEach(function(m){if(!((k=m.length-1)<=0)){var k,$=m[0],M=m[k],S;if(An($,M)){if(!$[2]&&!M[2]){for(a.lineStart(),s=0;s<k;++s)a.point(($=m[s])[0],$[1]);a.lineEnd();return}M[0]+=2*wt}i.push(S=new _n($,m,null,!0)),o.push(S.o=new _n($,null,S,!1)),i.push(S=new _n(M,m,null,!1)),o.push(S.o=new _n(M,null,S,!0))}}),!!i.length){for(o.sort(e),oi(i),oi(o),s=0,u=o.length;s<u;++s)o[s].e=n=!n;for(var c=i[0],l,d;;){for(var f=c,p=!0;f.v;)if((f=f.n)===c)return;l=f.z,a.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(s=0,u=l.length;s<u;++s)a.point((d=l[s])[0],d[1]);else r(f.x,f.n.x,1,a);f=f.n}else{if(p)for(l=f.p.z,s=l.length-1;s>=0;--s)a.point((d=l[s])[0],d[1]);else r(f.x,f.p.x,-1,a);f=f.p}f=f.o,l=f.z,p=!p}while(!f.v);a.lineEnd()}}}function oi(t){if(e=t.length){for(var e,n=0,r=t[0],a;++n<e;)r.n=a=t[n],a.p=r,r=a;r.n=a=t[0],a.p=r}}function vr(t){return Ct(t[0])<=pt?t[0]:of(t[0])*((Ct(t[0])+pt)%Xt-pt)}function yf(t,e){var n=vr(e),r=e[1],a=_t(r),i=[_t(n),-vt(n),0],o=0,s=0,u=new ce;a===1?r=Ut+wt:a===-1&&(r=-Ut-wt);for(var c=0,l=t.length;c<l;++c)if(f=(d=t[c]).length)for(var d,f,p=d[f-1],m=vr(p),k=p[1]/2+ja,$=_t(k),M=vt(k),S=0;S<f;++S,m=x,$=I,M=H,p=E){var E=d[S],x=vr(E),N=E[1]/2+ja,I=_t(N),H=vt(N),G=x-m,A=G>=0?1:-1,O=A*G,R=O>pt,v=$*I;if(u.add(Ae(v*A*_t(O),M*H+v*vt(O))),o+=R?G+A*Xt:G,R^m>=n^x>=n){var T=Vn(ze(p),ze(E));Wr(T);var h=Vn(i,T);Wr(h);var g=(R^G>=0?-1:1)*Ne(h[2]);(r>g||r===g&&(T[0]||T[1]))&&(s+=R^G>=0?1:-1)}}return(o<-wt||o<wt&&u<-zr)^s&1}function yo(t,e,n,r){return function(a){var i=e(a),o=po(),s=e(o),u=!1,c,l,d,f={point:p,lineStart:k,lineEnd:$,polygonStart:function(){f.point=M,f.lineStart=S,f.lineEnd=E,l=[],c=[]},polygonEnd:function(){f.point=p,f.lineStart=k,f.lineEnd=$,l=Ri(l);var x=yf(c,r);l.length?(u||(a.polygonStart(),u=!0),go(l,vf,x,n,a)):x&&(u||(a.polygonStart(),u=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),u&&(a.polygonEnd(),u=!1),l=c=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function p(x,N){t(x,N)&&a.point(x,N)}function m(x,N){i.point(x,N)}function k(){f.point=m,i.lineStart()}function $(){f.point=p,i.lineEnd()}function M(x,N){d.push([x,N]),s.point(x,N)}function S(){s.lineStart(),d=[]}function E(){M(d[0][0],d[0][1]),s.lineEnd();var x=s.clean(),N=o.result(),I,H=N.length,G,A,O;if(d.pop(),c.push(d),d=null,!!H){if(x&1){if(A=N[0],(G=A.length-1)>0){for(u||(a.polygonStart(),u=!0),a.lineStart(),I=0;I<G;++I)a.point((O=A[I])[0],O[1]);a.lineEnd()}return}H>1&&x&2&&N.push(N.pop().concat(N.shift())),l.push(N.filter(mf))}}return f}}function mf(t){return t.length>1}function vf(t,e){return((t=t.x)[0]<0?t[1]-Ut-wt:Ut-t[1])-((e=e.x)[0]<0?e[1]-Ut-wt:Ut-e[1])}const si=yo(function(){return!0},_f,wf,[-pt,-Ut]);function _f(t){var e=NaN,n=NaN,r=NaN,a;return{lineStart:function(){t.lineStart(),a=1},point:function(i,o){var s=i>0?pt:-pt,u=Ct(i-e);Ct(u-pt)<wt?(t.point(e,n=(n+o)/2>0?Ut:-Ut),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(s,n),t.point(i,n),a=0):r!==s&&u>=pt&&(Ct(e-r)<wt&&(e-=r*wt),Ct(i-s)<wt&&(i-=s*wt),n=xf(e,n,i,o),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(s,n),a=0),t.point(e=i,n=o),r=s},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-a}}}function xf(t,e,n,r){var a,i,o=_t(t-n);return Ct(o)>wt?af((_t(e)*(i=vt(r))*_t(n)-_t(r)*(a=vt(e))*_t(t))/(a*i*o)):(e+r)/2}function wf(t,e,n,r){var a;if(t==null)a=n*Ut,r.point(-pt,a),r.point(0,a),r.point(pt,a),r.point(pt,0),r.point(pt,-a),r.point(0,-a),r.point(-pt,-a),r.point(-pt,0),r.point(-pt,a);else if(Ct(t[0]-e[0])>wt){var i=t[0]<e[0]?pt:-pt;a=n*i/2,r.point(-i,a),r.point(0,a),r.point(i,a)}else r.point(e[0],e[1])}function bf(t){var e=vt(t),n=2*kt,r=e>0,a=Ct(e)>wt;function i(l,d,f,p){gf(p,t,n,f,l,d)}function o(l,d){return vt(l)*vt(d)>e}function s(l){var d,f,p,m,k;return{lineStart:function(){m=p=!1,k=1},point:function($,M){var S=[$,M],E,x=o($,M),N=r?x?0:c($,M):x?c($+($<0?pt:-pt),M):0;if(!d&&(m=p=x)&&l.lineStart(),x!==p&&(E=u(d,S),(!E||An(d,E)||An(S,E))&&(S[2]=1)),x!==p)k=0,x?(l.lineStart(),E=u(S,d),l.point(E[0],E[1])):(E=u(d,S),l.point(E[0],E[1],2),l.lineEnd()),d=E;else if(a&&d&&r^x){var I;!(N&f)&&(I=u(S,d,!0))&&(k=0,r?(l.lineStart(),l.point(I[0][0],I[0][1]),l.point(I[1][0],I[1][1]),l.lineEnd()):(l.point(I[1][0],I[1][1]),l.lineEnd(),l.lineStart(),l.point(I[0][0],I[0][1],3)))}x&&(!d||!An(d,S))&&l.point(S[0],S[1]),d=S,p=x,f=N},lineEnd:function(){p&&l.lineEnd(),d=null},clean:function(){return k|(m&&p)<<1}}}function u(l,d,f){var p=ze(l),m=ze(d),k=[1,0,0],$=Vn(p,m),M=mn($,$),S=$[0],E=M-S*S;if(!E)return!f&&l;var x=e*M/E,N=-e*S/E,I=Vn(k,$),H=vn(k,x),G=vn($,N);mr(H,G);var A=I,O=mn(H,A),R=mn(A,A),v=O*O-R*(mn(H,H)-1);if(!(v<0)){var T=_e(v),h=vn(A,(-O-T)/R);if(mr(h,H),h=Yr(h),!f)return h;var g=l[0],y=d[0],_=l[1],C=d[1],b;y<g&&(b=g,g=y,y=b);var P=y-g,D=Ct(P-pt)<wt,L=D||P<wt;if(!D&&C<_&&(b=_,_=C,C=b),L?D?_+C>0^h[1]<(Ct(h[0]-g)<wt?_:C):_<=h[1]&&h[1]<=C:P>pt^(g<=h[0]&&h[0]<=y)){var B=vn(A,(-O+T)/R);return mr(B,H),[h,Yr(B)]}}}function c(l,d){var f=r?t:pt-t,p=0;return l<-f?p|=1:l>f&&(p|=2),d<-f?p|=4:d>f&&(p|=8),p}return yo(o,s,i,r?[0,-t]:[-pt,t-pt])}function Cf(t,e,n,r,a,i){var o=t[0],s=t[1],u=e[0],c=e[1],l=0,d=1,f=u-o,p=c-s,m;if(m=n-o,!(!f&&m>0)){if(m/=f,f<0){if(m<l)return;m<d&&(d=m)}else if(f>0){if(m>d)return;m>l&&(l=m)}if(m=a-o,!(!f&&m<0)){if(m/=f,f<0){if(m>d)return;m>l&&(l=m)}else if(f>0){if(m<l)return;m<d&&(d=m)}if(m=r-s,!(!p&&m>0)){if(m/=p,p<0){if(m<l)return;m<d&&(d=m)}else if(p>0){if(m>d)return;m>l&&(l=m)}if(m=i-s,!(!p&&m<0)){if(m/=p,p<0){if(m>d)return;m>l&&(l=m)}else if(p>0){if(m<l)return;m<d&&(d=m)}return l>0&&(t[0]=o+l*f,t[1]=s+l*p),d<1&&(e[0]=o+d*f,e[1]=s+d*p),!0}}}}}var Ke=1e9,xn=-Ke;function kf(t,e,n,r){function a(c,l){return t<=c&&c<=n&&e<=l&&l<=r}function i(c,l,d,f){var p=0,m=0;if(c==null||(p=o(c,d))!==(m=o(l,d))||u(c,l)<0^d>0)do f.point(p===0||p===3?t:n,p>1?r:e);while((p=(p+d+4)%4)!==m);else f.point(l[0],l[1])}function o(c,l){return Ct(c[0]-t)<wt?l>0?0:3:Ct(c[0]-n)<wt?l>0?2:1:Ct(c[1]-e)<wt?l>0?1:0:l>0?3:2}function s(c,l){return u(c.x,l.x)}function u(c,l){var d=o(c,1),f=o(l,1);return d!==f?d-f:d===0?l[1]-c[1]:d===1?c[0]-l[0]:d===2?c[1]-l[1]:l[0]-c[0]}return function(c){var l=c,d=po(),f,p,m,k,$,M,S,E,x,N,I,H={point:G,lineStart:v,lineEnd:T,polygonStart:O,polygonEnd:R};function G(g,y){a(g,y)&&l.point(g,y)}function A(){for(var g=0,y=0,_=p.length;y<_;++y)for(var C=p[y],b=1,P=C.length,D=C[0],L,B,Y=D[0],U=D[1];b<P;++b)L=Y,B=U,D=C[b],Y=D[0],U=D[1],B<=r?U>r&&(Y-L)*(r-B)>(U-B)*(t-L)&&++g:U<=r&&(Y-L)*(r-B)<(U-B)*(t-L)&&--g;return g}function O(){l=d,f=[],p=[],I=!0}function R(){var g=A(),y=I&&g,_=(f=Ri(f)).length;(y||_)&&(c.polygonStart(),y&&(c.lineStart(),i(null,null,1,c),c.lineEnd()),_&&go(f,s,g,i,c),c.polygonEnd()),l=c,f=p=m=null}function v(){H.point=h,p&&p.push(m=[]),N=!0,x=!1,S=E=NaN}function T(){f&&(h(k,$),M&&x&&d.rejoin(),f.push(d.result())),H.point=G,x&&l.lineEnd()}function h(g,y){var _=a(g,y);if(p&&m.push([g,y]),N)k=g,$=y,M=_,N=!1,_&&(l.lineStart(),l.point(g,y));else if(_&&x)l.point(g,y);else{var C=[S=Math.max(xn,Math.min(Ke,S)),E=Math.max(xn,Math.min(Ke,E))],b=[g=Math.max(xn,Math.min(Ke,g)),y=Math.max(xn,Math.min(Ke,y))];Cf(C,b,t,e,n,r)?(x||(l.lineStart(),l.point(C[0],C[1])),l.point(b[0],b[1]),_||l.lineEnd(),I=!1):_&&(l.lineStart(),l.point(g,y),I=!1)}S=g,E=y,x=_}return H}}const jr=t=>t;var _r=new ce,Zr=new ce,mo,vo,Jr,Qr,he={point:Yt,lineStart:Yt,lineEnd:Yt,polygonStart:function(){he.lineStart=Mf,he.lineEnd=Sf},polygonEnd:function(){he.lineStart=he.lineEnd=he.point=Yt,_r.add(Ct(Zr)),Zr=new ce},result:function(){var t=_r/2;return _r=new ce,t}};function Mf(){he.point=$f}function $f(t,e){he.point=_o,mo=Jr=t,vo=Qr=e}function _o(t,e){Zr.add(Qr*t-Jr*e),Jr=t,Qr=e}function Sf(){_o(mo,vo)}var Ge=1/0,tr=Ge,rn=-Ge,er=rn,nr={point:Ef,lineStart:Yt,lineEnd:Yt,polygonStart:Yt,polygonEnd:Yt,result:function(){var t=[[Ge,tr],[rn,er]];return rn=er=-(tr=Ge=1/0),t}};function Ef(t,e){t<Ge&&(Ge=t),t>rn&&(rn=t),e<tr&&(tr=e),e>er&&(er=e)}var ta=0,ea=0,je=0,rr=0,ar=0,Re=0,na=0,ra=0,Ze=0,xo,wo,se,le,Wt={point:Pe,lineStart:li,lineEnd:ci,polygonStart:function(){Wt.lineStart=Nf,Wt.lineEnd=Pf},polygonEnd:function(){Wt.point=Pe,Wt.lineStart=li,Wt.lineEnd=ci},result:function(){var t=Ze?[na/Ze,ra/Ze]:Re?[rr/Re,ar/Re]:je?[ta/je,ea/je]:[NaN,NaN];return ta=ea=je=rr=ar=Re=na=ra=Ze=0,t}};function Pe(t,e){ta+=t,ea+=e,++je}function li(){Wt.point=Tf}function Tf(t,e){Wt.point=Af,Pe(se=t,le=e)}function Af(t,e){var n=t-se,r=e-le,a=_e(n*n+r*r);rr+=a*(se+t)/2,ar+=a*(le+e)/2,Re+=a,Pe(se=t,le=e)}function ci(){Wt.point=Pe}function Nf(){Wt.point=Rf}function Pf(){bo(xo,wo)}function Rf(t,e){Wt.point=bo,Pe(xo=se=t,wo=le=e)}function bo(t,e){var n=t-se,r=e-le,a=_e(n*n+r*r);rr+=a*(se+t)/2,ar+=a*(le+e)/2,Re+=a,a=le*t-se*e,na+=a*(se+t),ra+=a*(le+e),Ze+=a*3,Pe(se=t,le=e)}function Co(t){this._context=t}Co.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Xt);break}}},result:Yt};var aa=new ce,xr,ko,Mo,Je,Qe,an={point:Yt,lineStart:function(){an.point=If},lineEnd:function(){xr&&$o(ko,Mo),an.point=Yt},polygonStart:function(){xr=!0},polygonEnd:function(){xr=null},result:function(){var t=+aa;return aa=new ce,t}};function If(t,e){an.point=$o,ko=Je=t,Mo=Qe=e}function $o(t,e){Je-=t,Qe-=e,aa.add(_e(Je*Je+Qe*Qe)),Je=t,Qe=e}let ui,ir,fi,di;class hi{constructor(e){this._append=e==null?So:Of(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==fi||this._append!==ir){const r=this._radius,a=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,fi=r,ir=this._append,di=this._,this._=a}this._+=di;break}}}result(){const e=this._;return this._="",e.length?e:null}}function So(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Of(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return So;if(e!==ui){const n=10**e;ui=e,ir=function(a){let i=1;this._+=a[0];for(const o=a.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+a[i]}}return ir}function Df(t,e){let n=3,r=4.5,a,i;function o(s){return s&&(typeof r=="function"&&i.pointRadius(+r.apply(this,arguments)),Me(s,a(i))),i.result()}return o.area=function(s){return Me(s,a(he)),he.result()},o.measure=function(s){return Me(s,a(an)),an.result()},o.bounds=function(s){return Me(s,a(nr)),nr.result()},o.centroid=function(s){return Me(s,a(Wt)),Wt.result()},o.projection=function(s){return arguments.length?(a=s==null?(t=null,jr):(t=s).stream,o):t},o.context=function(s){return arguments.length?(i=s==null?(e=null,new hi(n)):new Co(e=s),typeof r!="function"&&i.pointRadius(r),o):e},o.pointRadius=function(s){return arguments.length?(r=typeof s=="function"?s:(i.pointRadius(+s),+s),o):r},o.digits=function(s){if(!arguments.length)return n;if(s==null)n=null;else{const u=Math.floor(s);if(!(u>=0))throw new RangeError(`invalid digits: ${s}`);n=u}return e===null&&(i=new hi(n)),o},o.projection(t).digits(n).context(e)}function wa(t){return function(e){var n=new ia;for(var r in t)n[r]=t[r];return n.stream=e,n}}function ia(){}ia.prototype={constructor:ia,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function ba(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),Me(n,t.stream(nr)),e(nr.result()),r!=null&&t.clipExtent(r),t}function Eo(t,e,n){return ba(t,function(r){var a=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=Math.min(a/(r[1][0]-r[0][0]),i/(r[1][1]-r[0][1])),s=+e[0][0]+(a-o*(r[1][0]+r[0][0]))/2,u=+e[0][1]+(i-o*(r[1][1]+r[0][1]))/2;t.scale(150*o).translate([s,u])},n)}function Hf(t,e,n){return Eo(t,[[0,0],e],n)}function Lf(t,e,n){return ba(t,function(r){var a=+e,i=a/(r[1][0]-r[0][0]),o=(a-i*(r[1][0]+r[0][0]))/2,s=-i*r[0][1];t.scale(150*i).translate([o,s])},n)}function Ff(t,e,n){return ba(t,function(r){var a=+e,i=a/(r[1][1]-r[0][1]),o=-i*r[0][0],s=(a-i*(r[1][1]+r[0][1]))/2;t.scale(150*i).translate([o,s])},n)}var pi=16,zf=vt(30*kt);function gi(t,e){return+e?Bf(t,e):Gf(t)}function Gf(t){return wa({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function Bf(t,e){function n(r,a,i,o,s,u,c,l,d,f,p,m,k,$){var M=c-r,S=l-a,E=M*M+S*S;if(E>4*e&&k--){var x=o+f,N=s+p,I=u+m,H=_e(x*x+N*N+I*I),G=Ne(I/=H),A=Ct(Ct(I)-1)<wt||Ct(i-d)<wt?(i+d)/2:Ae(N,x),O=t(A,G),R=O[0],v=O[1],T=R-r,h=v-a,g=S*T-M*h;(g*g/E>e||Ct((M*T+S*h)/E-.5)>.3||o*f+s*p+u*m<zf)&&(n(r,a,i,o,s,u,R,v,A,x/=H,N/=H,I,k,$),$.point(R,v),n(R,v,A,x,N,I,c,l,d,f,p,m,k,$))}}return function(r){var a,i,o,s,u,c,l,d,f,p,m,k,$={point:M,lineStart:S,lineEnd:x,polygonStart:function(){r.polygonStart(),$.lineStart=N},polygonEnd:function(){r.polygonEnd(),$.lineStart=S}};function M(G,A){G=t(G,A),r.point(G[0],G[1])}function S(){d=NaN,$.point=E,r.lineStart()}function E(G,A){var O=ze([G,A]),R=t(G,A);n(d,f,l,p,m,k,d=R[0],f=R[1],l=G,p=O[0],m=O[1],k=O[2],pi,r),r.point(d,f)}function x(){$.point=M,r.lineEnd()}function N(){S(),$.point=I,$.lineEnd=H}function I(G,A){E(a=G,A),i=d,o=f,s=p,u=m,c=k,$.point=E}function H(){n(d,f,l,p,m,k,i,o,a,s,u,c,pi,r),$.lineEnd=x,x()}return $}}var Yf=wa({point:function(t,e){this.stream.point(t*kt,e*kt)}});function Wf(t){return wa({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}function Uf(t,e,n,r,a){function i(o,s){return o*=r,s*=a,[e+t*o,n-t*s]}return i.invert=function(o,s){return[(o-e)/t*r,(n-s)/t*a]},i}function yi(t,e,n,r,a,i){if(!i)return Uf(t,e,n,r,a);var o=vt(i),s=_t(i),u=o*t,c=s*t,l=o/t,d=s/t,f=(s*n-o*e)/t,p=(s*e+o*n)/t;function m(k,$){return k*=r,$*=a,[u*k-c*$+e,n-c*k-u*$]}return m.invert=function(k,$){return[r*(l*k-d*$+f),a*(p-d*k-l*$)]},m}function Vf(t){return qf(function(){return t})()}function qf(t){var e,n=150,r=480,a=250,i=0,o=0,s=0,u=0,c=0,l,d=0,f=1,p=1,m=null,k=si,$=null,M,S,E,x=jr,N=.5,I,H,G,A,O;function R(g){return G(g[0]*kt,g[1]*kt)}function v(g){return g=G.invert(g[0],g[1]),g&&[g[0]*jt,g[1]*jt]}R.stream=function(g){return A&&O===g?A:A=Yf(Wf(l)(k(I(x(O=g)))))},R.preclip=function(g){return arguments.length?(k=g,m=void 0,h()):k},R.postclip=function(g){return arguments.length?(x=g,$=M=S=E=null,h()):x},R.clipAngle=function(g){return arguments.length?(k=+g?bf(m=g*kt):(m=null,si),h()):m*jt},R.clipExtent=function(g){return arguments.length?(x=g==null?($=M=S=E=null,jr):kf($=+g[0][0],M=+g[0][1],S=+g[1][0],E=+g[1][1]),h()):$==null?null:[[$,M],[S,E]]},R.scale=function(g){return arguments.length?(n=+g,T()):n},R.translate=function(g){return arguments.length?(r=+g[0],a=+g[1],T()):[r,a]},R.center=function(g){return arguments.length?(i=g[0]%360*kt,o=g[1]%360*kt,T()):[i*jt,o*jt]},R.rotate=function(g){return arguments.length?(s=g[0]%360*kt,u=g[1]%360*kt,c=g.length>2?g[2]%360*kt:0,T()):[s*jt,u*jt,c*jt]},R.angle=function(g){return arguments.length?(d=g%360*kt,T()):d*jt},R.reflectX=function(g){return arguments.length?(f=g?-1:1,T()):f<0},R.reflectY=function(g){return arguments.length?(p=g?-1:1,T()):p<0},R.precision=function(g){return arguments.length?(I=gi(H,N=g*g),h()):_e(N)},R.fitExtent=function(g,y){return Eo(R,g,y)},R.fitSize=function(g,y){return Hf(R,g,y)},R.fitWidth=function(g,y){return Lf(R,g,y)},R.fitHeight=function(g,y){return Ff(R,g,y)};function T(){var g=yi(n,0,0,f,p,d).apply(null,e(i,o)),y=yi(n,r-g[0],a-g[1],f,p,d);return l=pf(s,u,c),H=Xr(e,y),G=Xr(l,H),I=gi(H,N),h()}function h(){return A=O=null,R}return function(){return e=t.apply(this,arguments),R.invert=e.invert&&v,T()}}function To(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),e*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}To.invert=function(t,e){var n=e,r=25,a;do{var i=n*n,o=i*i;n-=a=(n*(1.007226+i*(.015085+o*(-.044475+.028874*i-.005916*o)))-e)/(1.007226+i*(.015085*3+o*(-.044475*7+.028874*9*i-.005916*11*o)))}while(Ct(a)>wt&&--r>0);return[t/(.8707+(i=n*n)*(-.131979+i*(-.013791+i*i*i*(.003971-.001529*i)))),n]};function Xf(){return Vf(To).scale(175.295)}function Kf(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function jf(){return this.eachAfter(Kf)}function Zf(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this}function Jf(t,e){for(var n=this,r=[n],a,i,o=-1;n=r.pop();)if(t.call(e,n,++o,this),a=n.children)for(i=a.length-1;i>=0;--i)r.push(a[i]);return this}function Qf(t,e){for(var n=this,r=[n],a=[],i,o,s,u=-1;n=r.pop();)if(a.push(n),i=n.children)for(o=0,s=i.length;o<s;++o)r.push(i[o]);for(;n=a.pop();)t.call(e,n,++u,this);return this}function td(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r}function ed(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,a=r&&r.length;--a>=0;)n+=r[a].value;e.value=n})}function nd(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function rd(t){for(var e=this,n=ad(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var a=r.length;t!==n;)r.splice(a,0,t),t=t.parent;return r}function ad(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),a=null;for(t=n.pop(),e=r.pop();t===e;)a=t,t=n.pop(),e=r.pop();return a}function id(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function od(){return Array.from(this)}function sd(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function ld(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*cd(){var t=this,e,n=[t],r,a,i;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,r=t.children)for(a=0,i=r.length;a<i;++a)n.push(r[a]);while(n.length)}function Ca(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=dd)):e===void 0&&(e=fd);for(var n=new or(t),r,a=[n],i,o,s,u;r=a.pop();)if((o=e(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,s=u-1;s>=0;--s)a.push(i=o[s]=new or(o[s])),i.parent=r,i.depth=r.depth+1;return n.eachBefore(pd)}function ud(){return Ca(this).eachBefore(hd)}function fd(t){return t.children}function dd(t){return Array.isArray(t)?t[1]:null}function hd(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function pd(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function or(t){this.data=t,this.depth=this.height=0,this.parent=null}or.prototype=Ca.prototype={constructor:or,count:jf,each:Zf,eachAfter:Qf,eachBefore:Jf,find:td,sum:ed,sort:nd,path:rd,ancestors:id,descendants:od,leaves:sd,links:ld,copy:ud,[Symbol.iterator]:cd};function gd(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function yd(t,e,n,r,a){for(var i=t.children,o,s=-1,u=i.length,c=t.value&&(r-e)/t.value;++s<u;)o=i[s],o.y0=n,o.y1=a,o.x0=e,o.x1=e+=o.value*c}function md(){var t=1,e=1,n=0,r=!1;function a(o){var s=o.height+1;return o.x0=o.y0=n,o.x1=t,o.y1=e/s,o.eachBefore(i(e,s)),r&&o.eachBefore(gd),o}function i(o,s){return function(u){u.children&&yd(u,u.x0,o*(u.depth+1)/s,u.x1,o*(u.depth+2)/s);var c=u.x0,l=u.y0,d=u.x1-n,f=u.y1-n;d<c&&(c=d=(c+d)/2),f<l&&(l=f=(l+f)/2),u.x0=c,u.y0=l,u.x1=d,u.y1=f}}return a.round=function(o){return arguments.length?(r=!!o,a):r},a.size=function(o){return arguments.length?(t=+o[0],e=+o[1],a):[t,e]},a.padding=function(o){return arguments.length?(n=+o,a):n},a}function ka(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const mi=Symbol("implicit");function Ao(){var t=new $a,e=[],n=[],r=mi;function a(i){let o=t.get(i);if(o===void 0){if(r!==mi)return r;t.set(i,o=e.push(i)-1)}return n[o%n.length]}return a.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new $a;for(const o of i)t.has(o)||t.set(o,e.push(o)-1);return a},a.range=function(i){return arguments.length?(n=Array.from(i),a):n.slice()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return Ao(e,n).unknown(r)},ka.apply(a,arguments),a}function No(){var t=Ao().unknown(void 0),e=t.domain,n=t.range,r=0,a=1,i,o,s=!1,u=0,c=0,l=.5;delete t.unknown;function d(){var f=e().length,p=a<r,m=p?a:r,k=p?r:a;i=(k-m)/Math.max(1,f-u+c*2),s&&(i=Math.floor(i)),m+=(k-m-i*(f-u))*l,o=i*(1-u),s&&(m=Math.round(m),o=Math.round(o));var $=hs(f).map(function(M){return m+i*M});return n(p?$.reverse():$)}return t.domain=function(f){return arguments.length?(e(f),d()):e()},t.range=function(f){return arguments.length?([r,a]=f,r=+r,a=+a,d()):[r,a]},t.rangeRound=function(f){return[r,a]=f,r=+r,a=+a,s=!0,d()},t.bandwidth=function(){return o},t.step=function(){return i},t.round=function(f){return arguments.length?(s=!!f,d()):s},t.padding=function(f){return arguments.length?(u=Math.min(1,c=+f),d()):u},t.paddingInner=function(f){return arguments.length?(u=Math.min(1,f),d()):u},t.paddingOuter=function(f){return arguments.length?(c=+f,d()):c},t.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),d()):l},t.copy=function(){return No(e(),[r,a]).round(s).paddingInner(u).paddingOuter(c).align(l)},ka.apply(d(),arguments)}function vd(t){return function(){return t}}function _d(t){return+t}var vi=[0,1];function Ie(t){return t}function oa(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:vd(isNaN(e)?NaN:.5)}function xd(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function wd(t,e,n){var r=t[0],a=t[1],i=e[0],o=e[1];return a<r?(r=oa(a,r),i=n(o,i)):(r=oa(r,a),i=n(i,o)),function(s){return i(r(s))}}function bd(t,e,n){var r=Math.min(t.length,e.length)-1,a=new Array(r),i=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)a[o]=oa(t[o],t[o+1]),i[o]=n(e[o],e[o+1]);return function(s){var u=es(t,s,1,r)-1;return i[u](a[u](s))}}function Cd(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function kd(){var t=vi,e=vi,n=ga,r,a,i,o=Ie,s,u,c;function l(){var f=Math.min(t.length,e.length);return o!==Ie&&(o=xd(t[0],t[f-1])),s=f>2?bd:wd,u=c=null,d}function d(f){return f==null||isNaN(f=+f)?i:(u||(u=s(t.map(r),e,n)))(r(o(f)))}return d.invert=function(f){return o(a((c||(c=s(e,t.map(r),Zt)))(f)))},d.domain=function(f){return arguments.length?(t=Array.from(f,_d),l()):t.slice()},d.range=function(f){return arguments.length?(e=Array.from(f),l()):e.slice()},d.rangeRound=function(f){return e=Array.from(f),n=kc,l()},d.clamp=function(f){return arguments.length?(o=f?!0:Ie,l()):o!==Ie},d.interpolate=function(f){return arguments.length?(n=f,l()):n},d.unknown=function(f){return arguments.length?(i=f,d):i},function(f,p){return r=f,a=p,l()}}function Md(){return kd()(Ie,Ie)}function $d(t,e,n,r){var a=us(t,e,n),i;switch(r=Yn(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(i=nf(a,o))&&(r.precision=i),co(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=rf(a,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=ef(a))&&(r.precision=i-(r.type==="%")*2);break}}return dr(r)}function Sd(t){var e=t.domain;return t.ticks=function(n){var r=e();return cs(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var a=e();return $d(a[0],a[a.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),a=0,i=r.length-1,o=r[a],s=r[i],u,c,l=10;for(s<o&&(c=o,o=s,s=c,c=a,a=i,i=c);l-- >0;){if(c=Sr(o,s,n),c===u)return r[a]=o,r[i]=s,e(r);if(c>0)o=Math.floor(o/c)*c,s=Math.ceil(s/c)*c;else if(c<0)o=Math.ceil(o*c)/c,s=Math.floor(s*c)/c;else break;u=c}return t},t}function ne(){var t=Md();return t.copy=function(){return Cd(t,ne())},ka.apply(t,arguments),Sd(t)}function $t(t){return function(){return t}}const _i=Math.abs,Rt=Math.atan2,we=Math.cos,Ed=Math.max,wr=Math.min,oe=Math.sin,Oe=Math.sqrt,zt=1e-12,on=Math.PI,sr=on/2,Nn=2*on;function Td(t){return t>1?0:t<-1?on:Math.acos(t)}function xi(t){return t>=1?sr:t<=-1?-sr:Math.asin(t)}function Po(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Vu(e)}function Ad(t){return t.innerRadius}function Nd(t){return t.outerRadius}function Pd(t){return t.startAngle}function Rd(t){return t.endAngle}function Id(t){return t&&t.padAngle}function Od(t,e,n,r,a,i,o,s){var u=n-t,c=r-e,l=o-a,d=s-i,f=d*u-l*c;if(!(f*f<zt))return f=(l*(e-i)-d*(t-a))/f,[t+f*u,e+f*c]}function wn(t,e,n,r,a,i,o){var s=t-n,u=e-r,c=(o?i:-i)/Oe(s*s+u*u),l=c*u,d=-c*s,f=t+l,p=e+d,m=n+l,k=r+d,$=(f+m)/2,M=(p+k)/2,S=m-f,E=k-p,x=S*S+E*E,N=a-i,I=f*k-m*p,H=(E<0?-1:1)*Oe(Ed(0,N*N*x-I*I)),G=(I*E-S*H)/x,A=(-I*S-E*H)/x,O=(I*E+S*H)/x,R=(-I*S+E*H)/x,v=G-$,T=A-M,h=O-$,g=R-M;return v*v+T*T>h*h+g*g&&(G=O,A=R),{cx:G,cy:A,x01:-l,y01:-d,x11:G*(a/N-1),y11:A*(a/N-1)}}function sn(){var t=Ad,e=Nd,n=$t(0),r=null,a=Pd,i=Rd,o=Id,s=null,u=Po(c);function c(){var l,d,f=+t.apply(this,arguments),p=+e.apply(this,arguments),m=a.apply(this,arguments)-sr,k=i.apply(this,arguments)-sr,$=_i(k-m),M=k>m;if(s||(s=l=u()),p<f&&(d=p,p=f,f=d),!(p>zt))s.moveTo(0,0);else if($>Nn-zt)s.moveTo(p*we(m),p*oe(m)),s.arc(0,0,p,m,k,!M),f>zt&&(s.moveTo(f*we(k),f*oe(k)),s.arc(0,0,f,k,m,M));else{var S=m,E=k,x=m,N=k,I=$,H=$,G=o.apply(this,arguments)/2,A=G>zt&&(r?+r.apply(this,arguments):Oe(f*f+p*p)),O=wr(_i(p-f)/2,+n.apply(this,arguments)),R=O,v=O,T,h;if(A>zt){var g=xi(A/f*oe(G)),y=xi(A/p*oe(G));(I-=g*2)>zt?(g*=M?1:-1,x+=g,N-=g):(I=0,x=N=(m+k)/2),(H-=y*2)>zt?(y*=M?1:-1,S+=y,E-=y):(H=0,S=E=(m+k)/2)}var _=p*we(S),C=p*oe(S),b=f*we(N),P=f*oe(N);if(O>zt){var D=p*we(E),L=p*oe(E),B=f*we(x),Y=f*oe(x),U;if($<on)if(U=Od(_,C,B,Y,D,L,b,P)){var Z=_-U[0],Q=C-U[1],et=D-U[0],ft=L-U[1],gt=1/oe(Td((Z*et+Q*ft)/(Oe(Z*Z+Q*Q)*Oe(et*et+ft*ft)))/2),Mt=Oe(U[0]*U[0]+U[1]*U[1]);R=wr(O,(f-Mt)/(gt-1)),v=wr(O,(p-Mt)/(gt+1))}else R=v=0}H>zt?v>zt?(T=wn(B,Y,_,C,p,v,M),h=wn(D,L,b,P,p,v,M),s.moveTo(T.cx+T.x01,T.cy+T.y01),v<O?s.arc(T.cx,T.cy,v,Rt(T.y01,T.x01),Rt(h.y01,h.x01),!M):(s.arc(T.cx,T.cy,v,Rt(T.y01,T.x01),Rt(T.y11,T.x11),!M),s.arc(0,0,p,Rt(T.cy+T.y11,T.cx+T.x11),Rt(h.cy+h.y11,h.cx+h.x11),!M),s.arc(h.cx,h.cy,v,Rt(h.y11,h.x11),Rt(h.y01,h.x01),!M))):(s.moveTo(_,C),s.arc(0,0,p,S,E,!M)):s.moveTo(_,C),!(f>zt)||!(I>zt)?s.lineTo(b,P):R>zt?(T=wn(b,P,D,L,f,-R,M),h=wn(_,C,B,Y,f,-R,M),s.lineTo(T.cx+T.x01,T.cy+T.y01),R<O?s.arc(T.cx,T.cy,R,Rt(T.y01,T.x01),Rt(h.y01,h.x01),!M):(s.arc(T.cx,T.cy,R,Rt(T.y01,T.x01),Rt(T.y11,T.x11),!M),s.arc(0,0,f,Rt(T.cy+T.y11,T.cx+T.x11),Rt(h.cy+h.y11,h.cx+h.x11),M),s.arc(h.cx,h.cy,R,Rt(h.y11,h.x11),Rt(h.y01,h.x01),!M))):s.arc(0,0,f,N,x,M)}if(s.closePath(),l)return s=null,l+""||null}return c.centroid=function(){var l=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,d=(+a.apply(this,arguments)+ +i.apply(this,arguments))/2-on/2;return[we(d)*l,oe(d)*l]},c.innerRadius=function(l){return arguments.length?(t=typeof l=="function"?l:$t(+l),c):t},c.outerRadius=function(l){return arguments.length?(e=typeof l=="function"?l:$t(+l),c):e},c.cornerRadius=function(l){return arguments.length?(n=typeof l=="function"?l:$t(+l),c):n},c.padRadius=function(l){return arguments.length?(r=l==null?null:typeof l=="function"?l:$t(+l),c):r},c.startAngle=function(l){return arguments.length?(a=typeof l=="function"?l:$t(+l),c):a},c.endAngle=function(l){return arguments.length?(i=typeof l=="function"?l:$t(+l),c):i},c.padAngle=function(l){return arguments.length?(o=typeof l=="function"?l:$t(+l),c):o},c.context=function(l){return arguments.length?(s=l??null,c):s},c}function Ro(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Io(t){this._context=t}Io.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Dd(t){return new Io(t)}function Hd(t){return t[0]}function Ld(t){return t[1]}function ke(t,e){var n=$t(!0),r=null,a=Dd,i=null,o=Po(s);t=typeof t=="function"?t:t===void 0?Hd:$t(t),e=typeof e=="function"?e:e===void 0?Ld:$t(e);function s(u){var c,l=(u=Ro(u)).length,d,f=!1,p;for(r==null&&(i=a(p=o())),c=0;c<=l;++c)!(c<l&&n(d=u[c],c,u))===f&&((f=!f)?i.lineStart():i.lineEnd()),f&&i.point(+t(d,c,u),+e(d,c,u));if(p)return i=null,p+""||null}return s.x=function(u){return arguments.length?(t=typeof u=="function"?u:$t(+u),s):t},s.y=function(u){return arguments.length?(e=typeof u=="function"?u:$t(+u),s):e},s.defined=function(u){return arguments.length?(n=typeof u=="function"?u:$t(!!u),s):n},s.curve=function(u){return arguments.length?(a=u,r!=null&&(i=a(r)),s):a},s.context=function(u){return arguments.length?(u==null?r=i=null:i=a(r=u),s):r},s}function Fd(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function zd(t){return t}function Oo(){var t=zd,e=Fd,n=null,r=$t(0),a=$t(Nn),i=$t(0);function o(s){var u,c=(s=Ro(s)).length,l,d,f=0,p=new Array(c),m=new Array(c),k=+r.apply(this,arguments),$=Math.min(Nn,Math.max(-Nn,a.apply(this,arguments)-k)),M,S=Math.min(Math.abs($)/c,i.apply(this,arguments)),E=S*($<0?-1:1),x;for(u=0;u<c;++u)(x=m[p[u]=u]=+t(s[u],u,s))>0&&(f+=x);for(e!=null?p.sort(function(N,I){return e(m[N],m[I])}):n!=null&&p.sort(function(N,I){return n(s[N],s[I])}),u=0,d=f?($-c*E)/f:0;u<c;++u,k=M)l=p[u],x=m[l],M=k+(x>0?x*d:0)+E,m[l]={data:s[l],index:u,value:x,startAngle:k,endAngle:M,padAngle:S};return m}return o.value=function(s){return arguments.length?(t=typeof s=="function"?s:$t(+s),o):t},o.sortValues=function(s){return arguments.length?(e=s,n=null,o):e},o.sort=function(s){return arguments.length?(n=s,e=null,o):n},o.startAngle=function(s){return arguments.length?(r=typeof s=="function"?s:$t(+s),o):r},o.endAngle=function(s){return arguments.length?(a=typeof s=="function"?s:$t(+s),o):a},o.padAngle=function(s){return arguments.length?(i=typeof s=="function"?s:$t(+s),o):i},o}function wi(t){return t<0?-1:1}function bi(t,e,n){var r=t._x1-t._x0,a=e-t._x1,i=(t._y1-t._y0)/(r||a<0&&-0),o=(n-t._y1)/(a||r<0&&-0),s=(i*a+o*r)/(r+a);return(wi(i)+wi(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(s))||0}function Ci(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function br(t,e,n){var r=t._x0,a=t._y0,i=t._x1,o=t._y1,s=(i-r)/3;t._context.bezierCurveTo(r+s,a+s*e,i-s,o-s*n,i,o)}function lr(t){this._context=t}lr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:br(this,this._t0,Ci(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,br(this,Ci(this,n=bi(this,t,e)),n);break;default:br(this,this._t0,n=bi(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};Object.create(lr.prototype).point=function(t,e){lr.prototype.point.call(this,e,t)};function Ye(t){return new lr(t)}const bn=t=>()=>t;function Gd(t,{sourceEvent:e,target:n,transform:r,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:a}})}function pe(t,e,n){this.k=t,this.x=e,this.y=n}pe.prototype={constructor:pe,scale:function(t){return t===1?this:new pe(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new pe(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ln=new pe(1,0,0);pe.prototype;function Cr(t){t.stopImmediatePropagation()}function We(t){t.preventDefault(),t.stopImmediatePropagation()}function Bd(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Yd(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function ki(){return this.__zoom||ln}function Wd(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Ud(){return navigator.maxTouchPoints||"ontouchstart"in this}function Vd(t,e,n){var r=t.invertX(e[0][0])-n[0][0],a=t.invertX(e[1][0])-n[1][0],i=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(a>r?(r+a)/2:Math.min(0,r)||Math.max(0,a),o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o))}function Do(){var t=Bd,e=Yd,n=Vd,r=Wd,a=Ud,i=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],s=250,u=Pc,c=ca("start","zoom","end"),l,d,f,p=500,m=150,k=0,$=10;function M(h){h.property("__zoom",ki).on("wheel.zoom",G,{passive:!1}).on("mousedown.zoom",A).on("dblclick.zoom",O).filter(a).on("touchstart.zoom",R).on("touchmove.zoom",v).on("touchend.zoom touchcancel.zoom",T).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}M.transform=function(h,g,y,_){var C=h.selection?h.selection():h;C.property("__zoom",ki),h!==C?N(h,g,y,_):C.interrupt().each(function(){I(this,arguments).event(_).start().zoom(null,typeof g=="function"?g.apply(this,arguments):g).end()})},M.scaleBy=function(h,g,y,_){M.scaleTo(h,function(){var C=this.__zoom.k,b=typeof g=="function"?g.apply(this,arguments):g;return C*b},y,_)},M.scaleTo=function(h,g,y,_){M.transform(h,function(){var C=e.apply(this,arguments),b=this.__zoom,P=y==null?x(C):typeof y=="function"?y.apply(this,arguments):y,D=b.invert(P),L=typeof g=="function"?g.apply(this,arguments):g;return n(E(S(b,L),P,D),C,o)},y,_)},M.translateBy=function(h,g,y,_){M.transform(h,function(){return n(this.__zoom.translate(typeof g=="function"?g.apply(this,arguments):g,typeof y=="function"?y.apply(this,arguments):y),e.apply(this,arguments),o)},null,_)},M.translateTo=function(h,g,y,_,C){M.transform(h,function(){var b=e.apply(this,arguments),P=this.__zoom,D=_==null?x(b):typeof _=="function"?_.apply(this,arguments):_;return n(ln.translate(D[0],D[1]).scale(P.k).translate(typeof g=="function"?-g.apply(this,arguments):-g,typeof y=="function"?-y.apply(this,arguments):-y),b,o)},_,C)};function S(h,g){return g=Math.max(i[0],Math.min(i[1],g)),g===h.k?h:new pe(g,h.x,h.y)}function E(h,g,y){var _=g[0]-y[0]*h.k,C=g[1]-y[1]*h.k;return _===h.x&&C===h.y?h:new pe(h.k,_,C)}function x(h){return[(+h[0][0]+ +h[1][0])/2,(+h[0][1]+ +h[1][1])/2]}function N(h,g,y,_){h.on("start.zoom",function(){I(this,arguments).event(_).start()}).on("interrupt.zoom end.zoom",function(){I(this,arguments).event(_).end()}).tween("zoom",function(){var C=this,b=arguments,P=I(C,b).event(_),D=e.apply(C,b),L=y==null?x(D):typeof y=="function"?y.apply(C,b):y,B=Math.max(D[1][0]-D[0][0],D[1][1]-D[0][1]),Y=C.__zoom,U=typeof g=="function"?g.apply(C,b):g,Z=u(Y.invert(L).concat(B/Y.k),U.invert(L).concat(B/U.k));return function(Q){if(Q===1)Q=U;else{var et=Z(Q),ft=B/et[2];Q=new pe(ft,L[0]-et[0]*ft,L[1]-et[1]*ft)}P.zoom(null,Q)}})}function I(h,g,y){return!y&&h.__zooming||new H(h,g)}function H(h,g){this.that=h,this.args=g,this.active=0,this.sourceEvent=null,this.extent=e.apply(h,g),this.taps=0}H.prototype={event:function(h){return h&&(this.sourceEvent=h),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(h,g){return this.mouse&&h!=="mouse"&&(this.mouse[1]=g.invert(this.mouse[0])),this.touch0&&h!=="touch"&&(this.touch0[1]=g.invert(this.touch0[0])),this.touch1&&h!=="touch"&&(this.touch1[1]=g.invert(this.touch1[0])),this.that.__zoom=g,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(h){var g=at(this.that).datum();c.call(h,this.that,new Gd(h,{sourceEvent:this.sourceEvent,target:M,transform:this.that.__zoom,dispatch:c}),g)}};function G(h,...g){if(!t.apply(this,arguments))return;var y=I(this,g).event(h),_=this.__zoom,C=Math.max(i[0],Math.min(i[1],_.k*Math.pow(2,r.apply(this,arguments)))),b=xe(h);if(y.wheel)(y.mouse[0][0]!==b[0]||y.mouse[0][1]!==b[1])&&(y.mouse[1]=_.invert(y.mouse[0]=b)),clearTimeout(y.wheel);else{if(_.k===C)return;y.mouse=[b,_.invert(b)],Tn(this),y.start()}We(h),y.wheel=setTimeout(P,m),y.zoom("mouse",n(E(S(_,C),y.mouse[0],y.mouse[1]),y.extent,o));function P(){y.wheel=null,y.end()}}function A(h,...g){if(f||!t.apply(this,arguments))return;var y=h.currentTarget,_=I(this,g,!0).event(h),C=at(h.view).on("mousemove.zoom",L,!0).on("mouseup.zoom",B,!0),b=xe(h,y),P=h.clientX,D=h.clientY;ec(h.view),Cr(h),_.mouse=[b,this.__zoom.invert(b)],Tn(this),_.start();function L(Y){if(We(Y),!_.moved){var U=Y.clientX-P,Z=Y.clientY-D;_.moved=U*U+Z*Z>k}_.event(Y).zoom("mouse",n(E(_.that.__zoom,_.mouse[0]=xe(Y,y),_.mouse[1]),_.extent,o))}function B(Y){C.on("mousemove.zoom mouseup.zoom",null),nc(Y.view,_.moved),We(Y),_.event(Y).end()}}function O(h,...g){if(t.apply(this,arguments)){var y=this.__zoom,_=xe(h.changedTouches?h.changedTouches[0]:h,this),C=y.invert(_),b=y.k*(h.shiftKey?.5:2),P=n(E(S(y,b),_,C),e.apply(this,g),o);We(h),s>0?at(this).transition().duration(s).call(N,P,_,h):at(this).call(M.transform,P,_,h)}}function R(h,...g){if(t.apply(this,arguments)){var y=h.touches,_=y.length,C=I(this,g,h.changedTouches.length===_).event(h),b,P,D,L;for(Cr(h),P=0;P<_;++P)D=y[P],L=xe(D,this),L=[L,this.__zoom.invert(L),D.identifier],C.touch0?!C.touch1&&C.touch0[2]!==L[2]&&(C.touch1=L,C.taps=0):(C.touch0=L,b=!0,C.taps=1+!!l);l&&(l=clearTimeout(l)),b&&(C.taps<2&&(d=L[0],l=setTimeout(function(){l=null},p)),Tn(this),C.start())}}function v(h,...g){if(this.__zooming){var y=I(this,g).event(h),_=h.changedTouches,C=_.length,b,P,D,L;for(We(h),b=0;b<C;++b)P=_[b],D=xe(P,this),y.touch0&&y.touch0[2]===P.identifier?y.touch0[0]=D:y.touch1&&y.touch1[2]===P.identifier&&(y.touch1[0]=D);if(P=y.that.__zoom,y.touch1){var B=y.touch0[0],Y=y.touch0[1],U=y.touch1[0],Z=y.touch1[1],Q=(Q=U[0]-B[0])*Q+(Q=U[1]-B[1])*Q,et=(et=Z[0]-Y[0])*et+(et=Z[1]-Y[1])*et;P=S(P,Math.sqrt(Q/et)),D=[(B[0]+U[0])/2,(B[1]+U[1])/2],L=[(Y[0]+Z[0])/2,(Y[1]+Z[1])/2]}else if(y.touch0)D=y.touch0[0],L=y.touch0[1];else return;y.zoom("touch",n(E(P,D,L),y.extent,o))}}function T(h,...g){if(this.__zooming){var y=I(this,g).event(h),_=h.changedTouches,C=_.length,b,P;for(Cr(h),f&&clearTimeout(f),f=setTimeout(function(){f=null},p),b=0;b<C;++b)P=_[b],y.touch0&&y.touch0[2]===P.identifier?delete y.touch0:y.touch1&&y.touch1[2]===P.identifier&&delete y.touch1;if(y.touch1&&!y.touch0&&(y.touch0=y.touch1,delete y.touch1),y.touch0)y.touch0[1]=this.__zoom.invert(y.touch0[0]);else if(y.end(),y.taps===2&&(P=xe(P,this),Math.hypot(d[0]-P[0],d[1]-P[1])<$)){var D=at(this).on("dblclick.zoom");D&&D.apply(this,arguments)}}}return M.wheelDelta=function(h){return arguments.length?(r=typeof h=="function"?h:bn(+h),M):r},M.filter=function(h){return arguments.length?(t=typeof h=="function"?h:bn(!!h),M):t},M.touchable=function(h){return arguments.length?(a=typeof h=="function"?h:bn(!!h),M):a},M.extent=function(h){return arguments.length?(e=typeof h=="function"?h:bn([[+h[0][0],+h[0][1]],[+h[1][0],+h[1][1]]]),M):e},M.scaleExtent=function(h){return arguments.length?(i[0]=+h[0],i[1]=+h[1],M):[i[0],i[1]]},M.translateExtent=function(h){return arguments.length?(o[0][0]=+h[0][0],o[1][0]=+h[1][0],o[0][1]=+h[0][1],o[1][1]=+h[1][1],M):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},M.constrain=function(h){return arguments.length?(n=h,M):n},M.duration=function(h){return arguments.length?(s=+h,M):s},M.interpolate=function(h){return arguments.length?(u=h,M):u},M.on=function(){var h=c.on.apply(c,arguments);return h===c?M:h},M.clickDistance=function(h){return arguments.length?(k=(h=+h)*h,M):Math.sqrt(k)},M.tapDistance=function(h){return arguments.length?($=+h,M):$},M}const qd={__name:"SunburstChart",props:{data:{type:Object,default:()=>({})},year:{type:[String,Number],default:null},country:{type:Object,default:null}},setup(t){const e=t,n=it(null),r=it(null),a={top:60,right:20,bottom:20,left:60},i=it(500),o=it(500);function s(d,f){return Math.min(d,f)/2-Math.max(a.top,a.right,a.bottom,a.left)}const u={residential:"#63b3df",service:"#76d76b",industry:"#898989",transport:"#ffb56b"};function c(){if(!e.data||!e.data.children||e.data.children.length===0)return;const d=i.value,f=o.value,p=s(d,f),m=at(n.value);m.selectAll("*").remove(),m.attr("width",d).attr("height",f).attr("viewBox",`0 0 ${d} ${f}`);const k=m.append("g").attr("transform",`translate(${d/2},${f/2})`),$=md().size([2*Math.PI,p*1.2]),M=sn().startAngle(x=>x.x0).endAngle(x=>x.x1).innerRadius(x=>x.y0).outerRadius(x=>x.y1),S=Ca(e.data).sum(x=>x.children?0:x.value).sort((x,N)=>N.value-x.value);$(S),cn(S.descendants(),x=>x.depth),On(".tooltip-container").remove();const E=at("body").append("div").attr("class","tooltip-container");k.selectAll("path").data(S.descendants()).enter().append("path").attr("d",M).style("fill",x=>x.depth===2?u[x.parent.data.name.toLowerCase()]:x.depth===1?u[x.data.name.toLowerCase()]:"none").style("stroke","#fff").style("stroke-width","1px").style("cursor","pointer").on("mouseover",function(x,N){at(this).style("opacity",.7),E.style("display","block").html(`
        <div style="font-weight:bold">
          ${N.data.name||"Unknown"}
        </div>
        <div>
          ${(N.value||0).toFixed(2)} PJ
        </div>
      `)}).on("mousemove",function(x){E.style("left",x.pageX+12+"px").style("top",x.pageY-28+"px")}).on("mouseout",function(){at(this).style("opacity",1),E.style("display","none")}),k.selectAll("text").data(S.descendants().filter(x=>x.depth>0&&x.x1-x.x0>.05)).enter().append("text").attr("transform",x=>{const N=(x.x0+x.x1)/2,I=(x.y0+x.y1)/2,H=N*180/Math.PI;return`
      rotate(${H-90})
      translate(${I}, 0)
      rotate(${H<180?0:180})
    `}).attr("text-anchor","middle").attr("dy","0.35em").style("font-size",x=>x.depth===2?"10px":"13px").style("fill","#333").style("font-weight","bold").text(x=>x.data.name.length>15?x.data.name.substring(0,12)+"...":x.data.name)}re(()=>{Vt(()=>{const d=r.value?r.value.getBoundingClientRect():{width:500},f=Math.max(200,Math.min(d.width,500));i.value=f,o.value=f;const p=new ResizeObserver(m=>{for(const k of m){const $=k.contentRect,M=Math.max(200,Math.min($.width,500));i.value=M,o.value=M,Vt(()=>c())}});r.value&&p.observe(r.value),l.value=p,c()})}),qt(()=>[e.data,e.year,e.country],()=>{Vt(()=>{c()})},{deep:!0});const l=it(null);return me(()=>{if(l.value)try{l.value.disconnect()}catch{}On(".tooltip-container").remove()}),(d,f)=>(z(),F("div",{class:"chart",ref_key:"containerRef",ref:r,style:{width:"100%"}},[(z(),F("svg",{ref_key:"svgRef",ref:n,preserveAspectRatio:"xMidYMid meet"},null,512))],512))}},Xd={id:"consumption",class:"page-section"},Kd={class:"section-container"},jd={key:0,class:"no-data"},Zd={key:1,class:"loading"},Jd={key:2,class:"error"},Qd={key:3,class:"charts-container"},t0={__name:"Consumption",setup(t){const e=ae(),n=tt(()=>e.sunburstData.name?.length>0&&e.pieChartData[0]);return(r,a)=>(z(),F("section",Xd,[a[2]||(a[2]=w("div",{class:"chart-header"},[w("h2",null,"How Different Sectors Use Energy?")],-1)),w("div",Kd,[n.value?j(e).isLoading?(z(),F("div",Zd,"Loading energy data...")):j(e).error?(z(),F("div",Jd,ct(j(e).error),1)):(z(),F("div",Qd,[bt(qd,{data:j(e).sunburstData,year:j(e).selectedYear,country:j(e).selectedCountry},null,8,["data","year","country"])])):(z(),F("div",jd,[...a[0]||(a[0]=[w("span",null,"No consumption data available for this configuration.",-1)])])),a[1]||(a[1]=w("div",{class:"text-container"},[w("p",null,[Bt(" Have you ever wondered what sectors consume the most energy in your country? Energy consumption differs across "),w("strong",null,"households, services, transport, and industry"),Bt(" because each sector uses energy for fundamentally different purposes. Industry consumes the most energy due to energy-intensive production processes and high-temperature heat requirements. The transport sector is dominated by fossil fuels and internal combustion engines, which are inherently inefficient and driven by growing mobility demand. Household energy use is mainly shaped by space heating, building characteristics, and everyday behavior. The service sector consumes energy primarily for heating, lighting, cooling, and IT in large buildings with long operating hours. Overall, sectoral differences in energy consumption are driven more by structural and technical factors than by individual efficiency or waste. This interactive sunburst diagram shows how total energy consumption is distributed across the four major sectors and how it is further broken down into specific activities. ")])],-1))])]))}},e0=St(t0,[["__scopeId","data-v-d6d52f82"]]),n0="data:image/svg+xml,%3csvg%20width='4408'%20height='1516'%20viewBox='0%200%204408%201516'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M4345.75%201289.5C4318.88%201266.74%204285.87%201256.39%204263.37%201226.27C4215.24%201161.87%204240.84%201054.7%204245.2%20963.611C4254.04%20779.158%204143.98%20598.469%204007.7%20573.693C3976.53%20568.026%203944.11%20569.383%203914.77%20554.151C3832.84%20511.617%203814.46%20370.555%203767.31%20270.965C3708.15%20145.992%203590.36%2081.0607%203481.06%20100.083C3371.76%20119.106%203273.88%20215.253%203217.19%20342.28L3215.54%20346.616C3141.46%20442.432%203018.53%20461.059%202930.44%20389.818C2844.63%20320.423%202799.7%20185.661%202720.28%20103.687C2643.06%2024.0011%202538.86%202.11167%202442.71%2022.5201C2346.55%2042.9262%202257.17%20101.884%202174.39%20170.723C2136.22%20202.463%202098.86%20236.616%202057.69%20260.664C1924.73%20338.345%201757.48%20293.507%201656.86%20153.213C1632.87%20119.755%201612.3%2081.416%201584.83%2053.1893C1514.79%20-18.7896%201414.51%20-9.71456%201332.3%2033.1184C1250.09%2075.9514%201177.88%20147.586%201097.41%20196.006C1016.93%20244.425%20919.93%20267.45%20842.534%20210.685C793.435%20174.676%20757.04%20109.945%20704.609%2083.7586C645.759%2054.3683%20575.757%2082.7327%20532.484%20143.867C489.211%20205.003%20471.348%20293.793%20476.988%20377.832C480.953%20436.91%20495.584%20494.349%20496.491%20553.653C498.371%20676.623%20433.823%20796.067%20346.234%20831.692C271.321%20862.164%20186.681%20835.987%20115.242%20878.962C30.6368%20929.857%20-10.2127%201069.12%202.17795%201192.58C14.5686%201316.05%2069.8738%201424.47%20133.479%201515.1H4393.5C4424.46%201434.74%204402.72%201337.73%204345.75%201289.5Z'%20fill='%23D9CEC4'/%3e%3cpath%20d='M2938.07%20743.111C2947.65%20743.111%202956.6%20745.725%202964.32%20750.215C2971.32%20729.89%202990.56%20715.263%203013.26%20715.263C3016.97%20715.263%203020.59%20715.669%203024.07%20716.411C3033.02%20680.562%203065.42%20654%203104.04%20654C3142.34%20654%203174.52%20680.118%203183.78%20715.512C3185.41%20715.396%203187.04%20715.263%203188.7%20715.263C3201.29%20715.263%203213.05%20718.687%203223.22%20724.574C3232.7%20718.707%203243.84%20715.263%203255.81%20715.263C3290.1%20715.263%203317.9%20743.064%203317.9%20777.361H3257.4H3193.71H3175.57H3132.01H3119.98H3108.68H3064.02H3032.51H2987.14H2985.78H2962.49H2889C2896.38%20757.385%202915.54%20743.111%202938.07%20743.111Z'%20fill='%23FCF1E6'/%3e%3cpath%20d='M805.303%20601.706C817.853%20601.706%20829.576%20605.697%20839.695%20612.552C848.864%20581.52%20858.665%20552.678%20888.411%20552.678C893.273%20552.678%20909.905%20506.661%20947.249%20527.273C966.248%20534.144%20953.8%20496.737%20983.376%20466.2C1015.39%20438.717%201061.9%20453.986%201071.73%20513.532C1073.86%20513.356%201136.03%20488.339%201153.75%20520.615C1167.51%20538.937%201165.61%20564.415%201178.93%20573.403C1191.36%20564.446%201205.95%20559.187%201221.63%20559.187C1266.57%20559.187%201303%20601.635%201303%20654H1223.72H1140.26H1116.5H1059.42H1043.66H1028.86H970.335H929.042H869.6H867.811H837.301H741C750.669%20623.5%20775.77%20601.706%20805.303%20601.706Z'%20fill='%23FCF1E6'/%3e%3cpath%20d='M2251.37%20584.529H2187.31H2167.01H2165.82H2126.28H2098.8H2059.87H2050.02H2039.54H2001.56H1985.76H1930.23H1877.49C1877.49%20554.634%201901.73%20530.396%201931.63%20530.396C1938.09%20530.396%201944.26%20531.589%201950.01%20533.665C1960.66%20524.114%201974.69%20518.259%201990.13%20518.259C1997.35%20518.259%202004.24%20519.598%202010.66%20521.929C2017.63%20513.769%202027.97%20508.579%202039.54%20508.579C2047.7%20508.579%202055.24%20511.175%202061.43%20515.554C2072.81%20499.015%202091.85%20488.157%202113.44%20488.157C2143.69%20488.157%202168.93%20509.441%202175.09%20537.84C2183.43%20528.804%202195.33%20523.111%202208.6%20523.111C2233.8%20523.111%202254.24%20543.542%202254.24%20568.748C2254.23%20574.306%202253.19%20579.606%202251.37%20584.529Z'%20fill='%23FCF1E6'/%3e%3c/svg%3e",r0="/MyEnergyProfile/assets/consumption_service-D0ioY7Vx.svg",a0="/MyEnergyProfile/assets/consumption_residential-C9jPUtXp.svg",i0="/MyEnergyProfile/assets/consumption_transport-qyh_MufO.svg",o0="/MyEnergyProfile/assets/consumption_industry-C8RP9hDo.svg",s0={__name:"PieChart",props:{data:{type:Object,default:()=>({})},year:{type:[String,Number],default:null},selectedSector:{type:String,default:"Residential"},country:{type:Object,default:null}},setup(t){const e=t,n=it(null),r=it(null),a=it(500),i=it(500),o={top:60,right:20,bottom:20,left:60},s=it(null);function u(d,f){return Math.min(d,f)/2-Math.max(o.top,o.right,o.bottom,o.left)}const c={motor:"rgb(162, 158, 162)",jet:"rgb(109, 151, 214)",lpg:"rgb(240, 220, 120)",electricity:"rgb(99, 179, 223)",heat:"rgb(255, 130, 130)",biofuel:"rgb(144, 210, 125)",gas:"rgb(128, 128, 128)",coal:"rgb(70, 70, 70)",other:"rgb(150, 180, 220)","Oil and oil products":"rgb(236, 154, 111)","Heavy fuel oil":"rgb(139, 99, 11)",diesel:"rgb(205, 149, 88)"};function l(){const d=e.data.find(A=>A?.name===e.selectedSector)?.energyType,f=a.value,p=i.value,m=u(f,p);if(!e.data||!d||d.length===0)return;const k=at(n.value);k.selectAll("*").remove(),k.attr("width",f).attr("height",p).attr("viewBox",`0 0 ${f} ${p}`);const $=k.append("g").attr("transform",`translate(${f/2},${p/2})`),M=Oo().value(A=>A.value).sort(null),S=sn().innerRadius(0).outerRadius(m),E=M(d),x=at("body").append("div").attr("class","tooltip-container");$.selectAll("path").data(E).enter().append("path").attr("d",S).style("fill",A=>{const O=Object.entries(c).find(([R])=>A.data.name.toLowerCase().includes(R.toLowerCase()));return O?O[1]:"#fff"}).style("stroke","#fff").style("stroke-width","1px").style("cursor","pointer").on("mouseover",function(A,O){at(this).style("opacity",.7),x.style("display","block").html(`
          <div style="font-weight: bold;">${O.data.name}</div>
          <div>${O.data.value?O.data.value.toFixed(2)+" PJ":""}</div>
        `)}).on("mousemove",function(A){x.style("left",A.pageX+12+"px").style("top",A.pageY-28+"px")}).on("mouseout",function(){at(this).style("opacity",1),x.style("display","none")});const N=sn().innerRadius(m*.7).outerRadius(m*.7),I=m,H=20,G=[];$.selectAll("text").data(E).enter().append("text").attr("class","pie-label").attr("transform",function(A,O){const[R,v]=N.centroid(A),T=Math.atan2(v,R);let h=I+H,g=0,y,_;for(;g<5&&(y=h*Math.cos(T),_=h*Math.sin(T),!!G.some(b=>Math.hypot(b.x-y,b.y-_)<25));)h+=12,g++;return G.push({x:y,y:_}),`translate(${y}, ${_})`}).attr("text-anchor",A=>{const[O,R]=N.centroid(A);return O>=0?"start":"end"}).attr("dy","0.35em").style("font-size","15px").text(A=>A.data.name),$.selectAll("polyline").data(E).enter().append("polyline").attr("points",function(A,O){const R=G[O];if(!R)return"";const[v,T]=N.centroid(A),h=Math.atan2(T,v),g=I*Math.cos(h),y=I*Math.sin(h),_=(I+H/2)*Math.cos(h),C=(I+H/2)*Math.sin(h),b=5,P=R.x-b*Math.cos(h),D=R.y-b*Math.sin(h);return[[g,y],[_,C],[P,D]]}).style("fill","none").style("stroke","black").style("stroke-width","1")}return re(()=>{Vt(()=>{const d=r.value?r.value.getBoundingClientRect():{width:500},f=Math.max(200,Math.min(d.width,400));a.value=f*1.5,i.value=f*.8;const p=new ResizeObserver(m=>{for(const k of m){const $=k.contentRect,M=Math.max(200,Math.min($.width,400));a.value=M*1.5,i.value=M*.8,Vt(()=>l())}});r.value&&p.observe(r.value),s.value=p,l()})}),qt(()=>[e.data,e.year,e.selectedSector,e.country],()=>{Vt(()=>{l()})},{deep:!0}),me(()=>{if(s.value)try{s.value.disconnect()}catch{}On(".tooltip-container").remove()}),(d,f)=>(z(),F("div",{class:"chart",ref_key:"containerRef",ref:r,style:{width:"100%"}},[(z(),F("svg",{ref_key:"svgRef",ref:n,preserveAspectRatio:"xMidYMid meet"},null,512))],512))}},l0={id:"sectorfuels",class:"page-section"},c0={class:"section-container"},u0={key:0,class:"no-data"},f0={key:1,class:"loading"},d0={key:2,class:"error"},h0={key:3,class:"charts-container"},p0={class:"interactive-graphic"},g0={class:"interactive-image-container"},y0={__name:"SectorFuels",setup(t){const e=ae(),n=it("Residential"),r=tt(()=>e.sunburstData.name?.length>0&&e.pieChartData[0]);return(a,i)=>(z(),F("section",l0,[i[7]||(i[7]=w("div",{class:"chart-header"},[w("h2",null,"What Energy Sources Do Different Sectors Rely On?")],-1)),w("div",c0,[r.value?j(e).isLoading?(z(),F("div",f0,"Loading energy data...")):j(e).error?(z(),F("div",d0,ct(j(e).error),1)):(z(),F("div",h0,[w("div",p0,[w("img",{src:n0,alt:"Energy Consumption Background",style:{width:"100%",cursor:"pointer"},onClick:i[0]||(i[0]=o=>n.value="Residential"),class:"bg-image"}),w("div",g0,[w("img",{src:r0,alt:"Energy Consumption Service",style:{width:"20%",cursor:"pointer"},onClick:i[1]||(i[1]=o=>n.value="Service"),class:Ht([{active:n.value==="Service"},"interactive-image svg-glow"])},null,2),w("img",{src:a0,alt:"Energy Consumption Residential",style:{width:"15%",cursor:"pointer"},onClick:i[2]||(i[2]=o=>n.value="Residential"),class:Ht([{active:n.value==="Residential"},"interactive-image svg-glow"])},null,2),w("img",{src:i0,alt:"Energy Consumption Transport",style:{width:"20%",cursor:"pointer"},onClick:i[3]||(i[3]=o=>n.value="Transport"),class:Ht([{active:n.value==="Transport"},"interactive-image svg-glow"])},null,2),w("img",{src:o0,alt:"Energy Consumption Industry",style:{width:"30%",cursor:"pointer"},onClick:i[4]||(i[4]=o=>n.value="Industry"),class:Ht([{active:n.value==="Industry"},"interactive-image svg-glow"])},null,2)])]),bt(s0,{data:j(e).pieChartData,year:j(e).selectedYear,country:j(e).selectedCountry,selectedSector:n.value},null,8,["data","year","country","selectedSector"])])):(z(),F("div",u0,[...i[5]||(i[5]=[w("span",null,"No consumption data available for this configuration.",-1)])])),i[6]||(i[6]=w("div",{class:"text-container"},[w("p",null," High consumption values should be interpreted in context: differences between countries and years are often driven by climate, infrastructure, economic activity, and access to energy services rather than individual behavior alone. "),w("p",null," This visualization shows which energy sources are most commonly used in each sector. Different sectors rely on distinct energy carriers depending on their technical requirements: transport tends to depend on oil-based fuels, while residential and service sectors use a higher share of electricity and heat. ")],-1))])]))}},m0=St(y0,[["__scopeId","data-v-597fa520"]]),v0={class:"chart-header"},_0={class:"kpi"},x0={key:0},w0={key:0},b0={key:1},C0={key:1},k0={key:0},M0={key:1,class:"kpi-value"},$0={key:2,class:"kpi-sub"},S0=["aria-label"],E0=300,T0={__name:"PricesFocusContext",props:{data:{type:Array,default:()=>[]},focusYear:{type:[Number,null],default:null},series:{type:String,default:"energy"},view:{type:String,default:"annual"},width:{type:Number,default:null},height:{type:Number,default:320},activeSeries:{type:String,default:"energy"}},emits:["update:focusYear","rangeChange","update:series"],setup(t,{emit:e}){const n=t,r=e,a=it(null),i=it(null),o=it(null);let s=null,u=null,c=null,l=null,d=null;const f={top:20,right:14,bottom:40,left:56},p=tt(()=>(n.data||[]).slice().sort((A,O)=>A.year-O.year)),m=tt(()=>p.value.map(A=>A.year)),k=tt(()=>p.value.map(A=>A.electricity));function $(A){if(!Array.isArray(A))return A==null?null:Number(A);const O=A.filter(R=>R!=null).map(Number);return O.length?O.reduce((R,v)=>R+v,0)/O.length:null}const M=tt(()=>p.value.map(A=>$(A.CPI0450))),S=tt(()=>p.value.length?p.value[p.value.length-1]:null),E=tt(()=>{if(n.focusYear)return p.value.find(A=>A.year===n.focusYear)||S.value;if(n.activeSeries==="electricity"){for(let A=p.value.length-1;A>=0;A--){const O=p.value[A];if(O&&O.electricity!=null)return O}return S.value}return S.value}),x=tt(()=>S.value?`Electricity price ${S.value} US cents per kilowatt hour in ${S.year}. Use controls to zoom and focus.`:"No price data available"),N=it(500),I=it(500);function H(){if(!i.value)return;at(i.value).selectAll("*").remove();const A=N.value||Math.max(420,(a.value?.clientWidth||720)-0),O=I.value,R=A-f.left-f.right,v=O-f.top-f.bottom-12;s=at(i.value).append("svg").attr("width",A).attr("height",O).attr("viewBox",`0 0 ${A} ${O}`).attr("preserveAspectRatio","xMidYMid meet");const T=s.append("g").attr("class","main").attr("transform",`translate(${f.left},${f.top})`),h=ne().domain(ns(m.value.length?m.value:[new Date().getFullYear()-5,new Date().getFullYear()])).range([0,R]).nice();function g(X,K=0,nt=1){const rt=(X||[]).filter(q=>q!=null&&Number.isFinite(Number(q))).map(Number);return rt.length?[fs(rt),cn(rt)]:[K,nt]}const[y,_]=n.activeSeries==="energy"?g(M.value,0,1):g(k.value,0,1),C=ne().domain([y,_]).nice().range([v,0]);function b(X){const K=Math.floor(X),nt=X-K;if(Math.abs(nt)<1e-6)return dr("d")(K)}const P=Oi(h).ticks(Math.min(10,Math.max(4,m.value.length))).tickFormat(b),D=la(C).ticks(4);T.append("g").attr("class","y axis").call(D);const L=T.append("g").attr("class","x axis").attr("transform",`translate(0,${v})`).call(P),B=n.activeSeries==="energy"?"Energy CPI (index)":"US cents / kWh";T.append("text").attr("class","y-label").attr("transform","rotate(-90)").attr("y",-54).attr("x",-v/2).attr("dy","1em").style("text-anchor","middle").text(B);function Y(X){const K=[];return X.forEach(nt=>{const rt=nt.CPI0450;if(Array.isArray(rt))for(let q=0;q<rt.length;q++)K.push({year:nt.year+q/4,qIndex:q+1,value:Number(rt[q])})}),K}function U(X){return n.activeSeries==="electricity"?ke().defined(K=>K.electricity!=null).x(K=>X(K.year)).y(K=>C(K.electricity)).curve(Ye):ke().defined(K=>$(K.CPI0450)!=null).x(K=>X(K.year)).y(K=>C($(K.CPI0450))).curve(Ye)}const Z=T.append("path").attr("class","line main-line").attr("fill","none"),Q=T.append("path").attr("class","line annual-line"),et=T.append("path").attr("class","line quarterly-line"),ft=T.append("g").attr("class","points"),gt=T.append("g").attr("class","cpi-quarter"),Mt=T.append("g").attr("class","focused-annual");function At(X,K=!1){const nt=U(X);if(n.activeSeries==="electricity"){Z.attr("stroke","#2c7be5").attr("stroke-width",2).attr("opacity",1),Q.attr("stroke","#ffb86b").attr("stroke-width",2).attr("fill","none").datum(p.value).attr("d",ke().defined(W=>$(W.CPI0450)!=null).x(W=>X(W.year)).y(W=>C($(W.CPI0450))).curve(Ye)),Z.datum(p.value).attr("d",nt);const rt=Z.node();if((rt&&rt.getTotalLength?rt.getTotalLength():0)<2){const W=p.value.filter(dt=>dt.electricity!=null).slice().sort((dt,V)=>dt.year-V.year);let ot=null,ut=null;if(n.focusYear!=null){const dt=W.findIndex(V=>V.year===n.focusYear);dt>=0&&(ot=W[dt],ut=W[dt+1]||W[dt-1]||null)}if(!ot){const dt=X.domain?(X.domain()[0]+X.domain()[1])/2:null,V=W.map(ht=>({d:ht,dist:Math.abs(ht.year-(dt||0))})).sort((ht,st)=>ht.dist-st.dist);ot=V[0]?V[0].d:null,ut=V[1]?V[1].d:V[0]?V[0].d:null}if(ot&&ut){const dt=ke().defined(V=>V&&V.electricity!=null).x(V=>X(V.year)).y(V=>C(V.electricity));Z.datum([ot,ut]).attr("d",dt).attr("stroke-width",3)}}ft.selectAll("circle").data(p.value.filter(W=>W.electricity!=null),W=>W.year).join(W=>W.append("circle").attr("cx",ot=>X(ot.year)).attr("cy",ot=>C(ot.electricity)).attr("r",ot=>n.focusYear===ot.year?6:3.5).attr("fill",ot=>n.focusYear===ot.year?"#ff7b54":"#fff").attr("stroke",ot=>n.focusYear===ot.year?"#ff7b54":"#2c7be5").attr("stroke-width",1.5).style("cursor","pointer").on("click",(ot,ut)=>r("update:focusYear",ut.year)).on("mouseenter",(ot,ut)=>Ft(ot,ut)).on("mouseleave",xt),W=>W.call(ot=>ot.attr("cx",ut=>X(ut.year)).attr("cy",ut=>C(ut.electricity)).attr("r",ut=>n.focusYear===ut.year?6:3.5)),W=>W.remove()),gt.selectAll("*").remove()}else if(Z.attr("stroke","#ffb86b").attr("stroke-width",2).attr("stroke-dasharray","3 0"),!K)Z.datum(p.value).attr("d",nt),ft.selectAll("circle").data(p.value.filter(q=>$(q.CPI0450)!=null),q=>q.year).join(q=>q.append("circle").attr("cx",J=>X(J.year)).attr("cy",J=>C($(J.CPI0450))).attr("r",J=>n.focusYear===J.year?5:3).attr("fill","#fff").attr("stroke","#ffb86b").attr("stroke-width",1.25).style("cursor","pointer").on("click",(J,W)=>r("update:focusYear",W.year)).on("mouseenter",(J,W)=>Ft(J,W)).on("mouseleave",xt),q=>q.call(J=>J.attr("cx",W=>X(W.year)).attr("cy",W=>C($(W.CPI0450))).attr("r",W=>n.focusYear===W.year?5:3)),q=>q.remove()),gt.selectAll("*").remove();else{const rt=Y(p.value);et.attr("stroke","#ffb86b").attr("stroke-width",1.5).attr("fill","none").datum(rt).attr("d",ke().defined(W=>W.value!=null).x(W=>X(W.year)).y(W=>C(W.value)).curve(Ye));const q=ke().defined(W=>W.value!=null).x(W=>X(W.year)).y(W=>C(W.value)).curve(Ye);Z.datum(rt).attr("d",q),ft.selectAll("*").remove(),gt.selectAll("circle").data(rt,W=>`${W.year}-${W.qIndex}`).join(W=>W.append("circle").attr("cx",ot=>X(ot.year)).attr("cy",ot=>C(ot.value)).attr("r",2.5).attr("fill","#ffb86b").on("mouseenter",(ot,ut)=>Tt(ot,ut)).on("mouseleave",xt),W=>W.call(ot=>ot.attr("cx",ut=>X(ut.year)).attr("cy",ut=>C(ut.value))),W=>W.remove())}T.select(".y.axis").call(D),L.call(P.scale(X)),typeof d=="function"&&d(X)}d=function(X){const K=n.focusYear!=null?n.focusYear:S.value&&S.value.year;if(K==null){T.selectAll(".focus-line,.focus-annotation").remove();return}const nt=p.value.find(J=>J.year===K)||null,rt=X(K);if(T.selectAll(".focus-line").data([K]).join("line").attr("class","focus-line").attr("x1",rt).attr("x2",rt).attr("y1",0).attr("y2",v).attr("stroke","#ff7b54").attr("stroke-dasharray","3 3").attr("stroke-width",1),T.selectAll(".focus-annotation").remove(),nt){if(n.activeSeries==="electricity"&&nt.electricity!=null){const J=Math.max(12,C(nt.electricity)-12);T.append("text").attr("x",rt+8).attr("y",J).attr("class","focus-annotation").text(`${nt.electricity} US/kWh  ${nt.year}`)}else if(n.activeSeries==="energy"){const J=$(nt.CPI0450);if(J!=null){const W=Math.min(v-6,C(J)+14);T.append("text").attr("x",rt+8).attr("y",W).attr("class","focus-annotation").style("fill","#8a5b00").text(`${J.toFixed(1)} CPI  ${nt.year}`)}}}if(o.value&&K&&(o.value.textContent=`Chart centered on ${K}`),Mt.selectAll("*").remove(),n.focusYear!=null&&n.activeSeries==="electricity"){const J=p.value.find(W=>W.year===n.focusYear);if(J&&J.electricity!=null){const W=X(J.year),ot=C(J.electricity),ut=Math.abs(X(J.year+1)-X(J.year)),dt=Math.max(6,Math.min(14,ut*.08));Mt.append("circle").attr("cx",W).attr("cy",ot).attr("r",dt).attr("fill","#fff").attr("stroke","#2c7be5").attr("stroke-width",1.75).style("cursor","pointer").on("mouseenter",(V,ht)=>Ft(V,J)).on("mouseleave",xt);try{Mt.raise()}catch{}}}},d&&d(h),At(h,!1);const Nt=at(a.value).selectAll(".chart-tooltip").data([null]).join("div").attr("class","chart-tooltip").style("position","absolute").style("pointer-events","none").style("opacity",0);function Ft(X,K){const nt=a.value.getBoundingClientRect(),rt=$(K.CPI0450);let q=`<div class="tt-year">${K.year}</div>`;n.activeSeries==="electricity"?q+=K.electricity!=null?`<div class="tt-val">${K.electricity} US/kWh</div>`:'<div class="tt-val">No electricity data</div>':q+=rt!=null?`<div class="tt-val">Energy CPI (annual mean): ${rt.toFixed(1)}</div>`:'<div class="tt-val">No CPI data</div>',q+='<div class="tt-hint">Use header toggle to switch series</div>',Nt.style("opacity",1).html(q).style("left",`${X.clientX-nt.left+12}px`).style("top",`${X.clientY-nt.top-12}px`)}function Tt(X,K){const nt=a.value.getBoundingClientRect(),rt=Math.floor(K.year),q=K.qIndex||Math.round((K.year-rt)*4)+1,J=Number(K.value),W=`<div class="tt-year">${rt} Q${q}</div><div class="tt-val">Energy CPI: ${Number.isFinite(J)?J.toFixed(2):""}</div><div class="tt-hint">Quarterly detail  use zoom out to return to annual view</div>`;Nt.style("opacity",1).html(W).style("left",`${X.clientX-nt.left+12}px`).style("top",`${X.clientY-nt.top-12}px`)}function xt(){Nt.style("opacity",0)}u=Do().scaleExtent([1,16]).translateExtent([[-50,-100],[R+50,v+100]]).on("zoom",X=>{const K=X.transform.rescaleX(h);c=X.transform;const[nt,rt]=K.domain(),q=n.activeSeries==="energy"&&(rt-nt<=1.5||X.transform.k>=6);let J=[];n.activeSeries==="electricity"?J=p.value.filter(dt=>dt.electricity!=null&&dt.year>=nt&&dt.year<=rt).map(dt=>dt.electricity):q?J=Y(p.value).filter(V=>V.value!=null&&V.year>=nt&&V.year<=rt).map(V=>V.value):J=p.value.filter(dt=>$(dt.CPI0450)!=null&&dt.year>=Math.floor(nt)&&dt.year<=Math.ceil(rt)).map(dt=>$(dt.CPI0450));const[W,ot]=g(J,C.domain()[0],C.domain()[1]),ut=(ot-W)*.08||1;C.domain([Math.max(0,W-ut),ot+ut]).nice(),q?(Q.style("display","none"),et.style("display",null)):(Q.style("display",null),et.style("display","none")),At(K,q)}),s.call(u),c?s.call(u.transform,c):c=ln,l=function(X,K={span:null}){if(X==null)return;const nt=K&&Number.isFinite(K.span)&&K.span>0?(function(){const lt=Number(K.span),mt=Math.max(h.domain()[0],X-lt),Pt=Math.min(h.domain()[1],X+lt),Et=Math.max(1,h(Pt)-h(mt));return Math.max(1,Math.min(16,R/Et))})():c&&c.k?c.k:1,rt=h(X),q=A/2-rt*nt,J=ln.translate(q,0).scale(nt);s.transition().duration(E0).call(u.transform,J),c=J;const W=J.rescaleX(h),[ot,ut]=W.domain(),dt=K&&Number.isFinite(K.span)&&K.span<=2||ut-ot<=1.5||J.k>=6;let V=[];n.activeSeries==="electricity"?V=p.value.filter(lt=>lt.electricity!=null&&lt.year>=ot&&lt.year<=ut).map(lt=>lt.electricity):dt?V=Y(p.value).filter(mt=>mt.value!=null&&mt.year>=ot&&mt.year<=ut).map(mt=>mt.value):V=p.value.filter(lt=>$(lt.CPI0450)!=null&&lt.year>=Math.floor(ot)&&lt.year<=Math.ceil(ut)).map(lt=>$(lt.CPI0450));const[ht,st]=g(V,C.domain()[0],C.domain()[1]),yt=(st-ht)*.08||1;C.domain([Math.max(0,ht-yt),st+yt]).nice();try{At(W,dt)}catch{At(h,!1)}typeof d=="function"&&d(W),o.value&&(o.value.textContent=`Chart centered on ${X}`)}}re(()=>{Vt(()=>{const A=a.value?a.value.getBoundingClientRect():{width:500},O=Math.max(200,Math.min(A.width,500));N.value=O,I.value=O;const R=new ResizeObserver(v=>{for(const T of v){const h=T.contentRect,g=Math.max(200,Math.min(h.width,500));N.value=g,I.value=g,Vt(()=>H())}});a.value&&R.observe(a.value),G.value=R,H()}),window.addEventListener("resize",H)}),qt(()=>n.data,()=>{Vt(H)},{deep:!0}),qt(()=>n.focusYear,A=>{A!=null&&setTimeout(()=>{typeof l=="function"&&l(A,{span:2})},0)},{immediate:!0});const G=it(null);return me(()=>{if(G.value)try{G.value.disconnect()}catch{}On(".tooltip-container").remove()}),(A,O)=>(z(),F("div",{class:"prices-focus-chart",ref_key:"containerRef",ref:a,style:{width:"100%"}},[w("div",v0,[w("div",_0,[E.value&&n.activeSeries==="electricity"?(z(),F("div",x0,[E.value.electricity!=null?(z(),F("h3",w0,[Bt(ct(E.value.electricity)+" ",1),O[0]||(O[0]=w("span",{class:"unit"},"US/kWh",-1))])):(z(),F("h3",b0,"No electricity data for this year"))])):E.value&&n.activeSeries==="energy"?(z(),F("div",C0,[$(E.value.CPI0450)!=null?(z(),F("h3",k0,"Energy CPI: "+ct($(E.value.CPI0450).toFixed(1)),1)):(z(),F("h3",M0,"No CPI data"))])):ee("",!0),E.value?(z(),F("div",$0,ct(n.focusYear||E.value.year),1)):ee("",!0)])]),w("div",{class:"chart-area",ref_key:"chartRef",ref:i,tabindex:"0",role:"img","aria-label":x.value},null,8,S0),w("div",{class:"sr-only",ref_key:"liveRef",ref:o,"aria-live":"polite"},null,512)],512))}},Mi=St(T0,[["__scopeId","data-v-a83585e9"]]),A0={id:"costs",class:"page-section"},N0={class:"section-container"},P0={key:0,class:"loading"},R0={key:1,class:"error"},I0={key:0,class:"no-data"},O0={key:1,class:"charts-container"},D0={__name:"Costs",setup(t){const e=ae(),n=it("annual");function r(a){a&&e.setSelectedYear(Number(a))}return(a,i)=>(z(),F("section",A0,[i[2]||(i[2]=w("div",{class:"chart-header"},[w("h2",null,"Evolution of Energy and Electricity Prices")],-1)),w("div",N0,[j(e).isLoading?(z(),F("div",P0,"Loading energy data...")):j(e).error?(z(),F("div",R0,ct(j(e).error),1)):(z(),F(te,{key:2},[j(e).pricesLoaded?(z(),F("div",O0,[bt(Mi,{data:j(e).electricitySeries,focusYear:j(e).selectedYear,view:n.value,activeSeries:"energy","onUpdate:focusYear":r},null,8,["data","focusYear","view"]),bt(Mi,{data:j(e).electricitySeries,focusYear:j(e).selectedYear,view:n.value,activeSeries:"electricity","onUpdate:focusYear":r},null,8,["data","focusYear","view"]),i[0]||(i[0]=ge('<div class="chart-footer" data-v-3d00385e><small data-v-3d00385e>Source: IMF/Eurostat <code data-v-3d00385e>energycpiq.csv</code>. Columns: <code data-v-3d00385e>country</code>, <code data-v-3d00385e>year</code>, <code data-v-3d00385e>quarter</code>, CPI series <code data-v-3d00385e>CPI0450</code> (Electricity, gas &amp; fuels), <code data-v-3d00385e>CPI0451</code> (Electricity), <code data-v-3d00385e>CPI0452</code> (Gas), <code data-v-3d00385e>CPI0453</code> (Liquid fuels), <code data-v-3d00385e>CPI0454</code> (Solid fuels), <code data-v-3d00385e>CPI0722</code> (Transport fuels). World Bank <code data-v-3d00385e>Electric-Prices-by-Country.csv</code>. Columns: <code data-v-3d00385e>Country Name</code>, <code data-v-3d00385e>Time</code>, electricity price (US cents/kWh). Missing years are shown explicitly.</small></div>',1))])):(z(),F("div",I0,"Price data not available for this country."))],64)),i[1]||(i[1]=w("p",{class:"text-container"}," How have energy prices changed over time? The Energy Consumer Price Index (CPI) shows how the cost of energy for households evolves across years, reflecting broader economic and market conditions. Electricity prices are influenced by fuel costs, energy mix, infrastructure, and regulation. ",-1))])]))}},H0=St(D0,[["__scopeId","data-v-3d00385e"]]),Ho={"008":"AL","020":"AD","040":"AT","056":"BE","070":"BA",100:"BG",112:"BY",191:"HR",196:"CY",203:"CZ",208:"DK",233:"EE",246:"FI",250:"FR",276:"DE",300:"GR",348:"HU",352:"IS",372:"IE",380:"IT",428:"LV",438:"LI",440:"LT",442:"LU",807:"MK",470:"MT",498:"MD",492:"MC",499:"ME",528:"NL",578:"NO",616:"PL",620:"PT",642:"RO",643:"RU",674:"SM",688:"RS",703:"SK",705:"SI",724:"ES",752:"SE",756:"CH",804:"UA",826:"GB",336:"VA","012":"DZ","024":"AO","031":"AZ","032":"AR","036":"AU","048":"BH","076":"BR","096":"BN",124:"CA",156:"CN",170:"CO",178:"CG",180:"CD",218:"EC",818:"EG",226:"GQ",266:"GA",268:"GE",288:"GH",356:"IN",360:"ID",364:"IR",368:"IQ",376:"IL",392:"JP",398:"KZ",400:"JO",414:"KW",422:"LB",434:"LY",458:"MY",484:"MX",504:"MA",508:"MZ",516:"NA",566:"NG",512:"OM",586:"PK",608:"PH",634:"QA",682:"SA",702:"SG",710:"ZA",410:"KR",729:"SD",728:"SS",760:"SY",764:"TH",780:"TT",788:"TN",792:"TR",795:"TM",784:"AE",840:"US",860:"UZ",862:"VE",704:"VN",887:"YE","004":"AF","050":"BD","064":"BT","068":"BO","072":"BW","084":"BZ","090":"SB",104:"MM",108:"BI",116:"KH",120:"CM",132:"CV",140:"CF",144:"LK",148:"TD",152:"CL",158:"TW",174:"KM",188:"CR",192:"CU",204:"BJ",214:"DO",222:"SV",231:"ET",232:"ER",242:"FJ",262:"DJ",270:"GM",275:"PS",292:"GI",296:"KI",308:"GD",320:"GT",324:"GN",328:"GY",332:"HT",340:"HN",344:"HK",384:"CI",388:"JM",404:"KE",408:"KP",417:"KG",418:"LA",426:"LS",430:"LR",446:"MO",450:"MG",454:"MW",462:"MV",466:"ML",478:"MR",480:"MU",496:"MN",524:"NP",540:"NC",548:"VU",554:"NZ",558:"NI",562:"NE",591:"PA",598:"PG",600:"PY",604:"PE",638:"RE",646:"RW",662:"LC",678:"ST",686:"SN",694:"SL",706:"SO",716:"ZW",732:"EH",740:"SR",748:"SZ",762:"TJ",834:"TZ",768:"TG",776:"TO",800:"UG",854:"BF",858:"UY",882:"WS",894:"ZM",926:"XK"},L0=Object.fromEntries(Object.entries(Ho).map(([t,e])=>[e,t])),F0={EL:"GR",UK:"GB"},z0=new Set(["EUR_OTH","AFR_OTH","AME_OTH","ASI_OTH","ASI_NME_OTH","EU27_2020","EA19","EA20","WORLD","TOTAL","OTH","OTHER","UNKNOWN"]);function G0(t){return t?z0.has(t.toUpperCase()):!1}function sa(t){if(!t)return null;const e=t.toUpperCase();return F0[e]||e}function B0(t){if(!t)return null;const e=sa(t);return L0[e]||null}function kr(t){if(!t)return null;const e=String(t).padStart(3,"0");return Ho[e]||null}const $i={AL:"Albania",AD:"Andorra",AT:"Austria",BE:"Belgium",BA:"Bosnia and Herzegovina",BG:"Bulgaria",BY:"Belarus",HR:"Croatia",CY:"Cyprus",CZ:"Czechia",DK:"Denmark",EE:"Estonia",FI:"Finland",FR:"France",DE:"Germany",GR:"Greece",HU:"Hungary",IS:"Iceland",IE:"Ireland",IT:"Italy",LV:"Latvia",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MK:"North Macedonia",MT:"Malta",MD:"Moldova",MC:"Monaco",ME:"Montenegro",NL:"Netherlands",NO:"Norway",PL:"Poland",PT:"Portugal",RO:"Romania",RU:"Russia",SM:"San Marino",RS:"Serbia",SK:"Slovakia",SI:"Slovenia",ES:"Spain",SE:"Sweden",CH:"Switzerland",UA:"Ukraine",GB:"United Kingdom",VA:"Vatican City",XK:"Kosovo",DZ:"Algeria",AO:"Angola",AZ:"Azerbaijan",AR:"Argentina",AU:"Australia",BH:"Bahrain",BR:"Brazil",BN:"Brunei",CA:"Canada",CN:"China",CO:"Colombia",CG:"Congo",CD:"DR Congo",EC:"Ecuador",EG:"Egypt",GQ:"Equatorial Guinea",GA:"Gabon",GE:"Georgia",GH:"Ghana",IN:"India",ID:"Indonesia",IR:"Iran",IQ:"Iraq",IL:"Israel",JP:"Japan",KZ:"Kazakhstan",JO:"Jordan",KW:"Kuwait",LB:"Lebanon",LY:"Libya",MY:"Malaysia",MX:"Mexico",MA:"Morocco",MZ:"Mozambique",NA:"Namibia",NG:"Nigeria",OM:"Oman",PK:"Pakistan",PH:"Philippines",QA:"Qatar",SA:"Saudi Arabia",SG:"Singapore",ZA:"South Africa",KR:"South Korea",SD:"Sudan",SS:"South Sudan",SY:"Syria",TH:"Thailand",TT:"Trinidad and Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",AE:"UAE",US:"United States",UZ:"Uzbekistan",VE:"Venezuela",VN:"Vietnam",YE:"Yemen",AF:"Afghanistan",BD:"Bangladesh",BT:"Bhutan",BO:"Bolivia",BW:"Botswana",BZ:"Belize",SB:"Solomon Islands",MM:"Myanmar",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CV:"Cape Verde",CF:"Central African Republic",LK:"Sri Lanka",TD:"Chad",CL:"Chile",TW:"Taiwan",KM:"Comoros",CR:"Costa Rica",CU:"Cuba",BJ:"Benin",DO:"Dominican Republic",SV:"El Salvador",ET:"Ethiopia",ER:"Eritrea",FJ:"Fiji",DJ:"Djibouti",GM:"Gambia",PS:"Palestine",GI:"Gibraltar",KI:"Kiribati",GD:"Grenada",GT:"Guatemala",GN:"Guinea",GY:"Guyana",HT:"Haiti",HN:"Honduras",HK:"Hong Kong",CI:"Ivory Coast",JM:"Jamaica",KE:"Kenya",KP:"North Korea",KG:"Kyrgyzstan",LA:"Laos",LS:"Lesotho",LR:"Liberia",MO:"Macao",MG:"Madagascar",MW:"Malawi",MV:"Maldives",ML:"Mali",MR:"Mauritania",MU:"Mauritius",MN:"Mongolia",NP:"Nepal",NC:"New Caledonia",VU:"Vanuatu",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",RE:"Reunion",RW:"Rwanda",LC:"Saint Lucia",ST:"Sao Tome and Principe",SN:"Senegal",SL:"Sierra Leone",SO:"Somalia",ZW:"Zimbabwe",EH:"Western Sahara",SR:"Suriname",SZ:"Eswatini",TJ:"Tajikistan",TZ:"Tanzania",TG:"Togo",TO:"Tonga",UG:"Uganda",BF:"Burkina Faso",UY:"Uruguay",WS:"Samoa",ZM:"Zambia"},Y0={class:"trading-partners-map"},W0={key:0,class:"no-data"},U0={key:1,class:"map-wrapper"},V0={class:"map-container"},q0={class:"volume-summary"},X0={class:"volume-grid"},K0=["onClick"],j0={class:"checkbox-icon"},Z0={class:"volume-value"},J0={class:"volume-unit"},Q0={class:"checkbox-icon"},th={class:"volume-value"},eh={class:"volume-unit"},nh={class:"map-controls"},rh={class:"cutoff-slider"},ah={class:"cutoff-value"},ih={__name:"TradingPartnersMap",props:{tradeData:{type:Object,default:null},country:{type:Object,default:null},year:{type:Number,default:null}},setup(t){function e(h,g){return typeof g=="string"&&(g=h.objects[g]),g.type==="GeometryCollection"?{type:"FeatureCollection",features:g.geometries.map(y=>n(h,y))}:n(h,g)}function n(h,g){const y=g.id,_=g.bbox,C=g.properties||{},b=r(h,g);return y==null&&_==null?{type:"Feature",properties:C,geometry:b}:_==null?{type:"Feature",id:y,properties:C,geometry:b}:{type:"Feature",id:y,bbox:_,properties:C,geometry:b}}function r(h,g){const y=g.type;if(y==="GeometryCollection")return{type:y,geometries:g.geometries.map(C=>r(h,C))};if(y==="Point")return{type:y,coordinates:a(h,g.coordinates)};if(y==="MultiPoint")return{type:y,coordinates:g.coordinates.map(C=>a(h,C))};const _=g.arcs;return y==="LineString"?{type:y,coordinates:i(h,_)}:y==="MultiLineString"||y==="Polygon"?{type:y,coordinates:_.map(C=>i(h,C))}:y==="MultiPolygon"?{type:y,coordinates:_.map(C=>C.map(b=>i(h,b)))}:null}function a(h,g){const y=h.transform;if(!y)return g.slice();const _=y.scale,C=y.translate;return[g[0]*_[0]+C[0],g[1]*_[1]+C[1]]}function i(h,g){const y=[],_=h.arcs,C=h.transform;for(let b=0;b<g.length;b++){let P=g[b];const D=P<0;D&&(P=~P);const L=_[P],B=[];let Y=0,U=0;for(let Q=0;Q<L.length;Q++){Y+=L[Q][0],U+=L[Q][1];const et=C?[Y*C.scale[0]+C.translate[0],U*C.scale[1]+C.translate[1]]:[Y,U];B.push(et)}D&&B.reverse();const Z=b===0?0:1;for(let Q=Z;Q<B.length;Q++)y.push(B[Q])}return y}const o=t,s=[{code:"SFF",label:"Coal",unit:"thousand tonnes",color:"#8b4513"},{code:"OIL",label:"Oil",unit:"thousand tonnes",color:"#1a1a1a"},{code:"GAS",label:"Gas",unit:"TJ",color:"#2980b9"},{code:"BIO",label:"Biofuels",unit:"thousand tonnes",color:"#27ae60"},{code:"EH",label:"Electricity",unit:"GWh",color:"#f1c40f"}],u=it(new Set(["OIL","GAS","EH"])),c=it(new Set(["imports"])),l=it(3),d=it(null);let f=null,p=null,m=null,k=null;function $(){!d.value||!k||(m=null,A())}function M(h){u.value.has(h)?(u.value.delete(h),u.value=new Set(u.value)):(u.value.add(h),u.value=new Set(u.value))}function S(h){c.value.has(h)?(c.value.delete(h),c.value=new Set(c.value)):(c.value.add(h),c.value=new Set(c.value))}function E(h,g){return(h==="imports"?o.tradeData?.imports?.total_by_type:o.tradeData?.exports?.total_by_type)?.[g]?.value??null}const x=tt(()=>o.tradeData?.imports||o.tradeData?.exports);function N(h){return h==null?"N/A":String(Math.round(h)).replace(/\B(?=(\d{3})+(?!\d))/g," ")}function I(h){return G0(h)}function H(h){const g=h==="imports"?o.tradeData?.imports:o.tradeData?.exports;if(!g?.partners_by_type)return[];const y=[];for(const _ of u.value){const C=g.partners_by_type[_];if(!C)continue;const b=s.find(D=>D.code===_),P=b?.color||"#666";for(const D of C){if(!D.share_pct||D.share_pct<l.value||I(D.geo))continue;const L=sa(D.geo);y.push({partnerGeo:L,partnerName:$i[L]||D.name||L,value:D.value,sharePercent:D.share_pct,color:P,typeCode:_,typeName:b?.label||_,direction:h})}}return y}async function G(){if(p)return p;try{return p=await(await fetch("/MyEnergyProfile/data/countries-110m.json")).json(),p}catch(h){return console.error("Failed to load world map data:",h),null}}async function A(){if(!d.value||!x.value)return;at(d.value).selectAll("*").remove();const h=await G();if(!h){at(d.value).append("div").attr("class","map-error").text("Failed to load map data");return}const g=d.value,y=g.clientWidth||600,_=Math.min(y,400),C=at(g).append("svg").attr("width",y).attr("height",_).attr("viewBox",`0 0 ${y} ${_}`).style("cursor","grab"),b=C.append("defs"),P=C.append("g").attr("class","map-group"),D=Math.max(y,_)*.5;k=Do().scaleExtent([1,8]).translateExtent([[-D,-D],[y+D,_+D]]).on("zoom",V=>{P.attr("transform",V.transform),m=V.transform}).on("start",()=>{C.style("cursor","grabbing")}).on("end",()=>{C.style("cursor","grab")}),C.call(k);const L={imports:"#e53935",exports:"#43a047"};for(const V of s)for(const ht of Object.keys(L)){const st=L[ht];b.append("marker").attr("id",`arrow-${V.code}-${ht}`).attr("viewBox","0 0 10 10").attr("refX",0).attr("refY",5).attr("markerWidth",3).attr("markerHeight",4).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 0 1 L 3 5 L 0 9 z").attr("fill",V.color).attr("fill-opacity",.6).attr("stroke",st).attr("stroke-opacity",.5).attr("stroke-width",.5)}const B=e(h,h.objects.countries),Y=Xf().fitSize([y,_],B),U=Df().projection(Y),Z=sa(o.country?.code),Q=Z?B0(Z):null,et=c.value.has("imports")?H("imports"):[],ft=c.value.has("exports")?H("exports"):[],gt=[...et,...ft],Mt=new Set(gt.map(V=>V.partnerGeo));function At(V,ht=.82){const st=ve(V);if(!st)return"#e0e8f0";const yt=ji(st);return yt.l=ht,yt.s=Math.min(yt.s,.5),yt.formatHex()}const Nt=new Map;for(const V of Mt){const ht=gt.filter(st=>st.partnerGeo===V);if(ht.length>0){const st=new Map;for(const Et of ht){const Kt=st.get(Et.typeCode)||{color:Et.color,share:0};Kt.share+=Et.sharePercent||0,st.set(Et.typeCode,Kt)}const yt=Array.from(st.values()).sort((Et,Kt)=>Kt.share-Et.share).slice(0,5),lt=yt.reduce((Et,Kt)=>Et+Kt.share,0);let mt=0;const Pt=[];for(const Et of yt){const Kt=Et.share/lt*100;Pt.push({color:At(Et.color),start:mt,end:mt+Kt}),mt+=Kt}Nt.set(V,Pt)}}for(const[V,ht]of Nt){const st=b.append("linearGradient").attr("id",`partner-fill-${V}`).attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","100%");for(const yt of ht)st.append("stop").attr("offset",`${yt.start}%`).attr("stop-color",yt.color),st.append("stop").attr("offset",`${yt.end}%`).attr("stop-color",yt.color)}P.append("g").attr("class","countries").selectAll("path").data(B.features).join("path").attr("d",U).attr("fill",V=>{const ht=String(V.id).padStart(3,"0"),st=kr(ht);return Q&&ht===Q?"#2c3e50":st&&Mt.has(st)?Nt.has(st)?`url(#partner-fill-${st})`:"#e0e8f0":"#f0f0f0"}).attr("stroke","#999").attr("stroke-width",.5).on("mouseenter",function(V,ht){const st=String(ht.id).padStart(3,"0"),yt=kr(st),lt=ht.properties?.name||$i[yt]||yt,mt=yt&&Mt.has(yt),Pt=Q&&st===Q;(Pt||mt)&&at(this).attr("stroke","#333").attr("stroke-width",1.5),R(V,lt,yt,Pt,mt,et,ft)}).on("mouseleave",function(){at(this).attr("stroke","#999").attr("stroke-width",.5),T()});const Tt={},xt={};B.features.forEach(V=>{const ht=String(V.id).padStart(3,"0"),st=kr(ht);if(st){const yt=hf(V);if(yt&&!isNaN(yt[0])&&!isNaN(yt[1])){Tt[st]=Y(yt);const lt=U.bounds(V),mt=lt[1][0]-lt[0][0],Pt=lt[1][1]-lt[0][1];xt[st]=Math.min(mt,Pt)/2}}});const X={FR:[2.5,46.5],NL:[5.3,52.2],DK:[9.5,56],PT:[-8,39.5],ES:[-3.5,40],US:[-98,39.5],RU:[40,56],NO:[9,62]};for(const[V,ht]of Object.entries(X)){const st=Y(ht);st&&(Tt[V]=st)}const K={SG:[103.8,1.35],HK:[114.17,22.32],MO:[113.55,22.2],GI:[-5.35,36.14],MT:[14.5,35.9],LU:[6.13,49.61],AD:[1.52,42.51],MC:[7.42,43.73],SM:[12.46,43.94],VA:[12.45,41.9],LI:[9.55,47.16],BH:[50.55,26.07]};for(const[V,ht]of Object.entries(K))if(!Tt[V]){const st=Y(ht);st&&(Tt[V]=st)}const nt=Z?Tt[Z]:null,rt=2.5;let q,J;if(nt)q=nt[0],J=nt[1];else{const V=Y([10,50]);q=V[0],J=V[1]}const W=y/2-q*rt,ot=_/2-J*rt,ut=ln.translate(W,ot).scale(rt);if(C.on("dblclick.zoom",null),C.on("dblclick",()=>{C.transition().duration(300).call(k.transform,ut),m=ut}),m?C.call(k.transform,m):(C.call(k.transform,ut),m=ut),nt&&(et.length>0||ft.length>0)){let V=function(lt){const mt=yt.get(lt)||0;return yt.set(lt,mt+1),mt};const ht=P.append("g").attr("class","trade-flows"),st=ne().domain([0,100]).range([0,6]).clamp(!0),yt=new Map;if(c.value.has("imports")){const lt=xt[Z]||10;et.forEach(mt=>{const Pt=Tt[mt.partnerGeo];if(!Pt)return;const Et=V(mt.partnerGeo);O(ht,Pt,nt,mt,st,Et,mt.typeCode,mt.color,lt)})}c.value.has("exports")&&ft.forEach(lt=>{const mt=Tt[lt.partnerGeo];if(!mt)return;const Pt=V(lt.partnerGeo),Et=xt[lt.partnerGeo]||10;O(ht,nt,mt,lt,st,Pt,lt.typeCode,lt.color,Et)})}let dt=at(g).select(".map-tooltip");dt.empty()&&(dt=at(g).append("div").attr("class","map-tooltip").style("opacity",0).style("position","absolute").style("pointer-events","none"))}function O(h,g,y,_,C,b,P,D,L){const B=y[0]-g[0],Y=y[1]-g[1],U=Math.sqrt(B*B+Y*Y),Z=B/U,Q=Y/U,et=-Q,ft=Z,Mt=b*1,At=_.direction==="exports"?.5:0,Nt=g[0]+Z*At+et*Mt,Ft=g[1]+Q*At+ft*Mt,Tt=_.direction==="imports"?2:0,xt=b*Tt,X=7,K=Math.min(L*.3,5),nt=_.direction==="imports"&&U>X?K:0,rt=y[0]-Z*nt+et*xt,q=y[1]-Q*nt+ft*xt,J=Math.min(U*.05,10),W=(Nt+rt)/2,ot=(Ft+q)/2,ut=W+et*J,dt=ot+ft*J,V=Math.max(.2,C(_.sharePercent||0)),ht=V+.25,st=`arrow-${P}-${_.direction}`,yt=1.5*V,lt=Math.sqrt((rt-Nt)**2+(q-Ft)**2),mt=Math.min(yt,lt*.5),Pt=(rt-Nt)/lt,Et=(q-Ft)/lt,Kt=rt-Pt*mt,Lo=q-Et*mt,Ma=`M ${Nt} ${Ft} Q ${ut} ${dt} ${Kt} ${Lo}`,Fo=_.direction==="imports"?"#e53935":"#43a047";h.append("path").attr("d",Ma).attr("fill","none").attr("stroke",Fo).attr("stroke-width",ht).attr("stroke-opacity",.5).attr("class",`flow-arrow-outline flow-${P} flow-${_.direction}`).style("pointer-events","none"),h.append("path").attr("d",Ma).attr("fill","none").attr("stroke",D).attr("stroke-width",V).attr("stroke-opacity",.6).attr("marker-end",`url(#${st})`).attr("class",`flow-arrow flow-${P} flow-${_.direction}`).on("mouseenter",function(zo){at(this).attr("stroke-opacity",.85);const Go=_.direction==="imports"?"imports":"exports",Bo=`
        <strong>${_.partnerName}</strong><br/>
        <span style="color: ${D}">${_.typeName}</span><br/>
        ${N(_.value)}<br/>
        ${_.sharePercent?.toFixed(1)}% of ${_.typeName} ${Go}
      `;v(zo,Bo)}).on("mouseleave",function(){at(this).attr("stroke-opacity",.6),T()})}function R(h,g,y,_,C,b,P){const D=d.value;if(!D)return;let L=`<strong>${g}</strong>`;if(_)L+="<br/><em>Selected country</em>";else if(C){const Y=b.filter(Z=>Z.partnerGeo===y),U=P.filter(Z=>Z.partnerGeo===y);Y.length>0&&(L+='<br/><span class="tooltip-section">Imports from:</span>',Y.forEach(Z=>{const Q=s.find(et=>et.code===Z.typeCode);L+=`<br/>  <span style="color: ${Z.color}">${Q?.label||Z.typeCode}</span>: ${N(Z.value)} (${Z.sharePercent?.toFixed(1)}%)`})),U.length>0&&(L+='<br/><span class="tooltip-section">Exports to:</span>',U.forEach(Z=>{const Q=s.find(et=>et.code===Z.typeCode);L+=`<br/>  <span style="color: ${Z.color}">${Q?.label||Z.typeCode}</span>: ${N(Z.value)} (${Z.sharePercent?.toFixed(1)}%)`}))}const B=at(D).select(".map-tooltip");if(!B.empty()){const Y=D.getBoundingClientRect();B.html(L).style("left",`${h.clientX-Y.left+10}px`).style("top",`${h.clientY-Y.top-10}px`).style("opacity",1)}}function v(h,g){const y=d.value;if(!y)return;const _=at(y).select(".map-tooltip");if(!_.empty()){const C=y.getBoundingClientRect();_.html(g).style("left",`${h.clientX-C.left+10}px`).style("top",`${h.clientY-C.top-10}px`).style("opacity",1)}}function T(){const h=d.value;if(!h)return;const g=at(h).select(".map-tooltip");g.empty()||g.style("opacity",0)}return qt(()=>o.country,()=>{m=null}),qt(()=>[o.tradeData,o.country,o.year,u.value,c.value,l.value],()=>{Vt(()=>A())},{deep:!0}),re(()=>{A(),f=new ResizeObserver(()=>{A()}),d.value&&f.observe(d.value)}),me(()=>{f&&f.disconnect()}),(h,g)=>(z(),F("div",Y0,[x.value?(z(),F("div",U0,[w("div",V0,[w("div",q0,[w("div",X0,[g[6]||(g[6]=w("div",{class:"volume-row-label"},null,-1)),(z(),F(te,null,Se(s,y=>w("button",{key:y.code,class:Ht(["volume-header-btn",{active:u.value.has(y.code)}]),style:Pn({"--type-color":y.color,backgroundColor:u.value.has(y.code)?y.color:"transparent",color:u.value.has(y.code)?"#fff":y.color}),onClick:_=>M(y.code)},ct(y.label),15,K0)),64)),w("button",{class:Ht(["volume-row-label","imports-label","direction-toggle",{active:c.value.has("imports")}]),onClick:g[0]||(g[0]=y=>S("imports"))},[w("span",j0,ct(c.value.has("imports")?"":""),1),g[4]||(g[4]=Bt(" Imports ",-1))],2),(z(),F(te,null,Se(s,y=>w("div",{key:"imp-"+y.code,class:Ht(["volume-cell","imports",{inactive:!u.value.has(y.code)}])},[w("span",Z0,ct(N(E("imports",y.code))),1),w("span",J0,ct(y.unit),1)],2)),64)),w("button",{class:Ht(["volume-row-label","exports-label","direction-toggle",{active:c.value.has("exports")}]),onClick:g[1]||(g[1]=y=>S("exports"))},[w("span",Q0,ct(c.value.has("exports")?"":""),1),g[5]||(g[5]=Bt(" Exports ",-1))],2),(z(),F(te,null,Se(s,y=>w("div",{key:"exp-"+y.code,class:Ht(["volume-cell","exports",{inactive:!u.value.has(y.code)}])},[w("span",th,ct(N(E("exports",y.code))),1),w("span",eh,ct(y.unit),1)],2)),64))])]),w("div",{ref_key:"mapContainerRef",ref:d,class:"map-svg-container"},null,512),w("div",nh,[w("div",{class:"controls-left"},[w("button",{class:"reset-zoom-btn",onClick:$,title:"Reset zoom"},[...g[7]||(g[7]=[w("span",{class:"material-symbols-outlined"},"zoom_out_map",-1)])]),g[8]||(g[8]=w("span",{class:"map-hint"},"Scroll to zoom, drag to pan, double-click to reset",-1))]),w("div",rh,[g[9]||(g[9]=w("label",{class:"cutoff-label"},"Min trade %",-1)),Uo(w("input",{type:"range","onUpdate:modelValue":g[2]||(g[2]=y=>l.value=y),min:"0",max:"10",step:"1",class:"cutoff-range"},null,512),[[Vo,l.value,void 0,{number:!0}]]),w("span",ah,ct(l.value)+"%",1)])])])])):(z(),F("div",W0,[...g[3]||(g[3]=[w("span",{class:"no-data-icon"},"?",-1),w("span",null,"No trade data available for this year",-1)])]))]))}},oh=St(ih,[["__scopeId","data-v-29317453"]]),sh={id:"tradingpartner",class:"page-section"},lh={class:"section-container"},ch={key:0,class:"loading"},uh={key:1,class:"error"},fh={key:2,class:"charts-container"},dh={__name:"TradingPartner",setup(t){const e=ae();return(n,r)=>(z(),F("section",sh,[r[1]||(r[1]=w("div",{class:"chart-header"},[w("h2",null,"The Trading Partners")],-1)),w("div",lh,[j(e).isLoading?(z(),F("div",ch,"Loading energy data...")):j(e).error?(z(),F("div",uh,ct(j(e).error),1)):(z(),F("div",fh,[bt(oh,{tradeData:j(e).tradeData,country:j(e).selectedCountry,year:j(e).selectedYear},null,8,["tradeData","country","year"])])),r[0]||(r[0]=w("div",{class:"text-container"},[w("p",null," This section provides an overview of the availability of energy in your area over the past year. You can analyze grid reliability, outage frequency, and compare your data with regional availability trends. ")],-1))]),r[2]||(r[2]=ge('<div class="chart-meta"><div class="meta-section"><span class="meta-label">Source</span><ul class="meta-list"><li> Eurostat <a href="https://ec.europa.eu/eurostat/web/energy/database" target="_blank" rel="noopener">Energy Database</a> (European Commission) </li><li>Tables <code>nrg_ti_*</code> (imports) and <code>nrg_te_*</code> (exports) for sff, oil, gas, bio, eh</li><li>Derived: <code>share_pct</code> = partner value  total  100</li></ul></div><div class="meta-section"><span class="meta-label">Data Hints</span><ul class="meta-list"><li> EU-reported data only; non-EU partner volumes data may be incomplete or reflect only the EU perspective of the trade relationship. </li><li>Regional aggregates (e.g., &quot;Other Asian countries&quot;) excluded from map arrows but included in totals.</li></ul></div></div>',1))]))}},hh={key:0,class:"no-data"},ph={key:1,class:"chart-wrapper"},gh={class:"chart-container"},yh={__name:"DependencyChart",props:{dependencyData:{type:Object,default:null},year:{type:[String,Number],default:null}},setup(t){const e=t,n=it(null),r=it(null),a=it(!1);let i=null;function o(S,E,x){if(a.value=!0,r.value&&n.value){n.value.getBoundingClientRect();const N=r.value;N.style.left=`${E+120}px`,N.style.top=`${x-10}px`}}function s(){a.value=!1}const u={coal:"Coal",anthracite:"Anthracite",coking_coal:"Coking Coal",other_bituminous:"Other Bituminous",other_bituminous_coal:"Other Bituminous",lignite:"Lignite",sub_bituminous_coal:"Sub-bituminous",gas:"Natural Gas",natural_gas:"Natural Gas",oil:"Oil",crude_oil:"Crude Oil",ngl:"NGL",peat:"Peat",nuclear_fuels:"Nuclear",renewable_fuels:"Renewables",electricity:"Electricity",C0110:"Anthracite",C0121:"Coking Coal",C0129:"Other Bituminous",C0210:"Lignite",C0220:"Sub-bituminous",G3000:"Natural Gas",O4000XBIO:"Oil",O4100_TOT:"Crude Oil",O4200:"NGL",P1100:"Oil Shale",S2000:"Nuclear",CF_R:"Renewables",E7000:"Electricity",SFF_OTH:"Other Solid Fuels"},c=["electricity","E7000","oil","O4000XBIO","crude_oil","O4100_TOT","ngl","O4200","gas","natural_gas","G3000","coal","C0000X0350-0370","anthracite","C0110","coking_coal","C0121","other_bituminous","other_bituminous_coal","C0129","sub_bituminous_coal","C0220","lignite","C0210","peat","P1100"],l=["nuclear_fuels","S2000","renewable_fuels","CF_R","SFF_OTH","other_solid_fossil_fuels"],d=["crude_oil","O4100_TOT","ngl","O4200","anthracite","C0110","coking_coal","C0121","other_bituminous_coal","other_bituminous","C0129","sub_bituminous_coal","C0220","lignite","C0210"],f=["electricity","E7000"],p=["oil","O4000XBIO","gas","natural_gas","G3000","coal","C0000X0350-0370","peat","P1100"],m=tt(()=>e.dependencyData&&(e.dependencyData.overall!=null||e.dependencyData.by_fuel&&Object.keys(e.dependencyData.by_fuel).length>0)),k=tt(()=>{if(!e.dependencyData)return[];const S=[];if(S.push({key:"overall",name:"Overall",overall:e.dependencyData.overall,thirdCountries:e.dependencyData.third_countries,isOverall:!0}),e.dependencyData.by_fuel){const E=Object.entries(e.dependencyData.by_fuel);E.sort((x,N)=>{const I=c.indexOf(x[0]),H=c.indexOf(N[0]);return I!==-1&&H!==-1?I-H:I!==-1?-1:H!==-1?1:(u[x[0]]||x[0]).localeCompare(u[N[0]]||N[0])});for(const[x,N]of E)!N||typeof N!="object"||l.includes(x)||S.push({key:x,name:u[x]||$(x),overall:N.overall,thirdCountries:N.third_countries,isOverall:!1,isSubcategory:d.includes(x),isElectricity:f.includes(x),isGroupStarter:p.includes(x)})}return S});function $(S){return S.replace(/_/g," ").replace(/([A-Z])/g," $1").split(" ").map(E=>E.charAt(0).toUpperCase()+E.slice(1).toLowerCase()).join(" ").trim()}function M(){if(!n.value||k.value.length===0)return;at(n.value).selectAll("*").remove();const E=n.value.clientWidth||600,x=20,N=4,I=k.value.length,H=Math.min(E,500),G={top:20,right:45,bottom:10,left:100},A=H-G.left-G.right,O=I*(x+N),R=45,v=at(n.value).append("svg").attr("width",H).attr("height",O+G.top+G.bottom).append("g").attr("transform",`translate(${G.left},${G.top})`),T=Math.max(100,...k.value.map(D=>D.overall??0)),h=Math.ceil(T/10)*10,g=ne().domain([0,h]).range([0,A]),y=No().domain(k.value.map(D=>D.name)).range([0,O]).padding(.2);h>100&&(v.append("line").attr("x1",g(100)).attr("x2",g(100)).attr("y1",0).attr("y2",O).attr("stroke","#666").attr("stroke-width",1).attr("stroke-dasharray","4,2"),v.append("text").attr("x",g(100)).attr("y",-4).attr("text-anchor","middle").attr("fill","#666").attr("font-size","9px").text("100%"));const _={third:{normal:"#c44536",soft:"#d4847a"},eu:{normal:"#e8a87c",soft:"#f0c9b0"},domestic:{normal:"#81b29a",soft:"#aed0be"},reserve:{normal:"#8b2500",soft:"#b86347"},reserveEu:{normal:"#b86b3a",soft:"#d4a07a"},exporter:{normal:"#7b68ee",soft:"#a99cf3"}};v.append("defs").append("pattern").attr("id","crosshatch").attr("width",4).attr("height",4).attr("patternUnits","userSpaceOnUse").attr("patternTransform","rotate(45)").append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",4).attr("stroke","#c44536").attr("stroke-width",2),k.value.forEach(D=>{const L=y(D.name),B=y.bandwidth(),Y=D.isSubcategory,U=Y?R:0,Z=et=>Y?_[et].soft:_[et].normal,Q=D.isElectricity&&D.overall==null&&D.thirdCountries!=null?D.thirdCountries:D.overall;if(Q!=null){const et=Q,ft=et<0,gt=Math.max(0,et),Mt=D.thirdCountries!=null?Math.max(0,D.thirdCountries):null;if(ft)v.append("rect").attr("class","bar-exporter").attr("x",U).attr("y",L).attr("width",g(100)-U).attr("height",B).attr("fill",Z("exporter")),v.append("text").attr("x",U+(g(100)-U)/2).attr("y",L+B/2).attr("dy","0.35em").attr("text-anchor","middle").attr("fill","#fff").attr("font-size","9px").attr("font-weight","600").text("Net Exporter"),v.append("text").attr("x",g(100)+4).attr("y",L+B/2).attr("dy","0.35em").attr("text-anchor","start").attr("fill",Y?"#8a7fd4":"#5a4fcf").attr("font-size","9px").attr("font-weight","700").text(`${et.toFixed(0)}%`);else{const At=gt<100?100-gt:0,Nt=gt>100?gt-100:0;if(gt>0){const xt=Math.min(gt,100),X=g(xt)-U;v.append("rect").attr("class","bar-import").attr("x",U).attr("y",L).attr("width",X).attr("height",B).attr("fill",Z("eu"))}if(Nt>0){const xt=g(gt)-g(100);v.append("rect").attr("class","bar-reserve").attr("x",g(100)).attr("y",L).attr("width",xt).attr("height",B).attr("fill",Z("reserve")).attr("opacity",.85)}if(At>0){const xt=Math.max(U,g(gt)),X=g(100)-xt;v.append("rect").attr("class","bar-domestic").attr("x",xt).attr("y",L).attr("width",X).attr("height",B).attr("fill",Z("domestic"))}if(Mt!=null&&Mt>0&&!D.isElectricity&&!Y){const xt=g(Mt)-U;xt>0&&(v.append("rect").attr("x",U).attr("y",L).attr("width",xt).attr("height",B).attr("fill","url(#crosshatch)").attr("opacity",.4),v.append("line").attr("x1",g(Mt)).attr("y1",L).attr("x2",g(Mt)).attr("y2",L+B).attr("stroke","#8b2500").attr("stroke-width",2),xt>=35&&v.append("text").attr("x",U+xt/2).attr("y",L+B/2).attr("dy","0.35em").attr("text-anchor","middle").attr("fill","#8b2500").attr("font-size","7px").attr("font-weight","700").text("non-EU"))}const Ft=g(Math.max(gt,At>0?100:gt))+4,Tt=v.append("text").attr("x",Ft).attr("y",L+B/2).attr("dy","0.35em").attr("text-anchor","start").attr("fill",gt>100?Y?"#b86347":"#8b2500":"#666").attr("font-size","9px").attr("font-weight",gt>100?"700":"500").text(`${gt.toFixed(0)}%`);if(D.isElectricity){const xt=Tt.node().getBBox().width,X=Ft+xt+10,K=v.append("g").attr("class","electricity-warning-group").style("cursor","help");K.append("circle").attr("cx",X).attr("cy",L+B/2).attr("r",6).attr("fill","#c44536"),K.append("text").attr("x",X).attr("y",L+B/2).attr("dy","0.35em").attr("text-anchor","middle").attr("fill","#fff").attr("font-size","9px").attr("font-weight","700").style("pointer-events","none").text("!"),K.append("circle").attr("cx",X).attr("cy",L+B/2).attr("r",10).attr("fill","transparent").on("mouseenter",function(nt){o(nt,X,L)}).on("mouseleave",s)}}}else if(v.append("rect").attr("class","bar-nodata").attr("x",U).attr("y",L).attr("width",g(100)-U).attr("height",B).attr("fill",Y?"#f0f0f0":"#e8e8e8").attr("rx",3),v.append("text").attr("class","no-data-label").attr("x",U+(g(100)-U)/2).attr("y",L+B/2).attr("dy","0.35em").attr("text-anchor","middle").attr("fill","#999").attr("font-size","10px").text("No data"),D.isElectricity){const et=g(100)+14,ft=v.append("g").attr("class","electricity-warning-group").style("cursor","help");ft.append("circle").attr("cx",et).attr("cy",L+B/2).attr("r",6).attr("fill","#c44536"),ft.append("text").attr("x",et).attr("y",L+B/2).attr("dy","0.35em").attr("text-anchor","middle").attr("fill","#fff").attr("font-size","9px").attr("font-weight","700").style("pointer-events","none").text("!"),ft.append("circle").attr("cx",et).attr("cy",L+B/2).attr("r",10).attr("fill","transparent").on("mouseenter",function(gt){o(gt,et,L)}).on("mouseleave",s)}});const b=v.append("g").call(la(y)),P=d.map(D=>u[D]||$(D));b.selectAll(".tick").each(function(D){const L=P.includes(D);at(this).select("text").attr("fill",L?"#666":"#333").attr("font-size","11px").attr("font-style",L?"italic":"normal"),L&&at(this).attr("transform",function(){const Y=at(this).attr("transform")||"",U=Y.match(/translate\(([^,]*),([^)]*)\)/);return U?`translate(${parseFloat(U[1])+45},${U[2]})`:Y})}),v.selectAll(".domain").remove(),v.selectAll(".tick line").remove()}return qt(()=>[e.dependencyData,e.year],()=>{M()},{deep:!0}),re(()=>{M(),i=new ResizeObserver(()=>{M()}),n.value&&i.observe(n.value)}),me(()=>{i&&i.disconnect()}),(S,E)=>m.value?(z(),F("div",ph,[w("div",gh,[w("div",{ref_key:"chartRef",ref:n,class:"chart-svg"},null,512),w("div",{ref_key:"tooltipRef",ref:r,class:Ht(["electricity-tooltip",{visible:a.value}])},[...E[1]||(E[1]=[ge("<strong data-v-a8f48f77>Non-EU imports only.</strong> Eurostat doesn&#39;t calculate overall electricity dependency: <ul data-v-a8f48f77><li data-v-a8f48f77><em data-v-a8f48f77>Origin:</em> Fuel dependency is counted at source (gas plant imports = gas dependency)</li><li data-v-a8f48f77><em data-v-a8f48f77>Losses:</em> ~33% of energy lost converting to electricity makes tracking difficult</li><li data-v-a8f48f77><em data-v-a8f48f77>Trade:</em> EU is near net-zero; grid constantly rebalances across borders</li><li data-v-a8f48f77><em data-v-a8f48f77>Focus:</em> Eurostat measures primary fuels (oil, gas) not transformed energy</li><li data-v-a8f48f77><em data-v-a8f48f77>Method:</em> Methodological complexities in how electricity trade interacts with primary fuels used to produce it </li></ul>",3)])],2),E[2]||(E[2]=ge('<div class="chart-legend" data-v-a8f48f77><div class="legend-item" data-v-a8f48f77><span class="legend-color" style="background:#e8a87c;" data-v-a8f48f77></span><span data-v-a8f48f77>Imports</span></div><div class="legend-item" data-v-a8f48f77><span class="legend-color" style="background:#81b29a;" data-v-a8f48f77></span><span data-v-a8f48f77>Domestic</span></div><div class="legend-item" data-v-a8f48f77><span class="legend-color" style="background:#8b2500;" data-v-a8f48f77></span><span data-v-a8f48f77>Reserve draw (&gt;100%)</span></div><div class="legend-item" data-v-a8f48f77><span class="legend-color" style="background:#7b68ee;" data-v-a8f48f77></span><span data-v-a8f48f77>Net exporter (&lt;0%)</span></div></div>',1))])])):(z(),F("div",hh,[...E[0]||(E[0]=[w("span",{class:"no-data-icon"},"?",-1),w("span",null,"No dependency data available for this year",-1)])]))}},mh=St(yh,[["__scopeId","data-v-a8f48f77"]]),vh={id:"dependency",class:"page-section"},_h={class:"section-container"},xh={key:0,class:"loading"},wh={key:1,class:"error"},bh={key:2,class:"charts-container"},Ch={__name:"Dependency",setup(t){const e=ae();return(n,r)=>(z(),F("section",vh,[r[1]||(r[1]=w("div",{class:"chart-header"},[w("h2",null,"Fuel by Fuel: Measuring Our Energy Import Dependence")],-1)),w("div",_h,[j(e).isLoading?(z(),F("div",xh,"Loading energy data...")):j(e).error?(z(),F("div",wh,ct(j(e).error),1)):ee("",!0),j(e).dependencyData?(z(),F("div",bh,[bt(mh,{dependencyData:j(e).dependencyData,year:j(e).selectedYear},null,8,["dependencyData","year"])])):ee("",!0),r[0]||(r[0]=w("div",{class:"text-container"},[w("p",null," The stacked bar chart below shows how much of a countrys energy supply is produced domestically and how much is imported from abroad, broken down by energy source. Import dependency highlights the degree to which national energy systems rely on foreign suppliers and therefore reflects aspects of energy security, resilience, and exposure to geopolitical risks. By comparing energy sources, it becomes clear that some fuels are structurally dependent on imports, while others are more closely tied to domestic resources. The detailed descriptions of each energy source below provide additional context on their role, availability, and typical dependency patterns. "),w("p",null," The stacked bar chart below shows how much of a countrys energy supply is produced domestically and how much is imported from abroad, broken down by energy source. Import dependency highlights the degree to which national energy systems rely on foreign suppliers and therefore reflects aspects of energy security, resilience, and exposure to geopolitical risks. By comparing energy sources, it becomes clear that some fuels are structurally dependent on imports, while others are more closely tied to domestic resources. The detailed descriptions of each energy source below provide additional context on their role, availability, and typical dependency patterns. "),w("p",null,[Bt(" Share of imports vs domestic production "),w("br"),w("code",null,"Net Imports  Gross Available Energy"),w("br"),w("br"),w("code",null," Net Imports = Imports  Exports  Gross Available Energy  Primary production + Net imports  Stock changes "),w("br"),w("br"),w("a",{href:"https://ec.europa.eu/eurostat/statistics-explained/index.php?title=Glossary:Energy_dependency_rate",target:"_blank",rel:"noopener",class:"source-link"},"https://ec.europa.eu/eurostat/statistics-explained/index.php?title=Glossary:Energy_dependency_rate")])],-1))]),r[2]||(r[2]=ge('<div class="chart-meta" data-v-aaab3735><div class="meta-section" data-v-aaab3735><span class="meta-label" data-v-aaab3735>Source</span><ul class="meta-list" data-v-aaab3735><li data-v-aaab3735> Eurostat <a href="https://ec.europa.eu/eurostat/web/energy/database" target="_blank" rel="noopener" data-v-aaab3735>Energy Database</a> (European Commission) </li><li data-v-aaab3735> Tables <code data-v-aaab3735>nrg_ind_id</code> (ID, overall dependency) and <code data-v-aaab3735>nrg_ind_id3cf</code> (ID3CF, third country dependency) </li><li data-v-aaab3735>Fuel breakdown via SIEC codes mapped to display names</li></ul></div><div class="meta-section" data-v-aaab3735><span class="meta-label" data-v-aaab3735>Data Hints</span><ul class="meta-list" data-v-aaab3735><li data-v-aaab3735> Non-EU breakdown (hatched line) only available for main aggregates (Coal, Gas, Oil, Electricity). Subcategories (indented, lighter colors) show total import dependency only. </li><li data-v-aaab3735>Non-EU (third country) import dependency data is only available from 2010 to 2023.</li><li data-v-aaab3735>Electricity: Eurostat does not calculate overall import dependency; showing non-EU imports only.</li></ul></div></div>',1))]))}},kh=St(Ch,[["__scopeId","data-v-aaab3735"]]),Mh={name:"ItemsSlider",data(){return{scrollX:0,scrollEnd:!1,slidewith:100}},mounted(){this.$nextTick(()=>{const t=document.getElementById("slider-container");if(t){const e=t.clientWidth,n=document.documentElement.clientWidth<600?1:2;this.slidewith=e/n+(document.documentElement.clientWidth<600?10:0)}})},methods:{slide(t){this.$refs.scrl.scrollBy({left:t,behavior:"smooth"}),this.$refs.scrl.scrollLeft+=t,this.scrollX+=t,Math.floor(this.$refs.scrl.scrollWidth-this.$refs.scrl.scrollLeft)<=this.$refs.scrl.offsetWidth?this.scrollEnd=!0:this.scrollEnd=!1},scrollCheck(){this.scrollX=this.$refs.scrl.scrollLeft,Math.floor(this.$refs.scrl.scrollWidth-this.$refs.scrl.scrollLeft)<=this.$refs.scrl.offsetWidth?this.scrollEnd=!0:this.scrollEnd=!1}},props:{title:String}},$h={class:"item-slider-container"},Sh={class:"item-slider"};function Eh(t,e,n,r,a,i){return z(),F("div",$h,[w("div",Sh,[w("div",{onClick:e[0]||(e[0]=o=>i.slide(-a.slidewith)),class:Ht([{"is-disabled-hide":a.scrollX<1},"left-arrow-left"])},[...e[3]||(e[3]=[w("span",{class:"timeline-icon material-symbols-outlined"},"chevron_left",-1)])],2),w("div",{id:"slider-container",ref:"scrl",onScroll:e[1]||(e[1]=(...o)=>i.scrollCheck&&i.scrollCheck(...o)),class:"item-container"},[qo(t.$slots,"default",{},void 0)],544),w("div",{onClick:e[2]||(e[2]=o=>i.slide(a.slidewith)),class:Ht([{"is-disabled-hide":a.scrollEnd},"right-arrow-right"])},[...e[4]||(e[4]=[w("span",{class:"timeline-icon material-symbols-outlined"},"chevron_right",-1)])],2)])])}const Th=St(Mh,[["render",Eh],["__scopeId","data-v-30c13bbe"]]),Ah="data:image/svg+xml,%3csvg%20width='4408'%20height='1516'%20viewBox='0%200%204408%201516'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M4345.75%201289.5C4318.88%201266.74%204285.87%201256.39%204263.37%201226.27C4215.24%201161.87%204240.84%201054.7%204245.2%20963.611C4254.04%20779.158%204143.98%20598.469%204007.7%20573.693C3976.53%20568.026%203944.11%20569.383%203914.77%20554.151C3832.84%20511.617%203814.46%20370.555%203767.31%20270.965C3708.15%20145.992%203590.36%2081.0607%203481.06%20100.083C3371.76%20119.106%203273.88%20215.253%203217.19%20342.28L3215.54%20346.616C3141.46%20442.432%203018.53%20461.059%202930.44%20389.818C2844.63%20320.423%202799.7%20185.661%202720.28%20103.687C2643.06%2024.0011%202538.86%202.11167%202442.71%2022.5201C2346.55%2042.9262%202257.17%20101.884%202174.39%20170.723C2136.22%20202.463%202098.86%20236.616%202057.69%20260.664C1924.73%20338.345%201757.48%20293.507%201656.86%20153.213C1632.87%20119.755%201612.3%2081.416%201584.83%2053.1893C1514.79%20-18.7896%201414.51%20-9.71456%201332.3%2033.1184C1250.09%2075.9514%201177.88%20147.586%201097.41%20196.006C1016.93%20244.425%20919.93%20267.45%20842.534%20210.685C793.435%20174.676%20757.04%20109.945%20704.609%2083.7586C645.759%2054.3683%20575.757%2082.7327%20532.484%20143.867C489.211%20205.003%20471.348%20293.793%20476.988%20377.832C480.953%20436.91%20495.584%20494.349%20496.491%20553.653C498.371%20676.623%20433.823%20796.067%20346.234%20831.692C271.321%20862.164%20186.681%20835.987%20115.242%20878.962C30.6368%20929.857%20-10.2127%201069.12%202.17795%201192.58C14.5686%201316.05%2069.8738%201424.47%20133.479%201515.1H4393.5C4424.46%201434.74%204402.72%201337.73%204345.75%201289.5Z'%20fill='%23D9CEC4'/%3e%3cpath%20d='M2938.07%20743.111C2947.65%20743.111%202956.6%20745.725%202964.32%20750.215C2971.32%20729.89%202990.56%20715.263%203013.26%20715.263C3016.97%20715.263%203020.59%20715.669%203024.07%20716.411C3033.02%20680.562%203065.42%20654%203104.04%20654C3142.34%20654%203174.52%20680.118%203183.78%20715.512C3185.41%20715.396%203187.04%20715.263%203188.7%20715.263C3201.29%20715.263%203213.05%20718.687%203223.22%20724.574C3232.7%20718.707%203243.84%20715.263%203255.81%20715.263C3290.1%20715.263%203317.9%20743.064%203317.9%20777.361H3257.4H3193.71H3175.57H3132.01H3119.98H3108.68H3064.02H3032.51H2987.14H2985.78H2962.49H2889C2896.38%20757.385%202915.54%20743.111%202938.07%20743.111Z'%20fill='%23FCF1E6'/%3e%3cpath%20d='M805.303%20601.706C817.853%20601.706%20829.576%20605.697%20839.695%20612.552C848.864%20581.52%20858.665%20552.678%20888.411%20552.678C893.273%20552.678%20909.905%20506.661%20947.249%20527.273C966.248%20534.144%20953.8%20496.737%20983.376%20466.2C1015.39%20438.717%201061.9%20453.986%201071.73%20513.532C1073.86%20513.356%201136.03%20488.339%201153.75%20520.615C1167.51%20538.937%201165.61%20564.415%201178.93%20573.403C1191.36%20564.446%201205.95%20559.187%201221.63%20559.187C1266.57%20559.187%201303%20601.635%201303%20654H1223.72H1140.26H1116.5H1059.42H1043.66H1028.86H970.335H929.042H869.6H867.811H837.301H741C750.669%20623.5%20775.77%20601.706%20805.303%20601.706Z'%20fill='%23FCF1E6'/%3e%3cpath%20d='M2251.37%20584.529H2187.31H2167.01H2165.82H2126.28H2098.8H2059.87H2050.02H2039.54H2001.56H1985.76H1930.23H1877.49C1877.49%20554.634%201901.73%20530.396%201931.63%20530.396C1938.09%20530.396%201944.26%20531.589%201950.01%20533.665C1960.66%20524.114%201974.69%20518.259%201990.13%20518.259C1997.35%20518.259%202004.24%20519.598%202010.66%20521.929C2017.63%20513.769%202027.97%20508.579%202039.54%20508.579C2047.7%20508.579%202055.24%20511.175%202061.43%20515.554C2072.81%20499.015%202091.85%20488.157%202113.44%20488.157C2143.69%20488.157%202168.93%20509.441%202175.09%20537.84C2183.43%20528.804%202195.33%20523.111%202208.6%20523.111C2233.8%20523.111%202254.24%20543.542%202254.24%20568.748C2254.23%20574.306%202253.19%20579.606%202251.37%20584.529Z'%20fill='%23FCF1E6'/%3e%3c/svg%3e",Nh="/MyEnergyProfile/assets/consumption_industry-C8RP9hDo.svg",Ph="/MyEnergyProfile/assets/consumption_residential-C9jPUtXp.svg",Rh="/MyEnergyProfile/assets/consumption_service-D0ioY7Vx.svg",Ih="/MyEnergyProfile/assets/consumption_transport-qyh_MufO.svg",Oh="/MyEnergyProfile/assets/fuel-anthracite-CEzPBKao.jpg",Dh="/MyEnergyProfile/assets/fuel-bituminous-BUdOayH8.jpg",Hh="/MyEnergyProfile/assets/fuel-coal-hdVqVBl5.jpg",Lh="/MyEnergyProfile/assets/fuel-coking-coal-D-ug1G7g.jpg",Fh="/MyEnergyProfile/assets/fuel-crude-oil-CpW_4MG2.webp",zh="/MyEnergyProfile/assets/fuel-electricity-CpJpkjVy.jpg",Gh="/MyEnergyProfile/assets/fuel-gas-DV2Ks9vZ.jpg",Bh="/MyEnergyProfile/assets/fuel-lignite-snSupppp.jpg",Yh="/MyEnergyProfile/assets/fuel-ngl-BDCsLaWK.webp",Wh="/MyEnergyProfile/assets/fuel-oil-Dzatq_PN.jpg",Uh="/MyEnergyProfile/assets/fuel-peat-98ECtOul.jpg",Vh="/MyEnergyProfile/assets/fuel-sub-bituminous-C-JRgDMV.jpg",qh="/MyEnergyProfile/assets/logo-ksmtjNEn.png",Xh={class:"card"},Kh=["src"],jh={class:"content"},Zh={__name:"Card",props:{title:String,imgSrc:String,content:String},setup(t){const e=r=>new URL(Object.assign({"../assets/img/consumption_background.svg":Ah,"../assets/img/consumption_industry.svg":Nh,"../assets/img/consumption_residential.svg":Ph,"../assets/img/consumption_service.svg":Rh,"../assets/img/consumption_transport.svg":Ih,"../assets/img/fuel-anthracite.jpg":Oh,"../assets/img/fuel-bituminous.jpg":Dh,"../assets/img/fuel-coal.jpg":Hh,"../assets/img/fuel-coking-coal.jpg":Lh,"../assets/img/fuel-crude-oil.webp":Fh,"../assets/img/fuel-electricity.jpg":zh,"../assets/img/fuel-gas.jpg":Gh,"../assets/img/fuel-lignite.jpg":Bh,"../assets/img/fuel-ngl.webp":Yh,"../assets/img/fuel-oil.jpg":Wh,"../assets/img/fuel-peat.jpg":Uh,"../assets/img/fuel-sub-bituminous.jpg":Vh,"../assets/img/logo.png":qh})[`../assets/img/${r}`],import.meta.url).href,n=t;return re(()=>{const r=document.getElementById("slider-container");r&&new ResizeObserver(i=>{const o=i[0].contentRect.width,s=10,u=document.documentElement.clientWidth<600?1:2,c=o/u-(document.documentElement.clientWidth<600?0:s);document.documentElement.style.setProperty("--item-width",`${c}px`)}).observe(r)}),(r,a)=>(z(),F("div",Xh,[n.imgSrc?(z(),F("img",{key:0,src:e(n.imgSrc),alt:"Card image"},null,8,Kh)):ee("",!0),w("div",jh,[w("h4",null,ct(n.title),1),w("p",null,ct(n.content),1)])]))}},Jh=St(Zh,[["__scopeId","data-v-9cb0c764"]]),Qh={id:"fueltypes",class:"page-section"},tp={__name:"FuelTypes",setup(t){ae();const e=[{title:"Electricity",imgSrc:"fuel-electricity.jpg",content:"A comon miss conception is to think of energy as just electricity. While it is the most versatile energy carrier for lighting, appliances, industry, and increasingly transport it's just a part of what is consumed at scale and often product from other fossil sources. Cannot be stored at scale, requiring real-time grid balancing."},{title:"Oil & Petroleum",imgSrc:"fuel-gas.jpg",content:"World's largest primary energy source. Backbone of transportation and petrochemical feedstock. High energy density (45 MJ/kg). Nearly all European countries import 90%+ (2022): Germany (97%), France (99%), Italy (93%). Norway is a major net exporter. Non-EU dependency typically 75-90% across the EU (2022)."},{title:"Oil & Petroleum - Crude Oil",imgSrc:"fuel-crude-oil.webp",content:"Unrefined petroleum sent to refineries for gasoline, diesel, jet fuel. Quality varies by sulfur (sweet/sour) and density (light/heavy). ~98% imported in most EU countries (2022)."},{title:"Oil & Petroleum - NGL",imgSrc:"fuel-ngl.webp",content:"Natural Gas Liquids (propane, butane, ethane). Extracted during gas processing. Typically 0% import dependency (2022) as they're separated domestically from imported gas."},{title:"Natural Gas",imgSrc:"fuel-gas.jpg",content:"Primarily methane (CH). Burns 50% cleaner than coal. Critical for heating, electricity, and fertilizer production. Transported via pipelines or LNG tankers. Dependency above 100% indicates reserve drawdowns, observed during the 2022 energy crisis (Germany 106%, France 109%). In 2022: Netherlands (65%) has domestic production; Poland (78%) diversified via Baltic LNG. Norway is Europe's largest non-Russian supplier."},{title:"Coal",imgSrc:"fuel-coal.jpg",content:"Most carbon-intensive fossil fuel. Ranked by age: lignite  sub-bituminous  bituminous  anthracite. Still important for power and steel. Import dependency (2022): Germany ~50%; Poland (8%) and Czechia (14%) rely on domestic production. Values above 100% indicate stock usage. Being phased out across Europe due to climate commitments."},{title:"Coal - Anthracite",imgSrc:"fuel-anthracite.jpg",content:"Highest grade (86-97% carbon, 30-35 MJ/kg). Burns hot and clean. Geologically rare. Most countries import 100% (2022), but Poland (79%), Slovakia (56%), and Czechia (96%) retain some domestic production."},{title:"Coal - Coking Coal",imgSrc:"fuel-coking-coal.jpg",content:"Essential for blast furnace steel production. Must have low ash/sulfur. ~100% imported in most EU countries (2022) from Australia, USA, Canada."},{title:"Coal - Other Bituminous",imgSrc:"fuel-bituminous.jpg",content:"Steam coal for power plants (45-86% carbon, 24-35 MJ/kg). Highest trade volume. Poland/Czechia have domestic reserves."},{title:"Coal - Sub-bituminous",imgSrc:"fuel-sub-bituminous.jpg",content:"Grade between lignite and bituminous (35-45% carbon, 17-23 MJ/kg). Used mainly for power generation. Limited trade in Europe; most countries show 0% or no data (2013-2022)."},{title:"Coal - Lignite",imgSrc:"fuel-lignite.jpg",content:"Brown coal (25-35% carbon, up to 75% moisture). Rarely traded due to low energy density and crumbling when dried. Usually 0% import (2022), but Austria (100%), Slovenia, Hungary, and Lithuania import from neighbors. Germany is Europe's largest producer."},{title:"Peat",imgSrc:"fuel-peat.jpg",content:"Partially decomposed organic matter from bogs. Lowest energy density (8-12 MJ/kg). Pre-coal stage fuel used historically in northern Europe for heating and power. Almost always sourced locally (0% import dependency, 2023) due to low energy density. Finland is the exception (~1%). Being phased out due to CO emissions and ecosystem destruction. Most countries show no peat data."}];return(n,r)=>(z(),F("section",Qh,[r[0]||(r[0]=w("div",{class:"chart-header"},[w("h2",null,"Energy as a Resource: Understanding the Sources")],-1)),bt(Th,{title:"Types of Fuel"},{default:Xo(()=>[(z(),F(te,null,Se(e,(a,i)=>w("div",{key:i},[bt(Jh,{title:a.title,content:a.content,imgSrc:a.imgSrc},null,8,["title","content","imgSrc"])])),64))]),_:1})]))}},ep=St(tp,[["__scopeId","data-v-6f511487"]]),np={class:"small-multiples-chart"},rp={key:0,class:"no-data"},ap={key:1,class:"chart-content"},ip={__name:"SmallMultiplesChart",props:{productionConsumptionData:{type:Object,default:null},countryYears:{type:Object,default:null},selectedYear:{type:Number,default:null},countryName:{type:String,default:""}},setup(t){const e=t,n=it(null);let r=null;const a=[{code:"SFF",label:"Coal",color:"#8b4513"},{code:"OIL",label:"Oil",color:"#1a1a1a"},{code:"GAS",label:"Gas",color:"#2980b9"},{code:"BIO",label:"Biofuels",color:"#27ae60"},{code:"EH",label:"Electricity",color:"#f1c40f"}],i=tt(()=>e.countryYears&&Object.keys(e.countryYears).length>0),o=tt(()=>{if(!e.countryYears)return{years:[],series:{}};const c=Object.keys(e.countryYears).map(Number).filter(d=>!isNaN(d)).sort((d,f)=>d-f),l={};for(const d of a){const f=[],p=[];for(const m of c){const k=e.countryYears[m];f.push({year:m,value:k?.production?.[d.code]??null}),p.push({year:m,value:k?.consumption?.[d.code]??null})}l[d.code]={production:f,consumption:p}}return{years:c,series:l}});function s(c){return c>=1e3?`${(c/1e3).toFixed(1)}k`:c>=10?c.toFixed(0):c>=1?c.toFixed(1):c.toFixed(2)}function u(){if(!n.value||!i.value)return;at(n.value).selectAll("*").remove();const{years:c,series:l}=o.value;if(c.length===0)return;const d=n.value,f=d.clientWidth||700,p=f<600?2:a.length,m=Math.ceil(a.length/p),k=2,$=["Production","Consumption"],M=["production","consumption"];let S=1/0,E=-1/0;for(const _ of a)for(const C of M){const b=l[_.code][C].filter(P=>P.value!=null);b.length>0&&(S=Math.min(S,b[0].year),E=Math.max(E,b[b.length-1].year))}isFinite(S)||(S=c[0],E=c[c.length-1]);const x=[S,E],N={top:18,right:10,bottom:30,left:46},I=20,H=4,G=8,A=Math.max(100,(f-I-H*(p-1))/p),O=A*.85,R=A-N.left-N.right,v=O-N.top-N.bottom,T=16,h=I+p*A+(p-1)*H,g=m*(k*O+(k-1)*G)+(m-1)*T,y=at(d).append("svg").attr("width",h).attr("height",g);for(let _=0;_<m;_++){const C=_*(k*O+(k-1)*G+T);for(let b=0;b<k;b++){const P=M[b],D=C+b*(O+G);_===0&&y.append("text").attr("transform",`translate(12, ${D+O/2}) rotate(-90)`).attr("text-anchor","middle").attr("fill","#222").attr("font-size","12px").attr("font-weight","700").text($[b]);for(let L=0;L<p&&_*p+L<a.length;L++){const B=_*p+L,Y=a[B],U=I+L*(A+H),Z=l[Y.code][P],Q=Z.filter(q=>q.value!=null),et=Y.code==="BIO"&&P==="production",ft=y.append("g").attr("transform",`translate(${U+N.left}, ${D+N.top})`);ft.append("line").attr("x1",0).attr("x2",R).attr("y1",0).attr("y2",0).attr("stroke","#222").attr("stroke-width",1),ft.append("line").attr("x1",R).attr("x2",R).attr("y1",0).attr("y2",v).attr("stroke","#222").attr("stroke-width",1),b===0&&y.append("text").attr("x",U+A/2).attr("y",D+14).attr("text-anchor","middle").attr("fill",Y.color).attr("font-size","12px").attr("font-weight","700").text(Y.label);const gt=ne().domain(x).range([0,R]),Mt=cn(Q,q=>q.value)||1,At=ne().domain([0,Mt*1.1]).range([v,0]),Nt=v<100?2:3,Ft=la(At).ticks(Nt).tickSize(-R).tickFormat(q=>s(q)),Tt=ft.append("g").call(Ft);Tt.selectAll(".domain").remove(),ft.append("line").attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",v).attr("stroke","#222").attr("stroke-width",1),Tt.selectAll(".tick line").remove(),Tt.selectAll(".tick text").attr("fill","#222").attr("font-size","9px");const xt=Tt.selectAll(".tick text");if(!xt.empty()){const q=xt.nodes()[xt.size()-1],J=at(q).text();at(q).text(J+" TWh")}const X=R<75?3:4,K=Oi(gt).ticks(X).tickFormat(dr("d")),nt=ft.append("g").attr("transform",`translate(0, ${v})`).call(K);if(nt.selectAll(".domain").attr("stroke","#222"),nt.selectAll(".tick line").remove(),nt.selectAll(".tick text").attr("fill","#222").attr("font-size","9px"),et||Q.length===0){ft.append("text").attr("x",R/2).attr("y",v/2).attr("text-anchor","middle").attr("fill","#bbb").attr("font-size","10px").attr("font-style","italic").text(et?"No production data":"No data");continue}const rt=ke().defined(q=>q.value!=null).x(q=>gt(q.year)).y(q=>At(q.value));if(ft.append("path").datum(Z).attr("d",rt).attr("fill","none").attr("stroke",Y.color).attr("stroke-width",1.5),ft.selectAll(".dot").data(Q).join("circle").attr("cx",q=>gt(q.year)).attr("cy",q=>At(q.value)).attr("r",Q.length>40?1:Q.length>20?1.5:2.5).attr("fill",Y.color),e.selectedYear!=null){const q=Z.find(J=>J.year===e.selectedYear&&J.value!=null);q&&ft.append("circle").attr("cx",gt(q.year)).attr("cy",At(q.value)).attr("r",4).attr("fill","none").attr("stroke","#e74c3c").attr("stroke-width",1.5)}}}}}return qt(()=>[e.countryYears,e.selectedYear,e.countryName],()=>Vt(()=>u()),{deep:!0}),re(()=>{u(),r=new ResizeObserver(()=>u()),n.value&&r.observe(n.value)}),me(()=>{r&&r.disconnect()}),(c,l)=>(z(),F("div",np,[i.value?(z(),F("div",ap,[w("div",{ref_key:"chartRef",ref:n,class:"chart-grid"},null,512),l[0]||(l[0]=ge('<div class="chart-meta" data-v-625ca523><div class="meta-section" data-v-625ca523><span class="meta-label" data-v-625ca523>Data Hints</span><ul class="meta-list" data-v-625ca523><li data-v-625ca523> Y-axis scales differ between production and consumption rows. This is necessary because production and consumption volumes can differ by orders of magnitude for most countries. </li></ul></div><div class="meta-section" data-v-625ca523><span class="meta-label" data-v-625ca523>Source</span><ul class="meta-list" data-v-625ca523><li data-v-625ca523><a href="https://github.com/owid/energy-data" target="_blank" rel="noopener" data-v-625ca523>Our World in Data Energy Dataset</a>  Fields: <code data-v-625ca523>coal_production</code>, <code data-v-625ca523>oil_production</code>, <code data-v-625ca523>gas_production</code>, <code data-v-625ca523>electricity_generation</code>, <code data-v-625ca523>coal_consumption</code>, <code data-v-625ca523>oil_consumption</code>, <code data-v-625ca523>gas_consumption</code>, <code data-v-625ca523>biofuel_consumption</code>, <code data-v-625ca523>electricity_demand</code> (all in TWh) </li><li data-v-625ca523> Underlying data compiled by the <a href="https://www.energyinst.org/statistical-review" target="_blank" rel="noopener" data-v-625ca523>Energy Institute</a> Statistical Review of World Energy </li></ul></div></div>',1))])):(z(),F("div",rp,"No production/consumption data available"))]))}},op=St(ip,[["__scopeId","data-v-625ca523"]]),sp={id:"productionconsumption",class:"page-section"},lp={key:0,class:"loading"},cp={key:1,class:"error"},up={key:2},fp={__name:"ProductionConsumption",setup(t){const e=ae();return(n,r)=>(z(),F("section",sp,[r[0]||(r[0]=w("div",{class:"chart-header"},[w("h2",null,"Production & Consumption of the Main Energy Sources Over Time")],-1)),w("div",null,[j(e).isLoading?(z(),F("div",lp,"Loading energy data...")):j(e).error?(z(),F("div",cp,ct(j(e).error),1)):(z(),F("div",up,[bt(op,{productionConsumptionData:j(e).productionConsumptionData,countryYears:j(e).selectedCountry?.years,selectedYear:j(e).selectedYear,countryName:j(e).selectedCountry?.name||""},null,8,["productionConsumptionData","countryYears","selectedYear","countryName"])]))])]))}},dp=St(fp,[["__scopeId","data-v-1dda3e67"]]),hp={key:0,class:"no-data"},pp={key:1,class:"chart-wrapper"},gp={class:"chart-container scroll-container"},yp={class:"chart-scroll-outer"},mp={__name:"EmissionsPerCapitaRanking",props:{rankingData:{type:Array,default:()=>[]},selectedCountryCode:{type:String,default:""}},setup(t){const e=ae(),n=t,r=it(null),a=it(null);let i=null;const o=tt(()=>n.rankingData&&n.rankingData.length>0);function s(){if(!r.value||!o.value)return;at(r.value).selectAll("*").remove();const c=n.rankingData,l=r.value.clientWidth||500,d={top:10,right:120,bottom:5,left:175},f=26,p=42,m=3;let k=0;c.forEach(A=>{k+=(A.code===n.selectedCountryCode?p:f)+m});const $=d.top+d.bottom+k,M=l,S=M-d.left-d.right,x=at(r.value).append("svg").attr("width",M).attr("height",$).append("g").attr("transform",`translate(${d.left}, ${d.top})`),N=cn(c,A=>A.value)||1,I=ne().domain([0,N*1.05]).range([0,S]),H=ne().domain([0,3,6,N]).range(["#27ae60","#8fce00","#f39c12","#e74c3c"]).clamp(!0);let G=0;c.forEach(A=>{const O=A.code===n.selectedCountryCode,R=O?p:f,v=G,T=x.append("g").attr("class","bar-row").style("cursor",O?"default":"pointer").on("click",()=>{O||e.setSelectedCountry(A.code)});T.append("rect").attr("x",-175).attr("y",v).attr("width",M).attr("height",R).attr("fill","transparent");const h=T.append("rect").attr("x",0).attr("y",v).attr("width",I(A.value)).attr("height",R).attr("fill",H(A.value)).attr("fill-opacity",O?1:.65).attr("stroke",O?"#222":"none").attr("stroke-width",O?2.5:0).attr("rx",3);O||T.on("mouseenter",()=>{h.attr("fill-opacity",.9)}).on("mouseleave",()=>{h.attr("fill-opacity",.65)}),O&&x.append("rect").attr("x",-4).attr("y",v-4).attr("width",I(A.value)+8).attr("height",R+8).attr("fill","none").attr("stroke",H(A.value)).attr("stroke-width",2.5).attr("stroke-opacity",.35).attr("rx",6),T.append("text").attr("x",-8).attr("y",v+R/2).attr("text-anchor","end").attr("dominant-baseline","central").attr("font-size",O?"15px":"10px").attr("font-weight",O?"900":"400").attr("fill",O?"#000":"#666").text(A.name),T.append("text").attr("x",I(A.value)+8).attr("y",v+R/2).attr("dominant-baseline","central").attr("font-size",O?"17px":"10px").attr("font-weight",O?"900":"400").attr("fill",O?"#000":"#666").text(O?`${A.value.toFixed(1)} tCO/cap`:`${A.value.toFixed(1)}`),G+=R+m}),u(c,d.top,f,p,m)}function u(c,l,d,f,p){if(!a.value)return;const m=c.findIndex(S=>S.code===n.selectedCountryCode);if(m===-1)return;let k=l;for(let S=0;S<m;S++)k+=(c[S].code===n.selectedCountryCode?f:d)+p;const $=a.value.clientHeight,M=k-$*.35;a.value.scrollTop=Math.max(0,M)}return qt(()=>[n.rankingData,n.selectedCountryCode],()=>{s()},{deep:!0}),re(()=>{s(),i=new ResizeObserver(()=>{s()}),r.value&&i.observe(r.value)}),me(()=>{i&&i.disconnect()}),(c,l)=>o.value?(z(),F("div",pp,[l[1]||(l[1]=w("h3",null,"CO2 Emissions - Europe Comparison",-1)),l[2]||(l[2]=w("p",null,"Total CO2 emissions per person from energy use across all sectors, measured in tonnes per year.",-1)),w("div",gp,[w("div",yp,[w("div",{ref_key:"scrollContainer",ref:a,class:"chart-scroll"},[w("div",{ref_key:"chartRef",ref:r,class:"chart-svg"},null,512)],512)])])])):(z(),F("div",hp,[...l[0]||(l[0]=[w("span",{class:"material-symbols-outlined"},"bar_chart_off",-1),w("p",null,"No emissions per capita ranking data available.",-1)])]))}},vp=St(mp,[["__scopeId","data-v-3e5f2ba6"]]),_p={key:0,class:"no-data"},xp={key:1,class:"chart-wrapper"},wp={class:"chart-container"},bp={__name:"EmissionsCloudPie",props:{emissionsData:{type:Object,default:null},countryName:{type:String,default:""}},setup(t){const e=t,n=it(null);let r=null;const a=tt(()=>{if(!e.emissionsData)return!1;const s=e.emissionsData;return s.residential!=null||s.services!=null||s.transport!=null||s.industry!=null}),i=[{key:"residential",label:"Residential",color:"#63b3df"},{key:"transport",label:"Transport",color:"#ffb56b"},{key:"industry",label:"Industry",color:"#898989"},{key:"services",label:"Services",color:"#76d76b"}];function o(){if(!n.value||!a.value)return;at(n.value).selectAll("*").remove();const s=n.value.clientWidth||460,u=Math.min(s,460),c=450,l=u/2,d=180,f=at(n.value).append("svg").attr("width",u).attr("height",c).attr("viewBox",`0 0 ${u} ${c}`),p=e.emissionsData,m=i.filter(b=>p[b.key]!=null&&p[b.key]>0);if(m.length===0)return;const k=m.reduce((b,P)=>b+p[P.key],0),$=95,M=$*.38,S=f.append("defs");S.append("filter").attr("id","cloud-soft").attr("x","-30%").attr("y","-30%").attr("width","160%").attr("height","160%").append("feGaussianBlur").attr("in","SourceGraphic").attr("stdDeviation","6"),S.append("filter").attr("id","smoke-soft").attr("x","-50%").attr("y","-50%").attr("width","200%").attr("height","200%").append("feGaussianBlur").attr("in","SourceGraphic").attr("stdDeviation","4");const N=f.append("g").attr("filter","url(#cloud-soft)");[{x:0,y:0,r:$+40},{x:-70,y:12,r:58},{x:70,y:12,r:58},{x:-45,y:-42,r:52},{x:45,y:-42,r:52},{x:0,y:-58,r:46},{x:-90,y:-2,r:40},{x:90,y:-2,r:40},{x:-30,y:52,r:44},{x:30,y:52,r:44},{x:0,y:60,r:38},{x:-60,y:45,r:32},{x:60,y:45,r:32}].forEach(b=>{N.append("circle").attr("cx",l+b.x).attr("cy",d+b.y).attr("r",b.r).attr("fill","#90a4ae").attr("fill-opacity",.1)}),f.append("text").attr("x",l).attr("y",d-$-28).attr("text-anchor","middle").attr("font-size","15px").attr("font-weight","700").attr("letter-spacing","2px").attr("fill","#78909c").attr("fill-opacity",.45).text("CO");const H=395,G=f.append("g").attr("filter","url(#smoke-soft)"),A=l-80;for(let b=0;b<8;b++){const P=b/7,D=H-50-P*(H-50-(d+$+15)),L=Math.sin(P*Math.PI*1.5)*18,B=A+P*50+L,Y=6+P*22;G.append("circle").attr("cx",B).attr("cy",D).attr("r",Y).attr("fill","#90a4ae").attr("fill-opacity",.04+P*.05)}const O=l+80;for(let b=0;b<8;b++){const P=b/7,D=H-65-P*(H-65-(d+$+15)),L=Math.sin(P*Math.PI*1.5+1)*15,B=O-P*50+L,Y=5+P*20;G.append("circle").attr("cx",B).attr("cy",D).attr("r",Y).attr("fill","#90a4ae").attr("fill-opacity",.04+P*.05)}const R=m.map(b=>({...b,value:p[b.key]})),T=Oo().value(b=>b.value).padAngle(.03).sort(null)(R),h=sn().innerRadius(M).outerRadius($),g=sn().innerRadius($+32).outerRadius($+32);T.forEach(b=>{const P=b.data;f.append("path").attr("d",h(b)).attr("transform",`translate(${l}, ${d})`).attr("fill",P.color).attr("stroke",P.color).attr("stroke-width",1.5);const D=g.centroid(b),L=l+D[0],B=d+D[1],U=(b.startAngle+b.endAngle)/2<Math.PI?"start":"end";f.append("text").attr("x",L).attr("y",B-7).attr("text-anchor",U).attr("font-size","12px").attr("font-weight","600").attr("fill",P.color).text(P.label),f.append("text").attr("x",L).attr("y",B+8).attr("text-anchor",U).attr("font-size","11px").attr("fill","#666").text(`${P.value.toFixed(2)} tCO/cap`)}),f.append("text").attr("x",l).attr("y",d-6).attr("text-anchor","middle").attr("font-size","20px").attr("font-weight","700").attr("fill","#333").text(`${k.toFixed(1)}`),f.append("text").attr("x",l).attr("y",d+14).attr("text-anchor","middle").attr("font-size","11px").attr("font-weight","500").attr("fill","#666").text("tCO/cap"),f.append("line").attr("x1",30).attr("y1",H).attr("x2",u-30).attr("y2",H).attr("stroke","#b0bec5").attr("stroke-width",1).attr("stroke-opacity",.4).attr("stroke-dasharray","6,4");const y=f.append("g").attr("transform",`translate(${l-115}, ${H})`);y.append("path").attr("d","M3,-3 L3,-11 L14,-11 L20,-21 L38,-21 L44,-11 L52,-11 L52,-3 Z").attr("fill","#546e7a").attr("fill-opacity",.55).attr("stroke","#37474f").attr("stroke-width",.8).attr("stroke-opacity",.3),y.append("path").attr("d","M16,-11 L21,-19 L27,-19 L27,-11 Z").attr("fill","#b0bec5").attr("fill-opacity",.35),y.append("path").attr("d","M29,-19 L36,-19 L41,-11 L29,-11 Z").attr("fill","#b0bec5").attr("fill-opacity",.3),y.append("circle").attr("cx",16).attr("cy",-1).attr("r",5).attr("fill","#263238").attr("fill-opacity",.6),y.append("circle").attr("cx",16).attr("cy",-1).attr("r",2.5).attr("fill","#546e7a").attr("fill-opacity",.4),y.append("circle").attr("cx",40).attr("cy",-1).attr("r",5).attr("fill","#263238").attr("fill-opacity",.6),y.append("circle").attr("cx",40).attr("cy",-1).attr("r",2.5).attr("fill","#546e7a").attr("fill-opacity",.4),y.append("rect").attr("x",50).attr("y",-5).attr("width",6).attr("height",3).attr("rx",1).attr("fill","#455a64").attr("fill-opacity",.5),[{x:59,y:-6,r:3.5},{x:64,y:-9,r:5},{x:67,y:-14,r:4.5},{x:70,y:-20,r:4}].forEach((b,P)=>{y.append("circle").attr("cx",b.x).attr("cy",b.y).attr("r",b.r).attr("fill","#78909c").attr("fill-opacity",.15-P*.02)}),y.append("circle").attr("cx",4).attr("cy",-7).attr("r",2).attr("fill","#ffcc02").attr("fill-opacity",.4);const _=f.append("g").attr("transform",`translate(${l+55}, ${H})`);_.append("rect").attr("x",0).attr("y",-32).attr("width",45).attr("height",32).attr("rx",2).attr("fill","#455a64").attr("fill-opacity",.45).attr("stroke","#37474f").attr("stroke-width",.8).attr("stroke-opacity",.25),_.append("rect").attr("x",7).attr("y",-60).attr("width",10).attr("height",28).attr("rx",1).attr("fill","#37474f").attr("fill-opacity",.5),_.append("rect").attr("x",5).attr("y",-62).attr("width",14).attr("height",3).attr("rx",1).attr("fill","#37474f").attr("fill-opacity",.55),_.append("rect").attr("x",30).attr("y",-48).attr("width",7).attr("height",16).attr("rx",1).attr("fill","#37474f").attr("fill-opacity",.45),[{x:4,y:-26,w:8,h:6},{x:15,y:-26,w:8,h:6},{x:26,y:-26,w:8,h:6},{x:4,y:-16,w:8,h:6},{x:15,y:-16,w:8,h:6},{x:26,y:-16,w:8,h:6}].forEach(b=>{_.append("rect").attr("x",b.x).attr("y",b.y).attr("width",b.w).attr("height",b.h).attr("rx",1).attr("fill","#ffc107").attr("fill-opacity",.3)}),_.append("rect").attr("x",18).attr("y",-9).attr("width",9).attr("height",9).attr("rx",1).attr("fill","#37474f").attr("fill-opacity",.3),[{x:12,y:-67,r:5},{x:14,y:-75,r:6},{x:11,y:-83,r:5.5},{x:34,y:-53,r:4},{x:36,y:-60,r:5}].forEach((b,P)=>{_.append("circle").attr("cx",b.x).attr("cy",b.y).attr("r",b.r).attr("fill","#78909c").attr("fill-opacity",.14-P*.015)});const C=f.append("g").attr("transform",`translate(${l+42}, ${H})`);[{x:-4,s:.9,fill:"#e74c3c",op:.3},{x:3,s:1.2,fill:"#e67e22",op:.35},{x:9,s:.7,fill:"#f39c12",op:.28},{x:-9,s:.6,fill:"#f39c12",op:.22}].forEach(b=>{C.append("path").attr("d","M0,0 C-3,-6 -5,-13 -2,-19 C-1,-21 1,-21 2,-19 C5,-13 3,-6 0,0 Z").attr("transform",`translate(${b.x}, 0) scale(${b.s})`).attr("fill",b.fill).attr("fill-opacity",b.op)}),C.append("path").attr("d","M0,0 C-1.5,-4 -2,-8 -0.5,-12 C0,-13 0.5,-13 1,-12 C2,-8 1.5,-4 0,0 Z").attr("transform","translate(3, 0) scale(1.1)").attr("fill","#fff176").attr("fill-opacity",.3),p.year&&f.append("text").attr("x",l).attr("y",c-8).attr("text-anchor","middle").attr("font-size","11px").attr("fill","#999").text(`Data year: ${p.year}`)}return qt(()=>[e.emissionsData,e.countryName],async()=>{await Vt(),o(),n.value&&!r&&(r=new ResizeObserver(()=>{o()}),r.observe(n.value))},{deep:!0}),re(()=>{o(),n.value&&(r=new ResizeObserver(()=>{o()}),r.observe(n.value))}),me(()=>{r&&r.disconnect()}),(s,u)=>a.value?(z(),F("div",xp,[w("div",wp,[w("div",{ref_key:"chartRef",ref:n,class:"chart-svg"},null,512)])])):(z(),F("div",_p,[...u[0]||(u[0]=[w("span",{class:"material-symbols-outlined"},"cloud_off",-1),w("p",null,"No per-capita emissions data available for this country.",-1)])]))}},Cp=St(bp,[["__scopeId","data-v-63407626"]]),kp={key:0,class:"no-data"},Mp={key:1,class:"chart-wrapper"},$p={class:"chart-container scroll-container"},Sp={class:"chart-scroll-outer"},Ep={__name:"CarbonIntensityRanking",props:{rankingData:{type:Array,default:()=>[]},selectedCountryCode:{type:String,default:""}},setup(t){const e=ae(),n=t,r=it(null),a=it(null),i=it(null);let o=null;const s=tt(()=>n.rankingData&&n.rankingData.length>0);function u(){if(!r.value||!s.value)return;at(r.value).selectAll("*").remove();const l=n.rankingData,d=r.value.clientWidth||500,f={top:10,right:120,bottom:5,left:175},p=26,m=42,k=3;let $=0;l.forEach(R=>{$+=(R.code===n.selectedCountryCode?m:p)+k});const M=f.top+f.bottom+$,S=d,E=S-f.left-f.right,N=at(r.value).append("svg").attr("width",S).attr("height",M).append("g").attr("transform",`translate(${f.left}, ${f.top})`),I=cn(l,R=>R.value)||1,H=ne().domain([0,I*1.05]).range([0,E]),G=ne().domain([0,100,300,I]).range(["#27ae60","#8fce00","#f39c12","#e74c3c"]).clamp(!0);let A=0;l.forEach(R=>{const v=R.code===n.selectedCountryCode,T=v?m:p,h=A,g=N.append("g").attr("class","bar-row").style("cursor",v?"default":"pointer").on("click",()=>{v||e.setSelectedCountry(R.code)});g.append("rect").attr("x",-175).attr("y",h).attr("width",S).attr("height",T).attr("fill","transparent");const y=g.append("rect").attr("x",0).attr("y",h).attr("width",H(R.value)).attr("height",T).attr("fill",G(R.value)).attr("fill-opacity",v?1:.65).attr("stroke",v?"#222":"none").attr("stroke-width",v?2.5:0).attr("rx",3);v||g.on("mouseenter",()=>{y.attr("fill-opacity",.9)}).on("mouseleave",()=>{y.attr("fill-opacity",.65)}),v&&N.append("rect").attr("x",-4).attr("y",h-4).attr("width",H(R.value)+8).attr("height",T+8).attr("fill","none").attr("stroke",G(R.value)).attr("stroke-width",2.5).attr("stroke-opacity",.35).attr("rx",6),g.append("text").attr("x",-8).attr("y",h+T/2).attr("text-anchor","end").attr("dominant-baseline","central").attr("font-size",v?"15px":"10px").attr("font-weight",v?"900":"400").attr("fill",v?"#000":"#666").text(R.name),g.append("text").attr("x",H(R.value)+8).attr("y",h+T/2).attr("dominant-baseline","central").attr("font-size",v?"17px":"10px").attr("font-weight",v?"900":"400").attr("fill",v?"#000":"#666").text(v?`${Math.round(R.value)} gCO/kWh`:`${Math.round(R.value)}`),A+=T+k});const O=H(100);O>0&&O<E?i.value=f.left+O:i.value=null,c(l,f.top,p,m,k)}function c(l,d,f,p,m){if(!a.value)return;const k=l.findIndex(E=>E.code===n.selectedCountryCode);if(k===-1)return;let $=d;for(let E=0;E<k;E++)$+=(l[E].code===n.selectedCountryCode?p:f)+m;const M=a.value.clientHeight,S=$-M*.35;a.value.scrollTop=Math.max(0,S)}return qt(()=>[n.rankingData,n.selectedCountryCode],()=>{u()},{deep:!0}),re(()=>{u(),o=new ResizeObserver(()=>{u()}),r.value&&o.observe(r.value)}),me(()=>{o&&o.disconnect()}),(l,d)=>s.value?(z(),F("div",Mp,[d[2]||(d[2]=w("h3",null,"Carbon Intensity of the Energy Grid - Europe Comparison",-1)),d[3]||(d[3]=w("p",null,' Average CO2 emitted per kilowatt-hour of electricity generated from all sources, indicating how clean the power grid is in terms of emissions. Heavy reliance on nuclear power contributes to low carbon intensity levels for electricity, as in the case of France for example, but referring to it as "clean energy" remains a topic of discussion. ',-1)),w("div",$p,[i.value!=null?(z(),F("div",{key:0,class:"threshold-label",style:Pn({left:i.value+"px"})}," IEA / EU sustainable energy threshold (100 gCO/kWh) ",4)):ee("",!0),w("div",Sp,[i.value!=null?(z(),F("div",{key:0,class:"threshold-line-overlay",style:Pn({left:i.value+"px"})},null,4)):ee("",!0),w("div",{ref_key:"scrollContainer",ref:a,class:"chart-scroll"},[w("div",{ref_key:"chartRef",ref:r,class:"chart-svg"},null,512)],512)]),d[1]||(d[1]=ge('<div class="chart-meta" data-v-96abf4b2><div class="meta-section" data-v-96abf4b2><span class="meta-label" data-v-96abf4b2>Source</span><ul data-v-96abf4b2><li data-v-96abf4b2><strong data-v-96abf4b2>OWID</strong><a href="https://github.com/owid/energy-data" target="_blank" rel="noopener" data-v-96abf4b2> Energy Data </a> . Column: <code data-v-96abf4b2>carbon_intensity_elec</code> (gCO2/kWh) </li></ul></div><div class="meta-section" data-v-96abf4b2></div></div>',1))])])):(z(),F("div",kp,[...d[0]||(d[0]=[w("span",{class:"material-symbols-outlined"},"bar_chart_off",-1),w("p",null,"No carbon intensity ranking data available.",-1)])]))}},Tp=St(Ep,[["__scopeId","data-v-96abf4b2"]]),Ap={key:0,class:"no-data"},Np={key:1,class:"stat-cards-wrapper"},Pp={class:"group-label"},Rp={class:"stat-cards-grid"},Ip={class:"card-icon"},Op={class:"material-symbols-outlined"},Dp={class:"card-content"},Hp={class:"card-title"},Lp={class:"card-result"},Fp={class:"card-detail"},be=3.7,zp=1.6,Gp=.125,Bp=.49,Si=3,Cn=215,Mr=3600,Ei=77400,$r=885,Yp=1.3,Ti=55,kn=9,Wp=2.2,Ai=400,Up=50,Vp={__name:"StatCards",props:{gridIntensity:{type:Number,default:null}},setup(t){const e=t;function n(i,o){const s=i/o;return s<.5?"card-green":s<=1?"card-yellow":"card-red"}const r=tt(()=>{const i=e.gridIntensity;if(i==null)return[];const o=[],s=be/zp;o.push({id:"ev",group:"transport",icon:"electric_car",title:"Electric Car vs Petrol Car",result:`${s.toFixed(1)}x less energy per passenger-km`,detail:"EV: 1.22.0 MJ/pkm. Petrol: 3.04.4 MJ/pkm. Total energy incl. vehicle manufacturing.",colorClass:"card-green"});const u=be/Gp,c=be/Bp;o.push({id:"train",group:"transport",icon:"train",title:"Train & Tram vs Car",result:`Train ~${Math.round(u)}x, Tram ~${Math.round(c)}x less energy`,detail:"Train: 0.050.2 MJ/pkm. Tram: 0.170.8 MJ/pkm. Car: 3.04.4 MJ/pkm. Incl. manufacturing.",colorClass:"card-green"});const l=i/Si,d=(Cn-l)/Cn*100;o.push({id:"hp",group:"household",icon:"heat_pump",title:"Heat Pump vs Gas Heating",result:d>0?`${Math.round(d)}% less CO`:`${Math.round(-d)}% more CO`,detail:`HP: ${Math.round(l)} gCO/kWh_th (SCOP ${Si}). Gas boiler: ${Cn} gCO/kWh_th.`,colorClass:n(l,Cn)});const f=Mr*i/1e6,p=Mr*3.6,m=Math.round(p/be);o.push({id:"footprint",group:"household",icon:"home",title:"Household Electricity Footprint",result:`${f.toFixed(2)} tCO/yr  ${m.toLocaleString()} passenger-km by car`,detail:`From ${Mr.toLocaleString()} kWh/yr (EU avg). Energy equivalent at ${be} MJ/pkm (PTUA, incl. manufacturing).`,colorClass:f<.5?"card-green":f<1.5?"card-yellow":"card-red"});const k=Ei*3.6,$=Math.round(k/be);o.push({id:"datacenter",group:"services",icon:"dns",title:"Data Center (NTT Frankfurt 1)",result:`1 hr of operation  ${$.toLocaleString()} passenger-km by car`,detail:`Est. ${Ei.toLocaleString()} kWh/hr (77.4 MW IT load). Car: ${be} MJ/pkm (PTUA).`,colorClass:$<5e4?"card-green":$<15e4?"card-yellow":"card-red"});const M=Yp*i,S=$r/M;o.push({id:"truck",group:"services",icon:"local_shipping",title:"Electric Truck vs Diesel Truck (Logistics)",result:S>=1?`${S.toFixed(1)}x less CO per km`:`${(1/S).toFixed(1)}x more CO per km`,detail:`Electric: ${Math.round(M)} gCO/km (1.30 kWh/km). Diesel: ${$r} gCO/km (33 L/100km, 40t).`,colorClass:n(M,$r)});const E=Ti*i/1e3,x=(kn-E)/kn*100;o.push({id:"green-h2",group:"industry",icon:"science",title:"Green Hydrogen vs Grey Hydrogen",result:x>0?`${Math.round(x)}% less CO per kg H`:`${Math.round(-x)}% more CO per kg H`,detail:`Electrolysis: ${E.toFixed(1)} kgCO/kgH (${Ti} kWh/kg). SMR: ${kn} kgCO/kgH.`,colorClass:n(E,kn)});const I=Ai*i/1e3+Up,H=Wp*1e3,G=(H-I)/H*100;return o.push({id:"steel",group:"industry",icon:"construction",title:"Electric Arc Furnace vs Blast Furnace",result:G>0?`${Math.round(G)}% less CO per tonne steel`:`${Math.round(-G)}% more CO per tonne steel`,detail:`EAF: ${Math.round(I)} kgCO/t (${Ai} kWh). BF-BOF: ${H.toLocaleString()} kgCO/t.`,colorClass:n(I,H)}),o}),a=tt(()=>[{key:"transport",label:"Transport",icon:"directions_car",color:"#ffb56b"},{key:"household",label:"Household",icon:"home",color:"#63b3df"},{key:"services",label:"Services",icon:"business",color:"#76d76b"},{key:"industry",label:"Industry",icon:"factory",color:"#898989"}].map(o=>({...o,cards:r.value.filter(s=>s.group===o.key)})).filter(o=>o.cards.length>0));return(i,o)=>t.gridIntensity==null?(z(),F("div",Ap,[...o[0]||(o[0]=[w("span",{class:"material-symbols-outlined"},"info",-1),w("p",null,"No grid intensity data available to compute comparisons.",-1)])])):(z(),F("div",Np,[(z(!0),F(te,null,Se(a.value,s=>(z(),F("div",{key:s.label,class:"stat-group"},[w("h4",Pp,[w("span",{class:"material-symbols-outlined group-icon",style:Pn({color:s.color})},ct(s.icon),5),Bt(" "+ct(s.label),1)]),w("div",Rp,[(z(!0),F(te,null,Se(s.cards,u=>(z(),F("div",{key:u.id,class:Ht(["stat-card",u.colorClass])},[w("div",Ip,[w("span",Op,ct(u.icon),1)]),w("div",Dp,[w("h5",Hp,ct(u.title),1),w("p",Lp,ct(u.result),1),w("p",Fp,ct(u.detail),1)])],2))),128))])]))),128))]))}},qp=St(Vp,[["__scopeId","data-v-e191c0ca"]]),Xp={id:"eco",class:"page-section"},Kp={class:"eco-subsection"},jp={class:"section-container"},Zp={key:0,class:"loading"},Jp={key:1,class:"error"},Qp={key:0,class:"no-data"},t1={key:1,class:"charts-container"},e1={class:"charts-fill"},n1={class:"text-container"},r1={key:0},a1={class:"highlight-value"},i1={class:"highlight-value"},o1={key:1},s1={class:"eco-subsection"},l1={class:"section-container"},c1={key:0,class:"loading"},u1={key:1,class:"error"},f1={key:0,class:"no-data"},d1={key:1,class:"charts-container"},h1={class:"charts-fill"},p1={class:"text-container"},g1={key:0},y1={class:"highlight-value"},m1={class:"highlight-value"},v1={key:1},_1={__name:"Eco",setup(t){const e=ae(),n=tt(()=>{const r=e.emissionsPerCapita;if(!r)return null;const a=(r.residential||0)+(r.services||0)+(r.transport||0)+(r.industry||0);return a>0?a.toFixed(1):null});return(r,a)=>(z(),F("section",Xp,[a[12]||(a[12]=w("div",{class:"chart-header"},[w("h2",null,"Carbon Footprint of Energy Use")],-1)),w("div",Kp,[w("div",jp,[j(e).isLoading?(z(),F("div",Zp,"Loading energy data...")):j(e).error?(z(),F("div",Jp,ct(j(e).error),1)):(z(),F(te,{key:2},[j(e).ecoLoaded?(z(),F("div",t1,[w("div",e1,[a[0]||(a[0]=w("p",null," Of course no project about energy can be considered complete without a section dedicated to the ecological aspects of energy use. While there are other important environmental impacts to consider, we will focus on the most fundamental one: carbon emissions. First in a broad per capita breakdown, and then through the lens of carbon intensity, which relates electricity to carbon emissions. This is a key factor determining how much impact measures, that we consider as sustainable, will have in practice. ",-1)),bt(vp,{rankingData:j(e).emissionsPerCapitaRanking,selectedCountryCode:j(e).selectedCountryCode},null,8,["rankingData","selectedCountryCode"])])])):(z(),F("div",Qp,"Eco data not available."))],64)),w("div",n1,[n.value!=null?(z(),F("h4",r1,[a[1]||(a[1]=Bt(" Where are the ",-1)),w("span",a1,ct(n.value)+" tCO",1),a[2]||(a[2]=Bt(" emissions in ",-1)),w("span",i1,ct(j(e).selectedCountry?.name),1),a[3]||(a[3]=Bt(" emitted? ",-1))])):(z(),F("h4",o1,"Where are the emissions in your country emitted?")),a[4]||(a[4]=w("p",null," The chart below breaks down how much CO2 each person causes through four major sectors: residential energy use (heating, appliances), services (commercial buildings, offices), transport (cars, trucks), and industry (manufacturing). ",-1)),bt(Cp,{emissionsData:j(e).emissionsPerCapita,countryName:j(e).selectedCountry?.name||""},null,8,["emissionsData","countryName"]),a[5]||(a[5]=w("p",null," Transport tends to be the single largest contributor in most European countries, reflecting heavy reliance on fossil fuels for road mobility. In Lithuania, transport accounts for roughly two-thirds of per-capita emissions. In Denmark, Spain, and Portugal it exceeds half. At the other extreme, industry dominates in Slovakia and Czechia, where steel production, automotive manufacturing, and a heavy reliance on coal for heating, industry, and electricity generation push totals above 4 tCO per person. Residential emissions vary depending on climate, insulation standards, and the fuel mix for heating. Norway stands out with residential emissions near zero (0.08 tCO/cap), thanks to a grid that is 98% renewable (almost entirely hydropower), widespread use of heat pumps for heating, and the world's highest EV adoption rate, keeping its overall footprint remarkably low for a country with such a high standard of living. ",-1))])]),a[6]||(a[6]=ge('<div class="chart-meta" data-v-d4a39455><div class="meta-section" data-v-d4a39455><span class="meta-label" data-v-d4a39455>Source</span><ul data-v-d4a39455><li data-v-d4a39455><strong data-v-d4a39455>IEA</strong><a href="https://www.iea.org/data-and-statistics/data-product/energy-efficiency-indicators-highlights" target="_blank" rel="noopener" data-v-d4a39455> Energy End-Uses &amp; Efficiency </a> (per-capita CO by sector). Indicator: <code data-v-d4a39455>Carbon intensity per capita (t CO2/capita)</code>. End uses: <code data-v-d4a39455>Total residential</code>, <code data-v-d4a39455>Total services</code>, <code data-v-d4a39455>Cars/light trucks</code> + <code data-v-d4a39455>Freight trucks</code> (transport) </li><li data-v-d4a39455> Industry per-capita derived from IEA total emissions (indicator: <code data-v-d4a39455>Total final use (kt CO2)</code>, end use containing <code data-v-d4a39455>Manufacturing</code>) divided by <strong data-v-d4a39455>OWID</strong><a href="https://github.com/owid/energy-data" target="_blank" rel="noopener" data-v-d4a39455> Energy Data </a><code data-v-d4a39455>population</code> column. IEA provides per-capita indicators for residential, services, and transport, but only per-value-added (gCO/USD) for industry. </li></ul></div><div class="meta-section" data-v-d4a39455><span class="meta-label" data-v-d4a39455>Data Hints</span><ul data-v-d4a39455><li data-v-d4a39455>Some countries may lack transport data. The total shown is the sum of available sectors.</li></ul></div></div>',1))]),w("div",s1,[w("div",l1,[j(e).isLoading?(z(),F("div",c1,"Loading energy data...")):j(e).error?(z(),F("div",u1,ct(j(e).error),1)):(z(),F(te,{key:2},[j(e).ecoLoaded?(z(),F("div",d1,[w("div",h1,[bt(Tp,{rankingData:j(e).carbonIntensityRanking,selectedCountryCode:j(e).selectedCountryCode},null,8,["rankingData","selectedCountryCode"])])])):(z(),F("div",f1,"Eco data not available."))],64)),w("div",p1,[j(e).carbonIntensity?.latest_value!=null?(z(),F("h4",g1,[a[7]||(a[7]=Bt(" What does a carbon intensity of ",-1)),w("span",y1,ct(Math.round(j(e).carbonIntensity.latest_value))+" gCO/kWh",1),a[8]||(a[8]=Bt(" for ",-1)),w("span",m1,ct(j(e).selectedCountry?.name),1),a[9]||(a[9]=Bt(" mean in practice? ",-1))])):(z(),F("h4",v1,"What does your grid intensity mean in practice?")),a[10]||(a[10]=w("p",null," Most people are familiar with electrification as a fundamental part of decarbonization, where processes directly reliant on fossil fuels, if they cannot be done without, are replaced by electric alternatives. The electric car being a prime example of this. A fact that can be lost in this though, is that any benefits in terms of emissions through often costly and disruptive switches, are only as beneficial as the electricity is clean. The cards below (based on broad averages and approximations) demonstrate how impactful the effect can be, essentially highlighting the importance of electricity obtained from clean sources. ",-1)),bt(qp,{gridIntensity:j(e).carbonIntensity?.latest_value},null,8,["gridIntensity"]),a[11]||(a[11]=ge('<details class="sources-details" data-v-d4a39455><summary data-v-d4a39455>Data sources and assumptions</summary><ul class="sources-list" data-v-d4a39455><li data-v-d4a39455><strong data-v-d4a39455>Car, EV, Train &amp; Tram energy (MJ/pkm)</strong>: <a href="https://ptua.org.au/myths/energy/" target="_blank" data-v-d4a39455>PTUA  Myth: Public transport doesn&#39;t really save energy</a>. Total energy per passenger-km including vehicle manufacturing. Car (ICE): 3.04.4, EV: 1.22.0, Train: 0.050.2, Tram: 0.170.8 MJ/pkm. Ranges reflect occupancy assumptions (cars: 1.11.5 passengers; trains/trams: peak vs off-peak patronage). </li><li data-v-d4a39455><strong data-v-d4a39455>Heat pump SCOP (3.0)</strong>: <a href="https://www.iea.org/reports/the-future-of-heat-pumps" target="_blank" data-v-d4a39455>IEA The Future of Heat Pumps</a>, &quot;How a heat pump works&quot; section, opening paragraph states COP ~4. SCOP 3.0 is a conservative seasonal figure accounting for cold-climate performance drops. </li><li data-v-d4a39455><strong data-v-d4a39455>Gas heating (215 gCO/kWh_th)</strong>: Natural gas space heating. Based on emission factor ~205 gCO/kWh with typical boiler efficiency ~90%. </li><li data-v-d4a39455><strong data-v-d4a39455>Household electricity (3,600 kWh/yr)</strong>: <a href="https://www.odyssee-mure.eu/publications/efficiency-by-sector/households/electricity-consumption-dwelling.html" target="_blank" data-v-d4a39455>Odyssee-MURE  Electricity consumption per dwelling</a>. EU average of 3.6 MWh per dwelling, widely used as a median for medium-sized households. Varies greatly by country (from ~1.8 MWh in Romania to ~8.5 MWh in Sweden). </li><li data-v-d4a39455><strong data-v-d4a39455>Data center: NTT Frankfurt 1 (77.4 MW IT)</strong>: <a href="https://services.global.ntt/en-us/services-and-products/global-data-centers/global-locations/emea/frankfurt-1-data-center" target="_blank" data-v-d4a39455>NTT Frankfurt 1</a>, Overview section (&quot;Secure and flexible space built to your specifications&quot; paragraph) and Specifications &gt; Power (70.1 MW operational + 7.3 MW under construction). </li><li data-v-d4a39455><strong data-v-d4a39455>Diesel truck (885 gCO/km)</strong>: Derived from 32.6 L/100 km (40t tractor-trailer, Long Haul cycle) x 2.68 kgCO/L. <a href="https://theicct.org/publication/lca-ghg-emissions-hdv-fuels-europe-feb23/" target="_blank" data-v-d4a39455>ICCT Feb 2023 LCA</a>, referencing the <a href="https://theicct.org/wp-content/uploads/2021/06/HDV_fuel-consumption_comparison_fs_20180418.pdf" target="_blank" data-v-d4a39455>ICCT April 2018 Fact Sheet</a>, average tractor-trailer fuel consumption figure. </li><li data-v-d4a39455><strong data-v-d4a39455>Electric truck (1.30 kWh/km)</strong>: <a href="https://theicct.org/publication/rw-use-cases-for-zet-heavy-tractor-trailers-for-goods-transport-in-the-eu-aug25/" target="_blank" data-v-d4a39455>ICCT Aug 2025</a>, Key Findings section: real-world range of 92 to 150 kWh/100 km for 40t tractor-trailers. 1.30 kWh/km (130 kWh/100 km) is within this range. </li><li data-v-d4a39455><strong data-v-d4a39455>PEM electrolysis (55 kWh/kgH)</strong>: <a href="https://www.hydrogen.energy.gov/docs/hydrogenprogramlibraries/pdfs/24005-clean-hydrogen-production-cost-pem-electrolyzer.pdf" target="_blank" data-v-d4a39455>DOE H2 Program Record #24005</a> (May 2024), main analysis section: beginning-of-life system electricity 55.2 kWh/kg (stack 51 + balance-of-plant 4.2). Lifetime average: 57.5 kWh/kg. </li><li data-v-d4a39455><strong data-v-d4a39455>Grey hydrogen SMR (9 kgCO/kgH)</strong>: <a href="https://www.iea.org/reports/global-hydrogen-review-2024" target="_blank" data-v-d4a39455>IEA Global Hydrogen Review 2024</a>, Ch. 8 &quot;GHG emissions of hydrogen&quot;, Highlights, 1st bullet: unabated natural gas emits 10 to 12 kgCO-eq/kgH (lifecycle). The value 9 represents direct combustion emissions only, excluding upstream methane. </li><li data-v-d4a39455><strong data-v-d4a39455>Blast furnace steel (2.2 tCO/t)</strong>: <a href="https://www.iea.org/energy-system/industry/steel" target="_blank" data-v-d4a39455>IEA Steel tracking page</a>, &quot;Direct CO intensity of crude steel production&quot; interactive chart. IEA reports ~2.0 to 2.3 tCO/t for BF-BOF globally; 2.2 is within this range. </li><li data-v-d4a39455><strong data-v-d4a39455>EAF steel (400 kWh/t + 50 kgCO/t process)</strong>: <a href="https://www.iea.org/reports/iron-and-steel-technology-roadmap" target="_blank" data-v-d4a39455>IEA Iron &amp; Steel Roadmap</a>. Industry literature (AIST) commonly cites 300 to 400 kWh/t for scrap-based EAF electricity. The 50 kgCO/t accounts for electrode and lime process emissions. </li></ul></details>',1))])])])]))}},x1=St(_1,[["__scopeId","data-v-d4a39455"]]),w1={class:"app-select-wrapper"},b1=["for"],C1={class:"app-select-container"},k1=["id","value","disabled"],M1={key:0,value:"",disabled:""},$1=["value"],S1={__name:"AppSelect",props:{modelValue:{type:[String,Number],default:""},options:{type:Array,required:!0,validator:t=>t.every(e=>e.value!==void 0&&e.label!==void 0)},label:{type:String,default:""},placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`select-${Math.random().toString(36).substr(2,9)}`}},emits:["update:modelValue"],setup(t){return(e,n)=>(z(),F("div",w1,[t.label?(z(),F("label",{key:0,for:t.id,class:"app-select-label"},ct(t.label),9,b1)):ee("",!0),w("div",C1,[w("select",{id:t.id,value:t.modelValue,class:"app-select",disabled:t.disabled,onChange:n[0]||(n[0]=r=>e.$emit("update:modelValue",r.target.value))},[t.placeholder?(z(),F("option",M1,ct(t.placeholder),1)):ee("",!0),(z(!0),F(te,null,Se(t.options,r=>(z(),F("option",{key:r.key,value:r.value},ct(r.label),9,$1))),128))],40,k1),n[1]||(n[1]=w("span",{class:"app-select-icon"},[w("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[w("path",{d:"M4 6L8 10L12 6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})])],-1))])]))}},E1=St(S1,[["__scopeId","data-v-e0a5461e"]]),T1={class:"year-slot"},A1={key:0,class:"year-slot-label"},N1={class:"year-slot-row"},P1=["disabled"],R1={class:"year-slot-display"},I1={class:"year-adj"},O1={class:"year-drum"},D1={class:"year-adj"},H1=["disabled"],L1={__name:"YearSlot",props:{modelValue:{type:Number,required:!0},years:{type:Array,required:!0},label:{type:String,default:""}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=e,a=it(!1),i=it(n.modelValue),o=tt(()=>n.years.indexOf(n.modelValue)),s=tt(()=>o.value>0),u=tt(()=>o.value<n.years.length-1),c=tt(()=>s.value?n.years[o.value-1]:null),l=tt(()=>u.value?n.years[o.value+1]:null);qt(()=>n.modelValue,p=>{i.value=p});function d(p){const m=o.value+p;m>=0&&m<n.years.length&&f(n.years[m])}function f(p){p!==n.modelValue&&(a.value=!0,i.value=p,r("update:modelValue",p),setTimeout(()=>{a.value=!1},200))}return(p,m)=>(z(),F("div",T1,[t.label?(z(),F("label",A1,ct(t.label),1)):ee("",!0),w("div",N1,[w("button",{class:"year-slot-btn",disabled:!s.value,onClick:m[0]||(m[0]=k=>d(-1)),type:"button"},[...m[2]||(m[2]=[w("svg",{width:"10",height:"10",viewBox:"0 0 10 10"},[w("path",{d:"M7 1L3 5L7 9",stroke:"currentColor","stroke-width":"1.5",fill:"none"})],-1)])],8,P1),w("div",R1,[w("span",I1,ct(c.value||""),1),w("div",O1,[w("span",{class:Ht(["year-current",{"year-pop":a.value}])},ct(i.value),3)]),w("span",D1,ct(l.value||""),1)]),w("button",{class:"year-slot-btn",disabled:!u.value,onClick:m[1]||(m[1]=k=>d(1)),type:"button"},[...m[3]||(m[3]=[w("svg",{width:"10",height:"10",viewBox:"0 0 10 10"},[w("path",{d:"M3 1L7 5L3 9",stroke:"currentColor","stroke-width":"1.5",fill:"none"})],-1)])],8,H1)])]))}},F1=St(L1,[["__scopeId","data-v-63b2739e"]]),z1=Ni("globalConfig",()=>{const t=it({min:1990,max:2024}),e=tt(()=>t.value.min),n=tt(()=>t.value.max),r=tt(()=>{const o=[];for(let s=t.value.max;s>=t.value.min;s--)o.push(s);return o}),a=tt(()=>{const o=[];for(let s=t.value.min;s<=t.value.max;s++)o.push(s);return o});function i(o,s){t.value={min:o,max:s}}return{yearRange:t,minYear:e,maxYear:n,yearsDescending:r,yearsAscending:a,setYearRange:i}}),G1={class:"config-header"},B1={__name:"ConfigHeader",setup(t){const e=ae(),n=z1(),r=tt(()=>e.countries.map(l=>({value:l.code,label:l.name}))),a=tt({get:()=>e.selectedCountryCode,set:l=>e.setSelectedCountry(l)}),i=tt({get:()=>e.selectedYear,set:l=>e.setSelectedYear(Number(l))});re(()=>{e.loadData()});const o=Ko(),s=jo(),u=tt(()=>s.path.startsWith("/info"));function c(){o.push("/info")}return(l,d)=>(z(),F("div",G1,[u.value?ee("",!0):(z(),F(te,{key:0},[bt(E1,{class:"config-item",options:r.value,label:"Country",modelValue:a.value,"onUpdate:modelValue":d[0]||(d[0]=f=>a.value=f),placeholder:"Select country"},null,8,["options","modelValue"]),bt(F1,{class:"config-item",years:j(n).yearsDescending,label:"Year",modelValue:i.value,"onUpdate:modelValue":d[1]||(d[1]=f=>i.value=f)},null,8,["years","modelValue"])],64)),w("button",{class:Ht(["methodology-button",{active:u.value}]),onClick:c,type:"button","aria-label":"Info / Methodology",title:"Info / Methodology"},[...d[2]||(d[2]=[w("span",{class:"material-symbols-outlined"},"info",-1)])],2)]))}},Y1=St(B1,[["__scopeId","data-v-68cce62c"]]),W1={id:"app-container"},U1={class:"main-content main-with-config"},K1={__name:"Home",setup(t){const e=it([{id:"fueltypes",name:"Types of Fuel",icon:"oil_barrel"},{id:"dependency",name:"Dependency on Imports",icon:"trending_up"},{id:"tradingpartner",name:"Trading Partners",icon:"cycle"},{id:"consumption",name:"Sectoral Energy Use",icon:"battery_android_frame_5"},{id:"sectorfuels",name:"Energy Sources",icon:"delivery_truck_bolt"},{id:"productionconsumption",name:"Production & Consumption",icon:"instant_mix"},{id:"costs",name:"Energy Prices",icon:"euro"},{id:"eco",name:"Carbon Footprint",icon:"energy_savings_leaf"}]);return(n,r)=>(z(),F("div",W1,[bt(Yo,{sections:e.value},null,8,["sections"]),w("main",null,[bt(Y1),w("div",U1,[bt(ep),bt(kh),bt(dh),bt(e0),bt(m0),bt(dp),bt(H0),bt(x1)]),bt(Wo)])]))}};export{K1 as default};
